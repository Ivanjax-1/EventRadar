import{j as e,T as t,R as r,H as n,M as s,P as a,C as i,D as o,a as l,B as c,m as u,A as d,b as h,c as p,L as f,E as m,d as g,S as b,U as v,X as y,e as x,f as w,N as j,g as k,h as _,i as N,k as S,l as E,n as C,o as T,p as O,q as P,r as A,s as R,t as I,u as $,v as D,w as L,x as z,F as M,y as U,z as F,G as q,I as B,J as H,K as V,O as W,Q,V as G,W as K,Y as J,Z as Y,_ as X,$ as Z,a0 as ee,a1 as te,a2 as re,a3 as ne,a4 as se,a5 as ae,a6 as ie,a7 as oe,a8 as le,a9 as ce,aa as ue,ab as de,ac as he,ad as pe,ae as fe,af as me,ag as ge,ah as be,ai as ve,aj as ye,ak as xe}from"./ui-vendor-Dg4xMJpC.js";import{b as we,c as je,g as ke,r as _e,d as Ne,e as Se,R as Ee,u as Ce,L as Te,O as Oe,f as Pe,B as Ae,h as Re,i as Ie,N as $e}from"./react-vendor-CmuZCmvn.js";import{M as De,T as Le,a as ze,L as Me,P as Ue}from"./map-vendor-BvPwo8gF.js";function Fe(e,t){for(var r=0;r<t.length;r++){const n=t[r];if("string"!=typeof n&&!Array.isArray(n))for(const t in n)if("default"!==t&&!(t in e)){const r=Object.getOwnPropertyDescriptor(n,t);r&&Object.defineProperty(e,t,r.get?r:{enumerable:!0,get:()=>n[t]})}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();var qe,Be,He,Ve,We={exports:{}},Qe={},Ge={exports:{}},Ke={};function Je(){return Be||(Be=1,Ge.exports=(qe||(qe=1,function(e){function t(e,t){var r=e.length;e.push(t);e:for(;0<r;){var n=r-1>>>1,a=e[n];if(!(0<s(a,t)))break e;e[n]=t,e[r]=a,r=n}}function r(e){return 0===e.length?null:e[0]}function n(e){if(0===e.length)return null;var t=e[0],r=e.pop();if(r!==t){e[0]=r;e:for(var n=0,a=e.length,i=a>>>1;n<i;){var o=2*(n+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,r))c<a&&0>s(u,l)?(e[n]=u,e[c]=r,n=c):(e[n]=l,e[o]=r,n=o);else{if(!(c<a&&0>s(u,r)))break e;e[n]=u,e[c]=r,n=c}}}return t}function s(e,t){var r=e.sortIndex-t.sortIndex;return 0!==r?r:e.id-t.id}if(e.unstable_now=void 0,"object"==typeof performance&&"function"==typeof performance.now){var a=performance;e.unstable_now=function(){return a.now()}}else{var i=Date,o=i.now();e.unstable_now=function(){return i.now()-o}}var l=[],c=[],u=1,d=null,h=3,p=!1,f=!1,m=!1,g=!1,b="function"==typeof setTimeout?setTimeout:null,v="function"==typeof clearTimeout?clearTimeout:null,y="undefined"!=typeof setImmediate?setImmediate:null;function x(e){for(var s=r(c);null!==s;){if(null===s.callback)n(c);else{if(!(s.startTime<=e))break;n(c),s.sortIndex=s.expirationTime,t(l,s)}s=r(c)}}function w(e){if(m=!1,x(e),!f)if(null!==r(l))f=!0,k||(k=!0,j());else{var t=r(c);null!==t&&P(w,t.startTime-e)}}var j,k=!1,_=-1,N=5,S=-1;function E(){return!(!g&&e.unstable_now()-S<N)}function C(){if(g=!1,k){var t=e.unstable_now();S=t;var s=!0;try{e:{f=!1,m&&(m=!1,v(_),_=-1),p=!0;var a=h;try{t:{for(x(t),d=r(l);null!==d&&!(d.expirationTime>t&&E());){var i=d.callback;if("function"==typeof i){d.callback=null,h=d.priorityLevel;var o=i(d.expirationTime<=t);if(t=e.unstable_now(),"function"==typeof o){d.callback=o,x(t),s=!0;break t}d===r(l)&&n(l),x(t)}else n(l);d=r(l)}if(null!==d)s=!0;else{var u=r(c);null!==u&&P(w,u.startTime-t),s=!1}}break e}finally{d=null,h=a,p=!1}s=void 0}}finally{s?j():k=!1}}}if("function"==typeof y)j=function(){y(C)};else if("undefined"!=typeof MessageChannel){var T=new MessageChannel,O=T.port2;T.port1.onmessage=C,j=function(){O.postMessage(null)}}else j=function(){b(C,0)};function P(t,r){_=b(function(){t(e.unstable_now())},r)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(e){e.callback=null},e.unstable_forceFrameRate=function(e){0>e||125<e||(N=0<e?Math.floor(1e3/e):5)},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_next=function(e){switch(h){case 1:case 2:case 3:var t=3;break;default:t=h}var r=h;h=t;try{return e()}finally{h=r}},e.unstable_requestPaint=function(){g=!0},e.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var r=h;h=e;try{return t()}finally{h=r}},e.unstable_scheduleCallback=function(n,s,a){var i=e.unstable_now();switch(a="object"==typeof a&&null!==a&&"number"==typeof(a=a.delay)&&0<a?i+a:i,n){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return n={id:u++,callback:s,priorityLevel:n,startTime:a,expirationTime:o=a+o,sortIndex:-1},a>i?(n.sortIndex=a,t(c,n),null===r(l)&&n===r(c)&&(m?(v(_),_=-1):m=!0,P(w,a-i))):(n.sortIndex=o,t(l,n),f||p||(f=!0,k||(k=!0,j()))),n},e.unstable_shouldYield=E,e.unstable_wrapCallback=function(e){var t=h;return function(){var r=h;h=t;try{return e.apply(this,arguments)}finally{h=r}}}}(Ke)),Ke)),Ge.exports}function Ye(){if(He)return Qe;He=1;var e=Je(),t=we(),r=je();function n(e){var t="https://react.dev/errors/"+e;if(1<arguments.length){t+="?args[]="+encodeURIComponent(arguments[1]);for(var r=2;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r])}return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function s(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function a(e){var t=e,r=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{!!(4098&(t=e).flags)&&(r=t.return),e=t.return}while(e)}return 3===t.tag?r:null}function i(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function o(e){if(31===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function l(e){if(a(e)!==e)throw Error(n(188))}function c(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e;for(e=e.child;null!==e;){if(null!==(t=c(e)))return t;e=e.sibling}return null}var u=Object.assign,d=Symbol.for("react.element"),h=Symbol.for("react.transitional.element"),p=Symbol.for("react.portal"),f=Symbol.for("react.fragment"),m=Symbol.for("react.strict_mode"),g=Symbol.for("react.profiler"),b=Symbol.for("react.consumer"),v=Symbol.for("react.context"),y=Symbol.for("react.forward_ref"),x=Symbol.for("react.suspense"),w=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),k=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),N=Symbol.for("react.memo_cache_sentinel"),S=Symbol.iterator;function E(e){return null===e||"object"!=typeof e?null:"function"==typeof(e=S&&e[S]||e["@@iterator"])?e:null}var C=Symbol.for("react.client.reference");function T(e){if(null==e)return null;if("function"==typeof e)return e.$$typeof===C?null:e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case f:return"Fragment";case g:return"Profiler";case m:return"StrictMode";case x:return"Suspense";case w:return"SuspenseList";case _:return"Activity"}if("object"==typeof e)switch(e.$$typeof){case p:return"Portal";case v:return e.displayName||"Context";case b:return(e._context.displayName||"Context")+".Consumer";case y:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case j:return null!==(t=e.displayName||null)?t:T(e.type)||"Memo";case k:t=e._payload,e=e._init;try{return T(e(t))}catch(r){}}return null}var O=Array.isArray,P=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,A=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,R={pending:!1,data:null,method:null,action:null},I=[],$=-1;function D(e){return{current:e}}function L(e){0>$||(e.current=I[$],I[$]=null,$--)}function z(e,t){$++,I[$]=e.current,e.current=t}var M,U,F=D(null),q=D(null),B=D(null),H=D(null);function V(e,t){switch(z(B,t),z(q,e),z(F,null),t.nodeType){case 9:case 11:e=(e=t.documentElement)&&(e=e.namespaceURI)?yd(e):0;break;default:if(e=t.tagName,t=t.namespaceURI)e=xd(t=yd(t),e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}L(F),z(F,e)}function W(){L(F),L(q),L(B)}function Q(e){null!==e.memoizedState&&z(H,e);var t=F.current,r=xd(t,e.type);t!==r&&(z(q,e),z(F,r))}function G(e){q.current===e&&(L(F),L(q)),H.current===e&&(L(H),hh._currentValue=R)}function K(e){if(void 0===M)try{throw Error()}catch(r){var t=r.stack.trim().match(/\n( *(at )?)/);M=t&&t[1]||"",U=-1<r.stack.indexOf("\n    at")?" (<anonymous>)":-1<r.stack.indexOf("@")?"@unknown:0:0":""}return"\n"+M+e+U}var J=!1;function Y(e,t){if(!e||J)return"";J=!0;var r=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var n={DetermineComponentFrameRoot:function(){try{if(t){var r=function(){throw Error()};if(Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),"object"==typeof Reflect&&Reflect.construct){try{Reflect.construct(r,[])}catch(s){var n=s}Reflect.construct(e,[],r)}else{try{r.call()}catch(a){n=a}e.call(r.prototype)}}else{try{throw Error()}catch(i){n=i}(r=e())&&"function"==typeof r.catch&&r.catch(function(){})}}catch(o){if(o&&n&&"string"==typeof o.stack)return[o.stack,n.stack]}return[null,null]}};n.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var s=Object.getOwnPropertyDescriptor(n.DetermineComponentFrameRoot,"name");s&&s.configurable&&Object.defineProperty(n.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var a=n.DetermineComponentFrameRoot(),i=a[0],o=a[1];if(i&&o){var l=i.split("\n"),c=o.split("\n");for(s=n=0;n<l.length&&!l[n].includes("DetermineComponentFrameRoot");)n++;for(;s<c.length&&!c[s].includes("DetermineComponentFrameRoot");)s++;if(n===l.length||s===c.length)for(n=l.length-1,s=c.length-1;1<=n&&0<=s&&l[n]!==c[s];)s--;for(;1<=n&&0<=s;n--,s--)if(l[n]!==c[s]){if(1!==n||1!==s)do{if(n--,0>--s||l[n]!==c[s]){var u="\n"+l[n].replace(" at new "," at ");return e.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",e.displayName)),u}}while(1<=n&&0<=s);break}}}finally{J=!1,Error.prepareStackTrace=r}return(r=e?e.displayName||e.name:"")?K(r):""}function X(e,t){switch(e.tag){case 26:case 27:case 5:return K(e.type);case 16:return K("Lazy");case 13:return e.child!==t&&null!==t?K("Suspense Fallback"):K("Suspense");case 19:return K("SuspenseList");case 0:case 15:return Y(e.type,!1);case 11:return Y(e.type.render,!1);case 1:return Y(e.type,!0);case 31:return K("Activity");default:return""}}function Z(e){try{var t="",r=null;do{t+=X(e,r),r=e,e=e.return}while(e);return t}catch(n){return"\nError generating stack: "+n.message+"\n"+n.stack}}var ee=Object.prototype.hasOwnProperty,te=e.unstable_scheduleCallback,re=e.unstable_cancelCallback,ne=e.unstable_shouldYield,se=e.unstable_requestPaint,ae=e.unstable_now,ie=e.unstable_getCurrentPriorityLevel,oe=e.unstable_ImmediatePriority,le=e.unstable_UserBlockingPriority,ce=e.unstable_NormalPriority,ue=e.unstable_LowPriority,de=e.unstable_IdlePriority,he=e.log,pe=e.unstable_setDisableYieldValue,fe=null,me=null;function ge(e){if("function"==typeof he&&pe(e),me&&"function"==typeof me.setStrictMode)try{me.setStrictMode(fe,e)}catch(t){}}var be=Math.clz32?Math.clz32:function(e){return 0===(e>>>=0)?32:31-(ve(e)/ye|0)|0},ve=Math.log,ye=Math.LN2;var xe=256,ke=262144,_e=4194304;function Ne(e){var t=42&e;if(0!==t)return t;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return 261888&e;case 262144:case 524288:case 1048576:case 2097152:return 3932160&e;case 4194304:case 8388608:case 16777216:case 33554432:return 62914560&e;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function Se(e,t,r){var n=e.pendingLanes;if(0===n)return 0;var s=0,a=e.suspendedLanes,i=e.pingedLanes;e=e.warmLanes;var o=134217727&n;return 0!==o?0!==(n=o&~a)?s=Ne(n):0!==(i&=o)?s=Ne(i):r||0!==(r=o&~e)&&(s=Ne(r)):0!==(o=n&~a)?s=Ne(o):0!==i?s=Ne(i):r||0!==(r=n&~e)&&(s=Ne(r)),0===s?0:0!==t&&t!==s&&0===(t&a)&&((a=s&-s)>=(r=t&-t)||32===a&&4194048&r)?t:s}function Ee(e,t){return 0===(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&t)}function Ce(e,t){switch(e){case 1:case 2:case 4:case 8:case 64:return t+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function Te(){var e=_e;return!(62914560&(_e<<=1))&&(_e=4194304),e}function Oe(e){for(var t=[],r=0;31>r;r++)t.push(e);return t}function Pe(e,t){e.pendingLanes|=t,268435456!==t&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Ae(e,t,r){e.pendingLanes|=t,e.suspendedLanes&=~t;var n=31-be(t);e.entangledLanes|=t,e.entanglements[n]=1073741824|e.entanglements[n]|261930&r}function Re(e,t){var r=e.entangledLanes|=t;for(e=e.entanglements;r;){var n=31-be(r),s=1<<n;s&t|e[n]&t&&(e[n]|=t),r&=~s}}function Ie(e,t){var r=t&-t;return 0!==((r=42&r?1:$e(r))&(e.suspendedLanes|t))?0:r}function $e(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function De(e){return 2<(e&=-e)?8<e?134217727&e?32:268435456:8:2}function Le(){var e=A.p;return 0!==e?e:void 0===(e=window.event)?32:Ch(e.type)}function ze(e,t){var r=A.p;try{return A.p=e,t()}finally{A.p=r}}var Me=Math.random().toString(36).slice(2),Ue="__reactFiber$"+Me,Fe="__reactProps$"+Me,qe="__reactContainer$"+Me,Be="__reactEvents$"+Me,Ve="__reactListeners$"+Me,We="__reactHandles$"+Me,Ge="__reactResources$"+Me,Ke="__reactMarker$"+Me;function Ye(e){delete e[Ue],delete e[Fe],delete e[Be],delete e[Ve],delete e[We]}function Xe(e){var t=e[Ue];if(t)return t;for(var r=e.parentNode;r;){if(t=r[qe]||r[Ue]){if(r=t.alternate,null!==t.child||null!==r&&null!==r.child)for(e=zd(e);null!==e;){if(r=e[Ue])return r;e=zd(e)}return t}r=(e=r).parentNode}return null}function Ze(e){if(e=e[Ue]||e[qe]){var t=e.tag;if(5===t||6===t||13===t||31===t||26===t||27===t||3===t)return e}return null}function et(e){var t=e.tag;if(5===t||26===t||27===t||6===t)return e.stateNode;throw Error(n(33))}function tt(e){var t=e[Ge];return t||(t=e[Ge]={hoistableStyles:new Map,hoistableScripts:new Map}),t}function rt(e){e[Ke]=!0}var nt=new Set,st={};function at(e,t){it(e,t),it(e+"Capture",t)}function it(e,t){for(st[e]=t,e=0;e<t.length;e++)nt.add(t[e])}var ot=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),lt={},ct={};function ut(e,t,r){if(s=t,ee.call(ct,s)||!ee.call(lt,s)&&(ot.test(s)?ct[s]=!0:(lt[s]=!0,0)))if(null===r)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":return void e.removeAttribute(t);case"boolean":var n=t.toLowerCase().slice(0,5);if("data-"!==n&&"aria-"!==n)return void e.removeAttribute(t)}e.setAttribute(t,""+r)}var s}function dt(e,t,r){if(null===r)e.removeAttribute(t);else{switch(typeof r){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(t)}e.setAttribute(t,""+r)}}function ht(e,t,r,n){if(null===n)e.removeAttribute(r);else{switch(typeof n){case"undefined":case"function":case"symbol":case"boolean":return void e.removeAttribute(r)}e.setAttributeNS(t,r,""+n)}}function pt(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function ft(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function mt(e){if(!e._valueTracker){var t=ft(e)?"checked":"value";e._valueTracker=function(e,t,r){var n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t);if(!e.hasOwnProperty(t)&&void 0!==n&&"function"==typeof n.get&&"function"==typeof n.set){var s=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(e){r=""+e,a.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e,t,""+e[t])}}function gt(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var r=t.getValue(),n="";return e&&(n=ft(e)?e.checked?"true":"false":e.value),(e=n)!==r&&(t.setValue(e),!0)}function bt(e){if(void 0===(e=e||("undefined"!=typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}var vt=/[\n"\\]/g;function yt(e){return e.replace(vt,function(e){return"\\"+e.charCodeAt(0).toString(16)+" "})}function xt(e,t,r,n,s,a,i,o){e.name="",null!=i&&"function"!=typeof i&&"symbol"!=typeof i&&"boolean"!=typeof i?e.type=i:e.removeAttribute("type"),null!=t?"number"===i?(0===t&&""===e.value||e.value!=t)&&(e.value=""+pt(t)):e.value!==""+pt(t)&&(e.value=""+pt(t)):"submit"!==i&&"reset"!==i||e.removeAttribute("value"),null!=t?jt(e,i,pt(t)):null!=r?jt(e,i,pt(r)):null!=n&&e.removeAttribute("value"),null==s&&null!=a&&(e.defaultChecked=!!a),null!=s&&(e.checked=s&&"function"!=typeof s&&"symbol"!=typeof s),null!=o&&"function"!=typeof o&&"symbol"!=typeof o&&"boolean"!=typeof o?e.name=""+pt(o):e.removeAttribute("name")}function wt(e,t,r,n,s,a,i,o){if(null!=a&&"function"!=typeof a&&"symbol"!=typeof a&&"boolean"!=typeof a&&(e.type=a),null!=t||null!=r){if(("submit"===a||"reset"===a)&&null==t)return void mt(e);r=null!=r?""+pt(r):"",t=null!=t?""+pt(t):r,o||t===e.value||(e.value=t),e.defaultValue=t}n="function"!=typeof(n=null!=n?n:s)&&"symbol"!=typeof n&&!!n,e.checked=o?e.checked:!!n,e.defaultChecked=!!n,null!=i&&"function"!=typeof i&&"symbol"!=typeof i&&"boolean"!=typeof i&&(e.name=i),mt(e)}function jt(e,t,r){"number"===t&&bt(e.ownerDocument)===e||e.defaultValue===""+r||(e.defaultValue=""+r)}function kt(e,t,r,n){if(e=e.options,t){t={};for(var s=0;s<r.length;s++)t["$"+r[s]]=!0;for(r=0;r<e.length;r++)s=t.hasOwnProperty("$"+e[r].value),e[r].selected!==s&&(e[r].selected=s),s&&n&&(e[r].defaultSelected=!0)}else{for(r=""+pt(r),t=null,s=0;s<e.length;s++){if(e[s].value===r)return e[s].selected=!0,void(n&&(e[s].defaultSelected=!0));null!==t||e[s].disabled||(t=e[s])}null!==t&&(t.selected=!0)}}function _t(e,t,r){null==t||((t=""+pt(t))!==e.value&&(e.value=t),null!=r)?e.defaultValue=null!=r?""+pt(r):"":e.defaultValue!==t&&(e.defaultValue=t)}function Nt(e,t,r,s){if(null==t){if(null!=s){if(null!=r)throw Error(n(92));if(O(s)){if(1<s.length)throw Error(n(93));s=s[0]}r=s}null==r&&(r=""),t=r}r=pt(t),e.defaultValue=r,(s=e.textContent)===r&&""!==s&&null!==s&&(e.value=s),mt(e)}function St(e,t){if(t){var r=e.firstChild;if(r&&r===e.lastChild&&3===r.nodeType)return void(r.nodeValue=t)}e.textContent=t}var Et=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Ct(e,t,r){var n=0===t.indexOf("--");null==r||"boolean"==typeof r||""===r?n?e.setProperty(t,""):"float"===t?e.cssFloat="":e[t]="":n?e.setProperty(t,r):"number"!=typeof r||0===r||Et.has(t)?"float"===t?e.cssFloat=r:e[t]=(""+r).trim():e[t]=r+"px"}function Tt(e,t,r){if(null!=t&&"object"!=typeof t)throw Error(n(62));if(e=e.style,null!=r){for(var s in r)!r.hasOwnProperty(s)||null!=t&&t.hasOwnProperty(s)||(0===s.indexOf("--")?e.setProperty(s,""):"float"===s?e.cssFloat="":e[s]="");for(var a in t)s=t[a],t.hasOwnProperty(a)&&r[a]!==s&&Ct(e,a,s)}else for(var i in t)t.hasOwnProperty(i)&&Ct(e,i,t[i])}function Ot(e){if(-1===e.indexOf("-"))return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Pt=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),At=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Rt(e){return At.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function It(){}var $t=null;function Dt(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var Lt=null,zt=null;function Mt(e){var t=Ze(e);if(t&&(e=t.stateNode)){var r=e[Fe]||null;e:switch(e=t.stateNode,t.type){case"input":if(xt(e,r.value,r.defaultValue,r.defaultValue,r.checked,r.defaultChecked,r.type,r.name),t=r.name,"radio"===r.type&&null!=t){for(r=e;r.parentNode;)r=r.parentNode;for(r=r.querySelectorAll('input[name="'+yt(""+t)+'"][type="radio"]'),t=0;t<r.length;t++){var s=r[t];if(s!==e&&s.form===e.form){var a=s[Fe]||null;if(!a)throw Error(n(90));xt(s,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name)}}for(t=0;t<r.length;t++)(s=r[t]).form===e.form&&gt(s)}break e;case"textarea":_t(e,r.value,r.defaultValue);break e;case"select":null!=(t=r.value)&&kt(e,!!r.multiple,t,!1)}}}var Ut=!1;function Ft(e,t,r){if(Ut)return e(t,r);Ut=!0;try{return e(t)}finally{if(Ut=!1,(null!==Lt||null!==zt)&&(tu(),Lt&&(t=Lt,e=zt,zt=Lt=null,Mt(t),e)))for(t=0;t<e.length;t++)Mt(e[t])}}function qt(e,t){var r=e.stateNode;if(null===r)return null;var s=r[Fe]||null;if(null===s)return null;r=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(s=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!s;break e;default:e=!1}if(e)return null;if(r&&"function"!=typeof r)throw Error(n(231,t,typeof r));return r}var Bt=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),Ht=!1;if(Bt)try{var Vt={};Object.defineProperty(Vt,"passive",{get:function(){Ht=!0}}),window.addEventListener("test",Vt,Vt),window.removeEventListener("test",Vt,Vt)}catch(Zh){Ht=!1}var Wt=null,Qt=null,Gt=null;function Kt(){if(Gt)return Gt;var e,t,r=Qt,n=r.length,s="value"in Wt?Wt.value:Wt.textContent,a=s.length;for(e=0;e<n&&r[e]===s[e];e++);var i=n-e;for(t=1;t<=i&&r[n-t]===s[a-t];t++);return Gt=s.slice(e,1<t?1-t:void 0)}function Jt(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function Yt(){return!0}function Xt(){return!1}function Zt(e){function t(t,r,n,s,a){for(var i in this._reactName=t,this._targetInst=n,this.type=r,this.nativeEvent=s,this.target=a,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(s):s[i]);return this.isDefaultPrevented=(null!=s.defaultPrevented?s.defaultPrevented:!1===s.returnValue)?Yt:Xt,this.isPropagationStopped=Xt,this}return u(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!=typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=Yt)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!=typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=Yt)},persist:function(){},isPersistent:Yt}),t}var er,tr,rr,nr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},sr=Zt(nr),ar=u({},nr,{view:0,detail:0}),ir=Zt(ar),or=u({},ar,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vr,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==rr&&(rr&&"mousemove"===e.type?(er=e.screenX-rr.screenX,tr=e.screenY-rr.screenY):tr=er=0,rr=e),er)},movementY:function(e){return"movementY"in e?e.movementY:tr}}),lr=Zt(or),cr=Zt(u({},or,{dataTransfer:0})),ur=Zt(u({},ar,{relatedTarget:0})),dr=Zt(u({},nr,{animationName:0,elapsedTime:0,pseudoElement:0})),hr=Zt(u({},nr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}})),pr=Zt(u({},nr,{data:0})),fr={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mr={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},gr={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function br(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=gr[e])&&!!t[e]}function vr(){return br}var yr=Zt(u({},ar,{key:function(e){if(e.key){var t=fr[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=Jt(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?mr[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vr,charCode:function(e){return"keypress"===e.type?Jt(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?Jt(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}})),xr=Zt(u({},or,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),wr=Zt(u({},ar,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vr})),jr=Zt(u({},nr,{propertyName:0,elapsedTime:0,pseudoElement:0})),kr=Zt(u({},or,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0})),_r=Zt(u({},nr,{newState:0,oldState:0})),Nr=[9,13,27,32],Sr=Bt&&"CompositionEvent"in window,Er=null;Bt&&"documentMode"in document&&(Er=document.documentMode);var Cr=Bt&&"TextEvent"in window&&!Er,Tr=Bt&&(!Sr||Er&&8<Er&&11>=Er),Or=String.fromCharCode(32),Pr=!1;function Ar(e,t){switch(e){case"keyup":return-1!==Nr.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Rr(e){return"object"==typeof(e=e.detail)&&"data"in e?e.data:null}var Ir=!1;var $r={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!$r[e.type]:"textarea"===t}function Lr(e,t,r,n){Lt?zt?zt.push(n):zt=[n]:Lt=n,0<(t=ad(t,"onChange")).length&&(r=new sr("onChange","change",null,r,n),e.push({event:r,listeners:t}))}var zr=null,Mr=null;function Ur(e){Yu(e,0)}function Fr(e){if(gt(et(e)))return e}function qr(e,t){if("change"===e)return t}var Br=!1;if(Bt){var Hr;if(Bt){var Vr="oninput"in document;if(!Vr){var Wr=document.createElement("div");Wr.setAttribute("oninput","return;"),Vr="function"==typeof Wr.oninput}Hr=Vr}else Hr=!1;Br=Hr&&(!document.documentMode||9<document.documentMode)}function Qr(){zr&&(zr.detachEvent("onpropertychange",Gr),Mr=zr=null)}function Gr(e){if("value"===e.propertyName&&Fr(Mr)){var t=[];Lr(t,Mr,e,Dt(e)),Ft(Ur,t)}}function Kr(e,t,r){"focusin"===e?(Qr(),Mr=r,(zr=t).attachEvent("onpropertychange",Gr)):"focusout"===e&&Qr()}function Jr(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Fr(Mr)}function Yr(e,t){if("click"===e)return Fr(t)}function Xr(e,t){if("input"===e||"change"===e)return Fr(t)}var Zr="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t};function en(e,t){if(Zr(e,t))return!0;if("object"!=typeof e||null===e||"object"!=typeof t||null===t)return!1;var r=Object.keys(e),n=Object.keys(t);if(r.length!==n.length)return!1;for(n=0;n<r.length;n++){var s=r[n];if(!ee.call(t,s)||!Zr(e[s],t[s]))return!1}return!0}function tn(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function rn(e,t){var r,n=tn(e);for(e=0;n;){if(3===n.nodeType){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=tn(n)}}function nn(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?nn(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function sn(e){for(var t=bt((e=null!=e&&null!=e.ownerDocument&&null!=e.ownerDocument.defaultView?e.ownerDocument.defaultView:window).document);t instanceof e.HTMLIFrameElement;){try{var r="string"==typeof t.contentWindow.location.href}catch(n){r=!1}if(!r)break;t=bt((e=t.contentWindow).document)}return t}function an(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}var on=Bt&&"documentMode"in document&&11>=document.documentMode,ln=null,cn=null,un=null,dn=!1;function hn(e,t,r){var n=r.window===r?r.document:9===r.nodeType?r:r.ownerDocument;dn||null==ln||ln!==bt(n)||("selectionStart"in(n=ln)&&an(n)?n={start:n.selectionStart,end:n.selectionEnd}:n={anchorNode:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset},un&&en(un,n)||(un=n,0<(n=ad(cn,"onSelect")).length&&(t=new sr("onSelect","select",null,t,r),e.push({event:t,listeners:n}),t.target=ln)))}function pn(e,t){var r={};return r[e.toLowerCase()]=t.toLowerCase(),r["Webkit"+e]="webkit"+t,r["Moz"+e]="moz"+t,r}var fn={animationend:pn("Animation","AnimationEnd"),animationiteration:pn("Animation","AnimationIteration"),animationstart:pn("Animation","AnimationStart"),transitionrun:pn("Transition","TransitionRun"),transitionstart:pn("Transition","TransitionStart"),transitioncancel:pn("Transition","TransitionCancel"),transitionend:pn("Transition","TransitionEnd")},mn={},gn={};function bn(e){if(mn[e])return mn[e];if(!fn[e])return e;var t,r=fn[e];for(t in r)if(r.hasOwnProperty(t)&&t in gn)return mn[e]=r[t];return e}Bt&&(gn=document.createElement("div").style,"AnimationEvent"in window||(delete fn.animationend.animation,delete fn.animationiteration.animation,delete fn.animationstart.animation),"TransitionEvent"in window||delete fn.transitionend.transition);var vn=bn("animationend"),yn=bn("animationiteration"),xn=bn("animationstart"),wn=bn("transitionrun"),jn=bn("transitionstart"),kn=bn("transitioncancel"),_n=bn("transitionend"),Nn=new Map,Sn="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function En(e,t){Nn.set(e,t),at(t,[e])}Sn.push("scrollEnd");var Cn="function"==typeof reportError?reportError:function(e){if("object"==typeof window&&"function"==typeof window.ErrorEvent){var t=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:"object"==typeof e&&null!==e&&"string"==typeof e.message?String(e.message):String(e),error:e});if(!window.dispatchEvent(t))return}else if("object"==typeof process&&"function"==typeof process.emit)return void process.emit("uncaughtException",e)},Tn=[],On=0,Pn=0;function An(){for(var e=On,t=Pn=On=0;t<e;){var r=Tn[t];Tn[t++]=null;var n=Tn[t];Tn[t++]=null;var s=Tn[t];Tn[t++]=null;var a=Tn[t];if(Tn[t++]=null,null!==n&&null!==s){var i=n.pending;null===i?s.next=s:(s.next=i.next,i.next=s),n.pending=s}0!==a&&Dn(r,s,a)}}function Rn(e,t,r,n){Tn[On++]=e,Tn[On++]=t,Tn[On++]=r,Tn[On++]=n,Pn|=n,e.lanes|=n,null!==(e=e.alternate)&&(e.lanes|=n)}function In(e,t,r,n){return Rn(e,t,r,n),Ln(e)}function $n(e,t){return Rn(e,null,null,t),Ln(e)}function Dn(e,t,r){e.lanes|=r;var n=e.alternate;null!==n&&(n.lanes|=r);for(var s=!1,a=e.return;null!==a;)a.childLanes|=r,null!==(n=a.alternate)&&(n.childLanes|=r),22===a.tag&&(null===(e=a.stateNode)||1&e._visibility||(s=!0)),e=a,a=a.return;return 3===e.tag?(a=e.stateNode,s&&null!==t&&(s=31-be(r),null===(n=(e=a.hiddenUpdates)[s])?e[s]=[t]:n.push(t),t.lane=536870912|r),a):null}function Ln(e){if(50<Wc)throw Wc=0,Qc=null,Error(n(185));for(var t=e.return;null!==t;)t=(e=t).return;return 3===e.tag?e.stateNode:null}var zn={};function Mn(e,t,r,n){this.tag=e,this.key=r,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Un(e,t,r,n){return new Mn(e,t,r,n)}function Fn(e){return!(!(e=e.prototype)||!e.isReactComponent)}function qn(e,t){var r=e.alternate;return null===r?((r=Un(e.tag,t,e.key,e.mode)).elementType=e.elementType,r.type=e.type,r.stateNode=e.stateNode,r.alternate=e,e.alternate=r):(r.pendingProps=t,r.type=e.type,r.flags=0,r.subtreeFlags=0,r.deletions=null),r.flags=65011712&e.flags,r.childLanes=e.childLanes,r.lanes=e.lanes,r.child=e.child,r.memoizedProps=e.memoizedProps,r.memoizedState=e.memoizedState,r.updateQueue=e.updateQueue,t=e.dependencies,r.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},r.sibling=e.sibling,r.index=e.index,r.ref=e.ref,r.refCleanup=e.refCleanup,r}function Bn(e,t){e.flags&=65011714;var r=e.alternate;return null===r?(e.childLanes=0,e.lanes=t,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=r.childLanes,e.lanes=r.lanes,e.child=r.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=r.memoizedProps,e.memoizedState=r.memoizedState,e.updateQueue=r.updateQueue,e.type=r.type,t=r.dependencies,e.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext}),e}function Hn(e,t,r,s,a,i){var o=0;if(s=e,"function"==typeof e)Fn(e)&&(o=1);else if("string"==typeof e)o=function(e,t,r){if(1===r||null!=t.itemProp)return!1;switch(e){case"meta":case"title":return!0;case"style":if("string"!=typeof t.precedence||"string"!=typeof t.href||""===t.href)break;return!0;case"link":if("string"!=typeof t.rel||"string"!=typeof t.href||""===t.href||t.onLoad||t.onError)break;return"stylesheet"!==t.rel||(e=t.disabled,"string"==typeof t.precedence&&null==e);case"script":if(t.async&&"function"!=typeof t.async&&"symbol"!=typeof t.async&&!t.onLoad&&!t.onError&&t.src&&"string"==typeof t.src)return!0}return!1}(e,r,F.current)?26:"html"===e||"head"===e||"body"===e?27:5;else e:switch(e){case _:return(e=Un(31,r,t,a)).elementType=_,e.lanes=i,e;case f:return Vn(r.children,a,i,t);case m:o=8,a|=24;break;case g:return(e=Un(12,r,t,2|a)).elementType=g,e.lanes=i,e;case x:return(e=Un(13,r,t,a)).elementType=x,e.lanes=i,e;case w:return(e=Un(19,r,t,a)).elementType=w,e.lanes=i,e;default:if("object"==typeof e&&null!==e)switch(e.$$typeof){case v:o=10;break e;case b:o=9;break e;case y:o=11;break e;case j:o=14;break e;case k:o=16,s=null;break e}o=29,r=Error(n(130,null===e?"null":typeof e,"")),s=null}return(t=Un(o,r,t,a)).elementType=e,t.type=s,t.lanes=i,t}function Vn(e,t,r,n){return(e=Un(7,e,n,t)).lanes=r,e}function Wn(e,t,r){return(e=Un(6,e,null,t)).lanes=r,e}function Qn(e){var t=Un(18,null,null,0);return t.stateNode=e,t}function Gn(e,t,r){return(t=Un(4,null!==e.children?e.children:[],e.key,t)).lanes=r,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}var Kn=new WeakMap;function Jn(e,t){if("object"==typeof e&&null!==e){var r=Kn.get(e);return void 0!==r?r:(t={value:e,source:t,stack:Z(t)},Kn.set(e,t),t)}return{value:e,source:t,stack:Z(t)}}var Yn=[],Xn=0,Zn=null,es=0,ts=[],rs=0,ns=null,ss=1,as="";function is(e,t){Yn[Xn++]=es,Yn[Xn++]=Zn,Zn=e,es=t}function os(e,t,r){ts[rs++]=ss,ts[rs++]=as,ts[rs++]=ns,ns=e;var n=ss;e=as;var s=32-be(n)-1;n&=~(1<<s),r+=1;var a=32-be(t)+s;if(30<a){var i=s-s%5;a=(n&(1<<i)-1).toString(32),n>>=i,s-=i,ss=1<<32-be(t)+s|r<<s|n,as=a+e}else ss=1<<a|r<<s|n,as=e}function ls(e){null!==e.return&&(is(e,1),os(e,1,0))}function cs(e){for(;e===Zn;)Zn=Yn[--Xn],Yn[Xn]=null,es=Yn[--Xn],Yn[Xn]=null;for(;e===ns;)ns=ts[--rs],ts[rs]=null,as=ts[--rs],ts[rs]=null,ss=ts[--rs],ts[rs]=null}function us(e,t){ts[rs++]=ss,ts[rs++]=as,ts[rs++]=ns,ss=t.id,as=t.overflow,ns=e}var ds=null,hs=null,ps=!1,fs=null,ms=!1,gs=Error(n(519));function bs(e){throw ks(Jn(Error(n(418,1<arguments.length&&void 0!==arguments[1]&&arguments[1]?"text":"HTML","")),e)),gs}function vs(e){var t=e.stateNode,r=e.type,n=e.memoizedProps;switch(t[Ue]=e,t[Fe]=n,r){case"dialog":Xu("cancel",t),Xu("close",t);break;case"iframe":case"object":case"embed":Xu("load",t);break;case"video":case"audio":for(r=0;r<Ku.length;r++)Xu(Ku[r],t);break;case"source":Xu("error",t);break;case"img":case"image":case"link":Xu("error",t),Xu("load",t);break;case"details":Xu("toggle",t);break;case"input":Xu("invalid",t),wt(t,n.value,n.defaultValue,n.checked,n.defaultChecked,n.type,n.name,!0);break;case"select":Xu("invalid",t);break;case"textarea":Xu("invalid",t),Nt(t,n.value,n.defaultValue,n.children)}"string"!=typeof(r=n.children)&&"number"!=typeof r&&"bigint"!=typeof r||t.textContent===""+r||!0===n.suppressHydrationWarning||dd(t.textContent,r)?(null!=n.popover&&(Xu("beforetoggle",t),Xu("toggle",t)),null!=n.onScroll&&Xu("scroll",t),null!=n.onScrollEnd&&Xu("scrollend",t),null!=n.onClick&&(t.onclick=It),t=!0):t=!1,t||bs(e,!0)}function ys(e){for(ds=e.return;ds;)switch(ds.tag){case 5:case 31:case 13:return void(ms=!1);case 27:case 3:return void(ms=!0);default:ds=ds.return}}function xs(e){if(e!==ds)return!1;if(!ps)return ys(e),ps=!0,!1;var t,r=e.tag;if((t=3!==r&&27!==r)&&((t=5===r)&&(t=!("form"!==(t=e.type)&&"button"!==t)||wd(e.type,e.memoizedProps)),t=!t),t&&hs&&bs(e),ys(e),13===r){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(n(317));hs=Ld(e)}else if(31===r){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(n(317));hs=Ld(e)}else 27===r?(r=hs,Cd(e.type)?(e=Dd,Dd=null,hs=e):hs=r):hs=ds?$d(e.stateNode.nextSibling):null;return!0}function ws(){hs=ds=null,ps=!1}function js(){var e=fs;return null!==e&&(null===Ac?Ac=e:Ac.push.apply(Ac,e),fs=null),e}function ks(e){null===fs?fs=[e]:fs.push(e)}var _s=D(null),Ns=null,Ss=null;function Es(e,t,r){z(_s,t._currentValue),t._currentValue=r}function Cs(e){e._currentValue=_s.current,L(_s)}function Ts(e,t,r){for(;null!==e;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==n&&(n.childLanes|=t)):null!==n&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===r)break;e=e.return}}function Os(e,t,r,s){var a=e.child;for(null!==a&&(a.return=e);null!==a;){var i=a.dependencies;if(null!==i){var o=a.child;i=i.firstContext;e:for(;null!==i;){var l=i;i=a;for(var c=0;c<t.length;c++)if(l.context===t[c]){i.lanes|=r,null!==(l=i.alternate)&&(l.lanes|=r),Ts(i.return,r,e),s||(o=null);break e}i=l.next}}else if(18===a.tag){if(null===(o=a.return))throw Error(n(341));o.lanes|=r,null!==(i=o.alternate)&&(i.lanes|=r),Ts(o,r,e),o=null}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===e){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}}function Ps(e,t,r,s){e=null;for(var a=t,i=!1;null!==a;){if(!i)if(524288&a.flags)i=!0;else if(262144&a.flags)break;if(10===a.tag){var o=a.alternate;if(null===o)throw Error(n(387));if(null!==(o=o.memoizedProps)){var l=a.type;Zr(a.pendingProps.value,o.value)||(null!==e?e.push(l):e=[l])}}else if(a===H.current){if(null===(o=a.alternate))throw Error(n(387));o.memoizedState.memoizedState!==a.memoizedState.memoizedState&&(null!==e?e.push(hh):e=[hh])}a=a.return}null!==e&&Os(t,e,r,s),t.flags|=262144}function As(e){for(e=e.firstContext;null!==e;){if(!Zr(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Rs(e){Ns=e,Ss=null,null!==(e=e.dependencies)&&(e.firstContext=null)}function Is(e){return Ds(Ns,e)}function $s(e,t){return null===Ns&&Rs(e),Ds(e,t)}function Ds(e,t){var r=t._currentValue;if(t={context:t,memoizedValue:r,next:null},null===Ss){if(null===e)throw Error(n(308));Ss=t,e.dependencies={lanes:0,firstContext:t},e.flags|=524288}else Ss=Ss.next=t;return r}var Ls="undefined"!=typeof AbortController?AbortController:function(){var e=[],t=this.signal={aborted:!1,addEventListener:function(t,r){e.push(r)}};this.abort=function(){t.aborted=!0,e.forEach(function(e){return e()})}},zs=e.unstable_scheduleCallback,Ms=e.unstable_NormalPriority,Us={$$typeof:v,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Fs(){return{controller:new Ls,data:new Map,refCount:0}}function qs(e){e.refCount--,0===e.refCount&&zs(Ms,function(){e.controller.abort()})}var Bs=null,Hs=0,Vs=0,Ws=null;function Qs(){if(0===--Hs&&null!==Bs){null!==Ws&&(Ws.status="fulfilled");var e=Bs;Bs=null,Vs=0,Ws=null;for(var t=0;t<e.length;t++)(0,e[t])()}}var Gs=P.S;P.S=function(e,t){$c=ae(),"object"==typeof t&&null!==t&&"function"==typeof t.then&&function(e,t){if(null===Bs){var r=Bs=[];Hs=0,Vs=Hu(),Ws={status:"pending",value:void 0,then:function(e){r.push(e)}}}Hs++,t.then(Qs,Qs)}(0,t),null!==Gs&&Gs(e,t)};var Ks=D(null);function Js(){var e=Ks.current;return null!==e?e:gc.pooledCache}function Ys(e,t){z(Ks,null===t?Ks.current:t.pool)}function Xs(){var e=Js();return null===e?null:{parent:Us._currentValue,pool:e}}var Zs=Error(n(460)),ea=Error(n(474)),ta=Error(n(542)),ra={then:function(){}};function na(e){return"fulfilled"===(e=e.status)||"rejected"===e}function sa(e,t,r){switch(void 0===(r=e[r])?e.push(t):r!==t&&(t.then(It,It),t=r),t.status){case"fulfilled":return t.value;case"rejected":throw la(e=t.reason),e;default:if("string"==typeof t.status)t.then(It,It);else{if(null!==(e=gc)&&100<e.shellSuspendCounter)throw Error(n(482));(e=t).status="pending",e.then(function(e){if("pending"===t.status){var r=t;r.status="fulfilled",r.value=e}},function(e){if("pending"===t.status){var r=t;r.status="rejected",r.reason=e}})}switch(t.status){case"fulfilled":return t.value;case"rejected":throw la(e=t.reason),e}throw ia=t,Zs}}function aa(e){try{return(0,e._init)(e._payload)}catch(t){if(null!==t&&"object"==typeof t&&"function"==typeof t.then)throw ia=t,Zs;throw t}}var ia=null;function oa(){if(null===ia)throw Error(n(459));var e=ia;return ia=null,e}function la(e){if(e===Zs||e===ta)throw Error(n(483))}var ca=null,ua=0;function da(e){var t=ua;return ua+=1,null===ca&&(ca=[]),sa(ca,e,t)}function ha(e,t){t=t.props.ref,e.ref=void 0!==t?t:null}function pa(e,t){if(t.$$typeof===d)throw Error(n(525));throw e=Object.prototype.toString.call(t),Error(n(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function fa(e){function t(t,r){if(e){var n=t.deletions;null===n?(t.deletions=[r],t.flags|=16):n.push(r)}}function r(r,n){if(!e)return null;for(;null!==n;)t(r,n),n=n.sibling;return null}function s(e){for(var t=new Map;null!==e;)null!==e.key?t.set(e.key,e):t.set(e.index,e),e=e.sibling;return t}function a(e,t){return(e=qn(e,t)).index=0,e.sibling=null,e}function i(t,r,n){return t.index=n,e?null!==(n=t.alternate)?(n=n.index)<r?(t.flags|=67108866,r):n:(t.flags|=67108866,r):(t.flags|=1048576,r)}function o(t){return e&&null===t.alternate&&(t.flags|=67108866),t}function l(e,t,r,n){return null===t||6!==t.tag?((t=Wn(r,e.mode,n)).return=e,t):((t=a(t,r)).return=e,t)}function c(e,t,r,n){var s=r.type;return s===f?d(e,t,r.props.children,n,r.key):null!==t&&(t.elementType===s||"object"==typeof s&&null!==s&&s.$$typeof===k&&aa(s)===t.type)?(ha(t=a(t,r.props),r),t.return=e,t):(ha(t=Hn(r.type,r.key,r.props,null,e.mode,n),r),t.return=e,t)}function u(e,t,r,n){return null===t||4!==t.tag||t.stateNode.containerInfo!==r.containerInfo||t.stateNode.implementation!==r.implementation?((t=Gn(r,e.mode,n)).return=e,t):((t=a(t,r.children||[])).return=e,t)}function d(e,t,r,n,s){return null===t||7!==t.tag?((t=Vn(r,e.mode,n,s)).return=e,t):((t=a(t,r)).return=e,t)}function m(e,t,r){if("string"==typeof t&&""!==t||"number"==typeof t||"bigint"==typeof t)return(t=Wn(""+t,e.mode,r)).return=e,t;if("object"==typeof t&&null!==t){switch(t.$$typeof){case h:return ha(r=Hn(t.type,t.key,t.props,null,e.mode,r),t),r.return=e,r;case p:return(t=Gn(t,e.mode,r)).return=e,t;case k:return m(e,t=aa(t),r)}if(O(t)||E(t))return(t=Vn(t,e.mode,r,null)).return=e,t;if("function"==typeof t.then)return m(e,da(t),r);if(t.$$typeof===v)return m(e,$s(e,t),r);pa(e,t)}return null}function g(e,t,r,n){var s=null!==t?t.key:null;if("string"==typeof r&&""!==r||"number"==typeof r||"bigint"==typeof r)return null!==s?null:l(e,t,""+r,n);if("object"==typeof r&&null!==r){switch(r.$$typeof){case h:return r.key===s?c(e,t,r,n):null;case p:return r.key===s?u(e,t,r,n):null;case k:return g(e,t,r=aa(r),n)}if(O(r)||E(r))return null!==s?null:d(e,t,r,n,null);if("function"==typeof r.then)return g(e,t,da(r),n);if(r.$$typeof===v)return g(e,t,$s(e,r),n);pa(e,r)}return null}function b(e,t,r,n,s){if("string"==typeof n&&""!==n||"number"==typeof n||"bigint"==typeof n)return l(t,e=e.get(r)||null,""+n,s);if("object"==typeof n&&null!==n){switch(n.$$typeof){case h:return c(t,e=e.get(null===n.key?r:n.key)||null,n,s);case p:return u(t,e=e.get(null===n.key?r:n.key)||null,n,s);case k:return b(e,t,r,n=aa(n),s)}if(O(n)||E(n))return d(t,e=e.get(r)||null,n,s,null);if("function"==typeof n.then)return b(e,t,r,da(n),s);if(n.$$typeof===v)return b(e,t,r,$s(t,n),s);pa(t,n)}return null}function y(l,c,u,d){if("object"==typeof u&&null!==u&&u.type===f&&null===u.key&&(u=u.props.children),"object"==typeof u&&null!==u){switch(u.$$typeof){case h:e:{for(var x=u.key;null!==c;){if(c.key===x){if((x=u.type)===f){if(7===c.tag){r(l,c.sibling),(d=a(c,u.props.children)).return=l,l=d;break e}}else if(c.elementType===x||"object"==typeof x&&null!==x&&x.$$typeof===k&&aa(x)===c.type){r(l,c.sibling),ha(d=a(c,u.props),u),d.return=l,l=d;break e}r(l,c);break}t(l,c),c=c.sibling}u.type===f?((d=Vn(u.props.children,l.mode,d,u.key)).return=l,l=d):(ha(d=Hn(u.type,u.key,u.props,null,l.mode,d),u),d.return=l,l=d)}return o(l);case p:e:{for(x=u.key;null!==c;){if(c.key===x){if(4===c.tag&&c.stateNode.containerInfo===u.containerInfo&&c.stateNode.implementation===u.implementation){r(l,c.sibling),(d=a(c,u.children||[])).return=l,l=d;break e}r(l,c);break}t(l,c),c=c.sibling}(d=Gn(u,l.mode,d)).return=l,l=d}return o(l);case k:return y(l,c,u=aa(u),d)}if(O(u))return function(n,a,o,l){for(var c=null,u=null,d=a,h=a=0,p=null;null!==d&&h<o.length;h++){d.index>h?(p=d,d=null):p=d.sibling;var f=g(n,d,o[h],l);if(null===f){null===d&&(d=p);break}e&&d&&null===f.alternate&&t(n,d),a=i(f,a,h),null===u?c=f:u.sibling=f,u=f,d=p}if(h===o.length)return r(n,d),ps&&is(n,h),c;if(null===d){for(;h<o.length;h++)null!==(d=m(n,o[h],l))&&(a=i(d,a,h),null===u?c=d:u.sibling=d,u=d);return ps&&is(n,h),c}for(d=s(d);h<o.length;h++)null!==(p=b(d,n,h,o[h],l))&&(e&&null!==p.alternate&&d.delete(null===p.key?h:p.key),a=i(p,a,h),null===u?c=p:u.sibling=p,u=p);return e&&d.forEach(function(e){return t(n,e)}),ps&&is(n,h),c}(l,c,u,d);if(E(u)){if("function"!=typeof(x=E(u)))throw Error(n(150));return function(a,o,l,c){if(null==l)throw Error(n(151));for(var u=null,d=null,h=o,p=o=0,f=null,v=l.next();null!==h&&!v.done;p++,v=l.next()){h.index>p?(f=h,h=null):f=h.sibling;var y=g(a,h,v.value,c);if(null===y){null===h&&(h=f);break}e&&h&&null===y.alternate&&t(a,h),o=i(y,o,p),null===d?u=y:d.sibling=y,d=y,h=f}if(v.done)return r(a,h),ps&&is(a,p),u;if(null===h){for(;!v.done;p++,v=l.next())null!==(v=m(a,v.value,c))&&(o=i(v,o,p),null===d?u=v:d.sibling=v,d=v);return ps&&is(a,p),u}for(h=s(h);!v.done;p++,v=l.next())null!==(v=b(h,a,p,v.value,c))&&(e&&null!==v.alternate&&h.delete(null===v.key?p:v.key),o=i(v,o,p),null===d?u=v:d.sibling=v,d=v);return e&&h.forEach(function(e){return t(a,e)}),ps&&is(a,p),u}(l,c,u=x.call(u),d)}if("function"==typeof u.then)return y(l,c,da(u),d);if(u.$$typeof===v)return y(l,c,$s(l,u),d);pa(l,u)}return"string"==typeof u&&""!==u||"number"==typeof u||"bigint"==typeof u?(u=""+u,null!==c&&6===c.tag?(r(l,c.sibling),(d=a(c,u)).return=l,l=d):(r(l,c),(d=Wn(u,l.mode,d)).return=l,l=d),o(l)):r(l,c)}return function(e,t,r,n){try{ua=0;var s=y(e,t,r,n);return ca=null,s}catch(i){if(i===Zs||i===ta)throw i;var a=Un(29,i,null,e.mode);return a.lanes=n,a.return=e,a}}}var ma=fa(!0),ga=fa(!1),ba=!1;function va(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ya(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function xa(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function wa(e,t,r){var n=e.updateQueue;if(null===n)return null;if(n=n.shared,2&mc){var s=n.pending;return null===s?t.next=t:(t.next=s.next,s.next=t),n.pending=t,t=Ln(e),Dn(e,null,r),t}return Rn(e,n,t,r),Ln(e)}function ja(e,t,r){if(null!==(t=t.updateQueue)&&(t=t.shared,4194048&r)){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,Re(e,r)}}function ka(e,t){var r=e.updateQueue,n=e.alternate;if(null!==n&&r===(n=n.updateQueue)){var s=null,a=null;if(null!==(r=r.firstBaseUpdate)){do{var i={lane:r.lane,tag:r.tag,payload:r.payload,callback:null,next:null};null===a?s=a=i:a=a.next=i,r=r.next}while(null!==r);null===a?s=a=t:a=a.next=t}else s=a=t;return r={baseState:n.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:n.shared,callbacks:n.callbacks},void(e.updateQueue=r)}null===(e=r.lastBaseUpdate)?r.firstBaseUpdate=t:e.next=t,r.lastBaseUpdate=t}var _a=!1;function Na(){if(_a){if(null!==Ws)throw Ws}}function Sa(e,t,r,n){_a=!1;var s=e.updateQueue;ba=!1;var a=s.firstBaseUpdate,i=s.lastBaseUpdate,o=s.shared.pending;if(null!==o){s.shared.pending=null;var l=o,c=l.next;l.next=null,null===i?a=c:i.next=c,i=l;var d=e.alternate;null!==d&&((o=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===o?d.firstBaseUpdate=c:o.next=c,d.lastBaseUpdate=l))}if(null!==a){var h=s.baseState;for(i=0,d=c=l=null,o=a;;){var p=-536870913&o.lane,f=p!==o.lane;if(f?(vc&p)===p:(n&p)===p){0!==p&&p===Vs&&(_a=!0),null!==d&&(d=d.next={lane:0,tag:o.tag,payload:o.payload,callback:null,next:null});e:{var m=e,g=o;p=t;var b=r;switch(g.tag){case 1:if("function"==typeof(m=g.payload)){h=m.call(b,h,p);break e}h=m;break e;case 3:m.flags=-65537&m.flags|128;case 0:if(null==(p="function"==typeof(m=g.payload)?m.call(b,h,p):m))break e;h=u({},h,p);break e;case 2:ba=!0}}null!==(p=o.callback)&&(e.flags|=64,f&&(e.flags|=8192),null===(f=s.callbacks)?s.callbacks=[p]:f.push(p))}else f={lane:p,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===d?(c=d=f,l=h):d=d.next=f,i|=p;if(null===(o=o.next)){if(null===(o=s.shared.pending))break;o=(f=o).next,f.next=null,s.lastBaseUpdate=f,s.shared.pending=null}}null===d&&(l=h),s.baseState=l,s.firstBaseUpdate=c,s.lastBaseUpdate=d,null===a&&(s.shared.lanes=0),Sc|=i,e.lanes=i,e.memoizedState=h}}function Ea(e,t){if("function"!=typeof e)throw Error(n(191,e));e.call(t)}function Ca(e,t){var r=e.callbacks;if(null!==r)for(e.callbacks=null,e=0;e<r.length;e++)Ea(r[e],t)}var Ta=D(null),Oa=D(0);function Pa(e,t){z(Oa,e=_c),z(Ta,t),_c=e|t.baseLanes}function Aa(){z(Oa,_c),z(Ta,Ta.current)}function Ra(){_c=Oa.current,L(Ta),L(Oa)}var Ia=D(null),$a=null;function Da(e){var t=e.alternate;z(Fa,1&Fa.current),z(Ia,e),null===$a&&(null===t||null!==Ta.current||null!==t.memoizedState)&&($a=e)}function La(e){z(Fa,Fa.current),z(Ia,e),null===$a&&($a=e)}function za(e){22===e.tag?(z(Fa,Fa.current),z(Ia,e),null===$a&&($a=e)):Ma()}function Ma(){z(Fa,Fa.current),z(Ia,Ia.current)}function Ua(e){L(Ia),$a===e&&($a=null),L(Fa)}var Fa=D(0);function qa(e){for(var t=e;null!==t;){if(13===t.tag){var r=t.memoizedState;if(null!==r&&(null===(r=r.dehydrated)||Rd(r)||Id(r)))return t}else if(19!==t.tag||"forwards"!==t.memoizedProps.revealOrder&&"backwards"!==t.memoizedProps.revealOrder&&"unstable_legacy-backwards"!==t.memoizedProps.revealOrder&&"together"!==t.memoizedProps.revealOrder){if(null!==t.child){t.child.return=t,t=t.child;continue}}else if(128&t.flags)return t;if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Ba=0,Ha=null,Va=null,Wa=null,Qa=!1,Ga=!1,Ka=!1,Ja=0,Ya=0,Xa=null,Za=0;function ei(){throw Error(n(321))}function ti(e,t){if(null===t)return!1;for(var r=0;r<t.length&&r<e.length;r++)if(!Zr(e[r],t[r]))return!1;return!0}function ri(e,t,r,n,s,a){return Ba=a,Ha=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,P.H=null===e||null===e.memoizedState?vo:yo,Ka=!1,a=r(n,s),Ka=!1,Ga&&(a=si(t,r,n,s)),ni(e),a}function ni(e){P.H=bo;var t=null!==Va&&null!==Va.next;if(Ba=0,Wa=Va=Ha=null,Qa=!1,Ya=0,Xa=null,t)throw Error(n(300));null===e||$o||null!==(e=e.dependencies)&&As(e)&&($o=!0)}function si(e,t,r,s){Ha=e;var a=0;do{if(Ga&&(Xa=null),Ya=0,Ga=!1,25<=a)throw Error(n(301));if(a+=1,Wa=Va=null,null!=e.updateQueue){var i=e.updateQueue;i.lastEffect=null,i.events=null,i.stores=null,null!=i.memoCache&&(i.memoCache.index=0)}P.H=xo,i=t(r,s)}while(Ga);return i}function ai(){var e=P.H,t=e.useState()[0];return t="function"==typeof t.then?di(t):t,e=e.useState()[0],(null!==Va?Va.memoizedState:null)!==e&&(Ha.flags|=1024),t}function ii(){var e=0!==Ja;return Ja=0,e}function oi(e,t,r){t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r}function li(e){if(Qa){for(e=e.memoizedState;null!==e;){var t=e.queue;null!==t&&(t.pending=null),e=e.next}Qa=!1}Ba=0,Wa=Va=Ha=null,Ga=!1,Ya=Ja=0,Xa=null}function ci(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===Wa?Ha.memoizedState=Wa=e:Wa=Wa.next=e,Wa}function ui(){if(null===Va){var e=Ha.alternate;e=null!==e?e.memoizedState:null}else e=Va.next;var t=null===Wa?Ha.memoizedState:Wa.next;if(null!==t)Wa=t,Va=e;else{if(null===e){if(null===Ha.alternate)throw Error(n(467));throw Error(n(310))}e={memoizedState:(Va=e).memoizedState,baseState:Va.baseState,baseQueue:Va.baseQueue,queue:Va.queue,next:null},null===Wa?Ha.memoizedState=Wa=e:Wa=Wa.next=e}return Wa}function di(e){var t=Ya;return Ya+=1,null===Xa&&(Xa=[]),e=sa(Xa,e,t),t=Ha,null===(null===Wa?t.memoizedState:Wa.next)&&(t=t.alternate,P.H=null===t||null===t.memoizedState?vo:yo),e}function hi(e){if(null!==e&&"object"==typeof e){if("function"==typeof e.then)return di(e);if(e.$$typeof===v)return Is(e)}throw Error(n(438,String(e)))}function pi(e){var t=null,r=Ha.updateQueue;if(null!==r&&(t=r.memoCache),null==t){var n=Ha.alternate;null!==n&&(null!==(n=n.updateQueue)&&(null!=(n=n.memoCache)&&(t={data:n.data.map(function(e){return e.slice()}),index:0})))}if(null==t&&(t={data:[],index:0}),null===r&&(r={lastEffect:null,events:null,stores:null,memoCache:null},Ha.updateQueue=r),r.memoCache=t,void 0===(r=t.data[t.index]))for(r=t.data[t.index]=Array(e),n=0;n<e;n++)r[n]=N;return t.index++,r}function fi(e,t){return"function"==typeof t?t(e):t}function mi(e){return gi(ui(),Va,e)}function gi(e,t,r){var s=e.queue;if(null===s)throw Error(n(311));s.lastRenderedReducer=r;var a=e.baseQueue,i=s.pending;if(null!==i){if(null!==a){var o=a.next;a.next=i.next,i.next=o}t.baseQueue=a=i,s.pending=null}if(i=e.baseState,null===a)e.memoizedState=i;else{var l=o=null,c=null,u=t=a.next,d=!1;do{var h=-536870913&u.lane;if(h!==u.lane?(vc&h)===h:(Ba&h)===h){var p=u.revertLane;if(0===p)null!==c&&(c=c.next={lane:0,revertLane:0,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),h===Vs&&(d=!0);else{if((Ba&p)===p){u=u.next,p===Vs&&(d=!0);continue}h={lane:0,revertLane:u.revertLane,gesture:null,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=h,o=i):c=c.next=h,Ha.lanes|=p,Sc|=p}h=u.action,Ka&&r(i,h),i=u.hasEagerState?u.eagerState:r(i,h)}else p={lane:h,revertLane:u.revertLane,gesture:u.gesture,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null},null===c?(l=c=p,o=i):c=c.next=p,Ha.lanes|=h,Sc|=h;u=u.next}while(null!==u&&u!==t);if(null===c?o=i:c.next=l,!Zr(i,e.memoizedState)&&($o=!0,d&&null!==(r=Ws)))throw r;e.memoizedState=i,e.baseState=o,e.baseQueue=c,s.lastRenderedState=i}return null===a&&(s.lanes=0),[e.memoizedState,s.dispatch]}function bi(e){var t=ui(),r=t.queue;if(null===r)throw Error(n(311));r.lastRenderedReducer=e;var s=r.dispatch,a=r.pending,i=t.memoizedState;if(null!==a){r.pending=null;var o=a=a.next;do{i=e(i,o.action),o=o.next}while(o!==a);Zr(i,t.memoizedState)||($o=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),r.lastRenderedState=i}return[i,s]}function vi(e,t,r){var s=Ha,a=ui(),i=ps;if(i){if(void 0===r)throw Error(n(407));r=r()}else r=t();var o=!Zr((Va||a).memoizedState,r);if(o&&(a.memoizedState=r,$o=!0),a=a.queue,Bi(wi.bind(null,s,a,e),[e]),a.getSnapshot!==t||o||null!==Wa&&1&Wa.memoizedState.tag){if(s.flags|=2048,zi(9,{destroy:void 0},xi.bind(null,s,a,r,t),null),null===gc)throw Error(n(349));i||127&Ba||yi(s,t,r)}return r}function yi(e,t,r){e.flags|=16384,e={getSnapshot:t,value:r},null===(t=Ha.updateQueue)?(t={lastEffect:null,events:null,stores:null,memoCache:null},Ha.updateQueue=t,t.stores=[e]):null===(r=t.stores)?t.stores=[e]:r.push(e)}function xi(e,t,r,n){t.value=r,t.getSnapshot=n,ji(t)&&ki(e)}function wi(e,t,r){return r(function(){ji(t)&&ki(e)})}function ji(e){var t=e.getSnapshot;e=e.value;try{var r=t();return!Zr(e,r)}catch(n){return!0}}function ki(e){var t=$n(e,2);null!==t&&Jc(t,e,2)}function _i(e){var t=ci();if("function"==typeof e){var r=e;if(e=r(),Ka){ge(!0);try{r()}finally{ge(!1)}}}return t.memoizedState=t.baseState=e,t.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:fi,lastRenderedState:e},t}function Ni(e,t,r,n){return e.baseState=r,gi(e,Va,"function"==typeof n?n:fi)}function Si(e,t,r,s,a){if(fo(e))throw Error(n(485));if(null!==(e=t.action)){var i={payload:a,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(e){i.listeners.push(e)}};null!==P.T?r(!0):i.isTransition=!1,s(i),null===(r=t.pending)?(i.next=t.pending=i,Ei(t,i)):(i.next=r.next,t.pending=r.next=i)}}function Ei(e,t){var r=t.action,n=t.payload,s=e.state;if(t.isTransition){var a=P.T,i={};P.T=i;try{var o=r(s,n),l=P.S;null!==l&&l(i,o),Ci(e,t,o)}catch(c){Oi(e,t,c)}finally{null!==a&&null!==i.types&&(a.types=i.types),P.T=a}}else try{Ci(e,t,a=r(s,n))}catch(u){Oi(e,t,u)}}function Ci(e,t,r){null!==r&&"object"==typeof r&&"function"==typeof r.then?r.then(function(r){Ti(e,t,r)},function(r){return Oi(e,t,r)}):Ti(e,t,r)}function Ti(e,t,r){t.status="fulfilled",t.value=r,Pi(t),e.state=r,null!==(t=e.pending)&&((r=t.next)===t?e.pending=null:(r=r.next,t.next=r,Ei(e,r)))}function Oi(e,t,r){var n=e.pending;if(e.pending=null,null!==n){n=n.next;do{t.status="rejected",t.reason=r,Pi(t),t=t.next}while(t!==n)}e.action=null}function Pi(e){e=e.listeners;for(var t=0;t<e.length;t++)(0,e[t])()}function Ai(e,t){return t}function Ri(e,t){if(ps){var r=gc.formState;if(null!==r){e:{var n=Ha;if(ps){if(hs){t:{for(var s=hs,a=ms;8!==s.nodeType;){if(!a){s=null;break t}if(null===(s=$d(s.nextSibling))){s=null;break t}}s="F!"===(a=s.data)||"F"===a?s:null}if(s){hs=$d(s.nextSibling),n="F!"===s.data;break e}}bs(n)}n=!1}n&&(t=r[0])}}return(r=ci()).memoizedState=r.baseState=t,n={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ai,lastRenderedState:t},r.queue=n,r=uo.bind(null,Ha,n),n.dispatch=r,n=_i(!1),a=po.bind(null,Ha,!1,n.queue),s={state:t,dispatch:null,action:e,pending:null},(n=ci()).queue=s,r=Si.bind(null,Ha,s,a,r),s.dispatch=r,n.memoizedState=e,[t,r,!1]}function Ii(e){return $i(ui(),Va,e)}function $i(e,t,r){if(t=gi(e,t,Ai)[0],e=mi(fi)[0],"object"==typeof t&&null!==t&&"function"==typeof t.then)try{var n=di(t)}catch(i){if(i===Zs)throw ta;throw i}else n=t;var s=(t=ui()).queue,a=s.dispatch;return r!==t.memoizedState&&(Ha.flags|=2048,zi(9,{destroy:void 0},Di.bind(null,s,r),null)),[n,a,e]}function Di(e,t){e.action=t}function Li(e){var t=ui(),r=Va;if(null!==r)return $i(t,r,e);ui(),t=t.memoizedState;var n=(r=ui()).queue.dispatch;return r.memoizedState=e,[t,n,!1]}function zi(e,t,r,n){return e={tag:e,create:r,deps:n,inst:t,next:null},null===(t=Ha.updateQueue)&&(t={lastEffect:null,events:null,stores:null,memoCache:null},Ha.updateQueue=t),null===(r=t.lastEffect)?t.lastEffect=e.next=e:(n=r.next,r.next=e,e.next=n,t.lastEffect=e),e}function Mi(){return ui().memoizedState}function Ui(e,t,r,n){var s=ci();Ha.flags|=e,s.memoizedState=zi(1|t,{destroy:void 0},r,void 0===n?null:n)}function Fi(e,t,r,n){var s=ui();n=void 0===n?null:n;var a=s.memoizedState.inst;null!==Va&&null!==n&&ti(n,Va.memoizedState.deps)?s.memoizedState=zi(t,a,r,n):(Ha.flags|=e,s.memoizedState=zi(1|t,a,r,n))}function qi(e,t){Ui(8390656,8,e,t)}function Bi(e,t){Fi(2048,8,e,t)}function Hi(e){var t=ui().memoizedState;return function(e){Ha.flags|=4;var t=Ha.updateQueue;if(null===t)t={lastEffect:null,events:null,stores:null,memoCache:null},Ha.updateQueue=t,t.events=[e];else{var r=t.events;null===r?t.events=[e]:r.push(e)}}({ref:t,nextImpl:e}),function(){if(2&mc)throw Error(n(440));return t.impl.apply(void 0,arguments)}}function Vi(e,t){return Fi(4,2,e,t)}function Wi(e,t){return Fi(4,4,e,t)}function Qi(e,t){if("function"==typeof t){e=e();var r=t(e);return function(){"function"==typeof r?r():t(null)}}if(null!=t)return e=e(),t.current=e,function(){t.current=null}}function Gi(e,t,r){r=null!=r?r.concat([e]):null,Fi(4,4,Qi.bind(null,t,e),r)}function Ki(){}function Ji(e,t){var r=ui();t=void 0===t?null:t;var n=r.memoizedState;return null!==t&&ti(t,n[1])?n[0]:(r.memoizedState=[e,t],e)}function Yi(e,t){var r=ui();t=void 0===t?null:t;var n=r.memoizedState;if(null!==t&&ti(t,n[1]))return n[0];if(n=e(),Ka){ge(!0);try{e()}finally{ge(!1)}}return r.memoizedState=[n,t],n}function Xi(e,t,r){return void 0===r||1073741824&Ba&&!(261930&vc)?e.memoizedState=t:(e.memoizedState=r,e=Kc(),Ha.lanes|=e,Sc|=e,r)}function Zi(e,t,r,n){return Zr(r,t)?r:null!==Ta.current?(e=Xi(e,r,n),Zr(e,t)||($o=!0),e):42&Ba&&(!(1073741824&Ba)||261930&vc)?(e=Kc(),Ha.lanes|=e,Sc|=e,t):($o=!0,e.memoizedState=r)}function eo(e,t,r,n,s){var a=A.p;A.p=0!==a&&8>a?a:8;var i,o,l,c=P.T,u={};P.T=u,po(e,!1,t,r);try{var d=s(),h=P.S;if(null!==h&&h(u,d),null!==d&&"object"==typeof d&&"function"==typeof d.then)ho(e,t,(i=n,o=[],l={status:"pending",value:null,reason:null,then:function(e){o.push(e)}},d.then(function(){l.status="fulfilled",l.value=i;for(var e=0;e<o.length;e++)(0,o[e])(i)},function(e){for(l.status="rejected",l.reason=e,e=0;e<o.length;e++)(0,o[e])(void 0)}),l),Gc());else ho(e,t,n,Gc())}catch(p){ho(e,t,{then:function(){},status:"rejected",reason:p},Gc())}finally{A.p=a,null!==c&&null!==u.types&&(c.types=u.types),P.T=c}}function to(){}function ro(e,t,r,s){if(5!==e.tag)throw Error(n(476));var a=no(e).queue;eo(e,a,t,R,null===r?to:function(){return so(e),r(s)})}function no(e){var t=e.memoizedState;if(null!==t)return t;var r={};return(t={memoizedState:R,baseState:R,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fi,lastRenderedState:R},next:null}).next={memoizedState:r,baseState:r,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:fi,lastRenderedState:r},next:null},e.memoizedState=t,null!==(e=e.alternate)&&(e.memoizedState=t),t}function so(e){var t=no(e);null===t.next&&(t=e.alternate.memoizedState),ho(e,t.next.queue,{},Gc())}function ao(){return Is(hh)}function io(){return ui().memoizedState}function oo(){return ui().memoizedState}function lo(e){for(var t=e.return;null!==t;){switch(t.tag){case 24:case 3:var r=Gc(),n=wa(t,e=xa(r),r);return null!==n&&(Jc(n,t,r),ja(n,t,r)),t={cache:Fs()},void(e.payload=t)}t=t.return}}function co(e,t,r){var n=Gc();r={lane:n,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null},fo(e)?mo(t,r):null!==(r=In(e,t,r,n))&&(Jc(r,e,n),go(r,t,n))}function uo(e,t,r){ho(e,t,r,Gc())}function ho(e,t,r,n){var s={lane:n,revertLane:0,gesture:null,action:r,hasEagerState:!1,eagerState:null,next:null};if(fo(e))mo(t,s);else{var a=e.alternate;if(0===e.lanes&&(null===a||0===a.lanes)&&null!==(a=t.lastRenderedReducer))try{var i=t.lastRenderedState,o=a(i,r);if(s.hasEagerState=!0,s.eagerState=o,Zr(o,i))return Rn(e,t,s,0),null===gc&&An(),!1}catch(l){}if(null!==(r=In(e,t,s,n)))return Jc(r,e,n),go(r,t,n),!0}return!1}function po(e,t,r,s){if(s={lane:2,revertLane:Hu(),gesture:null,action:s,hasEagerState:!1,eagerState:null,next:null},fo(e)){if(t)throw Error(n(479))}else null!==(t=In(e,r,s,2))&&Jc(t,e,2)}function fo(e){var t=e.alternate;return e===Ha||null!==t&&t===Ha}function mo(e,t){Ga=Qa=!0;var r=e.pending;null===r?t.next=t:(t.next=r.next,r.next=t),e.pending=t}function go(e,t,r){if(4194048&r){var n=t.lanes;r|=n&=e.pendingLanes,t.lanes=r,Re(e,r)}}var bo={readContext:Is,use:hi,useCallback:ei,useContext:ei,useEffect:ei,useImperativeHandle:ei,useLayoutEffect:ei,useInsertionEffect:ei,useMemo:ei,useReducer:ei,useRef:ei,useState:ei,useDebugValue:ei,useDeferredValue:ei,useTransition:ei,useSyncExternalStore:ei,useId:ei,useHostTransitionStatus:ei,useFormState:ei,useActionState:ei,useOptimistic:ei,useMemoCache:ei,useCacheRefresh:ei};bo.useEffectEvent=ei;var vo={readContext:Is,use:hi,useCallback:function(e,t){return ci().memoizedState=[e,void 0===t?null:t],e},useContext:Is,useEffect:qi,useImperativeHandle:function(e,t,r){r=null!=r?r.concat([e]):null,Ui(4194308,4,Qi.bind(null,t,e),r)},useLayoutEffect:function(e,t){return Ui(4194308,4,e,t)},useInsertionEffect:function(e,t){Ui(4,2,e,t)},useMemo:function(e,t){var r=ci();t=void 0===t?null:t;var n=e();if(Ka){ge(!0);try{e()}finally{ge(!1)}}return r.memoizedState=[n,t],n},useReducer:function(e,t,r){var n=ci();if(void 0!==r){var s=r(t);if(Ka){ge(!0);try{r(t)}finally{ge(!1)}}}else s=t;return n.memoizedState=n.baseState=s,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:s},n.queue=e,e=e.dispatch=co.bind(null,Ha,e),[n.memoizedState,e]},useRef:function(e){return e={current:e},ci().memoizedState=e},useState:function(e){var t=(e=_i(e)).queue,r=uo.bind(null,Ha,t);return t.dispatch=r,[e.memoizedState,r]},useDebugValue:Ki,useDeferredValue:function(e,t){return Xi(ci(),e,t)},useTransition:function(){var e=_i(!1);return e=eo.bind(null,Ha,e.queue,!0,!1),ci().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,t,r){var s=Ha,a=ci();if(ps){if(void 0===r)throw Error(n(407));r=r()}else{if(r=t(),null===gc)throw Error(n(349));127&vc||yi(s,t,r)}a.memoizedState=r;var i={value:r,getSnapshot:t};return a.queue=i,qi(wi.bind(null,s,i,e),[e]),s.flags|=2048,zi(9,{destroy:void 0},xi.bind(null,s,i,r,t),null),r},useId:function(){var e=ci(),t=gc.identifierPrefix;if(ps){var r=as;t="_"+t+"R_"+(r=(ss&~(1<<32-be(ss)-1)).toString(32)+r),0<(r=Ja++)&&(t+="H"+r.toString(32)),t+="_"}else t="_"+t+"r_"+(r=Za++).toString(32)+"_";return e.memoizedState=t},useHostTransitionStatus:ao,useFormState:Ri,useActionState:Ri,useOptimistic:function(e){var t=ci();t.memoizedState=t.baseState=e;var r={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return t.queue=r,t=po.bind(null,Ha,!0,r),r.dispatch=t,[e,t]},useMemoCache:pi,useCacheRefresh:function(){return ci().memoizedState=lo.bind(null,Ha)},useEffectEvent:function(e){var t=ci(),r={impl:e};return t.memoizedState=r,function(){if(2&mc)throw Error(n(440));return r.impl.apply(void 0,arguments)}}},yo={readContext:Is,use:hi,useCallback:Ji,useContext:Is,useEffect:Bi,useImperativeHandle:Gi,useInsertionEffect:Vi,useLayoutEffect:Wi,useMemo:Yi,useReducer:mi,useRef:Mi,useState:function(){return mi(fi)},useDebugValue:Ki,useDeferredValue:function(e,t){return Zi(ui(),Va.memoizedState,e,t)},useTransition:function(){var e=mi(fi)[0],t=ui().memoizedState;return["boolean"==typeof e?e:di(e),t]},useSyncExternalStore:vi,useId:io,useHostTransitionStatus:ao,useFormState:Ii,useActionState:Ii,useOptimistic:function(e,t){return Ni(ui(),0,e,t)},useMemoCache:pi,useCacheRefresh:oo};yo.useEffectEvent=Hi;var xo={readContext:Is,use:hi,useCallback:Ji,useContext:Is,useEffect:Bi,useImperativeHandle:Gi,useInsertionEffect:Vi,useLayoutEffect:Wi,useMemo:Yi,useReducer:bi,useRef:Mi,useState:function(){return bi(fi)},useDebugValue:Ki,useDeferredValue:function(e,t){var r=ui();return null===Va?Xi(r,e,t):Zi(r,Va.memoizedState,e,t)},useTransition:function(){var e=bi(fi)[0],t=ui().memoizedState;return["boolean"==typeof e?e:di(e),t]},useSyncExternalStore:vi,useId:io,useHostTransitionStatus:ao,useFormState:Li,useActionState:Li,useOptimistic:function(e,t){var r=ui();return null!==Va?Ni(r,0,e,t):(r.baseState=e,[e,r.queue.dispatch])},useMemoCache:pi,useCacheRefresh:oo};function wo(e,t,r,n){r=null==(r=r(n,t=e.memoizedState))?t:u({},t,r),e.memoizedState=r,0===e.lanes&&(e.updateQueue.baseState=r)}xo.useEffectEvent=Hi;var jo={enqueueSetState:function(e,t,r){e=e._reactInternals;var n=Gc(),s=xa(n);s.payload=t,null!=r&&(s.callback=r),null!==(t=wa(e,s,n))&&(Jc(t,e,n),ja(t,e,n))},enqueueReplaceState:function(e,t,r){e=e._reactInternals;var n=Gc(),s=xa(n);s.tag=1,s.payload=t,null!=r&&(s.callback=r),null!==(t=wa(e,s,n))&&(Jc(t,e,n),ja(t,e,n))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var r=Gc(),n=xa(r);n.tag=2,null!=t&&(n.callback=t),null!==(t=wa(e,n,r))&&(Jc(t,e,r),ja(t,e,r))}};function ko(e,t,r,n,s,a,i){return"function"==typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(n,a,i):!t.prototype||!t.prototype.isPureReactComponent||(!en(r,n)||!en(s,a))}function _o(e,t,r,n){e=t.state,"function"==typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(r,n),"function"==typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(r,n),t.state!==e&&jo.enqueueReplaceState(t,t.state,null)}function No(e,t){var r=t;if("ref"in t)for(var n in r={},t)"ref"!==n&&(r[n]=t[n]);if(e=e.defaultProps)for(var s in r===t&&(r=u({},r)),e)void 0===r[s]&&(r[s]=e[s]);return r}function So(e){Cn(e)}function Eo(e){}function Co(e){Cn(e)}function To(e,t){try{(0,e.onUncaughtError)(t.value,{componentStack:t.stack})}catch(r){setTimeout(function(){throw r})}}function Oo(e,t,r){try{(0,e.onCaughtError)(r.value,{componentStack:r.stack,errorBoundary:1===t.tag?t.stateNode:null})}catch(n){setTimeout(function(){throw n})}}function Po(e,t,r){return(r=xa(r)).tag=3,r.payload={element:null},r.callback=function(){To(e,t)},r}function Ao(e){return(e=xa(e)).tag=3,e}function Ro(e,t,r,n){var s=r.type.getDerivedStateFromError;if("function"==typeof s){var a=n.value;e.payload=function(){return s(a)},e.callback=function(){Oo(t,r,n)}}var i=r.stateNode;null!==i&&"function"==typeof i.componentDidCatch&&(e.callback=function(){Oo(t,r,n),"function"!=typeof s&&(null===zc?zc=new Set([this]):zc.add(this));var e=n.stack;this.componentDidCatch(n.value,{componentStack:null!==e?e:""})})}var Io=Error(n(461)),$o=!1;function Do(e,t,r,n){t.child=null===e?ga(t,null,r,n):ma(t,e.child,r,n)}function Lo(e,t,r,n,s){r=r.render;var a=t.ref;if("ref"in n){var i={};for(var o in n)"ref"!==o&&(i[o]=n[o])}else i=n;return Rs(t),n=ri(e,t,r,i,a,s),o=ii(),null===e||$o?(ps&&o&&ls(t),t.flags|=1,Do(e,t,n,s),t.child):(oi(e,t,s),il(e,t,s))}function zo(e,t,r,n,s){if(null===e){var a=r.type;return"function"!=typeof a||Fn(a)||void 0!==a.defaultProps||null!==r.compare?((e=Hn(r.type,null,n,t,t.mode,s)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=a,Mo(e,t,a,n,s))}if(a=e.child,!ol(e,s)){var i=a.memoizedProps;if((r=null!==(r=r.compare)?r:en)(i,n)&&e.ref===t.ref)return il(e,t,s)}return t.flags|=1,(e=qn(a,n)).ref=t.ref,e.return=t,t.child=e}function Mo(e,t,r,n,s){if(null!==e){var a=e.memoizedProps;if(en(a,n)&&e.ref===t.ref){if($o=!1,t.pendingProps=n=a,!ol(e,s))return t.lanes=e.lanes,il(e,t,s);131072&e.flags&&($o=!0)}}return Wo(e,t,r,n,s)}function Uo(e,t,r,n){var s=n.children,a=null!==e?e.memoizedState:null;if(null===e&&null===t.stateNode&&(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),"hidden"===n.mode){if(128&t.flags){if(a=null!==a?a.baseLanes|r:r,null!==e){for(n=t.child=e.child,s=0;null!==n;)s=s|n.lanes|n.childLanes,n=n.sibling;n=s&~a}else n=0,t.child=null;return qo(e,t,a,r,n)}if(!(536870912&r))return n=t.lanes=536870912,qo(e,t,null!==a?a.baseLanes|r:r,r,n);t.memoizedState={baseLanes:0,cachePool:null},null!==e&&Ys(0,null!==a?a.cachePool:null),null!==a?Pa(t,a):Aa(),za(t)}else null!==a?(Ys(0,a.cachePool),Pa(t,a),Ma(),t.memoizedState=null):(null!==e&&Ys(0,null),Aa(),Ma());return Do(e,t,s,r),t.child}function Fo(e,t){return null!==e&&22===e.tag||null!==t.stateNode||(t.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),t.sibling}function qo(e,t,r,n,s){var a=Js();return a=null===a?null:{parent:Us._currentValue,pool:a},t.memoizedState={baseLanes:r,cachePool:a},null!==e&&Ys(0,null),Aa(),za(t),null!==e&&Ps(e,t,n,!0),t.childLanes=s,null}function Bo(e,t){return(t=tl({mode:t.mode,children:t.children},e.mode)).ref=e.ref,e.child=t,t.return=e,t}function Ho(e,t,r){return ma(t,e.child,null,r),(e=Bo(t,t.pendingProps)).flags|=2,Ua(t),t.memoizedState=null,e}function Vo(e,t){var r=t.ref;if(null===r)null!==e&&null!==e.ref&&(t.flags|=4194816);else{if("function"!=typeof r&&"object"!=typeof r)throw Error(n(284));null!==e&&e.ref===r||(t.flags|=4194816)}}function Wo(e,t,r,n,s){return Rs(t),r=ri(e,t,r,n,void 0,s),n=ii(),null===e||$o?(ps&&n&&ls(t),t.flags|=1,Do(e,t,r,s),t.child):(oi(e,t,s),il(e,t,s))}function Qo(e,t,r,n,s,a){return Rs(t),t.updateQueue=null,r=si(t,n,r,s),ni(e),n=ii(),null===e||$o?(ps&&n&&ls(t),t.flags|=1,Do(e,t,r,a),t.child):(oi(e,t,a),il(e,t,a))}function Go(e,t,r,n,s){if(Rs(t),null===t.stateNode){var a=zn,i=r.contextType;"object"==typeof i&&null!==i&&(a=Is(i)),a=new r(n,a),t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,a.updater=jo,t.stateNode=a,a._reactInternals=t,(a=t.stateNode).props=n,a.state=t.memoizedState,a.refs={},va(t),i=r.contextType,a.context="object"==typeof i&&null!==i?Is(i):zn,a.state=t.memoizedState,"function"==typeof(i=r.getDerivedStateFromProps)&&(wo(t,r,i,n),a.state=t.memoizedState),"function"==typeof r.getDerivedStateFromProps||"function"==typeof a.getSnapshotBeforeUpdate||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||(i=a.state,"function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),i!==a.state&&jo.enqueueReplaceState(a,a.state,null),Sa(t,n,a,s),Na(),a.state=t.memoizedState),"function"==typeof a.componentDidMount&&(t.flags|=4194308),n=!0}else if(null===e){a=t.stateNode;var o=t.memoizedProps,l=No(r,o);a.props=l;var c=a.context,u=r.contextType;i=zn,"object"==typeof u&&null!==u&&(i=Is(u));var d=r.getDerivedStateFromProps;u="function"==typeof d||"function"==typeof a.getSnapshotBeforeUpdate,o=t.pendingProps!==o,u||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(o||c!==i)&&_o(t,a,n,i),ba=!1;var h=t.memoizedState;a.state=h,Sa(t,n,a,s),Na(),c=t.memoizedState,o||h!==c||ba?("function"==typeof d&&(wo(t,r,d,n),c=t.memoizedState),(l=ba||ko(t,r,l,n,h,c,i))?(u||"function"!=typeof a.UNSAFE_componentWillMount&&"function"!=typeof a.componentWillMount||("function"==typeof a.componentWillMount&&a.componentWillMount(),"function"==typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"==typeof a.componentDidMount&&(t.flags|=4194308)):("function"==typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=c),a.props=n,a.state=c,a.context=i,n=l):("function"==typeof a.componentDidMount&&(t.flags|=4194308),n=!1)}else{a=t.stateNode,ya(e,t),u=No(r,i=t.memoizedProps),a.props=u,d=t.pendingProps,h=a.context,c=r.contextType,l=zn,"object"==typeof c&&null!==c&&(l=Is(c)),(c="function"==typeof(o=r.getDerivedStateFromProps)||"function"==typeof a.getSnapshotBeforeUpdate)||"function"!=typeof a.UNSAFE_componentWillReceiveProps&&"function"!=typeof a.componentWillReceiveProps||(i!==d||h!==l)&&_o(t,a,n,l),ba=!1,h=t.memoizedState,a.state=h,Sa(t,n,a,s),Na();var p=t.memoizedState;i!==d||h!==p||ba||null!==e&&null!==e.dependencies&&As(e.dependencies)?("function"==typeof o&&(wo(t,r,o,n),p=t.memoizedState),(u=ba||ko(t,r,u,n,h,p,l)||null!==e&&null!==e.dependencies&&As(e.dependencies))?(c||"function"!=typeof a.UNSAFE_componentWillUpdate&&"function"!=typeof a.componentWillUpdate||("function"==typeof a.componentWillUpdate&&a.componentWillUpdate(n,p,l),"function"==typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(n,p,l)),"function"==typeof a.componentDidUpdate&&(t.flags|=4),"function"==typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!=typeof a.componentDidUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=p),a.props=n,a.state=p,a.context=l,n=u):("function"!=typeof a.componentDidUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),"function"!=typeof a.getSnapshotBeforeUpdate||i===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),n=!1)}return a=n,Vo(e,t),n=!!(128&t.flags),a||n?(a=t.stateNode,r=n&&"function"!=typeof r.getDerivedStateFromError?null:a.render(),t.flags|=1,null!==e&&n?(t.child=ma(t,e.child,null,s),t.child=ma(t,null,r,s)):Do(e,t,r,s),t.memoizedState=a.state,e=t.child):e=il(e,t,s),e}function Ko(e,t,r,n){return ws(),t.flags|=256,Do(e,t,r,n),t.child}var Jo={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Yo(e){return{baseLanes:e,cachePool:Xs()}}function Xo(e,t,r){return e=null!==e?e.childLanes&~r:0,t&&(e|=Tc),e}function Zo(e,t,r){var s,a=t.pendingProps,i=!1,o=!!(128&t.flags);if((s=o)||(s=(null===e||null!==e.memoizedState)&&!!(2&Fa.current)),s&&(i=!0,t.flags&=-129),s=!!(32&t.flags),t.flags&=-33,null===e){if(ps){if(i?Da(t):Ma(),(e=hs)?null!==(e=null!==(e=Ad(e,ms))&&"&"!==e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ns?{id:ss,overflow:as}:null,retryLane:536870912,hydrationErrors:null},(r=Qn(e)).return=t,t.child=r,ds=t,hs=null):e=null,null===e)throw bs(t);return Id(e)?t.lanes=32:t.lanes=536870912,null}var l=a.children;return a=a.fallback,i?(Ma(),l=tl({mode:"hidden",children:l},i=t.mode),a=Vn(a,i,r,null),l.return=t,a.return=t,l.sibling=a,t.child=l,(a=t.child).memoizedState=Yo(r),a.childLanes=Xo(e,s,r),t.memoizedState=Jo,Fo(null,a)):(Da(t),el(t,l))}var c=e.memoizedState;if(null!==c&&null!==(l=c.dehydrated)){if(o)256&t.flags?(Da(t),t.flags&=-257,t=rl(e,t,r)):null!==t.memoizedState?(Ma(),t.child=e.child,t.flags|=128,t=null):(Ma(),l=a.fallback,i=t.mode,a=tl({mode:"visible",children:a.children},i),(l=Vn(l,i,r,null)).flags|=2,a.return=t,l.return=t,a.sibling=l,t.child=a,ma(t,e.child,null,r),(a=t.child).memoizedState=Yo(r),a.childLanes=Xo(e,s,r),t.memoizedState=Jo,t=Fo(null,a));else if(Da(t),Id(l)){if(s=l.nextSibling&&l.nextSibling.dataset)var u=s.dgst;s=u,(a=Error(n(419))).stack="",a.digest=s,ks({value:a,source:null,stack:null}),t=rl(e,t,r)}else if($o||Ps(e,t,r,!1),s=0!==(r&e.childLanes),$o||s){if(null!==(s=gc)&&(0!==(a=Ie(s,r))&&a!==c.retryLane))throw c.retryLane=a,$n(e,a),Jc(s,e,a),Io;Rd(l)||lu(),t=rl(e,t,r)}else Rd(l)?(t.flags|=192,t.child=e.child,t=null):(e=c.treeContext,hs=$d(l.nextSibling),ds=t,ps=!0,fs=null,ms=!1,null!==e&&us(t,e),(t=el(t,a.children)).flags|=4096);return t}return i?(Ma(),l=a.fallback,i=t.mode,u=(c=e.child).sibling,(a=qn(c,{mode:"hidden",children:a.children})).subtreeFlags=65011712&c.subtreeFlags,null!==u?l=qn(u,l):(l=Vn(l,i,r,null)).flags|=2,l.return=t,a.return=t,a.sibling=l,t.child=a,Fo(null,a),a=t.child,null===(l=e.child.memoizedState)?l=Yo(r):(null!==(i=l.cachePool)?(c=Us._currentValue,i=i.parent!==c?{parent:c,pool:c}:i):i=Xs(),l={baseLanes:l.baseLanes|r,cachePool:i}),a.memoizedState=l,a.childLanes=Xo(e,s,r),t.memoizedState=Jo,Fo(e.child,a)):(Da(t),e=(r=e.child).sibling,(r=qn(r,{mode:"visible",children:a.children})).return=t,r.sibling=null,null!==e&&(null===(s=t.deletions)?(t.deletions=[e],t.flags|=16):s.push(e)),t.child=r,t.memoizedState=null,r)}function el(e,t){return(t=tl({mode:"visible",children:t},e.mode)).return=e,e.child=t}function tl(e,t){return(e=Un(22,e,null,t)).lanes=0,e}function rl(e,t,r){return ma(t,e.child,null,r),(e=el(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function nl(e,t,r){e.lanes|=t;var n=e.alternate;null!==n&&(n.lanes|=t),Ts(e.return,t,r)}function sl(e,t,r,n,s,a){var i=e.memoizedState;null===i?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:r,tailMode:s,treeForkCount:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=r,i.tailMode=s,i.treeForkCount=a)}function al(e,t,r){var n=t.pendingProps,s=n.revealOrder,a=n.tail;n=n.children;var i=Fa.current,o=!!(2&i);if(o?(i=1&i|2,t.flags|=128):i&=1,z(Fa,i),Do(e,t,n,r),n=ps?es:0,!o&&null!==e&&128&e.flags)e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&nl(e,r,t);else if(19===e.tag)nl(e,r,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(s){case"forwards":for(r=t.child,s=null;null!==r;)null!==(e=r.alternate)&&null===qa(e)&&(s=r),r=r.sibling;null===(r=s)?(s=t.child,t.child=null):(s=r.sibling,r.sibling=null),sl(t,!1,s,r,a,n);break;case"backwards":case"unstable_legacy-backwards":for(r=null,s=t.child,t.child=null;null!==s;){if(null!==(e=s.alternate)&&null===qa(e)){t.child=s;break}e=s.sibling,s.sibling=r,r=s,s=e}sl(t,!0,r,null,a,n);break;case"together":sl(t,!1,null,null,void 0,n);break;default:t.memoizedState=null}return t.child}function il(e,t,r){if(null!==e&&(t.dependencies=e.dependencies),Sc|=t.lanes,0===(r&t.childLanes)){if(null===e)return null;if(Ps(e,t,r,!1),0===(r&t.childLanes))return null}if(null!==e&&t.child!==e.child)throw Error(n(153));if(null!==t.child){for(r=qn(e=t.child,e.pendingProps),t.child=r,r.return=t;null!==e.sibling;)e=e.sibling,(r=r.sibling=qn(e,e.pendingProps)).return=t;r.sibling=null}return t.child}function ol(e,t){return 0!==(e.lanes&t)||!(null===(e=e.dependencies)||!As(e))}function ll(e,t,r){if(null!==e)if(e.memoizedProps!==t.pendingProps)$o=!0;else{if(!(ol(e,r)||128&t.flags))return $o=!1,function(e,t,r){switch(t.tag){case 3:V(t,t.stateNode.containerInfo),Es(0,Us,e.memoizedState.cache),ws();break;case 27:case 5:Q(t);break;case 4:V(t,t.stateNode.containerInfo);break;case 10:Es(0,t.type,t.memoizedProps.value);break;case 31:if(null!==t.memoizedState)return t.flags|=128,La(t),null;break;case 13:var n=t.memoizedState;if(null!==n)return null!==n.dehydrated?(Da(t),t.flags|=128,null):0!==(r&t.child.childLanes)?Zo(e,t,r):(Da(t),null!==(e=il(e,t,r))?e.sibling:null);Da(t);break;case 19:var s=!!(128&e.flags);if((n=0!==(r&t.childLanes))||(Ps(e,t,r,!1),n=0!==(r&t.childLanes)),s){if(n)return al(e,t,r);t.flags|=128}if(null!==(s=t.memoizedState)&&(s.rendering=null,s.tail=null,s.lastEffect=null),z(Fa,Fa.current),n)break;return null;case 22:return t.lanes=0,Uo(e,t,r,t.pendingProps);case 24:Es(0,Us,e.memoizedState.cache)}return il(e,t,r)}(e,t,r);$o=!!(131072&e.flags)}else $o=!1,ps&&1048576&t.flags&&os(t,es,t.index);switch(t.lanes=0,t.tag){case 16:e:{var s=t.pendingProps;if(e=aa(t.elementType),t.type=e,"function"!=typeof e){if(null!=e){var a=e.$$typeof;if(a===y){t.tag=11,t=Lo(null,t,e,s,r);break e}if(a===j){t.tag=14,t=zo(null,t,e,s,r);break e}}throw t=T(e)||e,Error(n(306,t,""))}Fn(e)?(s=No(e,s),t.tag=1,t=Go(null,t,e,s,r)):(t.tag=0,t=Wo(null,t,e,s,r))}return t;case 0:return Wo(e,t,t.type,t.pendingProps,r);case 1:return Go(e,t,s=t.type,a=No(s,t.pendingProps),r);case 3:e:{if(V(t,t.stateNode.containerInfo),null===e)throw Error(n(387));s=t.pendingProps;var i=t.memoizedState;a=i.element,ya(e,t),Sa(t,s,null,r);var o=t.memoizedState;if(s=o.cache,Es(0,Us,s),s!==i.cache&&Os(t,[Us],r,!0),Na(),s=o.element,i.isDehydrated){if(i={element:s,isDehydrated:!1,cache:o.cache},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Ko(e,t,s,r);break e}if(s!==a){ks(a=Jn(Error(n(424)),t)),t=Ko(e,t,s,r);break e}if(9===(e=t.stateNode.containerInfo).nodeType)e=e.body;else e="HTML"===e.nodeName?e.ownerDocument.body:e;for(hs=$d(e.firstChild),ds=t,ps=!0,fs=null,ms=!0,r=ga(t,null,s,r),t.child=r;r;)r.flags=-3&r.flags|4096,r=r.sibling}else{if(ws(),s===a){t=il(e,t,r);break e}Do(e,t,s,r)}t=t.child}return t;case 26:return Vo(e,t),null===e?(r=Qd(t.type,null,t.pendingProps,null))?t.memoizedState=r:ps||(r=t.type,e=t.pendingProps,(s=vd(B.current).createElement(r))[Ue]=t,s[Fe]=e,fd(s,r,e),rt(s),t.stateNode=s):t.memoizedState=Qd(t.type,e.memoizedProps,t.pendingProps,e.memoizedState),null;case 27:return Q(t),null===e&&ps&&(s=t.stateNode=Md(t.type,t.pendingProps,B.current),ds=t,ms=!0,a=hs,Cd(t.type)?(Dd=a,hs=$d(s.firstChild)):hs=a),Do(e,t,t.pendingProps.children,r),Vo(e,t),null===e&&(t.flags|=4194304),t.child;case 5:return null===e&&ps&&((a=s=hs)&&(null!==(s=function(e,t,r,n){for(;1===e.nodeType;){var s=r;if(e.nodeName.toLowerCase()!==t.toLowerCase()){if(!n&&("INPUT"!==e.nodeName||"hidden"!==e.type))break}else if(n){if(!e[Ke])switch(t){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if("stylesheet"===(a=e.getAttribute("rel"))&&e.hasAttribute("data-precedence"))break;if(a!==s.rel||e.getAttribute("href")!==(null==s.href||""===s.href?null:s.href)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin)||e.getAttribute("title")!==(null==s.title?null:s.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(((a=e.getAttribute("src"))!==(null==s.src?null:s.src)||e.getAttribute("type")!==(null==s.type?null:s.type)||e.getAttribute("crossorigin")!==(null==s.crossOrigin?null:s.crossOrigin))&&a&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else{if("input"!==t||"hidden"!==e.type)return e;var a=null==s.name?null:""+s.name;if("hidden"===s.type&&e.getAttribute("name")===a)return e}if(null===(e=$d(e.nextSibling)))break}return null}(s,t.type,t.pendingProps,ms))?(t.stateNode=s,ds=t,hs=$d(s.firstChild),ms=!1,a=!0):a=!1),a||bs(t)),Q(t),a=t.type,i=t.pendingProps,o=null!==e?e.memoizedProps:null,s=i.children,wd(a,i)?s=null:null!==o&&wd(a,o)&&(t.flags|=32),null!==t.memoizedState&&(a=ri(e,t,ai,null,null,r),hh._currentValue=a),Vo(e,t),Do(e,t,s,r),t.child;case 6:return null===e&&ps&&((e=r=hs)&&(null!==(r=function(e,t,r){if(""===t)return null;for(;3!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!r)return null;if(null===(e=$d(e.nextSibling)))return null}return e}(r,t.pendingProps,ms))?(t.stateNode=r,ds=t,hs=null,e=!0):e=!1),e||bs(t)),null;case 13:return Zo(e,t,r);case 4:return V(t,t.stateNode.containerInfo),s=t.pendingProps,null===e?t.child=ma(t,null,s,r):Do(e,t,s,r),t.child;case 11:return Lo(e,t,t.type,t.pendingProps,r);case 7:return Do(e,t,t.pendingProps,r),t.child;case 8:case 12:return Do(e,t,t.pendingProps.children,r),t.child;case 10:return s=t.pendingProps,Es(0,t.type,s.value),Do(e,t,s.children,r),t.child;case 9:return a=t.type._context,s=t.pendingProps.children,Rs(t),s=s(a=Is(a)),t.flags|=1,Do(e,t,s,r),t.child;case 14:return zo(e,t,t.type,t.pendingProps,r);case 15:return Mo(e,t,t.type,t.pendingProps,r);case 19:return al(e,t,r);case 31:return function(e,t,r){var s=t.pendingProps,a=!!(128&t.flags);if(t.flags&=-129,null===e){if(ps){if("hidden"===s.mode)return e=Bo(t,s),t.lanes=536870912,Fo(null,e);if(La(t),(e=hs)?null!==(e=null!==(e=Ad(e,ms))&&"&"===e.data?e:null)&&(t.memoizedState={dehydrated:e,treeContext:null!==ns?{id:ss,overflow:as}:null,retryLane:536870912,hydrationErrors:null},(r=Qn(e)).return=t,t.child=r,ds=t,hs=null):e=null,null===e)throw bs(t);return t.lanes=536870912,null}return Bo(t,s)}var i=e.memoizedState;if(null!==i){var o=i.dehydrated;if(La(t),a)if(256&t.flags)t.flags&=-257,t=Ho(e,t,r);else{if(null===t.memoizedState)throw Error(n(558));t.child=e.child,t.flags|=128,t=null}else if($o||Ps(e,t,r,!1),a=0!==(r&e.childLanes),$o||a){if(null!==(s=gc)&&0!==(o=Ie(s,r))&&o!==i.retryLane)throw i.retryLane=o,$n(e,o),Jc(s,e,o),Io;lu(),t=Ho(e,t,r)}else e=i.treeContext,hs=$d(o.nextSibling),ds=t,ps=!0,fs=null,ms=!1,null!==e&&us(t,e),(t=Bo(t,s)).flags|=4096;return t}return(e=qn(e.child,{mode:s.mode,children:s.children})).ref=t.ref,t.child=e,e.return=t,e}(e,t,r);case 22:return Uo(e,t,r,t.pendingProps);case 24:return Rs(t),s=Is(Us),null===e?(null===(a=Js())&&(a=gc,i=Fs(),a.pooledCache=i,i.refCount++,null!==i&&(a.pooledCacheLanes|=r),a=i),t.memoizedState={parent:s,cache:a},va(t),Es(0,Us,a)):(0!==(e.lanes&r)&&(ya(e,t),Sa(t,null,null,r),Na()),a=e.memoizedState,i=t.memoizedState,a.parent!==s?(a={parent:s,cache:s},t.memoizedState=a,0===t.lanes&&(t.memoizedState=t.updateQueue.baseState=a),Es(0,Us,s)):(s=i.cache,Es(0,Us,s),s!==a.cache&&Os(t,[Us],r,!0))),Do(e,t,t.pendingProps.children,r),t.child;case 29:throw t.pendingProps}throw Error(n(156,t.tag))}function cl(e){e.flags|=4}function ul(e,t,r,n,s){if((t=!!(32&e.mode))&&(t=!1),t){if(e.flags|=16777216,(335544128&s)===s)if(e.stateNode.complete)e.flags|=8192;else{if(!au())throw ia=ra,ea;e.flags|=8192}}else e.flags&=-16777217}function dl(e,t){if("stylesheet"!==t.type||4&t.state.loading)e.flags&=-16777217;else if(e.flags|=16777216,!ih(t)){if(!au())throw ia=ra,ea;e.flags|=8192}}function hl(e,t){null!==t&&(e.flags|=4),16384&e.flags&&(t=22!==e.tag?Te():536870912,e.lanes|=t,Oc|=t)}function pl(e,t){if(!ps)switch(e.tailMode){case"hidden":t=e.tail;for(var r=null;null!==t;)null!==t.alternate&&(r=t),t=t.sibling;null===r?e.tail=null:r.sibling=null;break;case"collapsed":r=e.tail;for(var n=null;null!==r;)null!==r.alternate&&(n=r),r=r.sibling;null===n?t||null===e.tail?e.tail=null:e.tail.sibling=null:n.sibling=null}}function fl(e){var t=null!==e.alternate&&e.alternate.child===e.child,r=0,n=0;if(t)for(var s=e.child;null!==s;)r|=s.lanes|s.childLanes,n|=65011712&s.subtreeFlags,n|=65011712&s.flags,s.return=e,s=s.sibling;else for(s=e.child;null!==s;)r|=s.lanes|s.childLanes,n|=s.subtreeFlags,n|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=n,e.childLanes=r,t}function ml(e,t,r){var s=t.pendingProps;switch(cs(t),t.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:case 1:return fl(t),null;case 3:return r=t.stateNode,s=null,null!==e&&(s=e.memoizedState.cache),t.memoizedState.cache!==s&&(t.flags|=2048),Cs(Us),W(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(xs(t)?cl(t):null===e||e.memoizedState.isDehydrated&&!(256&t.flags)||(t.flags|=1024,js())),fl(t),null;case 26:var a=t.type,i=t.memoizedState;return null===e?(cl(t),null!==i?(fl(t),dl(t,i)):(fl(t),ul(t,a,0,0,r))):i?i!==e.memoizedState?(cl(t),fl(t),dl(t,i)):(fl(t),t.flags&=-16777217):((e=e.memoizedProps)!==s&&cl(t),fl(t),ul(t,a,0,0,r)),null;case 27:if(G(t),r=B.current,a=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==s&&cl(t);else{if(!s){if(null===t.stateNode)throw Error(n(166));return fl(t),null}e=F.current,xs(t)?vs(t):(e=Md(a,s,r),t.stateNode=e,cl(t))}return fl(t),null;case 5:if(G(t),a=t.type,null!==e&&null!=t.stateNode)e.memoizedProps!==s&&cl(t);else{if(!s){if(null===t.stateNode)throw Error(n(166));return fl(t),null}if(i=F.current,xs(t))vs(t);else{var o=vd(B.current);switch(i){case 1:i=o.createElementNS("http://www.w3.org/2000/svg",a);break;case 2:i=o.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;default:switch(a){case"svg":i=o.createElementNS("http://www.w3.org/2000/svg",a);break;case"math":i=o.createElementNS("http://www.w3.org/1998/Math/MathML",a);break;case"script":(i=o.createElement("div")).innerHTML="<script><\/script>",i=i.removeChild(i.firstChild);break;case"select":i="string"==typeof s.is?o.createElement("select",{is:s.is}):o.createElement("select"),s.multiple?i.multiple=!0:s.size&&(i.size=s.size);break;default:i="string"==typeof s.is?o.createElement(a,{is:s.is}):o.createElement(a)}}i[Ue]=t,i[Fe]=s;e:for(o=t.child;null!==o;){if(5===o.tag||6===o.tag)i.appendChild(o.stateNode);else if(4!==o.tag&&27!==o.tag&&null!==o.child){o.child.return=o,o=o.child;continue}if(o===t)break e;for(;null===o.sibling;){if(null===o.return||o.return===t)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}t.stateNode=i;e:switch(fd(i,a,s),a){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&cl(t)}}return fl(t),ul(t,t.type,null===e||e.memoizedProps,t.pendingProps,r),null;case 6:if(e&&null!=t.stateNode)e.memoizedProps!==s&&cl(t);else{if("string"!=typeof s&&null===t.stateNode)throw Error(n(166));if(e=B.current,xs(t)){if(e=t.stateNode,r=t.memoizedProps,s=null,null!==(a=ds))switch(a.tag){case 27:case 5:s=a.memoizedProps}e[Ue]=t,(e=!!(e.nodeValue===r||null!==s&&!0===s.suppressHydrationWarning||dd(e.nodeValue,r)))||bs(t,!0)}else(e=vd(e).createTextNode(s))[Ue]=t,t.stateNode=e}return fl(t),null;case 31:if(r=t.memoizedState,null===e||null!==e.memoizedState){if(s=xs(t),null!==r){if(null===e){if(!s)throw Error(n(318));if(!(e=null!==(e=t.memoizedState)?e.dehydrated:null))throw Error(n(557));e[Ue]=t}else ws(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;fl(t),e=!1}else r=js(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=r),e=!0;if(!e)return 256&t.flags?(Ua(t),t):(Ua(t),null);if(128&t.flags)throw Error(n(558))}return fl(t),null;case 13:if(s=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(a=xs(t),null!==s&&null!==s.dehydrated){if(null===e){if(!a)throw Error(n(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(n(317));a[Ue]=t}else ws(),!(128&t.flags)&&(t.memoizedState=null),t.flags|=4;fl(t),a=!1}else a=js(),null!==e&&null!==e.memoizedState&&(e.memoizedState.hydrationErrors=a),a=!0;if(!a)return 256&t.flags?(Ua(t),t):(Ua(t),null)}return Ua(t),128&t.flags?(t.lanes=r,t):(r=null!==s,e=null!==e&&null!==e.memoizedState,r&&(a=null,null!==(s=t.child).alternate&&null!==s.alternate.memoizedState&&null!==s.alternate.memoizedState.cachePool&&(a=s.alternate.memoizedState.cachePool.pool),i=null,null!==s.memoizedState&&null!==s.memoizedState.cachePool&&(i=s.memoizedState.cachePool.pool),i!==a&&(s.flags|=2048)),r!==e&&r&&(t.child.flags|=8192),hl(t,t.updateQueue),fl(t),null);case 4:return W(),null===e&&td(t.stateNode.containerInfo),fl(t),null;case 10:return Cs(t.type),fl(t),null;case 19:if(L(Fa),null===(s=t.memoizedState))return fl(t),null;if(a=!!(128&t.flags),null===(i=s.rendering))if(a)pl(s,!1);else{if(0!==Nc||null!==e&&128&e.flags)for(e=t.child;null!==e;){if(null!==(i=qa(e))){for(t.flags|=128,pl(s,!1),e=i.updateQueue,t.updateQueue=e,hl(t,e),t.subtreeFlags=0,e=r,r=t.child;null!==r;)Bn(r,e),r=r.sibling;return z(Fa,1&Fa.current|2),ps&&is(t,s.treeForkCount),t.child}e=e.sibling}null!==s.tail&&ae()>Dc&&(t.flags|=128,a=!0,pl(s,!1),t.lanes=4194304)}else{if(!a)if(null!==(e=qa(i))){if(t.flags|=128,a=!0,e=e.updateQueue,t.updateQueue=e,hl(t,e),pl(s,!0),null===s.tail&&"hidden"===s.tailMode&&!i.alternate&&!ps)return fl(t),null}else 2*ae()-s.renderingStartTime>Dc&&536870912!==r&&(t.flags|=128,a=!0,pl(s,!1),t.lanes=4194304);s.isBackwards?(i.sibling=t.child,t.child=i):(null!==(e=s.last)?e.sibling=i:t.child=i,s.last=i)}return null!==s.tail?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ae(),e.sibling=null,r=Fa.current,z(Fa,a?1&r|2:1&r),ps&&is(t,s.treeForkCount),e):(fl(t),null);case 22:case 23:return Ua(t),Ra(),s=null!==t.memoizedState,null!==e?null!==e.memoizedState!==s&&(t.flags|=8192):s&&(t.flags|=8192),s?!!(536870912&r)&&!(128&t.flags)&&(fl(t),6&t.subtreeFlags&&(t.flags|=8192)):fl(t),null!==(r=t.updateQueue)&&hl(t,r.retryQueue),r=null,null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(r=e.memoizedState.cachePool.pool),s=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(s=t.memoizedState.cachePool.pool),s!==r&&(t.flags|=2048),null!==e&&L(Ks),null;case 24:return r=null,null!==e&&(r=e.memoizedState.cache),t.memoizedState.cache!==r&&(t.flags|=2048),Cs(Us),fl(t),null;case 25:case 30:return null}throw Error(n(156,t.tag))}function gl(e,t){switch(cs(t),t.tag){case 1:return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Cs(Us),W(),65536&(e=t.flags)&&!(128&e)?(t.flags=-65537&e|128,t):null;case 26:case 27:case 5:return G(t),null;case 31:if(null!==t.memoizedState){if(Ua(t),null===t.alternate)throw Error(n(340));ws()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 13:if(Ua(t),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(n(340));ws()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return L(Fa),null;case 4:return W(),null;case 10:return Cs(t.type),null;case 22:case 23:return Ua(t),Ra(),null!==e&&L(Ks),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 24:return Cs(Us),null;default:return null}}function bl(e,t){switch(cs(t),t.tag){case 3:Cs(Us),W();break;case 26:case 27:case 5:G(t);break;case 4:W();break;case 31:null!==t.memoizedState&&Ua(t);break;case 13:Ua(t);break;case 19:L(Fa);break;case 10:Cs(t.type);break;case 22:case 23:Ua(t),Ra(),null!==e&&L(Ks);break;case 24:Cs(Us)}}function vl(e,t){try{var r=t.updateQueue,n=null!==r?r.lastEffect:null;if(null!==n){var s=n.next;r=s;do{if((r.tag&e)===e){n=void 0;var a=r.create,i=r.inst;n=a(),i.destroy=n}r=r.next}while(r!==s)}}catch(o){Nu(t,t.return,o)}}function yl(e,t,r){try{var n=t.updateQueue,s=null!==n?n.lastEffect:null;if(null!==s){var a=s.next;n=a;do{if((n.tag&e)===e){var i=n.inst,o=i.destroy;if(void 0!==o){i.destroy=void 0,s=t;var l=r,c=o;try{c()}catch(u){Nu(s,l,u)}}}n=n.next}while(n!==a)}}catch(u){Nu(t,t.return,u)}}function xl(e){var t=e.updateQueue;if(null!==t){var r=e.stateNode;try{Ca(t,r)}catch(n){Nu(e,e.return,n)}}}function wl(e,t,r){r.props=No(e.type,e.memoizedProps),r.state=e.memoizedState;try{r.componentWillUnmount()}catch(n){Nu(e,t,n)}}function jl(e,t){try{var r=e.ref;if(null!==r){switch(e.tag){case 26:case 27:case 5:var n=e.stateNode;break;default:n=e.stateNode}"function"==typeof r?e.refCleanup=r(n):r.current=n}}catch(s){Nu(e,t,s)}}function kl(e,t){var r=e.ref,n=e.refCleanup;if(null!==r)if("function"==typeof n)try{n()}catch(s){Nu(e,t,s)}finally{e.refCleanup=null,null!=(e=e.alternate)&&(e.refCleanup=null)}else if("function"==typeof r)try{r(null)}catch(a){Nu(e,t,a)}else r.current=null}function _l(e){var t=e.type,r=e.memoizedProps,n=e.stateNode;try{e:switch(t){case"button":case"input":case"select":case"textarea":r.autoFocus&&n.focus();break e;case"img":r.src?n.src=r.src:r.srcSet&&(n.srcset=r.srcSet)}}catch(s){Nu(e,e.return,s)}}function Nl(e,t,r){try{var s=e.stateNode;!function(e,t,r,s){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var a=null,i=null,o=null,l=null,c=null,u=null,d=null;for(f in r){var h=r[f];if(r.hasOwnProperty(f)&&null!=h)switch(f){case"checked":case"value":break;case"defaultValue":c=h;default:s.hasOwnProperty(f)||hd(e,t,f,null,s,h)}}for(var p in s){var f=s[p];if(h=r[p],s.hasOwnProperty(p)&&(null!=f||null!=h))switch(p){case"type":i=f;break;case"name":a=f;break;case"checked":u=f;break;case"defaultChecked":d=f;break;case"value":o=f;break;case"defaultValue":l=f;break;case"children":case"dangerouslySetInnerHTML":if(null!=f)throw Error(n(137,t));break;default:f!==h&&hd(e,t,p,f,s,h)}}return void xt(e,o,l,c,u,d,i,a);case"select":for(i in f=o=l=p=null,r)if(c=r[i],r.hasOwnProperty(i)&&null!=c)switch(i){case"value":break;case"multiple":f=c;default:s.hasOwnProperty(i)||hd(e,t,i,null,s,c)}for(a in s)if(i=s[a],c=r[a],s.hasOwnProperty(a)&&(null!=i||null!=c))switch(a){case"value":p=i;break;case"defaultValue":l=i;break;case"multiple":o=i;default:i!==c&&hd(e,t,a,i,s,c)}return t=l,r=o,s=f,void(null!=p?kt(e,!!r,p,!1):!!s!=!!r&&(null!=t?kt(e,!!r,t,!0):kt(e,!!r,r?[]:"",!1)));case"textarea":for(l in f=p=null,r)if(a=r[l],r.hasOwnProperty(l)&&null!=a&&!s.hasOwnProperty(l))switch(l){case"value":case"children":break;default:hd(e,t,l,null,s,a)}for(o in s)if(a=s[o],i=r[o],s.hasOwnProperty(o)&&(null!=a||null!=i))switch(o){case"value":p=a;break;case"defaultValue":f=a;break;case"children":break;case"dangerouslySetInnerHTML":if(null!=a)throw Error(n(91));break;default:a!==i&&hd(e,t,o,a,s,i)}return void _t(e,p,f);case"option":for(var m in r)if(p=r[m],r.hasOwnProperty(m)&&null!=p&&!s.hasOwnProperty(m))if("selected"===m)e.selected=!1;else hd(e,t,m,null,s,p);for(c in s)if(p=s[c],f=r[c],s.hasOwnProperty(c)&&p!==f&&(null!=p||null!=f))if("selected"===c)e.selected=p&&"function"!=typeof p&&"symbol"!=typeof p;else hd(e,t,c,p,s,f);return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var g in r)p=r[g],r.hasOwnProperty(g)&&null!=p&&!s.hasOwnProperty(g)&&hd(e,t,g,null,s,p);for(u in s)if(p=s[u],f=r[u],s.hasOwnProperty(u)&&p!==f&&(null!=p||null!=f))switch(u){case"children":case"dangerouslySetInnerHTML":if(null!=p)throw Error(n(137,t));break;default:hd(e,t,u,p,s,f)}return;default:if(Ot(t)){for(var b in r)p=r[b],r.hasOwnProperty(b)&&void 0!==p&&!s.hasOwnProperty(b)&&pd(e,t,b,void 0,s,p);for(d in s)p=s[d],f=r[d],!s.hasOwnProperty(d)||p===f||void 0===p&&void 0===f||pd(e,t,d,p,s,f);return}}for(var v in r)p=r[v],r.hasOwnProperty(v)&&null!=p&&!s.hasOwnProperty(v)&&hd(e,t,v,null,s,p);for(h in s)p=s[h],f=r[h],!s.hasOwnProperty(h)||p===f||null==p&&null==f||hd(e,t,h,p,s,f)}(s,e.type,r,t),s[Fe]=t}catch(a){Nu(e,e.return,a)}}function Sl(e){return 5===e.tag||3===e.tag||26===e.tag||27===e.tag&&Cd(e.type)||4===e.tag}function El(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||Sl(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(27===e.tag&&Cd(e.type))continue e;if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function Cl(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?(9===r.nodeType?r.body:"HTML"===r.nodeName?r.ownerDocument.body:r).insertBefore(e,t):((t=9===r.nodeType?r.body:"HTML"===r.nodeName?r.ownerDocument.body:r).appendChild(e),null!=(r=r._reactRootContainer)||null!==t.onclick||(t.onclick=It));else if(4!==n&&(27===n&&Cd(e.type)&&(r=e.stateNode,t=null),null!==(e=e.child)))for(Cl(e,t,r),e=e.sibling;null!==e;)Cl(e,t,r),e=e.sibling}function Tl(e,t,r){var n=e.tag;if(5===n||6===n)e=e.stateNode,t?r.insertBefore(e,t):r.appendChild(e);else if(4!==n&&(27===n&&Cd(e.type)&&(r=e.stateNode),null!==(e=e.child)))for(Tl(e,t,r),e=e.sibling;null!==e;)Tl(e,t,r),e=e.sibling}function Ol(e){var t=e.stateNode,r=e.memoizedProps;try{for(var n=e.type,s=t.attributes;s.length;)t.removeAttributeNode(s[0]);fd(t,n,r),t[Ue]=e,t[Fe]=r}catch(a){Nu(e,e.return,a)}}var Pl=!1,Al=!1,Rl=!1,Il="function"==typeof WeakSet?WeakSet:Set,$l=null;function Dl(e,t,r){var n=r.flags;switch(r.tag){case 0:case 11:case 15:Jl(e,r),4&n&&vl(5,r);break;case 1:if(Jl(e,r),4&n)if(e=r.stateNode,null===t)try{e.componentDidMount()}catch(i){Nu(r,r.return,i)}else{var s=No(r.type,t.memoizedProps);t=t.memoizedState;try{e.componentDidUpdate(s,t,e.__reactInternalSnapshotBeforeUpdate)}catch(o){Nu(r,r.return,o)}}64&n&&xl(r),512&n&&jl(r,r.return);break;case 3:if(Jl(e,r),64&n&&null!==(e=r.updateQueue)){if(t=null,null!==r.child)switch(r.child.tag){case 27:case 5:case 1:t=r.child.stateNode}try{Ca(e,t)}catch(i){Nu(r,r.return,i)}}break;case 27:null===t&&4&n&&Ol(r);case 26:case 5:Jl(e,r),null===t&&4&n&&_l(r),512&n&&jl(r,r.return);break;case 12:Jl(e,r);break;case 31:Jl(e,r),4&n&&ql(e,r);break;case 13:Jl(e,r),4&n&&Bl(e,r),64&n&&(null!==(e=r.memoizedState)&&(null!==(e=e.dehydrated)&&function(e,t){var r=e.ownerDocument;if("$~"===e.data)e._reactRetry=t;else if("$?"!==e.data||"loading"!==r.readyState)t();else{var n=function(){t(),r.removeEventListener("DOMContentLoaded",n)};r.addEventListener("DOMContentLoaded",n),e._reactRetry=n}}(e,r=Tu.bind(null,r))));break;case 22:if(!(n=null!==r.memoizedState||Pl)){t=null!==t&&null!==t.memoizedState||Al,s=Pl;var a=Al;Pl=n,(Al=t)&&!a?Xl(e,r,!!(8772&r.subtreeFlags)):Jl(e,r),Pl=s,Al=a}break;case 30:break;default:Jl(e,r)}}function Ll(e){var t=e.alternate;null!==t&&(e.alternate=null,Ll(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&Ye(t)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var zl=null,Ml=!1;function Ul(e,t,r){for(r=r.child;null!==r;)Fl(e,t,r),r=r.sibling}function Fl(e,t,r){if(me&&"function"==typeof me.onCommitFiberUnmount)try{me.onCommitFiberUnmount(fe,r)}catch(a){}switch(r.tag){case 26:Al||kl(r,t),Ul(e,t,r),r.memoizedState?r.memoizedState.count--:r.stateNode&&(r=r.stateNode).parentNode.removeChild(r);break;case 27:Al||kl(r,t);var n=zl,s=Ml;Cd(r.type)&&(zl=r.stateNode,Ml=!1),Ul(e,t,r),Ud(r.stateNode),zl=n,Ml=s;break;case 5:Al||kl(r,t);case 6:if(n=zl,s=Ml,zl=null,Ul(e,t,r),Ml=s,null!==(zl=n))if(Ml)try{(9===zl.nodeType?zl.body:"HTML"===zl.nodeName?zl.ownerDocument.body:zl).removeChild(r.stateNode)}catch(i){Nu(r,t,i)}else try{zl.removeChild(r.stateNode)}catch(i){Nu(r,t,i)}break;case 18:null!==zl&&(Ml?(Td(9===(e=zl).nodeType?e.body:"HTML"===e.nodeName?e.ownerDocument.body:e,r.stateNode),Wh(e)):Td(zl,r.stateNode));break;case 4:n=zl,s=Ml,zl=r.stateNode.containerInfo,Ml=!0,Ul(e,t,r),zl=n,Ml=s;break;case 0:case 11:case 14:case 15:yl(2,r,t),Al||yl(4,r,t),Ul(e,t,r);break;case 1:Al||(kl(r,t),"function"==typeof(n=r.stateNode).componentWillUnmount&&wl(r,t,n)),Ul(e,t,r);break;case 21:Ul(e,t,r);break;case 22:Al=(n=Al)||null!==r.memoizedState,Ul(e,t,r),Al=n;break;default:Ul(e,t,r)}}function ql(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&null!==(e=e.memoizedState))){e=e.dehydrated;try{Wh(e)}catch(r){Nu(t,t.return,r)}}}function Bl(e,t){if(null===t.memoizedState&&(null!==(e=t.alternate)&&(null!==(e=e.memoizedState)&&null!==(e=e.dehydrated))))try{Wh(e)}catch(r){Nu(t,t.return,r)}}function Hl(e,t){var r=function(e){switch(e.tag){case 31:case 13:case 19:var t=e.stateNode;return null===t&&(t=e.stateNode=new Il),t;case 22:return null===(t=(e=e.stateNode)._retryCache)&&(t=e._retryCache=new Il),t;default:throw Error(n(435,e.tag))}}(e);t.forEach(function(t){if(!r.has(t)){r.add(t);var n=Ou.bind(null,e,t);t.then(n,n)}})}function Vl(e,t){var r=t.deletions;if(null!==r)for(var s=0;s<r.length;s++){var a=r[s],i=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 27:if(Cd(l.type)){zl=l.stateNode,Ml=!1;break e}break;case 5:zl=l.stateNode,Ml=!1;break e;case 3:case 4:zl=l.stateNode.containerInfo,Ml=!0;break e}l=l.return}if(null===zl)throw Error(n(160));Fl(i,o,a),zl=null,Ml=!1,null!==(i=a.alternate)&&(i.return=null),a.return=null}if(13886&t.subtreeFlags)for(t=t.child;null!==t;)Ql(t,e),t=t.sibling}var Wl=null;function Ql(e,t){var r=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:Vl(t,e),Gl(e),4&s&&(yl(3,e,e.return),vl(3,e),yl(5,e,e.return));break;case 1:Vl(t,e),Gl(e),512&s&&(Al||null===r||kl(r,r.return)),64&s&&Pl&&(null!==(e=e.updateQueue)&&(null!==(s=e.callbacks)&&(r=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=null===r?s:r.concat(s))));break;case 26:var a=Wl;if(Vl(t,e),Gl(e),512&s&&(Al||null===r||kl(r,r.return)),4&s){var i=null!==r?r.memoizedState:null;if(s=e.memoizedState,null===r)if(null===s)if(null===e.stateNode){e:{s=e.type,r=e.memoizedProps,a=a.ownerDocument||a;t:switch(s){case"title":(!(i=a.getElementsByTagName("title")[0])||i[Ke]||i[Ue]||"http://www.w3.org/2000/svg"===i.namespaceURI||i.hasAttribute("itemprop"))&&(i=a.createElement(s),a.head.insertBefore(i,a.querySelector("head > title"))),fd(i,s,r),i[Ue]=e,rt(i),s=i;break e;case"link":var o=sh("link","href",a).get(s+(r.href||""));if(o)for(var l=0;l<o.length;l++)if((i=o[l]).getAttribute("href")===(null==r.href||""===r.href?null:r.href)&&i.getAttribute("rel")===(null==r.rel?null:r.rel)&&i.getAttribute("title")===(null==r.title?null:r.title)&&i.getAttribute("crossorigin")===(null==r.crossOrigin?null:r.crossOrigin)){o.splice(l,1);break t}fd(i=a.createElement(s),s,r),a.head.appendChild(i);break;case"meta":if(o=sh("meta","content",a).get(s+(r.content||"")))for(l=0;l<o.length;l++)if((i=o[l]).getAttribute("content")===(null==r.content?null:""+r.content)&&i.getAttribute("name")===(null==r.name?null:r.name)&&i.getAttribute("property")===(null==r.property?null:r.property)&&i.getAttribute("http-equiv")===(null==r.httpEquiv?null:r.httpEquiv)&&i.getAttribute("charset")===(null==r.charSet?null:r.charSet)){o.splice(l,1);break t}fd(i=a.createElement(s),s,r),a.head.appendChild(i);break;default:throw Error(n(468,s))}i[Ue]=e,rt(i),s=i}e.stateNode=s}else ah(a,e.type,e.stateNode);else e.stateNode=Zd(a,s,e.memoizedProps);else i!==s?(null===i?null!==r.stateNode&&(r=r.stateNode).parentNode.removeChild(r):i.count--,null===s?ah(a,e.type,e.stateNode):Zd(a,s,e.memoizedProps)):null===s&&null!==e.stateNode&&Nl(e,e.memoizedProps,r.memoizedProps)}break;case 27:Vl(t,e),Gl(e),512&s&&(Al||null===r||kl(r,r.return)),null!==r&&4&s&&Nl(e,e.memoizedProps,r.memoizedProps);break;case 5:if(Vl(t,e),Gl(e),512&s&&(Al||null===r||kl(r,r.return)),32&e.flags){a=e.stateNode;try{St(a,"")}catch(m){Nu(e,e.return,m)}}4&s&&null!=e.stateNode&&Nl(e,a=e.memoizedProps,null!==r?r.memoizedProps:a),1024&s&&(Rl=!0);break;case 6:if(Vl(t,e),Gl(e),4&s){if(null===e.stateNode)throw Error(n(162));s=e.memoizedProps,r=e.stateNode;try{r.nodeValue=s}catch(m){Nu(e,e.return,m)}}break;case 3:if(nh=null,a=Wl,Wl=Bd(t.containerInfo),Vl(t,e),Wl=a,Gl(e),4&s&&null!==r&&r.memoizedState.isDehydrated)try{Wh(t.containerInfo)}catch(m){Nu(e,e.return,m)}Rl&&(Rl=!1,Kl(e));break;case 4:s=Wl,Wl=Bd(e.stateNode.containerInfo),Vl(t,e),Gl(e),Wl=s;break;case 12:default:Vl(t,e),Gl(e);break;case 31:case 19:Vl(t,e),Gl(e),4&s&&(null!==(s=e.updateQueue)&&(e.updateQueue=null,Hl(e,s)));break;case 13:Vl(t,e),Gl(e),8192&e.child.flags&&null!==e.memoizedState!=(null!==r&&null!==r.memoizedState)&&(Ic=ae()),4&s&&(null!==(s=e.updateQueue)&&(e.updateQueue=null,Hl(e,s)));break;case 22:a=null!==e.memoizedState;var c=null!==r&&null!==r.memoizedState,u=Pl,d=Al;if(Pl=u||a,Al=d||c,Vl(t,e),Al=d,Pl=u,Gl(e),8192&s)e:for(t=e.stateNode,t._visibility=a?-2&t._visibility:1|t._visibility,a&&(null===r||c||Pl||Al||Yl(e)),r=null,t=e;;){if(5===t.tag||26===t.tag){if(null===r){c=r=t;try{if(i=c.stateNode,a)"function"==typeof(o=i.style).setProperty?o.setProperty("display","none","important"):o.display="none";else{l=c.stateNode;var h=c.memoizedProps.style,p=null!=h&&h.hasOwnProperty("display")?h.display:null;l.style.display=null==p||"boolean"==typeof p?"":(""+p).trim()}}catch(m){Nu(c,c.return,m)}}}else if(6===t.tag){if(null===r){c=t;try{c.stateNode.nodeValue=a?"":c.memoizedProps}catch(m){Nu(c,c.return,m)}}}else if(18===t.tag){if(null===r){c=t;try{var f=c.stateNode;a?Od(f,!0):Od(c.stateNode,!1)}catch(m){Nu(c,c.return,m)}}}else if((22!==t.tag&&23!==t.tag||null===t.memoizedState||t===e)&&null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;null===t.sibling;){if(null===t.return||t.return===e)break e;r===t&&(r=null),t=t.return}r===t&&(r=null),t.sibling.return=t.return,t=t.sibling}4&s&&(null!==(s=e.updateQueue)&&(null!==(r=s.retryQueue)&&(s.retryQueue=null,Hl(e,r))));case 30:case 21:}}function Gl(e){var t=e.flags;if(2&t){try{for(var r,s=e.return;null!==s;){if(Sl(s)){r=s;break}s=s.return}if(null==r)throw Error(n(160));switch(r.tag){case 27:var a=r.stateNode;Tl(e,El(e),a);break;case 5:var i=r.stateNode;32&r.flags&&(St(i,""),r.flags&=-33),Tl(e,El(e),i);break;case 3:case 4:var o=r.stateNode.containerInfo;Cl(e,El(e),o);break;default:throw Error(n(161))}}catch(l){Nu(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function Kl(e){if(1024&e.subtreeFlags)for(e=e.child;null!==e;){var t=e;Kl(t),5===t.tag&&1024&t.flags&&t.stateNode.reset(),e=e.sibling}}function Jl(e,t){if(8772&t.subtreeFlags)for(t=t.child;null!==t;)Dl(e,t.alternate,t),t=t.sibling}function Yl(e){for(e=e.child;null!==e;){var t=e;switch(t.tag){case 0:case 11:case 14:case 15:yl(4,t,t.return),Yl(t);break;case 1:kl(t,t.return);var r=t.stateNode;"function"==typeof r.componentWillUnmount&&wl(t,t.return,r),Yl(t);break;case 27:Ud(t.stateNode);case 26:case 5:kl(t,t.return),Yl(t);break;case 22:null===t.memoizedState&&Yl(t);break;default:Yl(t)}e=e.sibling}}function Xl(e,t,r){for(r=r&&!!(8772&t.subtreeFlags),t=t.child;null!==t;){var n=t.alternate,s=e,a=t,i=a.flags;switch(a.tag){case 0:case 11:case 15:Xl(s,a,r),vl(4,a);break;case 1:if(Xl(s,a,r),"function"==typeof(s=(n=a).stateNode).componentDidMount)try{s.componentDidMount()}catch(c){Nu(n,n.return,c)}if(null!==(s=(n=a).updateQueue)){var o=n.stateNode;try{var l=s.shared.hiddenCallbacks;if(null!==l)for(s.shared.hiddenCallbacks=null,s=0;s<l.length;s++)Ea(l[s],o)}catch(c){Nu(n,n.return,c)}}r&&64&i&&xl(a),jl(a,a.return);break;case 27:Ol(a);case 26:case 5:Xl(s,a,r),r&&null===n&&4&i&&_l(a),jl(a,a.return);break;case 12:Xl(s,a,r);break;case 31:Xl(s,a,r),r&&4&i&&ql(s,a);break;case 13:Xl(s,a,r),r&&4&i&&Bl(s,a);break;case 22:null===a.memoizedState&&Xl(s,a,r),jl(a,a.return);break;case 30:break;default:Xl(s,a,r)}t=t.sibling}}function Zl(e,t){var r=null;null!==e&&null!==e.memoizedState&&null!==e.memoizedState.cachePool&&(r=e.memoizedState.cachePool.pool),e=null,null!==t.memoizedState&&null!==t.memoizedState.cachePool&&(e=t.memoizedState.cachePool.pool),e!==r&&(null!=e&&e.refCount++,null!=r&&qs(r))}function ec(e,t){e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&qs(e))}function tc(e,t,r,n){if(10256&t.subtreeFlags)for(t=t.child;null!==t;)rc(e,t,r,n),t=t.sibling}function rc(e,t,r,n){var s=t.flags;switch(t.tag){case 0:case 11:case 15:tc(e,t,r,n),2048&s&&vl(9,t);break;case 1:case 31:case 13:default:tc(e,t,r,n);break;case 3:tc(e,t,r,n),2048&s&&(e=null,null!==t.alternate&&(e=t.alternate.memoizedState.cache),(t=t.memoizedState.cache)!==e&&(t.refCount++,null!=e&&qs(e)));break;case 12:if(2048&s){tc(e,t,r,n),e=t.stateNode;try{var a=t.memoizedProps,i=a.id,o=a.onPostCommit;"function"==typeof o&&o(i,null===t.alternate?"mount":"update",e.passiveEffectDuration,-0)}catch(l){Nu(t,t.return,l)}}else tc(e,t,r,n);break;case 23:break;case 22:a=t.stateNode,i=t.alternate,null!==t.memoizedState?2&a._visibility?tc(e,t,r,n):sc(e,t):2&a._visibility?tc(e,t,r,n):(a._visibility|=2,nc(e,t,r,n,!!(10256&t.subtreeFlags)||!1)),2048&s&&Zl(i,t);break;case 24:tc(e,t,r,n),2048&s&&ec(t.alternate,t)}}function nc(e,t,r,n,s){for(s=s&&(!!(10256&t.subtreeFlags)||!1),t=t.child;null!==t;){var a=e,i=t,o=r,l=n,c=i.flags;switch(i.tag){case 0:case 11:case 15:nc(a,i,o,l,s),vl(8,i);break;case 23:break;case 22:var u=i.stateNode;null!==i.memoizedState?2&u._visibility?nc(a,i,o,l,s):sc(a,i):(u._visibility|=2,nc(a,i,o,l,s)),s&&2048&c&&Zl(i.alternate,i);break;case 24:nc(a,i,o,l,s),s&&2048&c&&ec(i.alternate,i);break;default:nc(a,i,o,l,s)}t=t.sibling}}function sc(e,t){if(10256&t.subtreeFlags)for(t=t.child;null!==t;){var r=e,n=t,s=n.flags;switch(n.tag){case 22:sc(r,n),2048&s&&Zl(n.alternate,n);break;case 24:sc(r,n),2048&s&&ec(n.alternate,n);break;default:sc(r,n)}t=t.sibling}}var ac=8192;function ic(e,t,r){if(e.subtreeFlags&ac)for(e=e.child;null!==e;)oc(e,t,r),e=e.sibling}function oc(e,t,r){switch(e.tag){case 26:ic(e,t,r),e.flags&ac&&null!==e.memoizedState&&function(e,t,r,n){if(!("stylesheet"!==r.type||"string"==typeof n.media&&!1===matchMedia(n.media).matches||4&r.state.loading)){if(null===r.instance){var s=Gd(n.href),a=t.querySelector(Kd(s));if(a)return null!==(t=a._p)&&"object"==typeof t&&"function"==typeof t.then&&(e.count++,e=lh.bind(e),t.then(e,e)),r.state.loading|=4,r.instance=a,void rt(a);a=t.ownerDocument||t,n=Jd(n),(s=Fd.get(s))&&th(n,s),rt(a=a.createElement("link"));var i=a;i._p=new Promise(function(e,t){i.onload=e,i.onerror=t}),fd(a,"link",n),r.instance=a}null===e.stylesheets&&(e.stylesheets=new Map),e.stylesheets.set(r,t),(t=r.state.preload)&&!(3&r.state.loading)&&(e.count++,r=lh.bind(e),t.addEventListener("load",r),t.addEventListener("error",r))}}(r,Wl,e.memoizedState,e.memoizedProps);break;case 5:default:ic(e,t,r);break;case 3:case 4:var n=Wl;Wl=Bd(e.stateNode.containerInfo),ic(e,t,r),Wl=n;break;case 22:null===e.memoizedState&&(null!==(n=e.alternate)&&null!==n.memoizedState?(n=ac,ac=16777216,ic(e,t,r),ac=n):ic(e,t,r))}}function lc(e){var t=e.alternate;if(null!==t&&null!==(e=t.child)){t.child=null;do{t=e.sibling,e.sibling=null,e=t}while(null!==e)}}function cc(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var r=0;r<t.length;r++){var n=t[r];$l=n,hc(n,e)}lc(e)}if(10256&e.subtreeFlags)for(e=e.child;null!==e;)uc(e),e=e.sibling}function uc(e){switch(e.tag){case 0:case 11:case 15:cc(e),2048&e.flags&&yl(9,e,e.return);break;case 3:case 12:default:cc(e);break;case 22:var t=e.stateNode;null!==e.memoizedState&&2&t._visibility&&(null===e.return||13!==e.return.tag)?(t._visibility&=-3,dc(e)):cc(e)}}function dc(e){var t=e.deletions;if(16&e.flags){if(null!==t)for(var r=0;r<t.length;r++){var n=t[r];$l=n,hc(n,e)}lc(e)}for(e=e.child;null!==e;){switch((t=e).tag){case 0:case 11:case 15:yl(8,t,t.return),dc(t);break;case 22:2&(r=t.stateNode)._visibility&&(r._visibility&=-3,dc(t));break;default:dc(t)}e=e.sibling}}function hc(e,t){for(;null!==$l;){var r=$l;switch(r.tag){case 0:case 11:case 15:yl(8,r,t);break;case 23:case 22:if(null!==r.memoizedState&&null!==r.memoizedState.cachePool){var n=r.memoizedState.cachePool.pool;null!=n&&n.refCount++}break;case 24:qs(r.memoizedState.cache)}if(null!==(n=r.child))n.return=r,$l=n;else e:for(r=e;null!==$l;){var s=(n=$l).sibling,a=n.return;if(Ll(n),n===r){$l=null;break e}if(null!==s){s.return=a,$l=s;break e}$l=a}}}var pc={getCacheForType:function(e){var t=Is(Us),r=t.data.get(e);return void 0===r&&(r=e(),t.data.set(e,r)),r},cacheSignal:function(){return Is(Us).controller.signal}},fc="function"==typeof WeakMap?WeakMap:Map,mc=0,gc=null,bc=null,vc=0,yc=0,xc=null,wc=!1,jc=!1,kc=!1,_c=0,Nc=0,Sc=0,Ec=0,Cc=0,Tc=0,Oc=0,Pc=null,Ac=null,Rc=!1,Ic=0,$c=0,Dc=1/0,Lc=null,zc=null,Mc=0,Uc=null,Fc=null,qc=0,Bc=0,Hc=null,Vc=null,Wc=0,Qc=null;function Gc(){return 2&mc&&0!==vc?vc&-vc:null!==P.T?Hu():Le()}function Kc(){if(0===Tc)if(536870912&vc&&!ps)Tc=536870912;else{var e=ke;!(3932160&(ke<<=1))&&(ke=262144),Tc=e}return null!==(e=Ia.current)&&(e.flags|=32),Tc}function Jc(e,t,r){(e!==gc||2!==yc&&9!==yc)&&null===e.cancelPendingCommit||(nu(e,0),eu(e,vc,Tc,!1)),Pe(e,r),2&mc&&e===gc||(e===gc&&(!(2&mc)&&(Ec|=r),4===Nc&&eu(e,vc,Tc,!1)),Lu(e))}function Yc(e,t,r){if(6&mc)throw Error(n(327));for(var s=!r&&!(127&t)&&0===(t&e.expiredLanes)||Ee(e,t),a=s?function(e,t){var r=mc;mc|=2;var s=iu(),a=ou();gc!==e||vc!==t?(Lc=null,Dc=ae()+500,nu(e,t)):jc=Ee(e,t);e:for(;;)try{if(0!==yc&&null!==bc){t=bc;var i=xc;t:switch(yc){case 1:yc=0,xc=null,fu(e,t,i,1);break;case 2:case 9:if(na(i)){yc=0,xc=null,pu(t);break}t=function(){2!==yc&&9!==yc||gc!==e||(yc=7),Lu(e)},i.then(t,t);break e;case 3:yc=7;break e;case 4:yc=5;break e;case 7:na(i)?(yc=0,xc=null,pu(t)):(yc=0,xc=null,fu(e,t,i,7));break;case 5:var o=null;switch(bc.tag){case 26:o=bc.memoizedState;case 5:case 27:var l=bc;if(o?ih(o):l.stateNode.complete){yc=0,xc=null;var c=l.sibling;if(null!==c)bc=c;else{var u=l.return;null!==u?(bc=u,mu(u)):bc=null}break t}}yc=0,xc=null,fu(e,t,i,5);break;case 6:yc=0,xc=null,fu(e,t,i,6);break;case 8:ru(),Nc=6;break e;default:throw Error(n(462))}}du();break}catch(d){su(e,d)}return Ss=Ns=null,P.H=s,P.A=a,mc=r,null!==bc?0:(gc=null,vc=0,An(),Nc)}(e,t):cu(e,t,!0),i=s;;){if(0===a){jc&&!s&&eu(e,t,0,!1);break}if(r=e.current.alternate,!i||Zc(r)){if(2===a){if(i=t,e.errorRecoveryDisabledLanes&i)var o=0;else o=0!==(o=-536870913&e.pendingLanes)?o:536870912&o?536870912:0;if(0!==o){t=o;e:{var l=e;a=Pc;var c=l.current.memoizedState.isDehydrated;if(c&&(nu(l,o).flags|=256),2!==(o=cu(l,o,!1))){if(kc&&!c){l.errorRecoveryDisabledLanes|=i,Ec|=i,a=4;break e}i=Ac,Ac=a,null!==i&&(null===Ac?Ac=i:Ac.push.apply(Ac,i))}a=o}if(i=!1,2!==a)continue}}if(1===a){nu(e,0),eu(e,t,0,!0);break}e:{switch(s=e,i=a){case 0:case 1:throw Error(n(345));case 4:if((4194048&t)!==t)break;case 6:eu(s,t,Tc,!wc);break e;case 2:Ac=null;break;case 3:case 5:break;default:throw Error(n(329))}if((62914560&t)===t&&10<(a=Ic+300-ae())){if(eu(s,t,Tc,!wc),0!==Se(s,0,!0))break e;qc=t,s.timeoutHandle=kd(Xc.bind(null,s,r,Ac,Lc,Rc,t,Tc,Ec,Oc,wc,i,"Throttled",-0,0),a)}else Xc(s,r,Ac,Lc,Rc,t,Tc,Ec,Oc,wc,i,null,-0,0)}break}a=cu(e,t,!1),i=!1}Lu(e)}function Xc(e,t,r,n,s,a,i,o,l,c,u,d,h,p){if(e.timeoutHandle=-1,8192&(d=t.subtreeFlags)||!(16785408&~d)){oc(t,a,d={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:It});var f=(62914560&a)===a?Ic-ae():(4194048&a)===a?$c-ae():0;if(null!==(f=function(e,t){return e.stylesheets&&0===e.count&&uh(e,e.stylesheets),0<e.count||0<e.imgCount?function(r){var n=setTimeout(function(){if(e.stylesheets&&uh(e,e.stylesheets),e.unsuspend){var t=e.unsuspend;e.unsuspend=null,t()}},6e4+t);0<e.imgBytes&&0===oh&&(oh=62500*function(){if("function"==typeof performance.getEntriesByType){for(var e=0,t=0,r=performance.getEntriesByType("resource"),n=0;n<r.length;n++){var s=r[n],a=s.transferSize,i=s.initiatorType,o=s.duration;if(a&&o&&md(i)){for(i=0,o=s.responseEnd,n+=1;n<r.length;n++){var l=r[n],c=l.startTime;if(c>o)break;var u=l.transferSize,d=l.initiatorType;u&&md(d)&&(i+=u*((l=l.responseEnd)<o?1:(o-c)/(l-c)))}if(--n,t+=8*(a+i)/(s.duration/1e3),10<++e)break}}if(0<e)return t/e/1e6}return navigator.connection&&"number"==typeof(e=navigator.connection.downlink)?e:5}());var s=setTimeout(function(){if(e.waitingForImages=!1,0===e.count&&(e.stylesheets&&uh(e,e.stylesheets),e.unsuspend)){var t=e.unsuspend;e.unsuspend=null,t()}},(e.imgBytes>oh?50:800)+t);return e.unsuspend=r,function(){e.unsuspend=null,clearTimeout(n),clearTimeout(s)}}:null}(d,f)))return qc=a,e.cancelPendingCommit=f(bu.bind(null,e,t,a,r,n,s,i,o,l,u,d,null,h,p)),void eu(e,a,i,!c)}bu(e,t,a,r,n,s,i,o,l)}function Zc(e){for(var t=e;;){var r=t.tag;if((0===r||11===r||15===r)&&16384&t.flags&&(null!==(r=t.updateQueue)&&null!==(r=r.stores)))for(var n=0;n<r.length;n++){var s=r[n],a=s.getSnapshot;s=s.value;try{if(!Zr(a(),s))return!1}catch(i){return!1}}if(r=t.child,16384&t.subtreeFlags&&null!==r)r.return=t,t=r;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function eu(e,t,r,n){t&=~Cc,t&=~Ec,e.suspendedLanes|=t,e.pingedLanes&=~t,n&&(e.warmLanes|=t),n=e.expirationTimes;for(var s=t;0<s;){var a=31-be(s),i=1<<a;n[a]=-1,s&=~i}0!==r&&Ae(e,r,t)}function tu(){return!!(6&mc)||(zu(0),!1)}function ru(){if(null!==bc){if(0===yc)var e=bc.return;else Ss=Ns=null,li(e=bc),ca=null,ua=0,e=bc;for(;null!==e;)bl(e.alternate,e),e=e.return;bc=null}}function nu(e,t){var r=e.timeoutHandle;-1!==r&&(e.timeoutHandle=-1,_d(r)),null!==(r=e.cancelPendingCommit)&&(e.cancelPendingCommit=null,r()),qc=0,ru(),gc=e,bc=r=qn(e.current,null),vc=t,yc=0,xc=null,wc=!1,jc=Ee(e,t),kc=!1,Oc=Tc=Cc=Ec=Sc=Nc=0,Ac=Pc=null,Rc=!1,8&t&&(t|=32&t);var n=e.entangledLanes;if(0!==n)for(e=e.entanglements,n&=t;0<n;){var s=31-be(n),a=1<<s;t|=e[s],n&=~a}return _c=t,An(),r}function su(e,t){Ha=null,P.H=bo,t===Zs||t===ta?(t=oa(),yc=3):t===ea?(t=oa(),yc=4):yc=t===Io?8:null!==t&&"object"==typeof t&&"function"==typeof t.then?6:1,xc=t,null===bc&&(Nc=1,To(e,Jn(t,e.current)))}function au(){var e=Ia.current;return null===e||((4194048&vc)===vc?null===$a:!!((62914560&vc)===vc||536870912&vc)&&e===$a)}function iu(){var e=P.H;return P.H=bo,null===e?bo:e}function ou(){var e=P.A;return P.A=pc,e}function lu(){Nc=4,wc||(4194048&vc)!==vc&&null!==Ia.current||(jc=!0),!(134217727&Sc)&&!(134217727&Ec)||null===gc||eu(gc,vc,Tc,!1)}function cu(e,t,r){var n=mc;mc|=2;var s=iu(),a=ou();gc===e&&vc===t||(Lc=null,nu(e,t)),t=!1;var i=Nc;e:for(;;)try{if(0!==yc&&null!==bc){var o=bc,l=xc;switch(yc){case 8:ru(),i=6;break e;case 3:case 2:case 9:case 6:null===Ia.current&&(t=!0);var c=yc;if(yc=0,xc=null,fu(e,o,l,c),r&&jc){i=0;break e}break;default:c=yc,yc=0,xc=null,fu(e,o,l,c)}}uu(),i=Nc;break}catch(u){su(e,u)}return t&&e.shellSuspendCounter++,Ss=Ns=null,mc=n,P.H=s,P.A=a,null===bc&&(gc=null,vc=0,An()),i}function uu(){for(;null!==bc;)hu(bc)}function du(){for(;null!==bc&&!ne();)hu(bc)}function hu(e){var t=ll(e.alternate,e,_c);e.memoizedProps=e.pendingProps,null===t?mu(e):bc=t}function pu(e){var t=e,r=t.alternate;switch(t.tag){case 15:case 0:t=Qo(r,t,t.pendingProps,t.type,void 0,vc);break;case 11:t=Qo(r,t,t.pendingProps,t.type.render,t.ref,vc);break;case 5:li(t);default:bl(r,t),t=ll(r,t=bc=Bn(t,_c),_c)}e.memoizedProps=e.pendingProps,null===t?mu(e):bc=t}function fu(e,t,r,s){Ss=Ns=null,li(t),ca=null,ua=0;var a=t.return;try{if(function(e,t,r,s,a){if(r.flags|=32768,null!==s&&"object"==typeof s&&"function"==typeof s.then){if(null!==(t=r.alternate)&&Ps(t,r,a,!0),null!==(r=Ia.current)){switch(r.tag){case 31:case 13:return null===$a?lu():null===r.alternate&&0===Nc&&(Nc=3),r.flags&=-257,r.flags|=65536,r.lanes=a,s===ra?r.flags|=16384:(null===(t=r.updateQueue)?r.updateQueue=new Set([s]):t.add(s),Su(e,s,a)),!1;case 22:return r.flags|=65536,s===ra?r.flags|=16384:(null===(t=r.updateQueue)?(t={transitions:null,markerInstances:null,retryQueue:new Set([s])},r.updateQueue=t):null===(r=t.retryQueue)?t.retryQueue=new Set([s]):r.add(s),Su(e,s,a)),!1}throw Error(n(435,r.tag))}return Su(e,s,a),lu(),!1}if(ps)return null!==(t=Ia.current)?(!(65536&t.flags)&&(t.flags|=256),t.flags|=65536,t.lanes=a,s!==gs&&ks(Jn(e=Error(n(422),{cause:s}),r))):(s!==gs&&ks(Jn(t=Error(n(423),{cause:s}),r)),(e=e.current.alternate).flags|=65536,a&=-a,e.lanes|=a,s=Jn(s,r),ka(e,a=Po(e.stateNode,s,a)),4!==Nc&&(Nc=2)),!1;var i=Error(n(520),{cause:s});if(i=Jn(i,r),null===Pc?Pc=[i]:Pc.push(i),4!==Nc&&(Nc=2),null===t)return!0;s=Jn(s,r),r=t;do{switch(r.tag){case 3:return r.flags|=65536,e=a&-a,r.lanes|=e,ka(r,e=Po(r.stateNode,s,e)),!1;case 1:if(t=r.type,i=r.stateNode,!(128&r.flags||"function"!=typeof t.getDerivedStateFromError&&(null===i||"function"!=typeof i.componentDidCatch||null!==zc&&zc.has(i))))return r.flags|=65536,a&=-a,r.lanes|=a,Ro(a=Ao(a),e,r,s),ka(r,a),!1}r=r.return}while(null!==r);return!1}(e,a,t,r,vc))return Nc=1,To(e,Jn(r,e.current)),void(bc=null)}catch(i){if(null!==a)throw bc=a,i;return Nc=1,To(e,Jn(r,e.current)),void(bc=null)}32768&t.flags?(ps||1===s?e=!0:jc||536870912&vc?e=!1:(wc=e=!0,(2===s||9===s||3===s||6===s)&&(null!==(s=Ia.current)&&13===s.tag&&(s.flags|=16384))),gu(t,e)):mu(t)}function mu(e){var t=e;do{if(32768&t.flags)return void gu(t,wc);e=t.return;var r=ml(t.alternate,t,_c);if(null!==r)return void(bc=r);if(null!==(t=t.sibling))return void(bc=t);bc=t=e}while(null!==t);0===Nc&&(Nc=5)}function gu(e,t){do{var r=gl(e.alternate,e);if(null!==r)return r.flags&=32767,void(bc=r);if(null!==(r=e.return)&&(r.flags|=32768,r.subtreeFlags=0,r.deletions=null),!t&&null!==(e=e.sibling))return void(bc=e);bc=e=r}while(null!==e);Nc=6,bc=null}function bu(e,t,r,s,a,i,o,l,c){e.cancelPendingCommit=null;do{ju()}while(0!==Mc);if(6&mc)throw Error(n(327));if(null!==t){if(t===e.current)throw Error(n(177));if(i=t.lanes|t.childLanes,function(e,t,r,n,s,a){var i=e.pendingLanes;e.pendingLanes=r,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=r,e.entangledLanes&=r,e.errorRecoveryDisabledLanes&=r,e.shellSuspendCounter=0;var o=e.entanglements,l=e.expirationTimes,c=e.hiddenUpdates;for(r=i&~r;0<r;){var u=31-be(r),d=1<<u;o[u]=0,l[u]=-1;var h=c[u];if(null!==h)for(c[u]=null,u=0;u<h.length;u++){var p=h[u];null!==p&&(p.lane&=-536870913)}r&=~d}0!==n&&Ae(e,n,0),0!==a&&0===s&&0!==e.tag&&(e.suspendedLanes|=a&~(i&~t))}(e,r,i|=Pn,o,l,c),e===gc&&(bc=gc=null,vc=0),Fc=t,Uc=e,qc=r,Bc=i,Hc=a,Vc=s,10256&t.subtreeFlags||10256&t.flags?(e.callbackNode=null,e.callbackPriority=0,te(ce,function(){return ku(),null})):(e.callbackNode=null,e.callbackPriority=0),s=!!(13878&t.flags),13878&t.subtreeFlags||s){s=P.T,P.T=null,a=A.p,A.p=2,o=mc,mc|=4;try{!function(e,t){if(e=e.containerInfo,gd=wh,an(e=sn(e))){if("selectionStart"in e)var r={start:e.selectionStart,end:e.selectionEnd};else e:{var s=(r=(r=e.ownerDocument)&&r.defaultView||window).getSelection&&r.getSelection();if(s&&0!==s.rangeCount){r=s.anchorNode;var a=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{r.nodeType,i.nodeType}catch(g){r=null;break e}var o=0,l=-1,c=-1,u=0,d=0,h=e,p=null;t:for(;;){for(var f;h!==r||0!==a&&3!==h.nodeType||(l=o+a),h!==i||0!==s&&3!==h.nodeType||(c=o+s),3===h.nodeType&&(o+=h.nodeValue.length),null!==(f=h.firstChild);)p=h,h=f;for(;;){if(h===e)break t;if(p===r&&++u===a&&(l=o),p===i&&++d===s&&(c=o),null!==(f=h.nextSibling))break;p=(h=p).parentNode}h=f}r=-1===l||-1===c?null:{start:l,end:c}}else r=null}r=r||{start:0,end:0}}else r=null;for(bd={focusedElem:e,selectionRange:r},wh=!1,$l=t;null!==$l;)if(e=(t=$l).child,1028&t.subtreeFlags&&null!==e)e.return=t,$l=e;else for(;null!==$l;){switch(i=(t=$l).alternate,e=t.flags,t.tag){case 0:if(4&e&&null!==(e=null!==(e=t.updateQueue)?e.events:null))for(r=0;r<e.length;r++)(a=e[r]).ref.impl=a.nextImpl;break;case 11:case 15:case 5:case 26:case 27:case 6:case 4:case 17:break;case 1:if(1024&e&&null!==i){e=void 0,r=t,a=i.memoizedProps,i=i.memoizedState,s=r.stateNode;try{var m=No(r.type,a);e=s.getSnapshotBeforeUpdate(m,i),s.__reactInternalSnapshotBeforeUpdate=e}catch(b){Nu(r,r.return,b)}}break;case 3:if(1024&e)if(9===(r=(e=t.stateNode.containerInfo).nodeType))Pd(e);else if(1===r)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":Pd(e);break;default:e.textContent=""}break;default:if(1024&e)throw Error(n(163))}if(null!==(e=t.sibling)){e.return=t.return,$l=e;break}$l=t.return}}(e,t)}finally{mc=o,A.p=a,P.T=s}}Mc=1,vu(),yu(),xu()}}function vu(){if(1===Mc){Mc=0;var e=Uc,t=Fc,r=!!(13878&t.flags);if(13878&t.subtreeFlags||r){r=P.T,P.T=null;var n=A.p;A.p=2;var s=mc;mc|=4;try{Ql(t,e);var a=bd,i=sn(e.containerInfo),o=a.focusedElem,l=a.selectionRange;if(i!==o&&o&&o.ownerDocument&&nn(o.ownerDocument.documentElement,o)){if(null!==l&&an(o)){var c=l.start,u=l.end;if(void 0===u&&(u=c),"selectionStart"in o)o.selectionStart=c,o.selectionEnd=Math.min(u,o.value.length);else{var d=o.ownerDocument||document,h=d&&d.defaultView||window;if(h.getSelection){var p=h.getSelection(),f=o.textContent.length,m=Math.min(l.start,f),g=void 0===l.end?m:Math.min(l.end,f);!p.extend&&m>g&&(i=g,g=m,m=i);var b=rn(o,m),v=rn(o,g);if(b&&v&&(1!==p.rangeCount||p.anchorNode!==b.node||p.anchorOffset!==b.offset||p.focusNode!==v.node||p.focusOffset!==v.offset)){var y=d.createRange();y.setStart(b.node,b.offset),p.removeAllRanges(),m>g?(p.addRange(y),p.extend(v.node,v.offset)):(y.setEnd(v.node,v.offset),p.addRange(y))}}}}for(d=[],p=o;p=p.parentNode;)1===p.nodeType&&d.push({element:p,left:p.scrollLeft,top:p.scrollTop});for("function"==typeof o.focus&&o.focus(),o=0;o<d.length;o++){var x=d[o];x.element.scrollLeft=x.left,x.element.scrollTop=x.top}}wh=!!gd,bd=gd=null}finally{mc=s,A.p=n,P.T=r}}e.current=t,Mc=2}}function yu(){if(2===Mc){Mc=0;var e=Uc,t=Fc,r=!!(8772&t.flags);if(8772&t.subtreeFlags||r){r=P.T,P.T=null;var n=A.p;A.p=2;var s=mc;mc|=4;try{Dl(e,t.alternate,t)}finally{mc=s,A.p=n,P.T=r}}Mc=3}}function xu(){if(4===Mc||3===Mc){Mc=0,se();var e=Uc,t=Fc,r=qc,n=Vc;10256&t.subtreeFlags||10256&t.flags?Mc=5:(Mc=0,Fc=Uc=null,wu(e,e.pendingLanes));var s=e.pendingLanes;if(0===s&&(zc=null),De(r),t=t.stateNode,me&&"function"==typeof me.onCommitFiberRoot)try{me.onCommitFiberRoot(fe,t,void 0,!(128&~t.current.flags))}catch(l){}if(null!==n){t=P.T,s=A.p,A.p=2,P.T=null;try{for(var a=e.onRecoverableError,i=0;i<n.length;i++){var o=n[i];a(o.value,{componentStack:o.stack})}}finally{P.T=t,A.p=s}}3&qc&&ju(),Lu(e),s=e.pendingLanes,261930&r&&42&s?e===Qc?Wc++:(Wc=0,Qc=e):Wc=0,zu(0)}}function wu(e,t){0===(e.pooledCacheLanes&=t)&&(null!=(t=e.pooledCache)&&(e.pooledCache=null,qs(t)))}function ju(){return vu(),yu(),xu(),ku()}function ku(){if(5!==Mc)return!1;var e=Uc,t=Bc;Bc=0;var r=De(qc),s=P.T,a=A.p;try{A.p=32>r?32:r,P.T=null,r=Hc,Hc=null;var i=Uc,o=qc;if(Mc=0,Fc=Uc=null,qc=0,6&mc)throw Error(n(331));var l=mc;if(mc|=4,uc(i.current),rc(i,i.current,o,r),mc=l,zu(0,!1),me&&"function"==typeof me.onPostCommitFiberRoot)try{me.onPostCommitFiberRoot(fe,i)}catch(c){}return!0}finally{A.p=a,P.T=s,wu(e,t)}}function _u(e,t,r){t=Jn(r,t),null!==(e=wa(e,t=Po(e.stateNode,t,2),2))&&(Pe(e,2),Lu(e))}function Nu(e,t,r){if(3===e.tag)_u(e,e,r);else for(;null!==t;){if(3===t.tag){_u(t,e,r);break}if(1===t.tag){var n=t.stateNode;if("function"==typeof t.type.getDerivedStateFromError||"function"==typeof n.componentDidCatch&&(null===zc||!zc.has(n))){e=Jn(r,e),null!==(n=wa(t,r=Ao(2),2))&&(Ro(r,n,t,e),Pe(n,2),Lu(n));break}}t=t.return}}function Su(e,t,r){var n=e.pingCache;if(null===n){n=e.pingCache=new fc;var s=new Set;n.set(t,s)}else void 0===(s=n.get(t))&&(s=new Set,n.set(t,s));s.has(r)||(kc=!0,s.add(r),e=Eu.bind(null,e,t,r),t.then(e,e))}function Eu(e,t,r){var n=e.pingCache;null!==n&&n.delete(t),e.pingedLanes|=e.suspendedLanes&r,e.warmLanes&=~r,gc===e&&(vc&r)===r&&(4===Nc||3===Nc&&(62914560&vc)===vc&&300>ae()-Ic?!(2&mc)&&nu(e,0):Cc|=r,Oc===vc&&(Oc=0)),Lu(e)}function Cu(e,t){0===t&&(t=Te()),null!==(e=$n(e,t))&&(Pe(e,t),Lu(e))}function Tu(e){var t=e.memoizedState,r=0;null!==t&&(r=t.retryLane),Cu(e,r)}function Ou(e,t){var r=0;switch(e.tag){case 31:case 13:var s=e.stateNode,a=e.memoizedState;null!==a&&(r=a.retryLane);break;case 19:s=e.stateNode;break;case 22:s=e.stateNode._retryCache;break;default:throw Error(n(314))}null!==s&&s.delete(t),Cu(e,r)}var Pu=null,Au=null,Ru=!1,Iu=!1,$u=!1,Du=0;function Lu(e){e!==Au&&null===e.next&&(null===Au?Pu=Au=e:Au=Au.next=e),Iu=!0,Ru||(Ru=!0,Sd(function(){6&mc?te(oe,Mu):Uu()}))}function zu(e,t){if(!$u&&Iu){$u=!0;do{for(var r=!1,n=Pu;null!==n;){if(0!==e){var s=n.pendingLanes;if(0===s)var a=0;else{var i=n.suspendedLanes,o=n.pingedLanes;a=(1<<31-be(42|e)+1)-1,a=201326741&(a&=s&~(i&~o))?201326741&a|1:a?2|a:0}0!==a&&(r=!0,Bu(n,a))}else a=vc,!(3&(a=Se(n,n===gc?a:0,null!==n.cancelPendingCommit||-1!==n.timeoutHandle)))||Ee(n,a)||(r=!0,Bu(n,a));n=n.next}}while(r);$u=!1}}function Mu(){Uu()}function Uu(){Iu=Ru=!1;var e=0;0!==Du&&function(){var e=window.event;if(e&&"popstate"===e.type)return e!==jd&&(jd=e,!0);return jd=null,!1}()&&(e=Du);for(var t=ae(),r=null,n=Pu;null!==n;){var s=n.next,a=Fu(n,t);0===a?(n.next=null,null===r?Pu=s:r.next=s,null===s&&(Au=r)):(r=n,(0!==e||3&a)&&(Iu=!0)),n=s}0!==Mc&&5!==Mc||zu(e),0!==Du&&(Du=0)}function Fu(e,t){for(var r=e.suspendedLanes,n=e.pingedLanes,s=e.expirationTimes,a=-62914561&e.pendingLanes;0<a;){var i=31-be(a),o=1<<i,l=s[i];-1===l?0!==(o&r)&&0===(o&n)||(s[i]=Ce(o,t)):l<=t&&(e.expiredLanes|=o),a&=~o}if(r=vc,r=Se(e,e===(t=gc)?r:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle),n=e.callbackNode,0===r||e===t&&(2===yc||9===yc)||null!==e.cancelPendingCommit)return null!==n&&null!==n&&re(n),e.callbackNode=null,e.callbackPriority=0;if(!(3&r)||Ee(e,r)){if((t=r&-r)===e.callbackPriority)return t;switch(null!==n&&re(n),De(r)){case 2:case 8:r=le;break;case 32:default:r=ce;break;case 268435456:r=de}return n=qu.bind(null,e),r=te(r,n),e.callbackPriority=t,e.callbackNode=r,t}return null!==n&&null!==n&&re(n),e.callbackPriority=2,e.callbackNode=null,2}function qu(e,t){if(0!==Mc&&5!==Mc)return e.callbackNode=null,e.callbackPriority=0,null;var r=e.callbackNode;if(ju()&&e.callbackNode!==r)return null;var n=vc;return 0===(n=Se(e,e===gc?n:0,null!==e.cancelPendingCommit||-1!==e.timeoutHandle))?null:(Yc(e,n,t),Fu(e,ae()),null!=e.callbackNode&&e.callbackNode===r?qu.bind(null,e):null)}function Bu(e,t){if(ju())return null;Yc(e,t,!0)}function Hu(){if(0===Du){var e=Vs;0===e&&(e=xe,!(261888&(xe<<=1))&&(xe=256)),Du=e}return Du}function Vu(e){return null==e||"symbol"==typeof e||"boolean"==typeof e?null:"function"==typeof e?e:Rt(""+e)}function Wu(e,t){var r=t.ownerDocument.createElement("input");return r.name=t.name,r.value=t.value,e.id&&r.setAttribute("form",e.id),t.parentNode.insertBefore(r,t),e=new FormData(e),r.parentNode.removeChild(r),e}for(var Qu=0;Qu<Sn.length;Qu++){var Gu=Sn[Qu];En(Gu.toLowerCase(),"on"+(Gu[0].toUpperCase()+Gu.slice(1)))}En(vn,"onAnimationEnd"),En(yn,"onAnimationIteration"),En(xn,"onAnimationStart"),En("dblclick","onDoubleClick"),En("focusin","onFocus"),En("focusout","onBlur"),En(wn,"onTransitionRun"),En(jn,"onTransitionStart"),En(kn,"onTransitionCancel"),En(_n,"onTransitionEnd"),it("onMouseEnter",["mouseout","mouseover"]),it("onMouseLeave",["mouseout","mouseover"]),it("onPointerEnter",["pointerout","pointerover"]),it("onPointerLeave",["pointerout","pointerover"]),at("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),at("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),at("onBeforeInput",["compositionend","keypress","textInput","paste"]),at("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),at("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),at("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ku="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ju=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ku));function Yu(e,t){t=!!(4&t);for(var r=0;r<e.length;r++){var n=e[r],s=n.event;n=n.listeners;e:{var a=void 0;if(t)for(var i=n.length-1;0<=i;i--){var o=n[i],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==a&&s.isPropagationStopped())break e;a=o,s.currentTarget=c;try{a(s)}catch(u){Cn(u)}s.currentTarget=null,a=l}else for(i=0;i<n.length;i++){if(l=(o=n[i]).instance,c=o.currentTarget,o=o.listener,l!==a&&s.isPropagationStopped())break e;a=o,s.currentTarget=c;try{a(s)}catch(u){Cn(u)}s.currentTarget=null,a=l}}}}function Xu(e,t){var r=t[Be];void 0===r&&(r=t[Be]=new Set);var n=e+"__bubble";r.has(n)||(rd(t,e,2,!1),r.add(n))}function Zu(e,t,r){var n=0;t&&(n|=4),rd(r,e,n,t)}var ed="_reactListening"+Math.random().toString(36).slice(2);function td(e){if(!e[ed]){e[ed]=!0,nt.forEach(function(t){"selectionchange"!==t&&(Ju.has(t)||Zu(t,!1,e),Zu(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[ed]||(t[ed]=!0,Zu("selectionchange",!1,t))}}function rd(e,t,r,n){switch(Ch(t)){case 2:var s=jh;break;case 8:s=kh;break;default:s=_h}r=s.bind(null,t,r,e),s=void 0,!Ht||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(s=!0),n?void 0!==s?e.addEventListener(t,r,{capture:!0,passive:s}):e.addEventListener(t,r,!0):void 0!==s?e.addEventListener(t,r,{passive:s}):e.addEventListener(t,r,!1)}function nd(e,t,r,n,s){var i=n;if(!(1&t||2&t||null===n))e:for(;;){if(null===n)return;var o=n.tag;if(3===o||4===o){var l=n.stateNode.containerInfo;if(l===s)break;if(4===o)for(o=n.return;null!==o;){var c=o.tag;if((3===c||4===c)&&o.stateNode.containerInfo===s)return;o=o.return}for(;null!==l;){if(null===(o=Xe(l)))return;if(5===(c=o.tag)||6===c||26===c||27===c){n=i=o;continue e}l=l.parentNode}}n=n.return}Ft(function(){var n=i,s=Dt(r),o=[];e:{var l=Nn.get(e);if(void 0!==l){var c=sr,u=e;switch(e){case"keypress":if(0===Jt(r))break e;case"keydown":case"keyup":c=yr;break;case"focusin":u="focus",c=ur;break;case"focusout":u="blur",c=ur;break;case"beforeblur":case"afterblur":c=ur;break;case"click":if(2===r.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":c=lr;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":c=cr;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":c=wr;break;case vn:case yn:case xn:c=dr;break;case _n:c=jr;break;case"scroll":case"scrollend":c=ir;break;case"wheel":c=kr;break;case"copy":case"cut":case"paste":c=hr;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":c=xr;break;case"toggle":case"beforetoggle":c=_r}var d=!!(4&t),h=!d&&("scroll"===e||"scrollend"===e),p=d?null!==l?l+"Capture":null:l;d=[];for(var f,m=n;null!==m;){var g=m;if(f=g.stateNode,5!==(g=g.tag)&&26!==g&&27!==g||null===f||null===p||null!=(g=qt(m,p))&&d.push(sd(m,g,f)),h)break;m=m.return}0<d.length&&(l=new c(l,u,null,r,s),o.push({event:l,listeners:d}))}}if(!(7&t)){if(c="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||r===$t||!(u=r.relatedTarget||r.fromElement)||!Xe(u)&&!u[qe])&&(c||l)&&(l=s.window===s?s:(l=s.ownerDocument)?l.defaultView||l.parentWindow:window,c?(c=n,null!==(u=(u=r.relatedTarget||r.toElement)?Xe(u):null)&&(h=a(u),d=u.tag,u!==h||5!==d&&27!==d&&6!==d)&&(u=null)):(c=null,u=n),c!==u)){if(d=lr,g="onMouseLeave",p="onMouseEnter",m="mouse","pointerout"!==e&&"pointerover"!==e||(d=xr,g="onPointerLeave",p="onPointerEnter",m="pointer"),h=null==c?l:et(c),f=null==u?l:et(u),(l=new d(g,m+"leave",c,r,s)).target=h,l.relatedTarget=f,g=null,Xe(s)===n&&((d=new d(p,m+"enter",u,r,s)).target=f,d.relatedTarget=h,g=d),h=g,c&&u)e:{for(d=id,m=u,f=0,g=p=c;g;g=d(g))f++;g=0;for(var b=m;b;b=d(b))g++;for(;0<f-g;)p=d(p),f--;for(;0<g-f;)m=d(m),g--;for(;f--;){if(p===m||null!==m&&p===m.alternate){d=p;break e}p=d(p),m=d(m)}d=null}else d=null;null!==c&&od(o,l,c,d,!1),null!==u&&null!==h&&od(o,h,u,d,!0)}if("select"===(c=(l=n?et(n):window).nodeName&&l.nodeName.toLowerCase())||"input"===c&&"file"===l.type)var v=qr;else if(Dr(l))if(Br)v=Xr;else{v=Jr;var y=Kr}else!(c=l.nodeName)||"input"!==c.toLowerCase()||"checkbox"!==l.type&&"radio"!==l.type?n&&Ot(n.elementType)&&(v=qr):v=Yr;switch(v&&(v=v(e,n))?Lr(o,v,r,s):(y&&y(e,l,n),"focusout"===e&&n&&"number"===l.type&&null!=n.memoizedProps.value&&jt(l,"number",l.value)),y=n?et(n):window,e){case"focusin":(Dr(y)||"true"===y.contentEditable)&&(ln=y,cn=n,un=null);break;case"focusout":un=cn=ln=null;break;case"mousedown":dn=!0;break;case"contextmenu":case"mouseup":case"dragend":dn=!1,hn(o,r,s);break;case"selectionchange":if(on)break;case"keydown":case"keyup":hn(o,r,s)}var x;if(Sr)e:{switch(e){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Ir?Ar(e,r)&&(w="onCompositionEnd"):"keydown"===e&&229===r.keyCode&&(w="onCompositionStart");w&&(Tr&&"ko"!==r.locale&&(Ir||"onCompositionStart"!==w?"onCompositionEnd"===w&&Ir&&(x=Kt()):(Qt="value"in(Wt=s)?Wt.value:Wt.textContent,Ir=!0)),0<(y=ad(n,w)).length&&(w=new pr(w,e,null,r,s),o.push({event:w,listeners:y}),x?w.data=x:null!==(x=Rr(r))&&(w.data=x))),(x=Cr?function(e,t){switch(e){case"compositionend":return Rr(t);case"keypress":return 32!==t.which?null:(Pr=!0,Or);case"textInput":return(e=t.data)===Or&&Pr?null:e;default:return null}}(e,r):function(e,t){if(Ir)return"compositionend"===e||!Sr&&Ar(e,t)?(e=Kt(),Gt=Qt=Wt=null,Ir=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Tr&&"ko"!==t.locale?null:t.data}}(e,r))&&(0<(w=ad(n,"onBeforeInput")).length&&(y=new pr("onBeforeInput","beforeinput",null,r,s),o.push({event:y,listeners:w}),y.data=x)),function(e,t,r,n,s){if("submit"===t&&r&&r.stateNode===s){var a=Vu((s[Fe]||null).action),i=n.submitter;i&&null!==(t=(t=i[Fe]||null)?Vu(t.formAction):i.getAttribute("formAction"))&&(a=t,i=null);var o=new sr("action","action",null,n,s);e.push({event:o,listeners:[{instance:null,listener:function(){if(n.defaultPrevented){if(0!==Du){var e=i?Wu(s,i):new FormData(s);ro(r,{pending:!0,data:e,method:s.method,action:a},null,e)}}else"function"==typeof a&&(o.preventDefault(),e=i?Wu(s,i):new FormData(s),ro(r,{pending:!0,data:e,method:s.method,action:a},a,e))},currentTarget:s}]})}}(o,e,n,r,s)}Yu(o,t)})}function sd(e,t,r){return{instance:e,listener:t,currentTarget:r}}function ad(e,t){for(var r=t+"Capture",n=[];null!==e;){var s=e,a=s.stateNode;if(5!==(s=s.tag)&&26!==s&&27!==s||null===a||(null!=(s=qt(e,r))&&n.unshift(sd(e,s,a)),null!=(s=qt(e,t))&&n.push(sd(e,s,a))),3===e.tag)return n;e=e.return}return[]}function id(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag&&27!==e.tag);return e||null}function od(e,t,r,n,s){for(var a=t._reactName,i=[];null!==r&&r!==n;){var o=r,l=o.alternate,c=o.stateNode;if(o=o.tag,null!==l&&l===n)break;5!==o&&26!==o&&27!==o||null===c||(l=c,s?null!=(c=qt(r,a))&&i.unshift(sd(r,c,l)):s||null!=(c=qt(r,a))&&i.push(sd(r,c,l))),r=r.return}0!==i.length&&e.push({event:t,listeners:i})}var ld=/\r\n?/g,cd=/\u0000|\uFFFD/g;function ud(e){return("string"==typeof e?e:""+e).replace(ld,"\n").replace(cd,"")}function dd(e,t){return t=ud(t),ud(e)===t}function hd(e,t,r,s,a,i){switch(r){case"children":"string"==typeof s?"body"===t||"textarea"===t&&""===s||St(e,s):("number"==typeof s||"bigint"==typeof s)&&"body"!==t&&St(e,""+s);break;case"className":dt(e,"class",s);break;case"tabIndex":dt(e,"tabindex",s);break;case"dir":case"role":case"viewBox":case"width":case"height":dt(e,r,s);break;case"style":Tt(e,s,i);break;case"data":if("object"!==t){dt(e,"data",s);break}case"src":case"href":if(""===s&&("a"!==t||"href"!==r)){e.removeAttribute(r);break}if(null==s||"function"==typeof s||"symbol"==typeof s||"boolean"==typeof s){e.removeAttribute(r);break}s=Rt(""+s),e.setAttribute(r,s);break;case"action":case"formAction":if("function"==typeof s){e.setAttribute(r,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}if("function"==typeof i&&("formAction"===r?("input"!==t&&hd(e,t,"name",a.name,a,null),hd(e,t,"formEncType",a.formEncType,a,null),hd(e,t,"formMethod",a.formMethod,a,null),hd(e,t,"formTarget",a.formTarget,a,null)):(hd(e,t,"encType",a.encType,a,null),hd(e,t,"method",a.method,a,null),hd(e,t,"target",a.target,a,null))),null==s||"symbol"==typeof s||"boolean"==typeof s){e.removeAttribute(r);break}s=Rt(""+s),e.setAttribute(r,s);break;case"onClick":null!=s&&(e.onclick=It);break;case"onScroll":null!=s&&Xu("scroll",e);break;case"onScrollEnd":null!=s&&Xu("scrollend",e);break;case"dangerouslySetInnerHTML":if(null!=s){if("object"!=typeof s||!("__html"in s))throw Error(n(61));if(null!=(r=s.__html)){if(null!=a.children)throw Error(n(60));e.innerHTML=r}}break;case"multiple":e.multiple=s&&"function"!=typeof s&&"symbol"!=typeof s;break;case"muted":e.muted=s&&"function"!=typeof s&&"symbol"!=typeof s;break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":case"autoFocus":break;case"xlinkHref":if(null==s||"function"==typeof s||"boolean"==typeof s||"symbol"==typeof s){e.removeAttribute("xlink:href");break}r=Rt(""+s),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",r);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":null!=s&&"function"!=typeof s&&"symbol"!=typeof s?e.setAttribute(r,""+s):e.removeAttribute(r);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":s&&"function"!=typeof s&&"symbol"!=typeof s?e.setAttribute(r,""):e.removeAttribute(r);break;case"capture":case"download":!0===s?e.setAttribute(r,""):!1!==s&&null!=s&&"function"!=typeof s&&"symbol"!=typeof s?e.setAttribute(r,s):e.removeAttribute(r);break;case"cols":case"rows":case"size":case"span":null!=s&&"function"!=typeof s&&"symbol"!=typeof s&&!isNaN(s)&&1<=s?e.setAttribute(r,s):e.removeAttribute(r);break;case"rowSpan":case"start":null==s||"function"==typeof s||"symbol"==typeof s||isNaN(s)?e.removeAttribute(r):e.setAttribute(r,s);break;case"popover":Xu("beforetoggle",e),Xu("toggle",e),ut(e,"popover",s);break;case"xlinkActuate":ht(e,"http://www.w3.org/1999/xlink","xlink:actuate",s);break;case"xlinkArcrole":ht(e,"http://www.w3.org/1999/xlink","xlink:arcrole",s);break;case"xlinkRole":ht(e,"http://www.w3.org/1999/xlink","xlink:role",s);break;case"xlinkShow":ht(e,"http://www.w3.org/1999/xlink","xlink:show",s);break;case"xlinkTitle":ht(e,"http://www.w3.org/1999/xlink","xlink:title",s);break;case"xlinkType":ht(e,"http://www.w3.org/1999/xlink","xlink:type",s);break;case"xmlBase":ht(e,"http://www.w3.org/XML/1998/namespace","xml:base",s);break;case"xmlLang":ht(e,"http://www.w3.org/XML/1998/namespace","xml:lang",s);break;case"xmlSpace":ht(e,"http://www.w3.org/XML/1998/namespace","xml:space",s);break;case"is":ut(e,"is",s);break;case"innerText":case"textContent":break;default:(!(2<r.length)||"o"!==r[0]&&"O"!==r[0]||"n"!==r[1]&&"N"!==r[1])&&ut(e,r=Pt.get(r)||r,s)}}function pd(e,t,r,s,a,i){switch(r){case"style":Tt(e,s,i);break;case"dangerouslySetInnerHTML":if(null!=s){if("object"!=typeof s||!("__html"in s))throw Error(n(61));if(null!=(r=s.__html)){if(null!=a.children)throw Error(n(60));e.innerHTML=r}}break;case"children":"string"==typeof s?St(e,s):("number"==typeof s||"bigint"==typeof s)&&St(e,""+s);break;case"onScroll":null!=s&&Xu("scroll",e);break;case"onScrollEnd":null!=s&&Xu("scrollend",e);break;case"onClick":null!=s&&(e.onclick=It);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":case"innerText":case"textContent":break;default:st.hasOwnProperty(r)||("o"!==r[0]||"n"!==r[1]||(a=r.endsWith("Capture"),t=r.slice(2,a?r.length-7:void 0),"function"==typeof(i=null!=(i=e[Fe]||null)?i[r]:null)&&e.removeEventListener(t,i,a),"function"!=typeof s)?r in e?e[r]=s:!0===s?e.setAttribute(r,""):ut(e,r,s):("function"!=typeof i&&null!==i&&(r in e?e[r]=null:e.hasAttribute(r)&&e.removeAttribute(r)),e.addEventListener(t,s,a)))}}function fd(e,t,r){switch(t){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":Xu("error",e),Xu("load",e);var s,a=!1,i=!1;for(s in r)if(r.hasOwnProperty(s)){var o=r[s];if(null!=o)switch(s){case"src":a=!0;break;case"srcSet":i=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,t));default:hd(e,t,s,o,r,null)}}return i&&hd(e,t,"srcSet",r.srcSet,r,null),void(a&&hd(e,t,"src",r.src,r,null));case"input":Xu("invalid",e);var l=s=o=i=null,c=null,u=null;for(a in r)if(r.hasOwnProperty(a)){var d=r[a];if(null!=d)switch(a){case"name":i=d;break;case"type":o=d;break;case"checked":c=d;break;case"defaultChecked":u=d;break;case"value":s=d;break;case"defaultValue":l=d;break;case"children":case"dangerouslySetInnerHTML":if(null!=d)throw Error(n(137,t));break;default:hd(e,t,a,d,r,null)}}return void wt(e,s,l,c,u,o,i,!1);case"select":for(i in Xu("invalid",e),a=o=s=null,r)if(r.hasOwnProperty(i)&&null!=(l=r[i]))switch(i){case"value":s=l;break;case"defaultValue":o=l;break;case"multiple":a=l;default:hd(e,t,i,l,r,null)}return t=s,r=o,e.multiple=!!a,void(null!=t?kt(e,!!a,t,!1):null!=r&&kt(e,!!a,r,!0));case"textarea":for(o in Xu("invalid",e),s=i=a=null,r)if(r.hasOwnProperty(o)&&null!=(l=r[o]))switch(o){case"value":a=l;break;case"defaultValue":i=l;break;case"children":s=l;break;case"dangerouslySetInnerHTML":if(null!=l)throw Error(n(91));break;default:hd(e,t,o,l,r,null)}return void Nt(e,a,i,s);case"option":for(c in r)if(r.hasOwnProperty(c)&&null!=(a=r[c]))if("selected"===c)e.selected=a&&"function"!=typeof a&&"symbol"!=typeof a;else hd(e,t,c,a,r,null);return;case"dialog":Xu("beforetoggle",e),Xu("toggle",e),Xu("cancel",e),Xu("close",e);break;case"iframe":case"object":Xu("load",e);break;case"video":case"audio":for(a=0;a<Ku.length;a++)Xu(Ku[a],e);break;case"image":Xu("error",e),Xu("load",e);break;case"details":Xu("toggle",e);break;case"embed":case"source":case"link":Xu("error",e),Xu("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(u in r)if(r.hasOwnProperty(u)&&null!=(a=r[u]))switch(u){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,t));default:hd(e,t,u,a,r,null)}return;default:if(Ot(t)){for(d in r)r.hasOwnProperty(d)&&(void 0!==(a=r[d])&&pd(e,t,d,a,r,void 0));return}}for(l in r)r.hasOwnProperty(l)&&(null!=(a=r[l])&&hd(e,t,l,a,r,null))}function md(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}var gd=null,bd=null;function vd(e){return 9===e.nodeType?e:e.ownerDocument}function yd(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function xd(e,t){if(0===e)switch(t){case"svg":return 1;case"math":return 2;default:return 0}return 1===e&&"foreignObject"===t?0:e}function wd(e,t){return"textarea"===e||"noscript"===e||"string"==typeof t.children||"number"==typeof t.children||"bigint"==typeof t.children||"object"==typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var jd=null;var kd="function"==typeof setTimeout?setTimeout:void 0,_d="function"==typeof clearTimeout?clearTimeout:void 0,Nd="function"==typeof Promise?Promise:void 0,Sd="function"==typeof queueMicrotask?queueMicrotask:void 0!==Nd?function(e){return Nd.resolve(null).then(e).catch(Ed)}:kd;function Ed(e){setTimeout(function(){throw e})}function Cd(e){return"head"===e}function Td(e,t){var r=t,n=0;do{var s=r.nextSibling;if(e.removeChild(r),s&&8===s.nodeType)if("/$"===(r=s.data)||"/&"===r){if(0===n)return e.removeChild(s),void Wh(t);n--}else if("$"===r||"$?"===r||"$~"===r||"$!"===r||"&"===r)n++;else if("html"===r)Ud(e.ownerDocument.documentElement);else if("head"===r){Ud(r=e.ownerDocument.head);for(var a=r.firstChild;a;){var i=a.nextSibling,o=a.nodeName;a[Ke]||"SCRIPT"===o||"STYLE"===o||"LINK"===o&&"stylesheet"===a.rel.toLowerCase()||r.removeChild(a),a=i}}else"body"===r&&Ud(e.ownerDocument.body);r=s}while(r);Wh(t)}function Od(e,t){var r=e;e=0;do{var n=r.nextSibling;if(1===r.nodeType?t?(r._stashedDisplay=r.style.display,r.style.display="none"):(r.style.display=r._stashedDisplay||"",""===r.getAttribute("style")&&r.removeAttribute("style")):3===r.nodeType&&(t?(r._stashedText=r.nodeValue,r.nodeValue=""):r.nodeValue=r._stashedText||""),n&&8===n.nodeType)if("/$"===(r=n.data)){if(0===e)break;e--}else"$"!==r&&"$?"!==r&&"$~"!==r&&"$!"!==r||e++;r=n}while(r)}function Pd(e){var t=e.firstChild;for(t&&10===t.nodeType&&(t=t.nextSibling);t;){var r=t;switch(t=t.nextSibling,r.nodeName){case"HTML":case"HEAD":case"BODY":Pd(r),Ye(r);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if("stylesheet"===r.rel.toLowerCase())continue}e.removeChild(r)}}function Ad(e,t){for(;8!==e.nodeType;){if((1!==e.nodeType||"INPUT"!==e.nodeName||"hidden"!==e.type)&&!t)return null;if(null===(e=$d(e.nextSibling)))return null}return e}function Rd(e){return"$?"===e.data||"$~"===e.data}function Id(e){return"$!"===e.data||"$?"===e.data&&"loading"!==e.ownerDocument.readyState}function $d(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t||"$~"===t||"&"===t||"F!"===t||"F"===t)break;if("/$"===t||"/&"===t)return null}}return e}var Dd=null;function Ld(e){e=e.nextSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("/$"===r||"/&"===r){if(0===t)return $d(e.nextSibling);t--}else"$"!==r&&"$!"!==r&&"$?"!==r&&"$~"!==r&&"&"!==r||t++}e=e.nextSibling}return null}function zd(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var r=e.data;if("$"===r||"$!"===r||"$?"===r||"$~"===r||"&"===r){if(0===t)return e;t--}else"/$"!==r&&"/&"!==r||t++}e=e.previousSibling}return null}function Md(e,t,r){switch(t=vd(r),e){case"html":if(!(e=t.documentElement))throw Error(n(452));return e;case"head":if(!(e=t.head))throw Error(n(453));return e;case"body":if(!(e=t.body))throw Error(n(454));return e;default:throw Error(n(451))}}function Ud(e){for(var t=e.attributes;t.length;)e.removeAttributeNode(t[0]);Ye(e)}var Fd=new Map,qd=new Set;function Bd(e){return"function"==typeof e.getRootNode?e.getRootNode():9===e.nodeType?e:e.ownerDocument}var Hd=A.d;A.d={f:function(){var e=Hd.f(),t=tu();return e||t},r:function(e){var t=Ze(e);null!==t&&5===t.tag&&"form"===t.type?so(t):Hd.r(e)},D:function(e){Hd.D(e),Wd("dns-prefetch",e,null)},C:function(e,t){Hd.C(e,t),Wd("preconnect",e,t)},L:function(e,t,r){Hd.L(e,t,r);var n=Vd;if(n&&e&&t){var s='link[rel="preload"][as="'+yt(t)+'"]';"image"===t&&r&&r.imageSrcSet?(s+='[imagesrcset="'+yt(r.imageSrcSet)+'"]',"string"==typeof r.imageSizes&&(s+='[imagesizes="'+yt(r.imageSizes)+'"]')):s+='[href="'+yt(e)+'"]';var a=s;switch(t){case"style":a=Gd(e);break;case"script":a=Yd(e)}Fd.has(a)||(e=u({rel:"preload",href:"image"===t&&r&&r.imageSrcSet?void 0:e,as:t},r),Fd.set(a,e),null!==n.querySelector(s)||"style"===t&&n.querySelector(Kd(a))||"script"===t&&n.querySelector(Xd(a))||(fd(t=n.createElement("link"),"link",e),rt(t),n.head.appendChild(t)))}},m:function(e,t){Hd.m(e,t);var r=Vd;if(r&&e){var n=t&&"string"==typeof t.as?t.as:"script",s='link[rel="modulepreload"][as="'+yt(n)+'"][href="'+yt(e)+'"]',a=s;switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":a=Yd(e)}if(!Fd.has(a)&&(e=u({rel:"modulepreload",href:e},t),Fd.set(a,e),null===r.querySelector(s))){switch(n){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(r.querySelector(Xd(a)))return}fd(n=r.createElement("link"),"link",e),rt(n),r.head.appendChild(n)}}},X:function(e,t){Hd.X(e,t);var r=Vd;if(r&&e){var n=tt(r).hoistableScripts,s=Yd(e),a=n.get(s);a||((a=r.querySelector(Xd(s)))||(e=u({src:e,async:!0},t),(t=Fd.get(s))&&rh(e,t),rt(a=r.createElement("script")),fd(a,"link",e),r.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},n.set(s,a))}},S:function(e,t,r){Hd.S(e,t,r);var n=Vd;if(n&&e){var s=tt(n).hoistableStyles,a=Gd(e);t=t||"default";var i=s.get(a);if(!i){var o={loading:0,preload:null};if(i=n.querySelector(Kd(a)))o.loading=5;else{e=u({rel:"stylesheet",href:e,"data-precedence":t},r),(r=Fd.get(a))&&th(e,r);var l=i=n.createElement("link");rt(l),fd(l,"link",e),l._p=new Promise(function(e,t){l.onload=e,l.onerror=t}),l.addEventListener("load",function(){o.loading|=1}),l.addEventListener("error",function(){o.loading|=2}),o.loading|=4,eh(i,t,n)}i={type:"stylesheet",instance:i,count:1,state:o},s.set(a,i)}}},M:function(e,t){Hd.M(e,t);var r=Vd;if(r&&e){var n=tt(r).hoistableScripts,s=Yd(e),a=n.get(s);a||((a=r.querySelector(Xd(s)))||(e=u({src:e,async:!0,type:"module"},t),(t=Fd.get(s))&&rh(e,t),rt(a=r.createElement("script")),fd(a,"link",e),r.head.appendChild(a)),a={type:"script",instance:a,count:1,state:null},n.set(s,a))}}};var Vd="undefined"==typeof document?null:document;function Wd(e,t,r){var n=Vd;if(n&&"string"==typeof t&&t){var s=yt(t);s='link[rel="'+e+'"][href="'+s+'"]',"string"==typeof r&&(s+='[crossorigin="'+r+'"]'),qd.has(s)||(qd.add(s),e={rel:e,crossOrigin:r,href:t},null===n.querySelector(s)&&(fd(t=n.createElement("link"),"link",e),rt(t),n.head.appendChild(t)))}}function Qd(e,t,r,s){var a,i,o,l,c=(c=B.current)?Bd(c):null;if(!c)throw Error(n(446));switch(e){case"meta":case"title":return null;case"style":return"string"==typeof r.precedence&&"string"==typeof r.href?(t=Gd(r.href),(s=(r=tt(c).hoistableStyles).get(t))||(s={type:"style",instance:null,count:0,state:null},r.set(t,s)),s):{type:"void",instance:null,count:0,state:null};case"link":if("stylesheet"===r.rel&&"string"==typeof r.href&&"string"==typeof r.precedence){e=Gd(r.href);var u=tt(c).hoistableStyles,d=u.get(e);if(d||(c=c.ownerDocument||c,d={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},u.set(e,d),(u=c.querySelector(Kd(e)))&&!u._p&&(d.instance=u,d.state.loading=5),Fd.has(e)||(r={rel:"preload",as:"style",href:r.href,crossOrigin:r.crossOrigin,integrity:r.integrity,media:r.media,hrefLang:r.hrefLang,referrerPolicy:r.referrerPolicy},Fd.set(e,r),u||(a=c,i=e,o=r,l=d.state,a.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=a.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),fd(i,"link",o),rt(i),a.head.appendChild(i))))),t&&null===s)throw Error(n(528,""));return d}if(t&&null!==s)throw Error(n(529,""));return null;case"script":return t=r.async,"string"==typeof(r=r.src)&&t&&"function"!=typeof t&&"symbol"!=typeof t?(t=Yd(r),(s=(r=tt(c).hoistableScripts).get(t))||(s={type:"script",instance:null,count:0,state:null},r.set(t,s)),s):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,e))}}function Gd(e){return'href="'+yt(e)+'"'}function Kd(e){return'link[rel="stylesheet"]['+e+"]"}function Jd(e){return u({},e,{"data-precedence":e.precedence,precedence:null})}function Yd(e){return'[src="'+yt(e)+'"]'}function Xd(e){return"script[async]"+e}function Zd(e,t,r){if(t.count++,null===t.instance)switch(t.type){case"style":var s=e.querySelector('style[data-href~="'+yt(r.href)+'"]');if(s)return t.instance=s,rt(s),s;var a=u({},r,{"data-href":r.href,"data-precedence":r.precedence,href:null,precedence:null});return rt(s=(e.ownerDocument||e).createElement("style")),fd(s,"style",a),eh(s,r.precedence,e),t.instance=s;case"stylesheet":a=Gd(r.href);var i=e.querySelector(Kd(a));if(i)return t.state.loading|=4,t.instance=i,rt(i),i;s=Jd(r),(a=Fd.get(a))&&th(s,a),rt(i=(e.ownerDocument||e).createElement("link"));var o=i;return o._p=new Promise(function(e,t){o.onload=e,o.onerror=t}),fd(i,"link",s),t.state.loading|=4,eh(i,r.precedence,e),t.instance=i;case"script":return i=Yd(r.src),(a=e.querySelector(Xd(i)))?(t.instance=a,rt(a),a):(s=r,(a=Fd.get(i))&&rh(s=u({},r),a),rt(a=(e=e.ownerDocument||e).createElement("script")),fd(a,"link",s),e.head.appendChild(a),t.instance=a);case"void":return null;default:throw Error(n(443,t.type))}else"stylesheet"===t.type&&!(4&t.state.loading)&&(s=t.instance,t.state.loading|=4,eh(s,r.precedence,e));return t.instance}function eh(e,t,r){for(var n=r.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),s=n.length?n[n.length-1]:null,a=s,i=0;i<n.length;i++){var o=n[i];if(o.dataset.precedence===t)a=o;else if(a!==s)break}a?a.parentNode.insertBefore(e,a.nextSibling):(t=9===r.nodeType?r.head:r).insertBefore(e,t.firstChild)}function th(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.title&&(e.title=t.title)}function rh(e,t){null==e.crossOrigin&&(e.crossOrigin=t.crossOrigin),null==e.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),null==e.integrity&&(e.integrity=t.integrity)}var nh=null;function sh(e,t,r){if(null===nh){var n=new Map,s=nh=new Map;s.set(r,n)}else(n=(s=nh).get(r))||(n=new Map,s.set(r,n));if(n.has(e))return n;for(n.set(e,null),r=r.getElementsByTagName(e),s=0;s<r.length;s++){var a=r[s];if(!(a[Ke]||a[Ue]||"link"===e&&"stylesheet"===a.getAttribute("rel"))&&"http://www.w3.org/2000/svg"!==a.namespaceURI){var i=a.getAttribute(t)||"";i=e+i;var o=n.get(i);o?o.push(a):n.set(i,[a])}}return n}function ah(e,t,r){(e=e.ownerDocument||e).head.insertBefore(r,"title"===t?e.querySelector("head > title"):null)}function ih(e){return!!("stylesheet"!==e.type||3&e.state.loading)}var oh=0;function lh(){if(this.count--,0===this.count&&(0===this.imgCount||!this.waitingForImages))if(this.stylesheets)uh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}var ch=null;function uh(e,t){e.stylesheets=null,null!==e.unsuspend&&(e.count++,ch=new Map,t.forEach(dh,e),ch=null,lh.call(e))}function dh(e,t){if(!(4&t.state.loading)){var r=ch.get(e);if(r)var n=r.get(null);else{r=new Map,ch.set(e,r);for(var s=e.querySelectorAll("link[data-precedence],style[data-precedence]"),a=0;a<s.length;a++){var i=s[a];"LINK"!==i.nodeName&&"not all"===i.getAttribute("media")||(r.set(i.dataset.precedence,i),n=i)}n&&r.set(null,n)}i=(s=t.instance).getAttribute("data-precedence"),(a=r.get(i)||n)===n&&r.set(null,s),r.set(i,s),this.count++,n=lh.bind(this),s.addEventListener("load",n),s.addEventListener("error",n),a?a.parentNode.insertBefore(s,a.nextSibling):(e=9===e.nodeType?e.head:e).insertBefore(s,e.firstChild),t.state.loading|=4}}var hh={$$typeof:v,Provider:null,Consumer:null,_currentValue:R,_currentValue2:R,_threadCount:0};function ph(e,t,r,n,s,a,i,o,l){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Oe(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Oe(0),this.hiddenUpdates=Oe(null),this.identifierPrefix=n,this.onUncaughtError=s,this.onCaughtError=a,this.onRecoverableError=i,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=l,this.incompleteTransitions=new Map}function fh(e,t,r,n,s,a,i,o,l,c,u,d){return e=new ph(e,t,r,i,l,c,u,d,o),t=1,!0===a&&(t|=24),a=Un(3,null,null,t),e.current=a,a.stateNode=e,(t=Fs()).refCount++,e.pooledCache=t,t.refCount++,a.memoizedState={element:n,isDehydrated:r,cache:t},va(a),e}function mh(e){return e?e=zn:zn}function gh(e,t,r,n,s,a){s=mh(s),null===n.context?n.context=s:n.pendingContext=s,(n=xa(t)).payload={element:r},null!==(a=void 0===a?null:a)&&(n.callback=a),null!==(r=wa(e,n,t))&&(Jc(r,0,t),ja(r,e,t))}function bh(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var r=e.retryLane;e.retryLane=0!==r&&r<t?r:t}}function vh(e,t){bh(e,t),(e=e.alternate)&&bh(e,t)}function yh(e){if(13===e.tag||31===e.tag){var t=$n(e,67108864);null!==t&&Jc(t,0,67108864),vh(e,67108864)}}function xh(e){if(13===e.tag||31===e.tag){var t=Gc(),r=$n(e,t=$e(t));null!==r&&Jc(r,0,t),vh(e,t)}}var wh=!0;function jh(e,t,r,n){var s=P.T;P.T=null;var a=A.p;try{A.p=2,_h(e,t,r,n)}finally{A.p=a,P.T=s}}function kh(e,t,r,n){var s=P.T;P.T=null;var a=A.p;try{A.p=8,_h(e,t,r,n)}finally{A.p=a,P.T=s}}function _h(e,t,r,n){if(wh){var s=Nh(n);if(null===s)nd(e,t,n,Sh,r),Lh(e,n);else if(function(e,t,r,n,s){switch(t){case"focusin":return Oh=zh(Oh,e,t,r,n,s),!0;case"dragenter":return Ph=zh(Ph,e,t,r,n,s),!0;case"mouseover":return Ah=zh(Ah,e,t,r,n,s),!0;case"pointerover":var a=s.pointerId;return Rh.set(a,zh(Rh.get(a)||null,e,t,r,n,s)),!0;case"gotpointercapture":return a=s.pointerId,Ih.set(a,zh(Ih.get(a)||null,e,t,r,n,s)),!0}return!1}(s,e,t,r,n))n.stopPropagation();else if(Lh(e,n),4&t&&-1<Dh.indexOf(e)){for(;null!==s;){var a=Ze(s);if(null!==a)switch(a.tag){case 3:if((a=a.stateNode).current.memoizedState.isDehydrated){var i=Ne(a.pendingLanes);if(0!==i){var o=a;for(o.pendingLanes|=2,o.entangledLanes|=2;i;){var l=1<<31-be(i);o.entanglements[1]|=l,i&=~l}Lu(a),!(6&mc)&&(Dc=ae()+500,zu(0))}}break;case 31:case 13:null!==(o=$n(a,2))&&Jc(o,0,2),tu(),vh(a,2)}if(null===(a=Nh(n))&&nd(e,t,n,Sh,r),a===s)break;s=a}null!==s&&n.stopPropagation()}else nd(e,t,n,null,r)}}function Nh(e){return Eh(e=Dt(e))}var Sh=null;function Eh(e){if(Sh=null,null!==(e=Xe(e))){var t=a(e);if(null===t)e=null;else{var r=t.tag;if(13===r){if(null!==(e=i(t)))return e;e=null}else if(31===r){if(null!==(e=o(t)))return e;e=null}else if(3===r){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null)}}return Sh=e,null}function Ch(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(ie()){case oe:return 2;case le:return 8;case ce:case ue:return 32;case de:return 268435456;default:return 32}default:return 32}}var Th=!1,Oh=null,Ph=null,Ah=null,Rh=new Map,Ih=new Map,$h=[],Dh="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Lh(e,t){switch(e){case"focusin":case"focusout":Oh=null;break;case"dragenter":case"dragleave":Ph=null;break;case"mouseover":case"mouseout":Ah=null;break;case"pointerover":case"pointerout":Rh.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ih.delete(t.pointerId)}}function zh(e,t,r,n,s,a){return null===e||e.nativeEvent!==a?(e={blockedOn:t,domEventName:r,eventSystemFlags:n,nativeEvent:a,targetContainers:[s]},null!==t&&(null!==(t=Ze(t))&&yh(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,null!==s&&-1===t.indexOf(s)&&t.push(s),e)}function Mh(e){var t=Xe(e.target);if(null!==t){var r=a(t);if(null!==r)if(13===(t=r.tag)){if(null!==(t=i(r)))return e.blockedOn=t,void ze(e.priority,function(){xh(r)})}else if(31===t){if(null!==(t=o(r)))return e.blockedOn=t,void ze(e.priority,function(){xh(r)})}else if(3===t&&r.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===r.tag?r.stateNode.containerInfo:null)}e.blockedOn=null}function Uh(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var r=Nh(e.nativeEvent);if(null!==r)return null!==(t=Ze(r))&&yh(t),e.blockedOn=r,!1;var n=new(r=e.nativeEvent).constructor(r.type,r);$t=n,r.target.dispatchEvent(n),$t=null,t.shift()}return!0}function Fh(e,t,r){Uh(e)&&r.delete(t)}function qh(){Th=!1,null!==Oh&&Uh(Oh)&&(Oh=null),null!==Ph&&Uh(Ph)&&(Ph=null),null!==Ah&&Uh(Ah)&&(Ah=null),Rh.forEach(Fh),Ih.forEach(Fh)}function Bh(t,r){t.blockedOn===r&&(t.blockedOn=null,Th||(Th=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,qh)))}var Hh=null;function Vh(t){Hh!==t&&(Hh=t,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Hh===t&&(Hh=null);for(var e=0;e<t.length;e+=3){var r=t[e],n=t[e+1],s=t[e+2];if("function"!=typeof n){if(null===Eh(n||r))continue;break}var a=Ze(r);null!==a&&(t.splice(e,3),e-=3,ro(a,{pending:!0,data:s,method:r.method,action:n},n,s))}}))}function Wh(e){function t(t){return Bh(t,e)}null!==Oh&&Bh(Oh,e),null!==Ph&&Bh(Ph,e),null!==Ah&&Bh(Ah,e),Rh.forEach(t),Ih.forEach(t);for(var r=0;r<$h.length;r++){var n=$h[r];n.blockedOn===e&&(n.blockedOn=null)}for(;0<$h.length&&null===(r=$h[0]).blockedOn;)Mh(r),null===r.blockedOn&&$h.shift();if(null!=(r=(e.ownerDocument||e).$$reactFormReplay))for(n=0;n<r.length;n+=3){var s=r[n],a=r[n+1],i=s[Fe]||null;if("function"==typeof a)i||Vh(r);else if(i){var o=null;if(a&&a.hasAttribute("formAction")){if(s=a,i=a[Fe]||null)o=i.formAction;else if(null!==Eh(s))continue}else o=i.action;"function"==typeof o?r[n+1]=o:(r.splice(n,3),n-=3),Vh(r)}}}function Qh(){function e(e){e.canIntercept&&"react-transition"===e.info&&e.intercept({handler:function(){return new Promise(function(e){return s=e})},focusReset:"manual",scroll:"manual"})}function t(){null!==s&&(s(),s=null),n||setTimeout(r,20)}function r(){if(!n&&!navigation.transition){var e=navigation.currentEntry;e&&null!=e.url&&navigation.navigate(e.url,{state:e.getState(),info:"react-transition",history:"replace"})}}if("object"==typeof navigation){var n=!1,s=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",t),navigation.addEventListener("navigateerror",t),setTimeout(r,100),function(){n=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",t),navigation.removeEventListener("navigateerror",t),null!==s&&(s(),s=null)}}}function Gh(e){this._internalRoot=e}function Kh(e){this._internalRoot=e}Kh.prototype.render=Gh.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(n(409));gh(t.current,Gc(),e,t,null,null)},Kh.prototype.unmount=Gh.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;gh(e.current,2,null,e,null,null),tu(),t[qe]=null}},Kh.prototype.unstable_scheduleHydration=function(e){if(e){var t=Le();e={blockedOn:null,target:e,priority:t};for(var r=0;r<$h.length&&0!==t&&t<$h[r].priority;r++);$h.splice(r,0,e),0===r&&Mh(e)}};var Jh=t.version;if("19.2.0"!==Jh)throw Error(n(527,Jh,"19.2.0"));A.findDOMNode=function(e){var t=e._reactInternals;if(void 0===t){if("function"==typeof e.render)throw Error(n(188));throw e=Object.keys(e).join(","),Error(n(268,e))}return e=function(e){var t=e.alternate;if(!t){if(null===(t=a(e)))throw Error(n(188));return t!==e?null:e}for(var r=e,s=t;;){var i=r.return;if(null===i)break;var o=i.alternate;if(null===o){if(null!==(s=i.return)){r=s;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===r)return l(i),e;if(o===s)return l(i),t;o=o.sibling}throw Error(n(188))}if(r.return!==s.return)r=i,s=o;else{for(var c=!1,u=i.child;u;){if(u===r){c=!0,r=i,s=o;break}if(u===s){c=!0,s=i,r=o;break}u=u.sibling}if(!c){for(u=o.child;u;){if(u===r){c=!0,r=o,s=i;break}if(u===s){c=!0,s=o,r=i;break}u=u.sibling}if(!c)throw Error(n(189))}}if(r.alternate!==s)throw Error(n(190))}if(3!==r.tag)throw Error(n(188));return r.stateNode.current===r?e:t}(t),e=null===(e=null!==e?c(e):null)?null:e.stateNode};var Yh={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:P,reconcilerVersion:"19.2.0"};if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var Xh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Xh.isDisabled&&Xh.supportsFiber)try{fe=Xh.inject(Yh),me=Xh}catch(ep){}}return Qe.createRoot=function(e,t){if(!s(e))throw Error(n(299));var r=!1,a="",i=So,o=Eo,l=Co;return null!=t&&(!0===t.unstable_strictMode&&(r=!0),void 0!==t.identifierPrefix&&(a=t.identifierPrefix),void 0!==t.onUncaughtError&&(i=t.onUncaughtError),void 0!==t.onCaughtError&&(o=t.onCaughtError),void 0!==t.onRecoverableError&&(l=t.onRecoverableError)),t=fh(e,1,!1,null,0,r,a,null,i,o,l,Qh),e[qe]=t.current,td(e),new Gh(t)},Qe.hydrateRoot=function(e,t,r){if(!s(e))throw Error(n(299));var a=!1,i="",o=So,l=Eo,c=Co,u=null;return null!=r&&(!0===r.unstable_strictMode&&(a=!0),void 0!==r.identifierPrefix&&(i=r.identifierPrefix),void 0!==r.onUncaughtError&&(o=r.onUncaughtError),void 0!==r.onCaughtError&&(l=r.onCaughtError),void 0!==r.onRecoverableError&&(c=r.onRecoverableError),void 0!==r.formState&&(u=r.formState)),(t=fh(e,1,!0,t,0,a,i,u,o,l,c,Qh)).context=mh(null),r=t.current,(i=xa(a=$e(a=Gc()))).callback=null,wa(r,i,a),r=a,t.current.lanes=r,Pe(t,r),Lu(t),e[qe]=t.current,td(e),new Kh(t)},Qe.version="19.2.0",Qe}const Xe=ke((Ve||(Ve=1,function e(){if("undefined"!=typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){}}(),We.exports=Ye()),We.exports));var Ze=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},et={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},tt=new class{#e=et;#t=!1;setTimeoutProvider(e){this.#e=e}setTimeout(e,t){return this.#e.setTimeout(e,t)}clearTimeout(e){this.#e.clearTimeout(e)}setInterval(e,t){return this.#e.setInterval(e,t)}clearInterval(e){this.#e.clearInterval(e)}};var rt="undefined"==typeof window||"Deno"in globalThis;function nt(){}function st(e){return"number"==typeof e&&e>=0&&e!==1/0}function at(e,t){return Math.max(e+(t||0)-Date.now(),0)}function it(e,t){return"function"==typeof e?e(t):e}function ot(e,t){return"function"==typeof e?e(t):e}function lt(e,t){const{type:r="all",exact:n,fetchStatus:s,predicate:a,queryKey:i,stale:o}=e;if(i)if(n){if(t.queryHash!==ut(i,t.options))return!1}else if(!ht(t.queryKey,i))return!1;if("all"!==r){const e=t.isActive();if("active"===r&&!e)return!1;if("inactive"===r&&e)return!1}return("boolean"!=typeof o||t.isStale()===o)&&((!s||s===t.state.fetchStatus)&&!(a&&!a(t)))}function ct(e,t){const{exact:r,status:n,predicate:s,mutationKey:a}=e;if(a){if(!t.options.mutationKey)return!1;if(r){if(dt(t.options.mutationKey)!==dt(a))return!1}else if(!ht(t.options.mutationKey,a))return!1}return(!n||t.state.status===n)&&!(s&&!s(t))}function ut(e,t){return(t?.queryKeyHashFn||dt)(e)}function dt(e){return JSON.stringify(e,(e,t)=>bt(t)?Object.keys(t).sort().reduce((e,r)=>(e[r]=t[r],e),{}):t)}function ht(e,t){return e===t||typeof e==typeof t&&(!(!e||!t||"object"!=typeof e||"object"!=typeof t)&&Object.keys(t).every(r=>ht(e[r],t[r])))}var pt=Object.prototype.hasOwnProperty;function ft(e,t){if(e===t)return e;const r=gt(e)&&gt(t);if(!(r||bt(e)&&bt(t)))return t;const n=(r?e:Object.keys(e)).length,s=r?t:Object.keys(t),a=s.length,i=r?new Array(a):{};let o=0;for(let l=0;l<a;l++){const a=r?l:s[l],c=e[a],u=t[a];if(c===u){i[a]=c,(r?l<n:pt.call(e,a))&&o++;continue}if(null===c||null===u||"object"!=typeof c||"object"!=typeof u){i[a]=u;continue}const d=ft(c,u);i[a]=d,d===c&&o++}return n===a&&o===n?e:i}function mt(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}function gt(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function bt(e){if(!vt(e))return!1;const t=e.constructor;if(void 0===t)return!0;const r=t.prototype;return!!vt(r)&&(!!r.hasOwnProperty("isPrototypeOf")&&Object.getPrototypeOf(e)===Object.prototype)}function vt(e){return"[object Object]"===Object.prototype.toString.call(e)}function yt(e,t,r){return"function"==typeof r.structuralSharing?r.structuralSharing(e,t):!1!==r.structuralSharing?ft(e,t):t}function xt(e,t,r=0){const n=[...e,t];return r&&n.length>r?n.slice(1):n}function wt(e,t,r=0){const n=[t,...e];return r&&n.length>r?n.slice(0,-1):n}var jt=Symbol();function kt(e,t){return!e.queryFn&&t?.initialPromise?()=>t.initialPromise:e.queryFn&&e.queryFn!==jt?e.queryFn:()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`))}var _t=new class extends Ze{#r;#n;#s;constructor(){super(),this.#s=e=>{if(!rt&&window.addEventListener){const t=()=>e();return window.addEventListener("visibilitychange",t,!1),()=>{window.removeEventListener("visibilitychange",t)}}}}onSubscribe(){this.#n||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#n?.(),this.#n=void 0)}setEventListener(e){this.#s=e,this.#n?.(),this.#n=e(e=>{"boolean"==typeof e?this.setFocused(e):this.onFocus()})}setFocused(e){this.#r!==e&&(this.#r=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(t=>{t(e)})}isFocused(){return"boolean"==typeof this.#r?this.#r:"hidden"!==globalThis.document?.visibilityState}};function Nt(){let e,t;const r=new Promise((r,n)=>{e=r,t=n});function n(e){Object.assign(r,e),delete r.resolve,delete r.reject}return r.status="pending",r.catch(()=>{}),r.resolve=t=>{n({status:"fulfilled",value:t}),e(t)},r.reject=e=>{n({status:"rejected",reason:e}),t(e)},r}var St=function(e){setTimeout(e,0)};var Et=function(){let e=[],t=0,r=e=>{e()},n=e=>{e()},s=St;const a=n=>{t?e.push(n):s(()=>{r(n)})};return{batch:a=>{let i;t++;try{i=a()}finally{t--,t||(()=>{const t=e;e=[],t.length&&s(()=>{n(()=>{t.forEach(e=>{r(e)})})})})()}return i},batchCalls:e=>(...t)=>{a(()=>{e(...t)})},schedule:a,setNotifyFunction:e=>{r=e},setBatchNotifyFunction:e=>{n=e},setScheduler:e=>{s=e}}}(),Ct=new class extends Ze{#a=!0;#n;#s;constructor(){super(),this.#s=e=>{if(!rt&&window.addEventListener){const t=()=>e(!0),r=()=>e(!1);return window.addEventListener("online",t,!1),window.addEventListener("offline",r,!1),()=>{window.removeEventListener("online",t),window.removeEventListener("offline",r)}}}}onSubscribe(){this.#n||this.setEventListener(this.#s)}onUnsubscribe(){this.hasListeners()||(this.#n?.(),this.#n=void 0)}setEventListener(e){this.#s=e,this.#n?.(),this.#n=e(this.setOnline.bind(this))}setOnline(e){this.#a!==e&&(this.#a=e,this.listeners.forEach(t=>{t(e)}))}isOnline(){return this.#a}};function Tt(e){return Math.min(1e3*2**e,3e4)}function Ot(e){return"online"!==(e??"online")||Ct.isOnline()}var Pt=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function At(e){let t,r=!1,n=0;const s=Nt(),a=()=>"pending"!==s.status,i=()=>_t.isFocused()&&("always"===e.networkMode||Ct.isOnline())&&e.canRun(),o=()=>Ot(e.networkMode)&&e.canRun(),l=e=>{a()||(t?.(),s.resolve(e))},c=e=>{a()||(t?.(),s.reject(e))},u=()=>new Promise(r=>{t=e=>{(a()||i())&&r(e)},e.onPause?.()}).then(()=>{t=void 0,a()||e.onContinue?.()}),d=()=>{if(a())return;let t;const s=0===n?e.initialPromise:void 0;try{t=s??e.fn()}catch(o){t=Promise.reject(o)}Promise.resolve(t).then(l).catch(t=>{if(a())return;const s=e.retry??(rt?0:3),o=e.retryDelay??Tt,l="function"==typeof o?o(n,t):o,h=!0===s||"number"==typeof s&&n<s||"function"==typeof s&&s(n,t);var p;!r&&h?(n++,e.onFail?.(n,t),(p=l,new Promise(e=>{tt.setTimeout(e,p)})).then(()=>i()?void 0:u()).then(()=>{r?c(t):d()})):c(t)})};return{promise:s,status:()=>s.status,cancel:t=>{if(!a()){const r=new Pt(t);c(r),e.onCancel?.(r)}},continue:()=>(t?.(),s),cancelRetry:()=>{r=!0},continueRetry:()=>{r=!1},canStart:o,start:()=>(o()?d():u().then(d),s)}}var Rt=class{#i;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),st(this.gcTime)&&(this.#i=tt.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(rt?1/0:3e5))}clearGcTimeout(){this.#i&&(tt.clearTimeout(this.#i),this.#i=void 0)}},It=class extends Rt{#o;#l;#c;#u;#d;#h;#p;constructor(e){super(),this.#p=!1,this.#h=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#u=e.client,this.#c=this.#u.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#o=Lt(this.options),this.state=e.state??this.#o,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#d?.promise}setOptions(e){if(this.options={...this.#h,...e},this.updateGcTime(this.options.gcTime),this.state&&void 0===this.state.data){const e=Lt(this.options);void 0!==e.data&&(this.setState(Dt(e.data,e.dataUpdatedAt)),this.#o=e)}}optionalRemove(){this.observers.length||"idle"!==this.state.fetchStatus||this.#c.remove(this)}setData(e,t){const r=yt(this.state.data,e,this.options);return this.#f({data:r,type:"success",dataUpdatedAt:t?.updatedAt,manual:t?.manual}),r}setState(e,t){this.#f({type:"setState",state:e,setStateOptions:t})}cancel(e){const t=this.#d?.promise;return this.#d?.cancel(e),t?t.then(nt).catch(nt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#o)}isActive(){return this.observers.some(e=>!1!==ot(e.options.enabled,this))}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===jt||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0&&this.observers.some(e=>"static"===it(e.options.staleTime,this))}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):void 0===this.state.data||this.state.isInvalidated}isStaleByTime(e=0){return void 0===this.state.data||"static"!==e&&(!!this.state.isInvalidated||!at(this.state.dataUpdatedAt,e))}onFocus(){const e=this.observers.find(e=>e.shouldFetchOnWindowFocus());e?.refetch({cancelRefetch:!1}),this.#d?.continue()}onOnline(){const e=this.observers.find(e=>e.shouldFetchOnReconnect());e?.refetch({cancelRefetch:!1}),this.#d?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#c.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(t=>t!==e),this.observers.length||(this.#d&&(this.#p?this.#d.cancel({revert:!0}):this.#d.cancelRetry()),this.scheduleGc()),this.#c.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#f({type:"invalidate"})}async fetch(e,t){if("idle"!==this.state.fetchStatus&&"rejected"!==this.#d?.status())if(void 0!==this.state.data&&t?.cancelRefetch)this.cancel({silent:!0});else if(this.#d)return this.#d.continueRetry(),this.#d.promise;if(e&&this.setOptions(e),!this.options.queryFn){const e=this.observers.find(e=>e.options.queryFn);e&&this.setOptions(e.options)}const r=new AbortController,n=e=>{Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(this.#p=!0,r.signal)})},s=()=>{const e=kt(this.options,t),r=(()=>{const e={client:this.#u,queryKey:this.queryKey,meta:this.meta};return n(e),e})();return this.#p=!1,this.options.persister?this.options.persister(e,r,this):e(r)},a=(()=>{const e={fetchOptions:t,options:this.options,queryKey:this.queryKey,client:this.#u,state:this.state,fetchFn:s};return n(e),e})();this.options.behavior?.onFetch(a,this),this.#l=this.state,"idle"!==this.state.fetchStatus&&this.state.fetchMeta===a.fetchOptions?.meta||this.#f({type:"fetch",meta:a.fetchOptions?.meta}),this.#d=At({initialPromise:t?.initialPromise,fn:a.fetchFn,onCancel:e=>{e instanceof Pt&&e.revert&&this.setState({...this.#l,fetchStatus:"idle"}),r.abort()},onFail:(e,t)=>{this.#f({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#f({type:"pause"})},onContinue:()=>{this.#f({type:"continue"})},retry:a.options.retry,retryDelay:a.options.retryDelay,networkMode:a.options.networkMode,canRun:()=>!0});try{const e=await this.#d.start();if(void 0===e)throw new Error(`${this.queryHash} data is undefined`);return this.setData(e),this.#c.config.onSuccess?.(e,this),this.#c.config.onSettled?.(e,this.state.error,this),e}catch(i){if(i instanceof Pt){if(i.silent)return this.#d.promise;if(i.revert){if(void 0===this.state.data)throw i;return this.state.data}}throw this.#f({type:"error",error:i}),this.#c.config.onError?.(i,this),this.#c.config.onSettled?.(this.state.data,i,this),i}finally{this.scheduleGc()}}#f(e){this.state=(t=>{switch(e.type){case"failed":return{...t,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...t,fetchStatus:"paused"};case"continue":return{...t,fetchStatus:"fetching"};case"fetch":return{...t,...$t(t.data,this.options),fetchMeta:e.meta??null};case"success":const r={...t,...Dt(e.data,e.dataUpdatedAt),dataUpdateCount:t.dataUpdateCount+1,...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return this.#l=e.manual?r:void 0,r;case"error":const n=e.error;return{...t,error:n,errorUpdateCount:t.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:t.fetchFailureCount+1,fetchFailureReason:n,fetchStatus:"idle",status:"error"};case"invalidate":return{...t,isInvalidated:!0};case"setState":return{...t,...e.state}}})(this.state),Et.batch(()=>{this.observers.forEach(e=>{e.onQueryUpdate()}),this.#c.notify({query:this,type:"updated",action:e})})}};function $t(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Ot(t.networkMode)?"fetching":"paused",...void 0===e&&{error:null,status:"pending"}}}function Dt(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Lt(e){const t="function"==typeof e.initialData?e.initialData():e.initialData,r=void 0!==t,n=r?"function"==typeof e.initialDataUpdatedAt?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:r?n??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:r?"success":"pending",fetchStatus:"idle"}}var zt=class extends Ze{constructor(e,t){super(),this.options=t,this.#u=e,this.#m=null,this.#g=Nt(),this.bindMethods(),this.setOptions(t)}#u;#b=void 0;#v=void 0;#y=void 0;#x;#w;#g;#m;#j;#k;#_;#N;#S;#E;#C=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){1===this.listeners.size&&(this.#b.addObserver(this),Mt(this.#b,this.options)?this.#T():this.updateResult(),this.#O())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return Ut(this.#b,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return Ut(this.#b,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#P(),this.#A(),this.#b.removeObserver(this)}setOptions(e){const t=this.options,r=this.#b;if(this.options=this.#u.defaultQueryOptions(e),void 0!==this.options.enabled&&"boolean"!=typeof this.options.enabled&&"function"!=typeof this.options.enabled&&"boolean"!=typeof ot(this.options.enabled,this.#b))throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#R(),this.#b.setOptions(this.options),t._defaulted&&!mt(this.options,t)&&this.#u.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#b,observer:this});const n=this.hasListeners();n&&Ft(this.#b,r,this.options,t)&&this.#T(),this.updateResult(),!n||this.#b===r&&ot(this.options.enabled,this.#b)===ot(t.enabled,this.#b)&&it(this.options.staleTime,this.#b)===it(t.staleTime,this.#b)||this.#I();const s=this.#$();!n||this.#b===r&&ot(this.options.enabled,this.#b)===ot(t.enabled,this.#b)&&s===this.#E||this.#D(s)}getOptimisticResult(e){const t=this.#u.getQueryCache().build(this.#u,e),r=this.createResult(t,e);return function(e,t){if(!mt(e.getCurrentResult(),t))return!0;return!1}(this,r)&&(this.#y=r,this.#w=this.options,this.#x=this.#b.state),r}getCurrentResult(){return this.#y}trackResult(e,t){return new Proxy(e,{get:(e,r)=>(this.trackProp(r),t?.(r),"promise"===r&&(this.trackProp("data"),this.options.experimental_prefetchInRender||"pending"!==this.#g.status||this.#g.reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(e,r))})}trackProp(e){this.#C.add(e)}getCurrentQuery(){return this.#b}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const t=this.#u.defaultQueryOptions(e),r=this.#u.getQueryCache().build(this.#u,t);return r.fetch().then(()=>this.createResult(r,t))}fetch(e){return this.#T({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#y))}#T(e){this.#R();let t=this.#b.fetch(this.options,e);return e?.throwOnError||(t=t.catch(nt)),t}#I(){this.#P();const e=it(this.options.staleTime,this.#b);if(rt||this.#y.isStale||!st(e))return;const t=at(this.#y.dataUpdatedAt,e)+1;this.#N=tt.setTimeout(()=>{this.#y.isStale||this.updateResult()},t)}#$(){return("function"==typeof this.options.refetchInterval?this.options.refetchInterval(this.#b):this.options.refetchInterval)??!1}#D(e){this.#A(),this.#E=e,!rt&&!1!==ot(this.options.enabled,this.#b)&&st(this.#E)&&0!==this.#E&&(this.#S=tt.setInterval(()=>{(this.options.refetchIntervalInBackground||_t.isFocused())&&this.#T()},this.#E))}#O(){this.#I(),this.#D(this.#$())}#P(){this.#N&&(tt.clearTimeout(this.#N),this.#N=void 0)}#A(){this.#S&&(tt.clearInterval(this.#S),this.#S=void 0)}createResult(e,t){const r=this.#b,n=this.options,s=this.#y,a=this.#x,i=this.#w,o=e!==r?e.state:this.#v,{state:l}=e;let c,u={...l},d=!1;if(t._optimisticResults){const s=this.hasListeners(),a=!s&&Mt(e,t),i=s&&Ft(e,r,t,n);(a||i)&&(u={...u,...$t(l.data,e.options)}),"isRestoring"===t._optimisticResults&&(u.fetchStatus="idle")}let{error:h,errorUpdatedAt:p,status:f}=u;c=u.data;let m=!1;if(void 0!==t.placeholderData&&void 0===c&&"pending"===f){let e;s?.isPlaceholderData&&t.placeholderData===i?.placeholderData?(e=s.data,m=!0):e="function"==typeof t.placeholderData?t.placeholderData(this.#_?.state.data,this.#_):t.placeholderData,void 0!==e&&(f="success",c=yt(s?.data,e,t),d=!0)}if(t.select&&void 0!==c&&!m)if(s&&c===a?.data&&t.select===this.#j)c=this.#k;else try{this.#j=t.select,c=t.select(c),c=yt(s?.data,c,t),this.#k=c,this.#m=null}catch(j){this.#m=j}this.#m&&(h=this.#m,c=this.#k,p=Date.now(),f="error");const g="fetching"===u.fetchStatus,b="pending"===f,v="error"===f,y=b&&g,x=void 0!==c,w={status:f,fetchStatus:u.fetchStatus,isPending:b,isSuccess:"success"===f,isError:v,isInitialLoading:y,isLoading:y,data:c,dataUpdatedAt:u.dataUpdatedAt,error:h,errorUpdatedAt:p,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>o.dataUpdateCount||u.errorUpdateCount>o.errorUpdateCount,isFetching:g,isRefetching:g&&!b,isLoadingError:v&&!x,isPaused:"paused"===u.fetchStatus,isPlaceholderData:d,isRefetchError:v&&x,isStale:qt(e,t),refetch:this.refetch,promise:this.#g,isEnabled:!1!==ot(t.enabled,e)};if(this.options.experimental_prefetchInRender){const t=e=>{"error"===w.status?e.reject(w.error):void 0!==w.data&&e.resolve(w.data)},n=()=>{const e=this.#g=w.promise=Nt();t(e)},s=this.#g;switch(s.status){case"pending":e.queryHash===r.queryHash&&t(s);break;case"fulfilled":"error"!==w.status&&w.data===s.value||n();break;case"rejected":"error"===w.status&&w.error===s.reason||n()}}return w}updateResult(){const e=this.#y,t=this.createResult(this.#b,this.options);if(this.#x=this.#b.state,this.#w=this.options,void 0!==this.#x.data&&(this.#_=this.#b),mt(t,e))return;this.#y=t;this.#L({listeners:(()=>{if(!e)return!0;const{notifyOnChangeProps:t}=this.options,r="function"==typeof t?t():t;if("all"===r||!r&&!this.#C.size)return!0;const n=new Set(r??this.#C);return this.options.throwOnError&&n.add("error"),Object.keys(this.#y).some(t=>{const r=t;return this.#y[r]!==e[r]&&n.has(r)})})()})}#R(){const e=this.#u.getQueryCache().build(this.#u,this.options);if(e===this.#b)return;const t=this.#b;this.#b=e,this.#v=e.state,this.hasListeners()&&(t?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#O()}#L(e){Et.batch(()=>{e.listeners&&this.listeners.forEach(e=>{e(this.#y)}),this.#u.getQueryCache().notify({query:this.#b,type:"observerResultsUpdated"})})}};function Mt(e,t){return function(e,t){return!1!==ot(t.enabled,e)&&void 0===e.state.data&&!("error"===e.state.status&&!1===t.retryOnMount)}(e,t)||void 0!==e.state.data&&Ut(e,t,t.refetchOnMount)}function Ut(e,t,r){if(!1!==ot(t.enabled,e)&&"static"!==it(t.staleTime,e)){const n="function"==typeof r?r(e):r;return"always"===n||!1!==n&&qt(e,t)}return!1}function Ft(e,t,r,n){return(e!==t||!1===ot(n.enabled,e))&&(!r.suspense||"error"!==e.state.status)&&qt(e,r)}function qt(e,t){return!1!==ot(t.enabled,e)&&e.isStaleByTime(it(t.staleTime,e))}function Bt(e){return{onFetch:(t,r)=>{const n=t.options,s=t.fetchOptions?.meta?.fetchMore?.direction,a=t.state.data?.pages||[],i=t.state.data?.pageParams||[];let o={pages:[],pageParams:[]},l=0;const c=async()=>{let r=!1;const c=kt(t.options,t.fetchOptions),u=async(e,n,s)=>{if(r)return Promise.reject();if(null==n&&e.pages.length)return Promise.resolve(e);const a=(()=>{const e={client:t.client,queryKey:t.queryKey,pageParam:n,direction:s?"backward":"forward",meta:t.options.meta};var a;return a=e,Object.defineProperty(a,"signal",{enumerable:!0,get:()=>(t.signal.aborted?r=!0:t.signal.addEventListener("abort",()=>{r=!0}),t.signal)}),e})(),i=await c(a),{maxPages:o}=t.options,l=s?wt:xt;return{pages:l(e.pages,i,o),pageParams:l(e.pageParams,n,o)}};if(s&&a.length){const e="backward"===s,t={pages:a,pageParams:i},r=(e?Vt:Ht)(n,t);o=await u(t,r,e)}else{const t=e??a.length;do{const e=0===l?i[0]??n.initialPageParam:Ht(n,o);if(l>0&&null==e)break;o=await u(o,e),l++}while(l<t)}return o};t.options.persister?t.fetchFn=()=>t.options.persister?.(c,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},r):t.fetchFn=c}}}function Ht(e,{pages:t,pageParams:r}){const n=t.length-1;return t.length>0?e.getNextPageParam(t[n],t,r[n],r):void 0}function Vt(e,{pages:t,pageParams:r}){return t.length>0?e.getPreviousPageParam?.(t[0],t,r[0],r):void 0}var Wt=class extends Rt{#u;#z;#M;#d;constructor(e){super(),this.#u=e.client,this.mutationId=e.mutationId,this.#M=e.mutationCache,this.#z=[],this.state=e.state||{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0},this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#z.includes(e)||(this.#z.push(e),this.clearGcTimeout(),this.#M.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#z=this.#z.filter(t=>t!==e),this.scheduleGc(),this.#M.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#z.length||("pending"===this.state.status?this.scheduleGc():this.#M.remove(this))}continue(){return this.#d?.continue()??this.execute(this.state.variables)}async execute(e){const t=()=>{this.#f({type:"continue"})},r={client:this.#u,meta:this.options.meta,mutationKey:this.options.mutationKey};this.#d=At({fn:()=>this.options.mutationFn?this.options.mutationFn(e,r):Promise.reject(new Error("No mutationFn found")),onFail:(e,t)=>{this.#f({type:"failed",failureCount:e,error:t})},onPause:()=>{this.#f({type:"pause"})},onContinue:t,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#M.canRun(this)});const n="pending"===this.state.status,s=!this.#d.canStart();try{if(n)t();else{this.#f({type:"pending",variables:e,isPaused:s}),await(this.#M.config.onMutate?.(e,this,r));const t=await(this.options.onMutate?.(e,r));t!==this.state.context&&this.#f({type:"pending",context:t,variables:e,isPaused:s})}const a=await this.#d.start();return await(this.#M.config.onSuccess?.(a,e,this.state.context,this,r)),await(this.options.onSuccess?.(a,e,this.state.context,r)),await(this.#M.config.onSettled?.(a,null,this.state.variables,this.state.context,this,r)),await(this.options.onSettled?.(a,null,e,this.state.context,r)),this.#f({type:"success",data:a}),a}catch(a){try{throw await(this.#M.config.onError?.(a,e,this.state.context,this,r)),await(this.options.onError?.(a,e,this.state.context,r)),await(this.#M.config.onSettled?.(void 0,a,this.state.variables,this.state.context,this,r)),await(this.options.onSettled?.(void 0,a,e,this.state.context,r)),a}finally{this.#f({type:"error",error:a})}}finally{this.#M.runNext(this)}}#f(e){this.state=(t=>{switch(e.type){case"failed":return{...t,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...t,isPaused:!0};case"continue":return{...t,isPaused:!1};case"pending":return{...t,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...t,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...t,data:void 0,error:e.error,failureCount:t.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}})(this.state),Et.batch(()=>{this.#z.forEach(t=>{t.onMutationUpdate(e)}),this.#M.notify({mutation:this,type:"updated",action:e})})}};var Qt=class extends Ze{constructor(e={}){super(),this.config=e,this.#U=new Set,this.#F=new Map,this.#q=0}#U;#F;#q;build(e,t,r){const n=new Wt({client:e,mutationCache:this,mutationId:++this.#q,options:e.defaultMutationOptions(t),state:r});return this.add(n),n}add(e){this.#U.add(e);const t=Gt(e);if("string"==typeof t){const r=this.#F.get(t);r?r.push(e):this.#F.set(t,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#U.delete(e)){const t=Gt(e);if("string"==typeof t){const r=this.#F.get(t);if(r)if(r.length>1){const t=r.indexOf(e);-1!==t&&r.splice(t,1)}else r[0]===e&&this.#F.delete(t)}}this.notify({type:"removed",mutation:e})}canRun(e){const t=Gt(e);if("string"==typeof t){const r=this.#F.get(t),n=r?.find(e=>"pending"===e.state.status);return!n||n===e}return!0}runNext(e){const t=Gt(e);if("string"==typeof t){const r=this.#F.get(t)?.find(t=>t!==e&&t.state.isPaused);return r?.continue()??Promise.resolve()}return Promise.resolve()}clear(){Et.batch(()=>{this.#U.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#U.clear(),this.#F.clear()})}getAll(){return Array.from(this.#U)}find(e){const t={exact:!0,...e};return this.getAll().find(e=>ct(t,e))}findAll(e={}){return this.getAll().filter(t=>ct(e,t))}notify(e){Et.batch(()=>{this.listeners.forEach(t=>{t(e)})})}resumePausedMutations(){const e=this.getAll().filter(e=>e.state.isPaused);return Et.batch(()=>Promise.all(e.map(e=>e.continue().catch(nt))))}};function Gt(e){return e.options.scope?.id}var Kt=class extends Ze{constructor(e={}){super(),this.config=e,this.#B=new Map}#B;build(e,t,r){const n=t.queryKey,s=t.queryHash??ut(n,t);let a=this.get(s);return a||(a=new It({client:e,queryKey:n,queryHash:s,options:e.defaultQueryOptions(t),state:r,defaultOptions:e.getQueryDefaults(n)}),this.add(a)),a}add(e){this.#B.has(e.queryHash)||(this.#B.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const t=this.#B.get(e.queryHash);t&&(e.destroy(),t===e&&this.#B.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Et.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#B.get(e)}getAll(){return[...this.#B.values()]}find(e){const t={exact:!0,...e};return this.getAll().find(e=>lt(t,e))}findAll(e={}){const t=this.getAll();return Object.keys(e).length>0?t.filter(t=>lt(e,t)):t}notify(e){Et.batch(()=>{this.listeners.forEach(t=>{t(e)})})}onFocus(){Et.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Et.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},Jt=_e.createContext(void 0),Yt=({client:t,children:r})=>(_e.useEffect(()=>(t.mount(),()=>{t.unmount()}),[t]),e.jsx(Jt.Provider,{value:t,children:r})),Xt=_e.createContext(!1);Xt.Provider;var Zt=_e.createContext(function(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}()),er=(e,t,r)=>t.fetchOptimistic(e).catch(()=>{r.clearReset()});function tr(e,t,r){const n=_e.useContext(Xt),s=_e.useContext(Zt),a=(()=>{const e=_e.useContext(Jt);if(!e)throw new Error("No QueryClient set, use QueryClientProvider to set one");return e})(),i=a.defaultQueryOptions(e);a.getDefaultOptions().queries?._experimental_beforeQuery?.(i),i._optimisticResults=n?"isRestoring":"optimistic",(e=>{if(e.suspense){const t=1e3,r=e=>"static"===e?e:Math.max(e??t,t),n=e.staleTime;e.staleTime="function"==typeof n?(...e)=>r(n(...e)):r(n),"number"==typeof e.gcTime&&(e.gcTime=Math.max(e.gcTime,t))}})(i),((e,t)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(t.isReset()||(e.retryOnMount=!1))})(i,s),(e=>{_e.useEffect(()=>{e.clearReset()},[e])})(s);const o=!a.getQueryCache().get(i.queryHash),[l]=_e.useState(()=>new t(a,i)),c=l.getOptimisticResult(i),u=!n&&!1!==e.subscribed;if(_e.useSyncExternalStore(_e.useCallback(e=>{const t=u?l.subscribe(Et.batchCalls(e)):nt;return l.updateResult(),t},[l,u]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),_e.useEffect(()=>{l.setOptions(i)},[i,l]),((e,t)=>e?.suspense&&t.isPending)(i,c))throw er(i,l,s);if((({result:e,errorResetBoundary:t,throwOnError:r,query:n,suspense:s})=>e.isError&&!t.isReset()&&!e.isFetching&&n&&(s&&void 0===e.data||function(e,t){return"function"==typeof e?e(...t):!!e}(r,[e.error,n])))({result:c,errorResetBoundary:s,throwOnError:i.throwOnError,query:a.getQueryCache().get(i.queryHash),suspense:i.suspense}))throw c.error;if(a.getDefaultOptions().queries?._experimental_afterQuery?.(i,c),i.experimental_prefetchInRender&&!rt&&((e,t)=>e.isLoading&&e.isFetching&&!t)(c,n)){const e=o?er(i,l,s):a.getQueryCache().get(i.queryHash)?.promise;e?.catch(nt).finally(()=>{l.updateResult()})}return i.notifyOnChangeProps?c:l.trackResult(c)}function rr(e,t){return tr(e,zt)}var nr=function(e,t){return(nr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};function sr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}nr(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var ar=function(){return ar=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var s in t=arguments[r])Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s]);return e},ar.apply(this,arguments)};function ir(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var s=0;for(n=Object.getOwnPropertySymbols(e);s<n.length;s++)t.indexOf(n[s])<0&&Object.prototype.propertyIsEnumerable.call(e,n[s])&&(r[n[s]]=e[n[s]])}return r}function or(e,t,r,n){var s,a=arguments.length,i=a<3?t:null===n?n=Object.getOwnPropertyDescriptor(t,r):n;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)i=Reflect.decorate(e,t,r,n);else for(var o=e.length-1;o>=0;o--)(s=e[o])&&(i=(a<3?s(i):a>3?s(t,r,i):s(t,r))||i);return a>3&&i&&Object.defineProperty(t,r,i),i}function lr(e,t){return function(r,n){t(r,n,e)}}function cr(e,t,r,n,s,a){function i(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var o,l=n.kind,c="getter"===l?"get":"setter"===l?"set":"value",u=!t&&e?n.static?e:e.prototype:null,d=t||(u?Object.getOwnPropertyDescriptor(u,n.name):{}),h=!1,p=r.length-1;p>=0;p--){var f={};for(var m in n)f[m]="access"===m?{}:n[m];for(var m in n.access)f.access[m]=n.access[m];f.addInitializer=function(e){if(h)throw new TypeError("Cannot add initializers after decoration has completed");a.push(i(e||null))};var g=(0,r[p])("accessor"===l?{get:d.get,set:d.set}:d[c],f);if("accessor"===l){if(void 0===g)continue;if(null===g||"object"!=typeof g)throw new TypeError("Object expected");(o=i(g.get))&&(d.get=o),(o=i(g.set))&&(d.set=o),(o=i(g.init))&&s.unshift(o)}else(o=i(g))&&("field"===l?s.unshift(o):d[c]=o)}u&&Object.defineProperty(u,n.name,d),h=!0}function ur(e,t,r){for(var n=arguments.length>2,s=0;s<t.length;s++)r=n?t[s].call(e,r):t[s].call(e);return n?r:void 0}function dr(e){return"symbol"==typeof e?e:"".concat(e)}function hr(e,t,r){return"symbol"==typeof t&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(e,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function pr(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function fr(e,t,r,n){return new(r||(r=Promise))(function(s,a){function i(e){try{l(n.next(e))}catch(t){a(t)}}function o(e){try{l(n.throw(e))}catch(t){a(t)}}function l(e){var t;e.done?s(e.value):(t=e.value,t instanceof r?t:new r(function(e){e(t)})).then(i,o)}l((n=n.apply(e,t||[])).next())})}function mr(e,t){var r,n,s,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]},i=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return i.next=o(0),i.throw=o(1),i.return=o(2),"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function o(o){return function(l){return function(o){if(r)throw new TypeError("Generator is already executing.");for(;i&&(i=0,o[0]&&(a=0)),a;)try{if(r=1,n&&(s=2&o[0]?n.return:o[0]?n.throw||((s=n.return)&&s.call(n),0):n.next)&&!(s=s.call(n,o[1])).done)return s;switch(n=0,s&&(o=[2&o[0],s.value]),o[0]){case 0:case 1:s=o;break;case 4:return a.label++,{value:o[1],done:!1};case 5:a.label++,n=o[1],o=[0];continue;case 7:o=a.ops.pop(),a.trys.pop();continue;default:if(!(s=a.trys,(s=s.length>0&&s[s.length-1])||6!==o[0]&&2!==o[0])){a=0;continue}if(3===o[0]&&(!s||o[1]>s[0]&&o[1]<s[3])){a.label=o[1];break}if(6===o[0]&&a.label<s[1]){a.label=s[1],s=o;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(o);break}s[2]&&a.ops.pop(),a.trys.pop();continue}o=t.call(e,a)}catch(l){o=[6,l],n=0}finally{r=s=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,l])}}}var gr=Object.create?function(e,t,r,n){void 0===n&&(n=r);var s=Object.getOwnPropertyDescriptor(t,r);s&&!("get"in s?!t.__esModule:s.writable||s.configurable)||(s={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,s)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]};function br(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||gr(t,e,r)}function vr(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function yr(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,s,a=r.call(e),i=[];try{for(;(void 0===t||t-- >0)&&!(n=a.next()).done;)i.push(n.value)}catch(o){s={error:o}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(s)throw s.error}}return i}function xr(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(yr(arguments[t]));return e}function wr(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),s=0;for(t=0;t<r;t++)for(var a=arguments[t],i=0,o=a.length;i<o;i++,s++)n[s]=a[i];return n}function jr(e,t,r){if(r||2===arguments.length)for(var n,s=0,a=t.length;s<a;s++)!n&&s in t||(n||(n=Array.prototype.slice.call(t,0,s)),n[s]=t[s]);return e.concat(n||Array.prototype.slice.call(t))}function kr(e){return this instanceof kr?(this.v=e,this):new kr(e)}function _r(e,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,s=r.apply(e,t||[]),a=[];return n=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),i("next"),i("throw"),i("return",function(e){return function(t){return Promise.resolve(t).then(e,c)}}),n[Symbol.asyncIterator]=function(){return this},n;function i(e,t){s[e]&&(n[e]=function(t){return new Promise(function(r,n){a.push([e,t,r,n])>1||o(e,t)})},t&&(n[e]=t(n[e])))}function o(e,t){try{(r=s[e](t)).value instanceof kr?Promise.resolve(r.value.v).then(l,c):u(a[0][2],r)}catch(n){u(a[0][3],n)}var r}function l(e){o("next",e)}function c(e){o("throw",e)}function u(e,t){e(t),a.shift(),a.length&&o(a[0][0],a[0][1])}}function Nr(e){var t,r;return t={},n("next"),n("throw",function(e){throw e}),n("return"),t[Symbol.iterator]=function(){return this},t;function n(n,s){t[n]=e[n]?function(t){return(r=!r)?{value:kr(e[n](t)),done:!1}:s?s(t):t}:s}}function Sr(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t,r=e[Symbol.asyncIterator];return r?r.call(e):(e=vr(e),t={},n("next"),n("throw"),n("return"),t[Symbol.asyncIterator]=function(){return this},t);function n(r){t[r]=e[r]&&function(t){return new Promise(function(n,s){(function(e,t,r,n){Promise.resolve(n).then(function(t){e({value:t,done:r})},t)})(n,s,(t=e[r](t)).done,t.value)})}}}function Er(e,t){return Object.defineProperty?Object.defineProperty(e,"raw",{value:t}):e.raw=t,e}var Cr=Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t},Tr=function(e){return(Tr=Object.getOwnPropertyNames||function(e){var t=[];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[t.length]=r);return t})(e)};function Or(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r=Tr(e),n=0;n<r.length;n++)"default"!==r[n]&&gr(t,e,r[n]);return Cr(t,e),t}function Pr(e){return e&&e.__esModule?e:{default:e}}function Ar(e,t,r,n){if("a"===r&&!n)throw new TypeError("Private accessor was defined without a getter");if("function"==typeof t?e!==t||!n:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return"m"===r?n:"a"===r?n.call(e):n?n.value:t.get(e)}function Rr(e,t,r,n,s){if("m"===n)throw new TypeError("Private method is not writable");if("a"===n&&!s)throw new TypeError("Private accessor was defined without a setter");if("function"==typeof t?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return"a"===n?s.call(e,r):s?s.value=r:t.set(e,r),r}function Ir(e,t){if(null===t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("Cannot use 'in' operator on non-object");return"function"==typeof e?t===e:e.has(t)}function $r(e,t,r){if(null!=t){if("object"!=typeof t&&"function"!=typeof t)throw new TypeError("Object expected.");var n,s;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");n=t[Symbol.asyncDispose]}if(void 0===n){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");n=t[Symbol.dispose],r&&(s=n)}if("function"!=typeof n)throw new TypeError("Object not disposable.");s&&(n=function(){try{s.call(this)}catch(e){return Promise.reject(e)}}),e.stack.push({value:t,dispose:n,async:r})}else r&&e.stack.push({async:!0});return t}var Dr="function"==typeof SuppressedError?SuppressedError:function(e,t,r){var n=new Error(r);return n.name="SuppressedError",n.error=e,n.suppressed=t,n};function Lr(e){function t(t){e.error=e.hasError?new Dr(t,e.error,"An error was suppressed during disposal."):t,e.hasError=!0}var r,n=0;return function s(){for(;r=e.stack.pop();)try{if(!r.async&&1===n)return n=0,e.stack.push(r),Promise.resolve().then(s);if(r.dispose){var a=r.dispose.call(r.value);if(r.async)return n|=2,Promise.resolve(a).then(s,function(e){return t(e),s()})}else n|=1}catch(i){t(i)}if(1===n)return e.hasError?Promise.reject(e.error):Promise.resolve();if(e.hasError)throw e.error}()}function zr(e,t){return"string"==typeof e&&/^\.\.?\//.test(e)?e.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(e,r,n,s,a){return r?t?".jsx":".js":!n||s&&a?n+s+"."+a.toLowerCase()+"js":e}):e}const Mr={__extends:sr,__assign:ar,__rest:ir,__decorate:or,__param:lr,__esDecorate:cr,__runInitializers:ur,__propKey:dr,__setFunctionName:hr,__metadata:pr,__awaiter:fr,__generator:mr,__createBinding:gr,__exportStar:br,__values:vr,__read:yr,__spread:xr,__spreadArrays:wr,__spreadArray:jr,__await:kr,__asyncGenerator:_r,__asyncDelegator:Nr,__asyncValues:Sr,__makeTemplateObject:Er,__importStar:Or,__importDefault:Pr,__classPrivateFieldGet:Ar,__classPrivateFieldSet:Rr,__classPrivateFieldIn:Ir,__addDisposableResource:$r,__disposeResources:Lr,__rewriteRelativeImportExtension:zr},Ur=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:$r,get __assign(){return ar},__asyncDelegator:Nr,__asyncGenerator:_r,__asyncValues:Sr,__await:kr,__awaiter:fr,__classPrivateFieldGet:Ar,__classPrivateFieldIn:Ir,__classPrivateFieldSet:Rr,__createBinding:gr,__decorate:or,__disposeResources:Lr,__esDecorate:cr,__exportStar:br,__extends:sr,__generator:mr,__importDefault:Pr,__importStar:Or,__makeTemplateObject:Er,__metadata:pr,__param:lr,__propKey:dr,__read:yr,__rest:ir,__rewriteRelativeImportExtension:zr,__runInitializers:ur,__setFunctionName:hr,__spread:xr,__spreadArray:jr,__spreadArrays:wr,__values:vr,default:Mr},Symbol.toStringTag,{value:"Module"}));class Fr extends Error{constructor(e,t="FunctionsError",r){super(e),this.name=t,this.context=r}}class qr extends Fr{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class Br extends Fr{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class Hr extends Fr{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Vr,Wr;(Wr=Vr||(Vr={})).Any="any",Wr.ApNortheast1="ap-northeast-1",Wr.ApNortheast2="ap-northeast-2",Wr.ApSouth1="ap-south-1",Wr.ApSoutheast1="ap-southeast-1",Wr.ApSoutheast2="ap-southeast-2",Wr.CaCentral1="ca-central-1",Wr.EuCentral1="eu-central-1",Wr.EuWest1="eu-west-1",Wr.EuWest2="eu-west-2",Wr.EuWest3="eu-west-3",Wr.SaEast1="sa-east-1",Wr.UsEast1="us-east-1",Wr.UsWest1="us-west-1",Wr.UsWest2="us-west-2";class Qr{constructor(e,{headers:t={},customFetch:r,region:n=Vr.Any}={}){this.url=e,this.headers=t,this.region=n,this.fetch=(e=>e?(...t)=>e(...t):(...e)=>fetch(...e))(r)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e){return fr(this,arguments,void 0,function*(e,t={}){var r;let n,s;try{const{headers:a,method:i,body:o,signal:l,timeout:c}=t;let u={},{region:d}=t;d||(d=this.region);const h=new URL(`${this.url}/${e}`);let p;d&&"any"!==d&&(u["x-region"]=d,h.searchParams.set("forceFunctionRegion",d)),o&&(a&&!Object.prototype.hasOwnProperty.call(a,"Content-Type")||!a)?"undefined"!=typeof Blob&&o instanceof Blob||o instanceof ArrayBuffer?(u["Content-Type"]="application/octet-stream",p=o):"string"==typeof o?(u["Content-Type"]="text/plain",p=o):"undefined"!=typeof FormData&&o instanceof FormData?p=o:(u["Content-Type"]="application/json",p=JSON.stringify(o)):p=o;let f=l;c&&(s=new AbortController,n=setTimeout(()=>s.abort(),c),l?(f=s.signal,l.addEventListener("abort",()=>s.abort())):f=s.signal);const m=yield this.fetch(h.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},u),this.headers),a),body:p,signal:f}).catch(e=>{throw new qr(e)}),g=m.headers.get("x-relay-error");if(g&&"true"===g)throw new Br(m);if(!m.ok)throw new Hr(m);let b,v=(null!==(r=m.headers.get("Content-Type"))&&void 0!==r?r:"text/plain").split(";")[0].trim();return b="application/json"===v?yield m.json():"application/octet-stream"===v||"application/pdf"===v?yield m.blob():"text/event-stream"===v?m:"multipart/form-data"===v?yield m.formData():yield m.text(),{data:b,error:null,response:m}}catch(a){return{data:null,error:a,response:a instanceof Hr||a instanceof Br?a.context:void 0}}finally{n&&clearTimeout(n)}})}}var Gr={};const Kr=Ne(Ur);var Jr,Yr,Xr,Zr,en,tn,rn,nn={},sn={},an={},on={},ln={},cn={};function un(){if(Jr)return cn;Jr=1,Object.defineProperty(cn,"__esModule",{value:!0});class e extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}}return cn.default=e,cn}function dn(){if(Yr)return ln;Yr=1,Object.defineProperty(ln,"__esModule",{value:!0});const e=Kr.__importDefault(un());return ln.default=class{constructor(e){var t,r;this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=new Headers(e.headers),this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=null!==(t=e.shouldThrowOnError)&&void 0!==t&&t,this.signal=e.signal,this.isMaybeSingle=null!==(r=e.isMaybeSingle)&&void 0!==r&&r,e.fetch?this.fetch=e.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,t){return this.headers=new Headers(this.headers),this.headers.set(e,t),this}then(t,r){void 0===this.schema||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),"GET"!==this.method&&"HEAD"!==this.method&&this.headers.set("Content-Type","application/json");let n=(0,this.fetch)(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async t=>{var r,n,s,a;let i=null,o=null,l=null,c=t.status,u=t.statusText;if(t.ok){if("HEAD"!==this.method){const e=await t.text();""===e||(o="text/csv"===this.headers.get("Accept")||this.headers.get("Accept")&&(null===(r=this.headers.get("Accept"))||void 0===r?void 0:r.includes("application/vnd.pgrst.plan+text"))?e:JSON.parse(e))}const e=null===(n=this.headers.get("Prefer"))||void 0===n?void 0:n.match(/count=(exact|planned|estimated)/),a=null===(s=t.headers.get("content-range"))||void 0===s?void 0:s.split("/");e&&a&&a.length>1&&(l=parseInt(a[1])),this.isMaybeSingle&&"GET"===this.method&&Array.isArray(o)&&(o.length>1?(i={code:"PGRST116",details:`Results contain ${o.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},o=null,l=null,c=406,u="Not Acceptable"):o=1===o.length?o[0]:null)}else{const r=await t.text();try{i=JSON.parse(r),Array.isArray(i)&&404===t.status&&(o=[],i=null,c=200,u="OK")}catch(d){404===t.status&&""===r?(c=204,u="No Content"):i={message:r}}if(i&&this.isMaybeSingle&&(null===(a=null==i?void 0:i.details)||void 0===a?void 0:a.includes("0 rows"))&&(i=null,c=200,u="OK"),i&&this.shouldThrowOnError)throw new e.default(i)}return{error:i,data:o,count:l,status:c,statusText:u}});return this.shouldThrowOnError||(n=n.catch(e=>{var t,r,n;return{error:{message:`${null!==(t=null==e?void 0:e.name)&&void 0!==t?t:"FetchError"}: ${null==e?void 0:e.message}`,details:`${null!==(r=null==e?void 0:e.stack)&&void 0!==r?r:""}`,hint:"",code:`${null!==(n=null==e?void 0:e.code)&&void 0!==n?n:""}`},data:null,count:null,status:0,statusText:""}})),n.then(t,r)}returns(){return this}overrideTypes(){return this}},ln}function hn(){if(Xr)return on;Xr=1,Object.defineProperty(on,"__esModule",{value:!0});const e=Kr.__importDefault(dn());class t extends e.default{select(e){let t=!1;const r=(null!=e?e:"*").split("").map(e=>/\s/.test(e)&&!t?"":('"'===e&&(t=!t),e)).join("");return this.url.searchParams.set("select",r),this.headers.append("Prefer","return=representation"),this}order(e,{ascending:t=!0,nullsFirst:r,foreignTable:n,referencedTable:s=n}={}){const a=s?`${s}.order`:"order",i=this.url.searchParams.get(a);return this.url.searchParams.set(a,`${i?`${i},`:""}${e}.${t?"asc":"desc"}${void 0===r?"":r?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:t,referencedTable:r=t}={}){const n=void 0===r?"limit":`${r}.limit`;return this.url.searchParams.set(n,`${e}`),this}range(e,t,{foreignTable:r,referencedTable:n=r}={}){const s=void 0===n?"offset":`${n}.offset`,a=void 0===n?"limit":`${n}.limit`;return this.url.searchParams.set(s,`${e}`),this.url.searchParams.set(a,""+(t-e+1)),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return"GET"===this.method?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:e=!1,verbose:t=!1,settings:r=!1,buffers:n=!1,wal:s=!1,format:a="text"}={}){var i;const o=[e?"analyze":null,t?"verbose":null,r?"settings":null,n?"buffers":null,s?"wal":null].filter(Boolean).join("|"),l=null!==(i=this.headers.get("Accept"))&&void 0!==i?i:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${a}; for="${l}"; options=${o};`),this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(e){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${e}`),this}}return on.default=t,on}function pn(){if(Zr)return an;Zr=1,Object.defineProperty(an,"__esModule",{value:!0});const e=Kr.__importDefault(hn()),t=new RegExp("[,()]");class r extends e.default{eq(e,t){return this.url.searchParams.append(e,`eq.${t}`),this}neq(e,t){return this.url.searchParams.append(e,`neq.${t}`),this}gt(e,t){return this.url.searchParams.append(e,`gt.${t}`),this}gte(e,t){return this.url.searchParams.append(e,`gte.${t}`),this}lt(e,t){return this.url.searchParams.append(e,`lt.${t}`),this}lte(e,t){return this.url.searchParams.append(e,`lte.${t}`),this}like(e,t){return this.url.searchParams.append(e,`like.${t}`),this}likeAllOf(e,t){return this.url.searchParams.append(e,`like(all).{${t.join(",")}}`),this}likeAnyOf(e,t){return this.url.searchParams.append(e,`like(any).{${t.join(",")}}`),this}ilike(e,t){return this.url.searchParams.append(e,`ilike.${t}`),this}ilikeAllOf(e,t){return this.url.searchParams.append(e,`ilike(all).{${t.join(",")}}`),this}ilikeAnyOf(e,t){return this.url.searchParams.append(e,`ilike(any).{${t.join(",")}}`),this}is(e,t){return this.url.searchParams.append(e,`is.${t}`),this}in(e,r){const n=Array.from(new Set(r)).map(e=>"string"==typeof e&&t.test(e)?`"${e}"`:`${e}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cs.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cs.{${t.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(t)}`),this}containedBy(e,t){return"string"==typeof t?this.url.searchParams.append(e,`cd.${t}`):Array.isArray(t)?this.url.searchParams.append(e,`cd.{${t.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(t)}`),this}rangeGt(e,t){return this.url.searchParams.append(e,`sr.${t}`),this}rangeGte(e,t){return this.url.searchParams.append(e,`nxl.${t}`),this}rangeLt(e,t){return this.url.searchParams.append(e,`sl.${t}`),this}rangeLte(e,t){return this.url.searchParams.append(e,`nxr.${t}`),this}rangeAdjacent(e,t){return this.url.searchParams.append(e,`adj.${t}`),this}overlaps(e,t){return"string"==typeof t?this.url.searchParams.append(e,`ov.${t}`):this.url.searchParams.append(e,`ov.{${t.join(",")}}`),this}textSearch(e,t,{config:r,type:n}={}){let s="";"plain"===n?s="pl":"phrase"===n?s="ph":"websearch"===n&&(s="w");const a=void 0===r?"":`(${r})`;return this.url.searchParams.append(e,`${s}fts${a}.${t}`),this}match(e){return Object.entries(e).forEach(([e,t])=>{this.url.searchParams.append(e,`eq.${t}`)}),this}not(e,t,r){return this.url.searchParams.append(e,`not.${t}.${r}`),this}or(e,{foreignTable:t,referencedTable:r=t}={}){const n=r?`${r}.or`:"or";return this.url.searchParams.append(n,`(${e})`),this}filter(e,t,r){return this.url.searchParams.append(e,`${t}.${r}`),this}}return an.default=r,an}function fn(){if(en)return sn;en=1,Object.defineProperty(sn,"__esModule",{value:!0});const e=Kr.__importDefault(pn());return sn.default=class{constructor(e,{headers:t={},schema:r,fetch:n}){this.url=e,this.headers=new Headers(t),this.schema=r,this.fetch=n}select(t,r){const{head:n=!1,count:s}=null!=r?r:{},a=n?"HEAD":"GET";let i=!1;const o=(null!=t?t:"*").split("").map(e=>/\s/.test(e)&&!i?"":('"'===e&&(i=!i),e)).join("");return this.url.searchParams.set("select",o),s&&this.headers.append("Prefer",`count=${s}`),new e.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(t,{count:r,defaultToNull:n=!0}={}){var s;if(r&&this.headers.append("Prefer",`count=${r}`),n||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const e=t.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(e.length>0){const t=[...new Set(e)].map(e=>`"${e}"`);this.url.searchParams.set("columns",t.join(","))}}return new e.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:null!==(s=this.fetch)&&void 0!==s?s:fetch})}upsert(t,{onConflict:r,ignoreDuplicates:n=!1,count:s,defaultToNull:a=!0}={}){var i;if(this.headers.append("Prefer",`resolution=${n?"ignore":"merge"}-duplicates`),void 0!==r&&this.url.searchParams.set("on_conflict",r),s&&this.headers.append("Prefer",`count=${s}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(t)){const e=t.reduce((e,t)=>e.concat(Object.keys(t)),[]);if(e.length>0){const t=[...new Set(e)].map(e=>`"${e}"`);this.url.searchParams.set("columns",t.join(","))}}return new e.default({method:"POST",url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}update(t,{count:r}={}){var n;return r&&this.headers.append("Prefer",`count=${r}`),new e.default({method:"PATCH",url:this.url,headers:this.headers,schema:this.schema,body:t,fetch:null!==(n=this.fetch)&&void 0!==n?n:fetch})}delete({count:t}={}){var r;return t&&this.headers.append("Prefer",`count=${t}`),new e.default({method:"DELETE",url:this.url,headers:this.headers,schema:this.schema,fetch:null!==(r=this.fetch)&&void 0!==r?r:fetch})}},sn}var mn=function(){if(rn)return Gr;rn=1,Object.defineProperty(Gr,"__esModule",{value:!0}),Gr.PostgrestError=Gr.PostgrestBuilder=Gr.PostgrestTransformBuilder=Gr.PostgrestFilterBuilder=Gr.PostgrestQueryBuilder=Gr.PostgrestClient=void 0;const e=Kr,t=e.__importDefault(function(){if(tn)return nn;tn=1,Object.defineProperty(nn,"__esModule",{value:!0});const e=Kr,t=e.__importDefault(fn()),r=e.__importDefault(pn());class n{constructor(e,{headers:t={},schema:r,fetch:n}={}){this.url=e,this.headers=new Headers(t),this.schemaName=r,this.fetch=n}from(e){const r=new URL(`${this.url}/${e}`);return new t.default(r,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new n(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,t={},{head:n=!1,get:s=!1,count:a}={}){var i;let o;const l=new URL(`${this.url}/rpc/${e}`);let c;n||s?(o=n?"HEAD":"GET",Object.entries(t).filter(([e,t])=>void 0!==t).map(([e,t])=>[e,Array.isArray(t)?`{${t.join(",")}}`:`${t}`]).forEach(([e,t])=>{l.searchParams.append(e,t)})):(o="POST",c=t);const u=new Headers(this.headers);return a&&u.set("Prefer",`count=${a}`),new r.default({method:o,url:l,headers:u,schema:this.schemaName,body:c,fetch:null!==(i=this.fetch)&&void 0!==i?i:fetch})}}return nn.default=n,nn}());Gr.PostgrestClient=t.default;const r=e.__importDefault(fn());Gr.PostgrestQueryBuilder=r.default;const n=e.__importDefault(pn());Gr.PostgrestFilterBuilder=n.default;const s=e.__importDefault(hn());Gr.PostgrestTransformBuilder=s.default;const a=e.__importDefault(dn());Gr.PostgrestBuilder=a.default;const i=e.__importDefault(un());return Gr.PostgrestError=i.default,Gr.default={PostgrestClient:t.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:n.default,PostgrestTransformBuilder:s.default,PostgrestBuilder:a.default,PostgrestError:i.default},Gr}();const gn=ke(mn),bn=Fe({__proto__:null,default:gn},[mn]),{PostgrestClient:vn,PostgrestQueryBuilder:yn,PostgrestFilterBuilder:xn,PostgrestTransformBuilder:wn,PostgrestBuilder:jn,PostgrestError:kn}=gn||bn;class _n{static detectEnvironment(){var e;if("undefined"!=typeof WebSocket)return{type:"native",constructor:WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocket)return{type:"native",constructor:globalThis.WebSocket};if("undefined"!=typeof global&&void 0!==global.WebSocket)return{type:"native",constructor:global.WebSocket};if("undefined"!=typeof globalThis&&void 0!==globalThis.WebSocketPair&&void 0===globalThis.WebSocket)return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if("undefined"!=typeof globalThis&&globalThis.EdgeRuntime||"undefined"!=typeof navigator&&(null===(e=navigator.userAgent)||void 0===e?void 0:e.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if("undefined"!=typeof process){const e=process.versions;if(e&&e.node){const t=e.node,r=parseInt(t.replace(/^v/,"").split(".")[0]);return r>=22?void 0!==globalThis.WebSocket?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${r} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${r} detected without native WebSocket support.`,workaround:'For Node.js < 22, install "ws" package and provide it via the transport option:\nimport ws from "ws"\nnew RealtimeClient(url, { transport: ws })'}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const e=this.detectEnvironment();if(e.constructor)return e.constructor;let t=e.error||"WebSocket not supported in this environment.";throw e.workaround&&(t+=`\n\nSuggested solution: ${e.workaround}`),new Error(t)}static createWebSocket(e,t){return new(this.getWebSocketConstructor())(e,t)}static isWebSocketSupported(){try{const e=this.detectEnvironment();return"native"===e.type||"ws"===e.type}catch(e){return!1}}}const Nn="1.0.0",Sn=Nn,En=1e4;var Cn,Tn,On,Pn,An,Rn,In,$n,Dn,Ln,zn;(Tn=Cn||(Cn={}))[Tn.connecting=0]="connecting",Tn[Tn.open=1]="open",Tn[Tn.closing=2]="closing",Tn[Tn.closed=3]="closed",(Pn=On||(On={})).closed="closed",Pn.errored="errored",Pn.joined="joined",Pn.joining="joining",Pn.leaving="leaving",(Rn=An||(An={})).close="phx_close",Rn.error="phx_error",Rn.join="phx_join",Rn.reply="phx_reply",Rn.leave="phx_leave",Rn.access_token="access_token",(In||(In={})).websocket="websocket",(Dn=$n||($n={})).Connecting="connecting",Dn.Open="open",Dn.Closing="closing",Dn.Closed="closed";class Mn{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={push:0,reply:1,broadcast:2,userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST="broadcast"}encode(e,t){if(this._isArrayBuffer(e.payload))return t(this._binaryEncodePush(e));if(e.event===this.BROADCAST&&!(e.payload instanceof ArrayBuffer)&&"string"==typeof e.payload.event)return t(this._binaryEncodeUserBroadcastPush(e));let r=[e.join_ref,e.ref,e.topic,e.event,e.payload];return t(JSON.stringify(r))}_binaryEncodePush(e){const{join_ref:t,ref:r,event:n,topic:s,payload:a}=e,i=this.META_LENGTH+t.length+r.length+s.length+n.length,o=new ArrayBuffer(this.HEADER_LENGTH+i);let l=new DataView(o),c=0;l.setUint8(c++,this.KINDS.push),l.setUint8(c++,t.length),l.setUint8(c++,r.length),l.setUint8(c++,s.length),l.setUint8(c++,n.length),Array.from(t,e=>l.setUint8(c++,e.charCodeAt(0))),Array.from(r,e=>l.setUint8(c++,e.charCodeAt(0))),Array.from(s,e=>l.setUint8(c++,e.charCodeAt(0))),Array.from(n,e=>l.setUint8(c++,e.charCodeAt(0)));var u=new Uint8Array(o.byteLength+a.byteLength);return u.set(new Uint8Array(o),0),u.set(new Uint8Array(a),o.byteLength),u.buffer}_binaryEncodeUserBroadcastPush(e){var t;return this._isArrayBuffer(null===(t=e.payload)||void 0===t?void 0:t.payload)?this._encodeBinaryUserBroadcastPush(e):this._encodeJsonUserBroadcastPush(e)}_encodeBinaryUserBroadcastPush(e){var t,r;const{join_ref:n,ref:s,topic:a}=e,i=e.payload.event,o=null!==(r=null===(t=e.payload)||void 0===t?void 0:t.payload)&&void 0!==r?r:new ArrayBuffer(0),l=this.USER_BROADCAST_PUSH_META_LENGTH+n.length+s.length+a.length+i.length,c=new ArrayBuffer(this.HEADER_LENGTH+l);let u=new DataView(c),d=0;u.setUint8(d++,this.KINDS.userBroadcastPush),u.setUint8(d++,n.length),u.setUint8(d++,s.length),u.setUint8(d++,a.length),u.setUint8(d++,i.length),u.setUint8(d++,this.BINARY_ENCODING),Array.from(n,e=>u.setUint8(d++,e.charCodeAt(0))),Array.from(s,e=>u.setUint8(d++,e.charCodeAt(0))),Array.from(a,e=>u.setUint8(d++,e.charCodeAt(0))),Array.from(i,e=>u.setUint8(d++,e.charCodeAt(0)));var h=new Uint8Array(c.byteLength+o.byteLength);return h.set(new Uint8Array(c),0),h.set(new Uint8Array(o),c.byteLength),h.buffer}_encodeJsonUserBroadcastPush(e){var t,r;const{join_ref:n,ref:s,topic:a}=e,i=e.payload.event,o=null!==(r=null===(t=e.payload)||void 0===t?void 0:t.payload)&&void 0!==r?r:{},l=(new TextEncoder).encode(JSON.stringify(o)).buffer,c=this.USER_BROADCAST_PUSH_META_LENGTH+n.length+s.length+a.length+i.length,u=new ArrayBuffer(this.HEADER_LENGTH+c);let d=new DataView(u),h=0;d.setUint8(h++,this.KINDS.userBroadcastPush),d.setUint8(h++,n.length),d.setUint8(h++,s.length),d.setUint8(h++,a.length),d.setUint8(h++,i.length),d.setUint8(h++,this.JSON_ENCODING),Array.from(n,e=>d.setUint8(h++,e.charCodeAt(0))),Array.from(s,e=>d.setUint8(h++,e.charCodeAt(0))),Array.from(a,e=>d.setUint8(h++,e.charCodeAt(0))),Array.from(i,e=>d.setUint8(h++,e.charCodeAt(0)));var p=new Uint8Array(u.byteLength+l.byteLength);return p.set(new Uint8Array(u),0),p.set(new Uint8Array(l),u.byteLength),p.buffer}decode(e,t){if(this._isArrayBuffer(e)){return t(this._binaryDecode(e))}if("string"==typeof e){const r=JSON.parse(e),[n,s,a,i,o]=r;return t({join_ref:n,ref:s,topic:a,event:i,payload:o})}return t({})}_binaryDecode(e){const t=new DataView(e),r=t.getUint8(0),n=new TextDecoder;switch(r){case this.KINDS.push:return this._decodePush(e,t,n);case this.KINDS.reply:return this._decodeReply(e,t,n);case this.KINDS.broadcast:return this._decodeBroadcast(e,t,n);case this.KINDS.userBroadcast:return this._decodeUserBroadcast(e,t,n)}}_decodePush(e,t,r){const n=t.getUint8(1),s=t.getUint8(2),a=t.getUint8(3);let i=this.HEADER_LENGTH+this.META_LENGTH-1;const o=r.decode(e.slice(i,i+n));i+=n;const l=r.decode(e.slice(i,i+s));i+=s;const c=r.decode(e.slice(i,i+a));i+=a;return{join_ref:o,ref:null,topic:l,event:c,payload:JSON.parse(r.decode(e.slice(i,e.byteLength)))}}_decodeReply(e,t,r){const n=t.getUint8(1),s=t.getUint8(2),a=t.getUint8(3),i=t.getUint8(4);let o=this.HEADER_LENGTH+this.META_LENGTH;const l=r.decode(e.slice(o,o+n));o+=n;const c=r.decode(e.slice(o,o+s));o+=s;const u=r.decode(e.slice(o,o+a));o+=a;const d=r.decode(e.slice(o,o+i));o+=i;const h={status:d,response:JSON.parse(r.decode(e.slice(o,e.byteLength)))};return{join_ref:l,ref:c,topic:u,event:An.reply,payload:h}}_decodeBroadcast(e,t,r){const n=t.getUint8(1),s=t.getUint8(2);let a=this.HEADER_LENGTH+2;const i=r.decode(e.slice(a,a+n));a+=n;const o=r.decode(e.slice(a,a+s));a+=s;return{join_ref:null,ref:null,topic:i,event:o,payload:JSON.parse(r.decode(e.slice(a,e.byteLength)))}}_decodeUserBroadcast(e,t,r){const n=t.getUint8(1),s=t.getUint8(2),a=t.getUint8(3),i=t.getUint8(4);let o=this.HEADER_LENGTH+4;const l=r.decode(e.slice(o,o+n));o+=n;const c=r.decode(e.slice(o,o+s));o+=s;const u=r.decode(e.slice(o,o+a));o+=a;const d=e.slice(o,e.byteLength),h=i===this.JSON_ENCODING?JSON.parse(r.decode(d)):d,p={type:this.BROADCAST,event:c,payload:h};return a>0&&(p.meta=JSON.parse(u)),{join_ref:null,ref:null,topic:l,event:this.BROADCAST,payload:p}}_isArrayBuffer(e){var t;return e instanceof ArrayBuffer||"ArrayBuffer"===(null===(t=null==e?void 0:e.constructor)||void 0===t?void 0:t.name)}}class Un{constructor(e,t){this.callback=e,this.timerCalc=t,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=t}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}(zn=Ln||(Ln={})).abstime="abstime",zn.bool="bool",zn.date="date",zn.daterange="daterange",zn.float4="float4",zn.float8="float8",zn.int2="int2",zn.int4="int4",zn.int4range="int4range",zn.int8="int8",zn.int8range="int8range",zn.json="json",zn.jsonb="jsonb",zn.money="money",zn.numeric="numeric",zn.oid="oid",zn.reltime="reltime",zn.text="text",zn.time="time",zn.timestamp="timestamp",zn.timestamptz="timestamptz",zn.timetz="timetz",zn.tsrange="tsrange",zn.tstzrange="tstzrange";const Fn=(e,t,r={})=>{var n;const s=null!==(n=r.skipTypes)&&void 0!==n?n:[];return t?Object.keys(t).reduce((r,n)=>(r[n]=qn(n,e,t,s),r),{}):{}},qn=(e,t,r,n)=>{const s=t.find(t=>t.name===e),a=null==s?void 0:s.type,i=r[e];return a&&!n.includes(a)?Bn(a,i):Hn(i)},Bn=(e,t)=>{if("_"===e.charAt(0)){const r=e.slice(1,e.length);return Gn(t,r)}switch(e){case Ln.bool:return Vn(t);case Ln.float4:case Ln.float8:case Ln.int2:case Ln.int4:case Ln.int8:case Ln.numeric:case Ln.oid:return Wn(t);case Ln.json:case Ln.jsonb:return Qn(t);case Ln.timestamp:return Kn(t);case Ln.abstime:case Ln.date:case Ln.daterange:case Ln.int4range:case Ln.int8range:case Ln.money:case Ln.reltime:case Ln.text:case Ln.time:case Ln.timestamptz:case Ln.timetz:case Ln.tsrange:case Ln.tstzrange:default:return Hn(t)}},Hn=e=>e,Vn=e=>{switch(e){case"t":return!0;case"f":return!1;default:return e}},Wn=e=>{if("string"==typeof e){const t=parseFloat(e);if(!Number.isNaN(t))return t}return e},Qn=e=>{if("string"==typeof e)try{return JSON.parse(e)}catch(t){return e}return e},Gn=(e,t)=>{if("string"!=typeof e)return e;const r=e.length-1,n=e[r];if("{"===e[0]&&"}"===n){let n;const a=e.slice(1,r);try{n=JSON.parse("["+a+"]")}catch(s){n=a?a.split(","):[]}return n.map(e=>Bn(t,e))}return e},Kn=e=>"string"==typeof e?e.replace(" ","T"):e,Jn=e=>{const t=new URL(e);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),""===t.pathname||"/"===t.pathname?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class Yn{constructor(e,t,r={},n=1e4){this.channel=e,this.event=t,this.payload=r,this.timeout=n,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,t){var r;return this._hasReceived(e)&&t(null===(r=this.receivedResp)||void 0===r?void 0:r.response),this.recHooks.push({status:e,callback:t}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);this.channel._on(this.refEvent,{},e=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=e,this._matchReceive(e)}),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,t){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:t})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:t}){this.recHooks.filter(t=>t.status===e).forEach(e=>e.callback(t))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var Xn,Zn,es,ts,rs,ns,ss,as;(Zn=Xn||(Xn={})).SYNC="sync",Zn.JOIN="join",Zn.LEAVE="leave";class is{constructor(e,t){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const r=(null==t?void 0:t.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(r.state,{},e=>{const{onJoin:t,onLeave:r,onSync:n}=this.caller;this.joinRef=this.channel._joinRef(),this.state=is.syncState(this.state,e,t,r),this.pendingDiffs.forEach(e=>{this.state=is.syncDiff(this.state,e,t,r)}),this.pendingDiffs=[],n()}),this.channel._on(r.diff,{},e=>{const{onJoin:t,onLeave:r,onSync:n}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(e):(this.state=is.syncDiff(this.state,e,t,r),n())}),this.onJoin((e,t,r)=>{this.channel._trigger("presence",{event:"join",key:e,currentPresences:t,newPresences:r})}),this.onLeave((e,t,r)=>{this.channel._trigger("presence",{event:"leave",key:e,currentPresences:t,leftPresences:r})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,t,r,n){const s=this.cloneDeep(e),a=this.transformState(t),i={},o={};return this.map(s,(e,t)=>{a[e]||(o[e]=t)}),this.map(a,(e,t)=>{const r=s[e];if(r){const n=t.map(e=>e.presence_ref),s=r.map(e=>e.presence_ref),a=t.filter(e=>s.indexOf(e.presence_ref)<0),l=r.filter(e=>n.indexOf(e.presence_ref)<0);a.length>0&&(i[e]=a),l.length>0&&(o[e]=l)}else i[e]=t}),this.syncDiff(s,{joins:i,leaves:o},r,n)}static syncDiff(e,t,r,n){const{joins:s,leaves:a}={joins:this.transformState(t.joins),leaves:this.transformState(t.leaves)};return r||(r=()=>{}),n||(n=()=>{}),this.map(s,(t,n)=>{var s;const a=null!==(s=e[t])&&void 0!==s?s:[];if(e[t]=this.cloneDeep(n),a.length>0){const r=e[t].map(e=>e.presence_ref),n=a.filter(e=>r.indexOf(e.presence_ref)<0);e[t].unshift(...n)}r(t,a,n)}),this.map(a,(t,r)=>{let s=e[t];if(!s)return;const a=r.map(e=>e.presence_ref);s=s.filter(e=>a.indexOf(e.presence_ref)<0),e[t]=s,n(t,s,r),0===s.length&&delete e[t]}),e}static map(e,t){return Object.getOwnPropertyNames(e).map(r=>t(r,e[r]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((t,r)=>{const n=e[r];return t[r]="metas"in n?n.metas.map(e=>(e.presence_ref=e.phx_ref,delete e.phx_ref,delete e.phx_ref_prev,e)):n,t},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}(ts=es||(es={})).ALL="*",ts.INSERT="INSERT",ts.UPDATE="UPDATE",ts.DELETE="DELETE",(ns=rs||(rs={})).BROADCAST="broadcast",ns.PRESENCE="presence",ns.POSTGRES_CHANGES="postgres_changes",ns.SYSTEM="system",(as=ss||(ss={})).SUBSCRIBED="SUBSCRIBED",as.TIMED_OUT="TIMED_OUT",as.CLOSED="CLOSED",as.CHANNEL_ERROR="CHANNEL_ERROR";class os{constructor(e,t={config:{}},r){var n,s;if(this.topic=e,this.params=t,this.socket=r,this.bindings={},this.state=On.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},t.config),this.timeout=this.socket.timeout,this.joinPush=new Yn(this,An.join,this.params,this.timeout),this.rejoinTimer=new Un(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=On.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(e=>e.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=On.closed,this.socket._remove(this)}),this._onError(e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=On.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=On.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",e=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,e),this.state=On.errored,this.rejoinTimer.scheduleTimeout())}),this._on(An.reply,{},(e,t)=>{this._trigger(this._replyEventName(t),e)}),this.presence=new is(this),this.broadcastEndpointURL=Jn(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(null===(s=null===(n=this.params.config)||void 0===n?void 0:n.broadcast)||void 0===s?void 0:s.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(e,t=this.timeout){var r,n,s;if(this.socket.isConnected()||this.socket.connect(),this.state==On.closed){const{config:{broadcast:a,presence:i,private:o}}=this.params,l=null!==(n=null===(r=this.bindings.postgres_changes)||void 0===r?void 0:r.map(e=>e.filter))&&void 0!==n?n:[],c=!!this.bindings[rs.PRESENCE]&&this.bindings[rs.PRESENCE].length>0||!0===(null===(s=this.params.config.presence)||void 0===s?void 0:s.enabled),u={},d={broadcast:a,presence:Object.assign(Object.assign({},i),{enabled:c}),postgres_changes:l,private:o};this.socket.accessTokenValue&&(u.access_token=this.socket.accessTokenValue),this._onError(t=>null==e?void 0:e(ss.CHANNEL_ERROR,t)),this._onClose(()=>null==e?void 0:e(ss.CLOSED)),this.updateJoinPayload(Object.assign({config:d},u)),this.joinedOnce=!0,this._rejoin(t),this.joinPush.receive("ok",async({postgres_changes:t})=>{var r;if(this.socket.setAuth(),void 0!==t){const n=this.bindings.postgres_changes,s=null!==(r=null==n?void 0:n.length)&&void 0!==r?r:0,a=[];for(let r=0;r<s;r++){const s=n[r],{filter:{event:i,schema:o,table:l,filter:c}}=s,u=t&&t[r];if(!u||u.event!==i||u.schema!==o||u.table!==l||u.filter!==c)return this.unsubscribe(),this.state=On.errored,void(null==e||e(ss.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes")));a.push(Object.assign(Object.assign({},s),{id:u.id}))}return this.bindings.postgres_changes=a,void(e&&e(ss.SUBSCRIBED))}null==e||e(ss.SUBSCRIBED)}).receive("error",t=>{this.state=On.errored,null==e||e(ss.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(t).join(", ")||"error")))}).receive("timeout",()=>{null==e||e(ss.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,t={}){return await this.send({type:"presence",event:"track",payload:e},t.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,t,r){return this.state===On.joined&&e===rs.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(e,t,r)}async httpSend(e,t,r={}){var n;const s=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(null==t)return Promise.reject("Payload is required for httpSend()");const a={method:"POST",headers:{Authorization:s,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:e,payload:t,private:this.private}]})},i=await this._fetchWithTimeout(this.broadcastEndpointURL,a,null!==(n=r.timeout)&&void 0!==n?n:this.timeout);if(202===i.status)return{success:!0};let o=i.statusText;try{const e=await i.json();o=e.error||e.message||o}catch(l){}return Promise.reject(new Error(o))}async send(e,t={}){var r,n;if(this._canPush()||"broadcast"!==e.type)return new Promise(r=>{var n,s,a;const i=this._push(e.type,e,t.timeout||this.timeout);"broadcast"!==e.type||(null===(a=null===(s=null===(n=this.params)||void 0===n?void 0:n.config)||void 0===s?void 0:s.broadcast)||void 0===a?void 0:a.ack)||r("ok"),i.receive("ok",()=>r("ok")),i.receive("error",()=>r("error")),i.receive("timeout",()=>r("timed out"))});{const{event:a,payload:i}=e,o={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:i,private:this.private}]})};try{const e=await this._fetchWithTimeout(this.broadcastEndpointURL,o,null!==(r=t.timeout)&&void 0!==r?r:this.timeout);return await(null===(n=e.body)||void 0===n?void 0:n.cancel()),e.ok?"ok":"error"}catch(s){return"AbortError"===s.name?"timed out":"error"}}}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=On.leaving;const t=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(An.close,"leave",this._joinRef())};this.joinPush.destroy();let r=null;return new Promise(n=>{r=new Yn(this,An.leave,{},e),r.receive("ok",()=>{t(),n("ok")}).receive("timeout",()=>{t(),n("timed out")}).receive("error",()=>{n("error")}),r.send(),this._canPush()||r.trigger("ok",{})}).finally(()=>{null==r||r.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=On.closed,this.bindings={}}async _fetchWithTimeout(e,t,r){const n=new AbortController,s=setTimeout(()=>n.abort(),r),a=await this.socket.fetch(e,Object.assign(Object.assign({},t),{signal:n.signal}));return clearTimeout(s),a}_push(e,t,r=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let n=new Yn(this,e,t,r);return this._canPush()?n.send():this._addToPushBuffer(n),n}_addToPushBuffer(e){if(e.startTimeout(),this.pushBuffer.push(e),this.pushBuffer.length>100){const e=this.pushBuffer.shift();e&&(e.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${e.event}`,e.payload))}}_onMessage(e,t,r){return t}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,t,r){var n,s;const a=e.toLocaleLowerCase(),{close:i,error:o,leave:l,join:c}=An;if(r&&[i,o,l,c].indexOf(a)>=0&&r!==this._joinRef())return;let u=this._onMessage(a,t,r);if(t&&!u)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?null===(n=this.bindings.postgres_changes)||void 0===n||n.filter(e=>{var t,r,n;return"*"===(null===(t=e.filter)||void 0===t?void 0:t.event)||(null===(n=null===(r=e.filter)||void 0===r?void 0:r.event)||void 0===n?void 0:n.toLocaleLowerCase())===a}).map(e=>e.callback(u,r)):null===(s=this.bindings[a])||void 0===s||s.filter(e=>{var r,n,s,i,o,l;if(["broadcast","presence","postgres_changes"].includes(a)){if("id"in e){const a=e.id,i=null===(r=e.filter)||void 0===r?void 0:r.event;return a&&(null===(n=t.ids)||void 0===n?void 0:n.includes(a))&&("*"===i||(null==i?void 0:i.toLocaleLowerCase())===(null===(s=t.data)||void 0===s?void 0:s.type.toLocaleLowerCase()))}{const r=null===(o=null===(i=null==e?void 0:e.filter)||void 0===i?void 0:i.event)||void 0===o?void 0:o.toLocaleLowerCase();return"*"===r||r===(null===(l=null==t?void 0:t.event)||void 0===l?void 0:l.toLocaleLowerCase())}}return e.type.toLocaleLowerCase()===a}).map(e=>{if("object"==typeof u&&"ids"in u){const e=u.data,{schema:t,table:r,commit_timestamp:n,type:s,errors:a}=e,i={schema:t,table:r,commit_timestamp:n,eventType:s,new:{},old:{},errors:a};u=Object.assign(Object.assign({},i),this._getPayloadRecords(e))}e.callback(u,r)})}_isClosed(){return this.state===On.closed}_isJoined(){return this.state===On.joined}_isJoining(){return this.state===On.joining}_isLeaving(){return this.state===On.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,t,r){const n=e.toLocaleLowerCase(),s={type:n,filter:t,callback:r};return this.bindings[n]?this.bindings[n].push(s):this.bindings[n]=[s],this}_off(e,t){const r=e.toLocaleLowerCase();return this.bindings[r]&&(this.bindings[r]=this.bindings[r].filter(e=>{var n;return!((null===(n=e.type)||void 0===n?void 0:n.toLocaleLowerCase())===r&&os.isEqual(e.filter,t))})),this}static isEqual(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const r in e)if(e[r]!==t[r])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(An.close,{},e)}_onError(e){this._on(An.error,{},t=>e(t))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=On.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const t={new:{},old:{}};return"INSERT"!==e.type&&"UPDATE"!==e.type||(t.new=Fn(e.columns,e.record)),"UPDATE"!==e.type&&"DELETE"!==e.type||(t.old=Fn(e.columns,e.old_record)),t}}const ls=()=>{},cs=25e3,us=10,ds=100,hs=[1e3,2e3,5e3,1e4];class ps{constructor(e,t){var r;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=En,this.transport=null,this.heartbeatIntervalMs=cs,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=ls,this.ref=0,this.reconnectTimer=null,this.vsn=Sn,this.logger=ls,this.conn=null,this.sendBuffer=[],this.serializer=new Mn,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),!(null===(r=null==t?void 0:t.params)||void 0===r?void 0:r.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=t.params.apikey,this.endPoint=`${e}/${In.websocket}`,this.httpEndpoint=Jn(e),this._initializeOptions(t),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(null==t?void 0:t.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||null!==this.conn&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=_n.createWebSocket(this.endpointURL())}catch(e){this._setConnectionState("disconnected");const t=e.message;if(t.includes("Node.js"))throw new Error(`${t}\n\nTo use Realtime in Node.js, you need to provide a WebSocket implementation:\n\nOption 1: Use Node.js 22+ which has native WebSocket support\nOption 2: Install and provide the "ws" package:\n\n  npm install ws\n\n  import ws from "ws"\n  const client = new RealtimeClient(url, {\n    ...options,\n    transport: ws\n  })`);throw new Error(`WebSocket not available: ${t}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(e,t){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const r=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(r),this._setConnectionState("disconnected")},"function"==typeof this.conn.close&&(e?this.conn.close(e,null!=t?t:""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(e){const t=await e.unsubscribe();return 0===this.channels.length&&this.disconnect(),t}async removeAllChannels(){const e=await Promise.all(this.channels.map(e=>e.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,t,r){this.logger(e,t,r)}connectionState(){switch(this.conn&&this.conn.readyState){case Cn.connecting:return $n.Connecting;case Cn.open:return $n.Open;case Cn.closing:return $n.Closing;default:return $n.Closed}}isConnected(){return this.connectionState()===$n.Open}isConnecting(){return"connecting"===this._connectionState}isDisconnecting(){return"disconnecting"===this._connectionState}channel(e,t={config:{}}){const r=`realtime:${e}`,n=this.getChannels().find(e=>e.topic===r);if(n)return n;{const r=new os(`realtime:${e}`,t,this);return this.channels.push(r),r}}push(e){const{topic:t,event:r,payload:n,ref:s}=e,a=()=>{this.encode(e,e=>{var t;null===(t=this.conn)||void 0===t||t.send(e)})};this.log("push",`${t} ${r} (${s})`,n),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(e=null){this._authPromise=this._performAuth(e);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var e;if(this.isConnected()){if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(t){this.log("error","error in heartbeat callback",t)}return this._wasManualDisconnect=!1,null===(e=this.conn)||void 0===e||e.close(1e3,"heartbeat timeout"),void setTimeout(()=>{var e;this.isConnected()||null===(e=this.reconnectTimer)||void 0===e||e.scheduleTimeout()},ds)}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(t){this.log("error","error in heartbeat callback",t)}this._setAuthSafely("heartbeat")}else try{this.heartbeatCallback("disconnected")}catch(t){this.log("error","error in heartbeat callback",t)}}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let t=this.channels.find(t=>t.topic===e&&(t._isJoined()||t._isJoining()));t&&(this.log("transport",`leaving duplicate topic "${e}"`),t.unsubscribe())}_remove(e){this.channels=this.channels.filter(t=>t.topic!==e.topic)}_onConnMessage(e){this.decode(e.data,e=>{if("phoenix"===e.topic&&"phx_reply"===e.event)try{this.heartbeatCallback("ok"===e.payload.status?"ok":"error")}catch(o){this.log("error","error in heartbeat callback",o)}e.ref&&e.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:t,event:r,payload:n,ref:s}=e,a=s?`(${s})`:"",i=n.status||"";this.log("receive",`${i} ${t} ${r} ${a}`.trim(),n),this.channels.filter(e=>e._isMember(t)).forEach(e=>e._trigger(r,n,s)),this._triggerStateCallbacks("message",e)})}_clearTimer(e){var t;"heartbeat"===e&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):"reconnect"===e&&(null===(t=this.reconnectTimer)||void 0===t||t.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_teardownConnection(){if(this.conn){if(this.conn.readyState===Cn.open||this.conn.readyState===Cn.connecting)try{this.conn.close()}catch(e){this.log("error","Error closing connection",e)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(e=>e.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`);(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(e=>{this.log("error","error waiting for auth on connect",e),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=e=>{this.log("worker","worker error",e.message),this.workerRef.terminate()},this.workerRef.onmessage=e=>{"keepAlive"===e.data.event&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){var t;this._setConnectionState("disconnected"),this.log("transport","close",e),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||null===(t=this.reconnectTimer)||void 0===t||t.scheduleTimeout(),this._triggerStateCallbacks("close",e)}_onConnError(e){this._setConnectionState("disconnected"),this.log("transport",`${e}`),this._triggerChanError(),this._triggerStateCallbacks("error",e)}_triggerChanError(){this.channels.forEach(e=>e._trigger(An.error))}_appendParams(e,t){if(0===Object.keys(t).length)return e;const r=e.match(/\?/)?"&":"?";return`${e}${r}${new URLSearchParams(t)}`}_workerObjectUrl(e){let t;if(e)t=e;else{const e=new Blob(['\n  addEventListener("message", (e) => {\n    if (e.data.event === "start") {\n      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);\n    }\n  });'],{type:"application/javascript"});t=URL.createObjectURL(e)}return t}_setConnectionState(e,t=!1){this._connectionState=e,"connecting"===e?this._wasManualDisconnect=!1:"disconnecting"===e&&(this._wasManualDisconnect=t)}async _performAuth(e=null){let t;t=e||(this.accessToken?await this.accessToken():this.accessTokenValue),this.accessTokenValue!=t&&(this.accessTokenValue=t,this.channels.forEach(e=>{const r={access_token:t,version:"realtime-js/2.81.1"};t&&e.updateJoinPayload(r),e.joinedOnce&&e._isJoined()&&e._push(An.access_token,{access_token:t})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(e="general"){this.setAuth().catch(t=>{this.log("error",`error setting auth in ${e}`,t)})}_triggerStateCallbacks(e,t){try{this.stateChangeCallbacks[e].forEach(r=>{try{r(t)}catch(n){this.log("error",`error in ${e} callback`,n)}})}catch(r){this.log("error",`error triggering ${e} callbacks`,r)}}_setupReconnectionTimer(){this.reconnectTimer=new Un(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},us)},this.reconnectAfterMs)}_initializeOptions(e){var t,r,n,s,a,i,o,l,c,u,d,h;switch(this.transport=null!==(t=null==e?void 0:e.transport)&&void 0!==t?t:null,this.timeout=null!==(r=null==e?void 0:e.timeout)&&void 0!==r?r:En,this.heartbeatIntervalMs=null!==(n=null==e?void 0:e.heartbeatIntervalMs)&&void 0!==n?n:cs,this.worker=null!==(s=null==e?void 0:e.worker)&&void 0!==s&&s,this.accessToken=null!==(a=null==e?void 0:e.accessToken)&&void 0!==a?a:null,this.heartbeatCallback=null!==(i=null==e?void 0:e.heartbeatCallback)&&void 0!==i?i:ls,this.vsn=null!==(o=null==e?void 0:e.vsn)&&void 0!==o?o:Sn,(null==e?void 0:e.params)&&(this.params=e.params),(null==e?void 0:e.logger)&&(this.logger=e.logger),((null==e?void 0:e.logLevel)||(null==e?void 0:e.log_level))&&(this.logLevel=e.logLevel||e.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=null!==(l=null==e?void 0:e.reconnectAfterMs)&&void 0!==l?l:e=>hs[e-1]||1e4,this.vsn){case Nn:this.encode=null!==(c=null==e?void 0:e.encode)&&void 0!==c?c:(e,t)=>t(JSON.stringify(e)),this.decode=null!==(u=null==e?void 0:e.decode)&&void 0!==u?u:(e,t)=>t(JSON.parse(e));break;case"2.0.0":this.encode=null!==(d=null==e?void 0:e.encode)&&void 0!==d?d:this.serializer.encode.bind(this.serializer),this.decode=null!==(h=null==e?void 0:e.decode)&&void 0!==h?h:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if("undefined"!=typeof window&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=null==e?void 0:e.workerUrl}}}class fs extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ms(e){return"object"==typeof e&&null!==e&&"__isStorageError"in e}class gs extends fs{constructor(e,t,r){super(e),this.name="StorageApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class bs extends fs{constructor(e,t){super(e),this.name="StorageUnknownError",this.originalError=t}}const vs=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),ys=e=>{if(Array.isArray(e))return e.map(e=>ys(e));if("function"==typeof e||e!==Object(e))return e;const t={};return Object.entries(e).forEach(([e,r])=>{const n=e.replace(/([-_][a-z])/gi,e=>e.toUpperCase().replace(/[-_]/g,""));t[n]=ys(r)}),t},xs=e=>{var t;return e.msg||e.message||e.error_description||("string"==typeof e.error?e.error:null===(t=e.error)||void 0===t?void 0:t.message)||JSON.stringify(e)},ws=(e,t,r)=>fr(void 0,void 0,void 0,function*(){const n=yield Response;e instanceof n&&!(null==r?void 0:r.noResolveJson)?e.json().then(r=>{const n=e.status||500,s=(null==r?void 0:r.statusCode)||n+"";t(new gs(xs(r),n,s))}).catch(e=>{t(new bs(xs(e),e))}):t(new bs(xs(e),e))}),js=(e,t,r,n)=>{const s={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"!==e&&n?((e=>{if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)})(n)?(s.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,(null==t?void 0:t.duplex)&&(s.duplex=t.duplex),Object.assign(Object.assign({},s),r)):s};function ks(e,t,r,n,s,a){return fr(this,void 0,void 0,function*(){return new Promise((i,o)=>{e(r,js(t,n,s,a)).then(e=>{if(!e.ok)throw e;return(null==n?void 0:n.noResolveJson)?e:e.json()}).then(e=>i(e)).catch(e=>ws(e,o,n))})})}function _s(e,t,r,n){return fr(this,void 0,void 0,function*(){return ks(e,"GET",t,r,n)})}function Ns(e,t,r,n,s){return fr(this,void 0,void 0,function*(){return ks(e,"POST",t,n,s,r)})}function Ss(e,t,r,n,s){return fr(this,void 0,void 0,function*(){return ks(e,"PUT",t,n,s,r)})}function Es(e,t,r,n,s){return fr(this,void 0,void 0,function*(){return ks(e,"DELETE",t,n,s,r)})}class Cs{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t}then(e,t){return this.execute().then(e,t)}execute(){return fr(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ms(e))return{data:null,error:e};throw e}})}}var Ts;class Os{constructor(e,t){this.downloadFn=e,this.shouldThrowOnError=t,this[Ts]="BlobDownloadBuilder",this.promise=null}asStream(){return new Cs(this.downloadFn,this.shouldThrowOnError)}then(e,t){return this.getPromise().then(e,t)}catch(e){return this.getPromise().catch(e)}finally(e){return this.getPromise().finally(e)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return fr(this,void 0,void 0,function*(){try{const e=yield this.downloadFn();return{data:yield e.blob(),error:null}}catch(e){if(this.shouldThrowOnError)throw e;if(ms(e))return{data:null,error:e};throw e}})}}Ts=Symbol.toStringTag;const Ps={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},As={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Rs{constructor(e,t={},r,n){this.shouldThrowOnError=!1,this.url=e,this.headers=t,this.bucketId=r,this.fetch=vs(n)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(e,t,r,n){return fr(this,void 0,void 0,function*(){try{let s;const a=Object.assign(Object.assign({},As),n);let i=Object.assign(Object.assign({},this.headers),"POST"===e&&{"x-upsert":String(a.upsert)});const o=a.metadata;if("undefined"!=typeof Blob&&r instanceof Blob)s=new FormData,s.append("cacheControl",a.cacheControl),o&&s.append("metadata",this.encodeMetadata(o)),s.append("",r);else if("undefined"!=typeof FormData&&r instanceof FormData)s=r,s.has("cacheControl")||s.append("cacheControl",a.cacheControl),o&&!s.has("metadata")&&s.append("metadata",this.encodeMetadata(o));else{s=r,i["cache-control"]=`max-age=${a.cacheControl}`,i["content-type"]=a.contentType,o&&(i["x-metadata"]=this.toBase64(this.encodeMetadata(o)));("undefined"!=typeof ReadableStream&&s instanceof ReadableStream||s&&"object"==typeof s&&"pipe"in s&&"function"==typeof s.pipe)&&!a.duplex&&(a.duplex="half")}(null==n?void 0:n.headers)&&(i=Object.assign(Object.assign({},i),n.headers));const l=this._removeEmptyFolders(t),c=this._getFinalPath(l),u=yield("PUT"==e?Ss:Ns)(this.fetch,`${this.url}/object/${c}`,s,Object.assign({headers:i},(null==a?void 0:a.duplex)?{duplex:a.duplex}:{}));return{data:{path:l,id:u.Id,fullPath:u.Key},error:null}}catch(s){if(this.shouldThrowOnError)throw s;if(ms(s))return{data:null,error:s};throw s}})}upload(e,t,r){return fr(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,t,r)})}uploadToSignedUrl(e,t,r,n){return fr(this,void 0,void 0,function*(){const s=this._removeEmptyFolders(e),a=this._getFinalPath(s),i=new URL(this.url+`/object/upload/sign/${a}`);i.searchParams.set("token",t);try{let e;const t=Object.assign({upsert:As.upsert},n),a=Object.assign(Object.assign({},this.headers),{"x-upsert":String(t.upsert)});"undefined"!=typeof Blob&&r instanceof Blob?(e=new FormData,e.append("cacheControl",t.cacheControl),e.append("",r)):"undefined"!=typeof FormData&&r instanceof FormData?(e=r,e.append("cacheControl",t.cacheControl)):(e=r,a["cache-control"]=`max-age=${t.cacheControl}`,a["content-type"]=t.contentType);return{data:{path:s,fullPath:(yield Ss(this.fetch,i.toString(),e,{headers:a})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(ms(o))return{data:null,error:o};throw o}})}createSignedUploadUrl(e,t){return fr(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e);const n=Object.assign({},this.headers);(null==t?void 0:t.upsert)&&(n["x-upsert"]="true");const s=yield Ns(this.fetch,`${this.url}/object/upload/sign/${r}`,{},{headers:n}),a=new URL(this.url+s.url),i=a.searchParams.get("token");if(!i)throw new fs("No token returned by API");return{data:{signedUrl:a.toString(),path:e,token:i},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ms(r))return{data:null,error:r};throw r}})}update(e,t,r){return fr(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,t,r)})}move(e,t,r){return fr(this,void 0,void 0,function*(){try{return{data:yield Ns(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==r?void 0:r.destinationBucket},{headers:this.headers}),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ms(n))return{data:null,error:n};throw n}})}copy(e,t,r){return fr(this,void 0,void 0,function*(){try{return{data:{path:(yield Ns(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:t,destinationBucket:null==r?void 0:r.destinationBucket},{headers:this.headers})).Key},error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ms(n))return{data:null,error:n};throw n}})}createSignedUrl(e,t,r){return fr(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e),s=yield Ns(this.fetch,`${this.url}/object/sign/${n}`,Object.assign({expiresIn:t},(null==r?void 0:r.transform)?{transform:r.transform}:{}),{headers:this.headers});const a=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return s={signedUrl:encodeURI(`${this.url}${s.signedURL}${a}`)},{data:s,error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ms(n))return{data:null,error:n};throw n}})}createSignedUrls(e,t,r){return fr(this,void 0,void 0,function*(){try{const n=yield Ns(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:t,paths:e},{headers:this.headers}),s=(null==r?void 0:r.download)?`&download=${!0===r.download?"":r.download}`:"";return{data:n.map(e=>Object.assign(Object.assign({},e),{signedUrl:e.signedURL?encodeURI(`${this.url}${e.signedURL}${s}`):null})),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ms(n))return{data:null,error:n};throw n}})}download(e,t){const r=void 0!==(null==t?void 0:t.transform)?"render/image/authenticated":"object",n=this.transformOptsToQueryString((null==t?void 0:t.transform)||{}),s=n?`?${n}`:"",a=this._getFinalPath(e);return new Os(()=>_s(this.fetch,`${this.url}/${r}/${a}${s}`,{headers:this.headers,noResolveJson:!0}),this.shouldThrowOnError)}info(e){return fr(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{const e=yield _s(this.fetch,`${this.url}/object/info/${t}`,{headers:this.headers});return{data:ys(e),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ms(r))return{data:null,error:r};throw r}})}exists(e){return fr(this,void 0,void 0,function*(){const t=this._getFinalPath(e);try{return yield function(e,t,r,n){return fr(this,void 0,void 0,function*(){return ks(e,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),n)})}(this.fetch,`${this.url}/object/${t}`,{headers:this.headers}),{data:!0,error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ms(r)&&r instanceof bs){const e=r.originalError;if([400,404].includes(null==e?void 0:e.status))return{data:!1,error:r}}throw r}})}getPublicUrl(e,t){const r=this._getFinalPath(e),n=[],s=(null==t?void 0:t.download)?`download=${!0===t.download?"":t.download}`:"";""!==s&&n.push(s);const a=void 0!==(null==t?void 0:t.transform)?"render/image":"object",i=this.transformOptsToQueryString((null==t?void 0:t.transform)||{});""!==i&&n.push(i);let o=n.join("&");return""!==o&&(o=`?${o}`),{data:{publicUrl:encodeURI(`${this.url}/${a}/public/${r}${o}`)}}}remove(e){return fr(this,void 0,void 0,function*(){try{return{data:yield Es(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ms(t))return{data:null,error:t};throw t}})}list(e,t,r){return fr(this,void 0,void 0,function*(){try{const n=Object.assign(Object.assign(Object.assign({},Ps),t),{prefix:e||""});return{data:yield Ns(this.fetch,`${this.url}/object/list/${this.bucketId}`,n,{headers:this.headers},r),error:null}}catch(n){if(this.shouldThrowOnError)throw n;if(ms(n))return{data:null,error:n};throw n}})}listV2(e,t){return fr(this,void 0,void 0,function*(){try{const r=Object.assign({},e);return{data:yield Ns(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,r,{headers:this.headers},t),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ms(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return"undefined"!=typeof Buffer?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e.replace(/^\/+/,"")}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const t=[];return e.width&&t.push(`width=${e.width}`),e.height&&t.push(`height=${e.height}`),e.resize&&t.push(`resize=${e.resize}`),e.format&&t.push(`format=${e.format}`),e.quality&&t.push(`quality=${e.quality}`),t.join("&")}}const Is="2.81.1",$s={"X-Client-Info":`storage-js/${Is}`};class Ds{constructor(e,t={},r,n){this.shouldThrowOnError=!1;const s=new URL(e);if(null==n?void 0:n.useNewHostname){/supabase\.(co|in|red)$/.test(s.hostname)&&!s.hostname.includes("storage.supabase.")&&(s.hostname=s.hostname.replace("supabase.","storage.supabase."))}this.url=s.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},$s),t),this.fetch=vs(r)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(e){return fr(this,void 0,void 0,function*(){try{const t=this.listBucketOptionsToQueryString(e);return{data:yield _s(this.fetch,`${this.url}/bucket${t}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ms(t))return{data:null,error:t};throw t}})}getBucket(e){return fr(this,void 0,void 0,function*(){try{return{data:yield _s(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ms(t))return{data:null,error:t};throw t}})}createBucket(e){return fr(this,arguments,void 0,function*(e,t={public:!1}){try{return{data:yield Ns(this.fetch,`${this.url}/bucket`,{id:e,name:e,type:t.type,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ms(r))return{data:null,error:r};throw r}})}updateBucket(e,t){return fr(this,void 0,void 0,function*(){try{return{data:yield Ss(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:t.public,file_size_limit:t.fileSizeLimit,allowed_mime_types:t.allowedMimeTypes},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(ms(r))return{data:null,error:r};throw r}})}emptyBucket(e){return fr(this,void 0,void 0,function*(){try{return{data:yield Ns(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ms(t))return{data:null,error:t};throw t}})}deleteBucket(e){return fr(this,void 0,void 0,function*(){try{return{data:yield Es(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ms(t))return{data:null,error:t};throw t}})}listBucketOptionsToQueryString(e){const t={};return e&&("limit"in e&&(t.limit=String(e.limit)),"offset"in e&&(t.offset=String(e.offset)),e.search&&(t.search=e.search),e.sortColumn&&(t.sortColumn=e.sortColumn),e.sortOrder&&(t.sortOrder=e.sortOrder)),Object.keys(t).length>0?"?"+new URLSearchParams(t).toString():""}}class Ls{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},$s),t),this.fetch=vs(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return fr(this,void 0,void 0,function*(){try{return{data:yield Ns(this.fetch,`${this.url}/bucket`,{name:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ms(t))return{data:null,error:t};throw t}})}listBuckets(e){return fr(this,void 0,void 0,function*(){try{const t=new URLSearchParams;void 0!==(null==e?void 0:e.limit)&&t.set("limit",e.limit.toString()),void 0!==(null==e?void 0:e.offset)&&t.set("offset",e.offset.toString()),(null==e?void 0:e.sortColumn)&&t.set("sortColumn",e.sortColumn),(null==e?void 0:e.sortOrder)&&t.set("sortOrder",e.sortOrder),(null==e?void 0:e.search)&&t.set("search",e.search);const r=t.toString(),n=r?`${this.url}/bucket?${r}`:`${this.url}/bucket`;return{data:yield _s(this.fetch,n,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ms(t))return{data:null,error:t};throw t}})}deleteBucket(e){return fr(this,void 0,void 0,function*(){try{return{data:yield Es(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(ms(t))return{data:null,error:t};throw t}})}}const zs={"X-Client-Info":`storage-js/${Is}`,"Content-Type":"application/json"};class Ms extends Error{constructor(e){super(e),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function Us(e){return"object"==typeof e&&null!==e&&"__isStorageVectorsError"in e}class Fs extends Ms{constructor(e,t,r){super(e),this.name="StorageVectorsApiError",this.status=t,this.statusCode=r}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class qs extends Ms{constructor(e,t){super(e),this.name="StorageVectorsUnknownError",this.originalError=t}}var Bs,Hs;(Hs=Bs||(Bs={})).InternalError="InternalError",Hs.S3VectorConflictException="S3VectorConflictException",Hs.S3VectorNotFoundException="S3VectorNotFoundException",Hs.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",Hs.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",Hs.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded";const Vs=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),Ws=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),Qs=(e,t,r,n)=>{const s={method:e,headers:(null==t?void 0:t.headers)||{}};return n?((e=>{if("object"!=typeof e||null===e)return!1;const t=Object.getPrototypeOf(e);return!(null!==t&&t!==Object.prototype&&null!==Object.getPrototypeOf(t)||Symbol.toStringTag in e||Symbol.iterator in e)})(n)?(s.headers=Object.assign({"Content-Type":"application/json"},null==t?void 0:t.headers),s.body=JSON.stringify(n)):s.body=n,Object.assign(Object.assign({},s),r)):s};function Gs(e,t,r,n,s,a){return fr(this,void 0,void 0,function*(){return new Promise((i,o)=>{e(r,Qs(t,n,s,a)).then(e=>{if(!e.ok)throw e;if(null==n?void 0:n.noResolveJson)return e;const t=e.headers.get("content-type");return t&&t.includes("application/json")?e.json():{}}).then(e=>i(e)).catch(e=>((e,t,r)=>fr(void 0,void 0,void 0,function*(){if(e&&"object"==typeof e&&"status"in e&&"ok"in e&&"number"==typeof e.status&&!(null==r?void 0:r.noResolveJson)){const r=e.status||500,n=e;if("function"==typeof n.json)n.json().then(e=>{const n=(null==e?void 0:e.statusCode)||(null==e?void 0:e.code)||r+"";t(new Fs(Ws(e),r,n))}).catch(()=>{const e=r+"",s=n.statusText||`HTTP ${r} error`;t(new Fs(s,r,e))});else{const e=r+"",s=n.statusText||`HTTP ${r} error`;t(new Fs(s,r,e))}}else t(new qs(Ws(e),e))}))(e,o,n))})})}function Ks(e,t,r,n,s){return fr(this,void 0,void 0,function*(){return Gs(e,"POST",t,n,s,r)})}class Js{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},zs),t),this.fetch=Vs(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(e){return fr(this,void 0,void 0,function*(){try{return{data:(yield Ks(this.fetch,`${this.url}/CreateIndex`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Us(t))return{data:null,error:t};throw t}})}getIndex(e,t){return fr(this,void 0,void 0,function*(){try{return{data:yield Ks(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Us(r))return{data:null,error:r};throw r}})}listIndexes(e){return fr(this,void 0,void 0,function*(){try{return{data:yield Ks(this.fetch,`${this.url}/ListIndexes`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Us(t))return{data:null,error:t};throw t}})}deleteIndex(e,t){return fr(this,void 0,void 0,function*(){try{return{data:(yield Ks(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:e,indexName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(Us(r))return{data:null,error:r};throw r}})}}class Ys{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},zs),t),this.fetch=Vs(r)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(e){return fr(this,void 0,void 0,function*(){try{if(e.vectors.length<1||e.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield Ks(this.fetch,`${this.url}/PutVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Us(t))return{data:null,error:t};throw t}})}getVectors(e){return fr(this,void 0,void 0,function*(){try{return{data:yield Ks(this.fetch,`${this.url}/GetVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Us(t))return{data:null,error:t};throw t}})}listVectors(e){return fr(this,void 0,void 0,function*(){try{if(void 0!==e.segmentCount){if(e.segmentCount<1||e.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(void 0!==e.segmentIndex&&(e.segmentIndex<0||e.segmentIndex>=e.segmentCount))throw new Error("segmentIndex must be between 0 and "+(e.segmentCount-1))}return{data:yield Ks(this.fetch,`${this.url}/ListVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Us(t))return{data:null,error:t};throw t}})}queryVectors(e){return fr(this,void 0,void 0,function*(){try{return{data:yield Ks(this.fetch,`${this.url}/QueryVectors`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Us(t))return{data:null,error:t};throw t}})}deleteVectors(e){return fr(this,void 0,void 0,function*(){try{if(e.keys.length<1||e.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield Ks(this.fetch,`${this.url}/DeleteVectors`,e,{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Us(t))return{data:null,error:t};throw t}})}}class Xs{constructor(e,t={},r){this.shouldThrowOnError=!1,this.url=e.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},zs),t),this.fetch=Vs(r)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(e){return fr(this,void 0,void 0,function*(){try{return{data:(yield Ks(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Us(t))return{data:null,error:t};throw t}})}getBucket(e){return fr(this,void 0,void 0,function*(){try{return{data:yield Ks(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:e},{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Us(t))return{data:null,error:t};throw t}})}listBuckets(){return fr(this,arguments,void 0,function*(e={}){try{return{data:yield Ks(this.fetch,`${this.url}/ListVectorBuckets`,e,{headers:this.headers}),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Us(t))return{data:null,error:t};throw t}})}deleteBucket(e){return fr(this,void 0,void 0,function*(){try{return{data:(yield Ks(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:e},{headers:this.headers}))||{},error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(Us(t))return{data:null,error:t};throw t}})}}class Zs extends Xs{constructor(e,t={}){super(e,t.headers||{},t.fetch)}from(e){return new ea(this.url,this.headers,e,this.fetch)}}class ea extends Js{constructor(e,t,r,n){super(e,t,n),this.vectorBucketName=r}createIndex(e){const t=Object.create(null,{createIndex:{get:()=>super.createIndex}});return fr(this,void 0,void 0,function*(){return t.createIndex.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const e=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return fr(this,arguments,void 0,function*(t={}){return e.listIndexes.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}getIndex(e){const t=Object.create(null,{getIndex:{get:()=>super.getIndex}});return fr(this,void 0,void 0,function*(){return t.getIndex.call(this,this.vectorBucketName,e)})}deleteIndex(e){const t=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return fr(this,void 0,void 0,function*(){return t.deleteIndex.call(this,this.vectorBucketName,e)})}index(e){return new ta(this.url,this.headers,this.vectorBucketName,e,this.fetch)}}class ta extends Ys{constructor(e,t,r,n,s){super(e,t,s),this.vectorBucketName=r,this.indexName=n}putVectors(e){const t=Object.create(null,{putVectors:{get:()=>super.putVectors}});return fr(this,void 0,void 0,function*(){return t.putVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(e){const t=Object.create(null,{getVectors:{get:()=>super.getVectors}});return fr(this,void 0,void 0,function*(){return t.getVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const e=Object.create(null,{listVectors:{get:()=>super.listVectors}});return fr(this,arguments,void 0,function*(t={}){return e.listVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(e){const t=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return fr(this,void 0,void 0,function*(){return t.queryVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(e){const t=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return fr(this,void 0,void 0,function*(){return t.deleteVectors.call(this,Object.assign(Object.assign({},e),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class ra extends Ds{constructor(e,t={},r,n){super(e,t,r,n)}from(e){return new Rs(this.url,this.headers,e,this.fetch)}get vectors(){return new Zs(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new Ls(this.url+"/iceberg",this.headers,this.fetch)}}let na="";na="undefined"!=typeof Deno?"deno":"undefined"!=typeof document?"web":"undefined"!=typeof navigator&&"ReactNative"===navigator.product?"react-native":"node";const sa={headers:{"X-Client-Info":`supabase-js-${na}/2.81.1`}},aa={schema:"public"},ia={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},oa={},la=(e,t,r)=>{const n=(e=>e?(...t)=>e(...t):(...e)=>fetch(...e))(r),s=Headers;return async(r,a)=>{var i;const o=null!==(i=await t())&&void 0!==i?i:e;let l=new s(null==a?void 0:a.headers);return l.has("apikey")||l.set("apikey",e),l.has("Authorization")||l.set("Authorization",`Bearer ${o}`),n(r,Object.assign(Object.assign({},a),{headers:l}))}};const ca="2.81.1",ua=3e4,da=9e4,ha={"X-Client-Info":`gotrue-js/${ca}`},pa="X-Supabase-Api-Version",fa={timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"},ma=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i;class ga extends Error{constructor(e,t,r){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=t,this.code=r}}function ba(e){return"object"==typeof e&&null!==e&&"__isAuthError"in e}class va extends ga{constructor(e,t,r){super(e,t,r),this.name="AuthApiError",this.status=t,this.code=r}}class ya extends ga{constructor(e,t){super(e),this.name="AuthUnknownError",this.originalError=t}}class xa extends ga{constructor(e,t,r,n){super(e,r,n),this.name=t,this.status=r}}class wa extends xa{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}class ja extends xa{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class ka extends xa{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class _a extends xa{constructor(e,t=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Na extends xa{constructor(e,t=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=t}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Sa extends xa{constructor(e,t){super(e,"AuthRetryableFetchError",t,void 0)}}function Ea(e){return ba(e)&&"AuthRetryableFetchError"===e.name}class Ca extends xa{constructor(e,t,r){super(e,"AuthWeakPasswordError",t,"weak_password"),this.reasons=r}}class Ta extends xa{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Oa="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Pa=" \t\n\r=".split(""),Aa=(()=>{const e=new Array(128);for(let t=0;t<e.length;t+=1)e[t]=-1;for(let t=0;t<Pa.length;t+=1)e[Pa[t].charCodeAt(0)]=-2;for(let t=0;t<Oa.length;t+=1)e[Oa[t].charCodeAt(0)]=t;return e})();function Ra(e,t,r){if(null!==e)for(t.queue=t.queue<<8|e,t.queuedBits+=8;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;r(Oa[e]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const e=t.queue>>t.queuedBits-6&63;r(Oa[e]),t.queuedBits-=6}}function Ia(e,t,r){const n=Aa[e];if(!(n>-1)){if(-2===n)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(e)}"`)}for(t.queue=t.queue<<6|n,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8}function $a(e){const t=[],r=e=>{t.push(String.fromCodePoint(e))},n={utf8seq:0,codepoint:0},s={queue:0,queuedBits:0},a=e=>{!function(e,t,r){if(0===t.utf8seq){if(e<=127)return void r(e);for(let r=1;r<6;r+=1)if(!(e>>7-r&1)){t.utf8seq=r;break}if(2===t.utf8seq)t.codepoint=31&e;else if(3===t.utf8seq)t.codepoint=15&e;else{if(4!==t.utf8seq)throw new Error("Invalid UTF-8 sequence");t.codepoint=7&e}t.utf8seq-=1}else if(t.utf8seq>0){if(e<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|63&e,t.utf8seq-=1,0===t.utf8seq&&r(t.codepoint)}}(e,n,r)};for(let i=0;i<e.length;i+=1)Ia(e.charCodeAt(i),s,a);return t.join("")}function Da(e,t){if(!(e<=127)){if(e<=2047)return t(192|e>>6),void t(128|63&e);if(e<=65535)return t(224|e>>12),t(128|e>>6&63),void t(128|63&e);if(e<=1114111)return t(240|e>>18),t(128|e>>12&63),t(128|e>>6&63),void t(128|63&e);throw new Error(`Unrecognized Unicode codepoint: ${e.toString(16)}`)}t(e)}function La(e){const t=[],r={queue:0,queuedBits:0},n=e=>{t.push(e)};for(let s=0;s<e.length;s+=1)Ia(e.charCodeAt(s),r,n);return new Uint8Array(t)}function za(e){const t=[];return function(e,t){for(let r=0;r<e.length;r+=1){let n=e.charCodeAt(r);if(n>55295&&n<=56319){const t=1024*(n-55296)&65535;n=65536+(e.charCodeAt(r+1)-56320&65535|t),r+=1}Da(n,t)}}(e,e=>t.push(e)),new Uint8Array(t)}function Ma(e){const t=[],r={queue:0,queuedBits:0},n=e=>{t.push(e)};return e.forEach(e=>Ra(e,r,n)),Ra(null,r,n),t.join("")}const Ua=()=>"undefined"!=typeof window&&"undefined"!=typeof document,Fa={tested:!1,writable:!1},qa=()=>{if(!Ua())return!1;try{if("object"!=typeof globalThis.localStorage)return!1}catch(t){return!1}if(Fa.tested)return Fa.writable;const e=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(e,e),globalThis.localStorage.removeItem(e),Fa.tested=!0,Fa.writable=!0}catch(t){Fa.tested=!0,Fa.writable=!1}return Fa.writable};const Ba=e=>e?(...t)=>e(...t):(...e)=>fetch(...e),Ha=async(e,t,r)=>{await e.setItem(t,JSON.stringify(r))},Va=async(e,t)=>{const r=await e.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch(n){return r}},Wa=async(e,t)=>{await e.removeItem(t)};class Qa{constructor(){this.promise=new Qa.promiseConstructor((e,t)=>{this.resolve=e,this.reject=t})}}function Ga(e){const t=e.split(".");if(3!==t.length)throw new Ta("Invalid JWT structure");for(let r=0;r<t.length;r++)if(!ma.test(t[r]))throw new Ta("JWT not in base64url format");return{header:JSON.parse($a(t[0])),payload:JSON.parse($a(t[1])),signature:La(t[2]),raw:{header:t[0],payload:t[1]}}}function Ka(e){return("0"+e.toString(16)).substr(-2)}async function Ja(e){if(!("undefined"!=typeof crypto&&void 0!==crypto.subtle&&"undefined"!=typeof TextEncoder))return e;const t=await async function(e){const t=(new TextEncoder).encode(e),r=await crypto.subtle.digest("SHA-256",t),n=new Uint8Array(r);return Array.from(n).map(e=>String.fromCharCode(e)).join("")}(e);return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Ya(e,t,r=!1){const n=function(){const e=new Uint32Array(56);if("undefined"==typeof crypto){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",t=e.length;let r="";for(let n=0;n<56;n++)r+=e.charAt(Math.floor(Math.random()*t));return r}return crypto.getRandomValues(e),Array.from(e,Ka).join("")}();let s=n;r&&(s+="/PASSWORD_RECOVERY"),await Ha(e,`${t}-code-verifier`,s);const a=await Ja(n);return[a,n===a?"plain":"s256"]}Qa.promiseConstructor=Promise;const Xa=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;const Za=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function ei(e){if(!Za.test(e))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function ti(){return new Proxy({},{get:(e,t)=>{if("__isUserNotAvailableProxy"===t)return!0;if("symbol"==typeof t){const e=t.toString();if("Symbol(Symbol.toPrimitive)"===e||"Symbol(Symbol.toStringTag)"===e||"Symbol(util.inspect.custom)"===e)return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${t}" property of the session object is not supported. Please use getUser() instead.`)},set:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(e,t)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${t}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function ri(e){return JSON.parse(JSON.stringify(e))}const ni=e=>e.msg||e.message||e.error_description||e.error||JSON.stringify(e),si=[502,503,504];async function ai(e){var t,r;if(!("object"==typeof(r=e)&&null!==r&&"status"in r&&"ok"in r&&"json"in r&&"function"==typeof r.json))throw new Sa(ni(e),0);if(si.includes(e.status))throw new Sa(ni(e),e.status);let n,s;try{n=await e.json()}catch(i){throw new ya(ni(i),i)}const a=function(e){const t=e.headers.get(pa);if(!t)return null;if(!t.match(Xa))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch(i){return null}}(e);if(a&&a.getTime()>=fa.timestamp&&"object"==typeof n&&n&&"string"==typeof n.code?s=n.code:"object"==typeof n&&n&&"string"==typeof n.error_code&&(s=n.error_code),s){if("weak_password"===s)throw new Ca(ni(n),e.status,(null===(t=n.weak_password)||void 0===t?void 0:t.reasons)||[]);if("session_not_found"===s)throw new wa}else if("object"==typeof n&&n&&"object"==typeof n.weak_password&&n.weak_password&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0))throw new Ca(ni(n),e.status,n.weak_password.reasons);throw new va(ni(n),e.status||500,s)}async function ii(e,t,r,n){var s;const a=Object.assign({},null==n?void 0:n.headers);a[pa]||(a[pa]=fa.name),(null==n?void 0:n.jwt)&&(a.Authorization=`Bearer ${n.jwt}`);const i=null!==(s=null==n?void 0:n.query)&&void 0!==s?s:{};(null==n?void 0:n.redirectTo)&&(i.redirect_to=n.redirectTo);const o=Object.keys(i).length?"?"+new URLSearchParams(i).toString():"",l=await async function(e,t,r,n,s,a){const i=((e,t,r,n)=>{const s={method:e,headers:(null==t?void 0:t.headers)||{}};return"GET"===e?s:(s.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},null==t?void 0:t.headers),s.body=JSON.stringify(n),Object.assign(Object.assign({},s),r))})(t,n,s,a);let o;try{o=await e(r,Object.assign({},i))}catch(l){throw new Sa(ni(l),0)}o.ok||await ai(o);if(null==n?void 0:n.noResolveJson)return o;try{return await o.json()}catch(l){await ai(l)}}(e,t,r+o,{headers:a,noResolveJson:null==n?void 0:n.noResolveJson},{},null==n?void 0:n.body);return(null==n?void 0:n.xform)?null==n?void 0:n.xform(l):{data:Object.assign({},l),error:null}}function oi(e){var t;let r=null;var n;(function(e){return e.access_token&&e.refresh_token&&e.expires_in})(e)&&(r=Object.assign({},e),e.expires_at||(r.expires_at=(n=e.expires_in,Math.round(Date.now()/1e3)+n)));return{data:{session:r,user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function li(e){const t=oi(e);return!t.error&&e.weak_password&&"object"==typeof e.weak_password&&Array.isArray(e.weak_password.reasons)&&e.weak_password.reasons.length&&e.weak_password.message&&"string"==typeof e.weak_password.message&&e.weak_password.reasons.reduce((e,t)=>e&&"string"==typeof t,!0)&&(t.data.weak_password=e.weak_password),t}function ci(e){var t;return{data:{user:null!==(t=e.user)&&void 0!==t?t:e},error:null}}function ui(e){return{data:e,error:null}}function di(e){const{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a}=e,i=ir(e,["action_link","email_otp","hashed_token","redirect_to","verification_type"]);return{data:{properties:{action_link:t,email_otp:r,hashed_token:n,redirect_to:s,verification_type:a},user:Object.assign({},i)},error:null}}function hi(e){return e}const pi=["global","local","others"];class fi{constructor({url:e="",headers:t={},fetch:r}){this.url=e,this.headers=t,this.fetch=Ba(r),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(e,t=pi[0]){if(pi.indexOf(t)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${pi.join(", ")}`);try{return await ii(this.fetch,"POST",`${this.url}/logout?scope=${t}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(r){if(ba(r))return{data:null,error:r};throw r}}async inviteUserByEmail(e,t={}){try{return await ii(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:t.data},headers:this.headers,redirectTo:t.redirectTo,xform:ci})}catch(r){if(ba(r))return{data:{user:null},error:r};throw r}}async generateLink(e){try{const{options:t}=e,r=ir(e,["options"]),n=Object.assign(Object.assign({},r),t);return"newEmail"in r&&(n.new_email=null==r?void 0:r.newEmail,delete n.newEmail),await ii(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:n,headers:this.headers,xform:di,redirectTo:null==t?void 0:t.redirectTo})}catch(t){if(ba(t))return{data:{properties:null,user:null},error:t};throw t}}async createUser(e){try{return await ii(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:ci})}catch(t){if(ba(t))return{data:{user:null},error:t};throw t}}async listUsers(e){var t,r,n,s,a,i,o;try{const l={nextPage:null,lastPage:0,total:0},c=await ii(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(r=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==r?r:"",per_page:null!==(s=null===(n=null==e?void 0:e.perPage)||void 0===n?void 0:n.toString())&&void 0!==s?s:""},xform:hi});if(c.error)throw c.error;const u=await c.json(),d=null!==(a=c.headers.get("x-total-count"))&&void 0!==a?a:0,h=null!==(o=null===(i=c.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l[`${r}Page`]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(l){if(ba(l))return{data:{users:[]},error:l};throw l}}async getUserById(e){ei(e);try{return await ii(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:ci})}catch(t){if(ba(t))return{data:{user:null},error:t};throw t}}async updateUserById(e,t){ei(e);try{return await ii(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:t,headers:this.headers,xform:ci})}catch(r){if(ba(r))return{data:{user:null},error:r};throw r}}async deleteUser(e,t=!1){ei(e);try{return await ii(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:t},xform:ci})}catch(r){if(ba(r))return{data:{user:null},error:r};throw r}}async _listFactors(e){ei(e.userId);try{const{data:t,error:r}=await ii(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:e=>({data:{factors:e},error:null})});return{data:t,error:r}}catch(t){if(ba(t))return{data:null,error:t};throw t}}async _deleteFactor(e){ei(e.userId),ei(e.id);try{return{data:await ii(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(t){if(ba(t))return{data:null,error:t};throw t}}async _listOAuthClients(e){var t,r,n,s,a,i,o;try{const l={nextPage:null,lastPage:0,total:0},c=await ii(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:null!==(r=null===(t=null==e?void 0:e.page)||void 0===t?void 0:t.toString())&&void 0!==r?r:"",per_page:null!==(s=null===(n=null==e?void 0:e.perPage)||void 0===n?void 0:n.toString())&&void 0!==s?s:""},xform:hi});if(c.error)throw c.error;const u=await c.json(),d=null!==(a=c.headers.get("x-total-count"))&&void 0!==a?a:0,h=null!==(o=null===(i=c.headers.get("link"))||void 0===i?void 0:i.split(","))&&void 0!==o?o:[];return h.length>0&&(h.forEach(e=>{const t=parseInt(e.split(";")[0].split("=")[1].substring(0,1)),r=JSON.parse(e.split(";")[1].split("=")[1]);l[`${r}Page`]=t}),l.total=parseInt(d)),{data:Object.assign(Object.assign({},u),l),error:null}}catch(l){if(ba(l))return{data:{clients:[]},error:l};throw l}}async _createOAuthClient(e){try{return await ii(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:e,headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(ba(t))return{data:null,error:t};throw t}}async _getOAuthClient(e){try{return await ii(this.fetch,"GET",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(ba(t))return{data:null,error:t};throw t}}async _updateOAuthClient(e,t){try{return await ii(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${e}`,{body:t,headers:this.headers,xform:e=>({data:e,error:null})})}catch(r){if(ba(r))return{data:null,error:r};throw r}}async _deleteOAuthClient(e){try{return await ii(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${e}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(t){if(ba(t))return{data:null,error:t};throw t}}async _regenerateOAuthClientSecret(e){try{return await ii(this.fetch,"POST",`${this.url}/admin/oauth/clients/${e}/regenerate_secret`,{headers:this.headers,xform:e=>({data:e,error:null})})}catch(t){if(ba(t))return{data:null,error:t};throw t}}}function mi(e={}){return{getItem:t=>e[t]||null,setItem:(t,r)=>{e[t]=r},removeItem:t=>{delete e[t]}}}const gi=!!(globalThis&&qa()&&globalThis.localStorage&&"true"===globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug"));class bi extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class vi extends bi{}async function yi(e,t,r){const n=new globalThis.AbortController;return t>0&&setTimeout(()=>{n.abort()},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(e,0===t?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async n=>{if(!n){if(0===t)throw new vi(`Acquiring an exclusive Navigator LockManager lock "${e}" immediately failed`);if(gi)try{await globalThis.navigator.locks.query()}catch(s){}return await r()}try{return await r()}finally{}}))}function xi(e){if(!/^0x[a-fA-F0-9]{40}$/.test(e))throw new Error(`@supabase/auth-js: Address "${e}" is invalid.`);return e.toLowerCase()}function wi(e){const t=(new TextEncoder).encode(e);return"0x"+Array.from(t,e=>e.toString(16).padStart(2,"0")).join("")}class ji extends Error{constructor({message:e,code:t,cause:r,name:n}){var s;super(e,{cause:r}),this.__isWebAuthnError=!0,this.name=null!==(s=null!=n?n:r instanceof Error?r.name:void 0)&&void 0!==s?s:"Unknown Error",this.code=t}}class ki extends ji{constructor(e,t){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:t,message:e}),this.name="WebAuthnUnknownError",this.originalError=t}}function _i({error:e,options:t}){var r,n,s;const{publicKey:a}=t;if(!a)throw Error("options was missing required publicKey property");if("AbortError"===e.name){if(t.signal instanceof AbortSignal)return new ji({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else if("ConstraintError"===e.name){if(!0===(null===(r=a.authenticatorSelection)||void 0===r?void 0:r.requireResidentKey))return new ji({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:e});if("conditional"===t.mediation&&"required"===(null===(n=a.authenticatorSelection)||void 0===n?void 0:n.userVerification))return new ji({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:e});if("required"===(null===(s=a.authenticatorSelection)||void 0===s?void 0:s.userVerification))return new ji({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:e})}else{if("InvalidStateError"===e.name)return new ji({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:e});if("NotAllowedError"===e.name)return new ji({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if("NotSupportedError"===e.name){return 0===a.pubKeyCredParams.filter(e=>"public-key"===e.type).length?new ji({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:e}):new ji({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:e})}if("SecurityError"===e.name){const t=window.location.hostname;if(!Pi(t))return new ji({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e});if(a.rp.id!==t)return new ji({message:`The RP ID "${a.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else if("TypeError"===e.name){if(a.user.id.byteLength<1||a.user.id.byteLength>64)return new ji({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:e})}else if("UnknownError"===e.name)return new ji({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ji({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}function Ni({error:e,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if("AbortError"===e.name){if(t.signal instanceof AbortSignal)return new ji({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:e})}else{if("NotAllowedError"===e.name)return new ji({message:e.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e});if("SecurityError"===e.name){const t=window.location.hostname;if(!Pi(t))return new ji({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:e});if(r.rpId!==t)return new ji({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:e})}else if("UnknownError"===e.name)return new ji({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:e})}return new ji({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:e})}const Si=new class{createNewAbortSignal(){if(this.controller){const e=new Error("Cancelling existing WebAuthn API call for new one");e.name="AbortError",this.controller.abort(e)}const e=new AbortController;return this.controller=e,e.signal}cancelCeremony(){if(this.controller){const e=new Error("Manually cancelling existing WebAuthn API call");e.name="AbortError",this.controller.abort(e),this.controller=void 0}}};function Ei(e){if(!e)throw new Error("Credential creation options are required");if("undefined"!=typeof PublicKeyCredential&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseCreationOptionsFromJSON)return PublicKeyCredential.parseCreationOptionsFromJSON(e);const{challenge:t,user:r,excludeCredentials:n}=e,s=ir(e,["challenge","user","excludeCredentials"]),a=La(t).buffer,i=Object.assign(Object.assign({},r),{id:La(r.id).buffer}),o=Object.assign(Object.assign({},s),{challenge:a,user:i});if(n&&n.length>0){o.excludeCredentials=new Array(n.length);for(let e=0;e<n.length;e++){const t=n[e];o.excludeCredentials[e]=Object.assign(Object.assign({},t),{id:La(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return o}function Ci(e){if(!e)throw new Error("Credential request options are required");if("undefined"!=typeof PublicKeyCredential&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&"function"==typeof PublicKeyCredential.parseRequestOptionsFromJSON)return PublicKeyCredential.parseRequestOptionsFromJSON(e);const{challenge:t,allowCredentials:r}=e,n=ir(e,["challenge","allowCredentials"]),s=La(t).buffer,a=Object.assign(Object.assign({},n),{challenge:s});if(r&&r.length>0){a.allowCredentials=new Array(r.length);for(let e=0;e<r.length;e++){const t=r[e];a.allowCredentials[e]=Object.assign(Object.assign({},t),{id:La(t.id).buffer,type:t.type||"public-key",transports:t.transports})}}return a}function Ti(e){var t;if("toJSON"in e&&"function"==typeof e.toJSON)return e.toJSON();const r=e;return{id:e.id,rawId:e.id,response:{attestationObject:Ma(new Uint8Array(e.response.attestationObject)),clientDataJSON:Ma(new Uint8Array(e.response.clientDataJSON))},type:"public-key",clientExtensionResults:e.getClientExtensionResults(),authenticatorAttachment:null!==(t=r.authenticatorAttachment)&&void 0!==t?t:void 0}}function Oi(e){var t;if("toJSON"in e&&"function"==typeof e.toJSON)return e.toJSON();const r=e,n=e.getClientExtensionResults(),s=e.response;return{id:e.id,rawId:e.id,response:{authenticatorData:Ma(new Uint8Array(s.authenticatorData)),clientDataJSON:Ma(new Uint8Array(s.clientDataJSON)),signature:Ma(new Uint8Array(s.signature)),userHandle:s.userHandle?Ma(new Uint8Array(s.userHandle)):void 0},type:"public-key",clientExtensionResults:n,authenticatorAttachment:null!==(t=r.authenticatorAttachment)&&void 0!==t?t:void 0}}function Pi(e){return"localhost"===e||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(e)}function Ai(){var e,t;return!!(Ua()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&"function"==typeof(null===(e=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===e?void 0:e.create)&&"function"==typeof(null===(t=null===navigator||void 0===navigator?void 0:navigator.credentials)||void 0===t?void 0:t.get))}const Ri={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},Ii={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function $i(...e){const t=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),r=e=>e instanceof ArrayBuffer||ArrayBuffer.isView(e),n={};for(const s of e)if(s)for(const e in s){const a=s[e];if(void 0!==a)if(Array.isArray(a))n[e]=a;else if(r(a))n[e]=a;else if(t(a)){const r=n[e];t(r)?n[e]=$i(r,a):n[e]=$i(a)}else n[e]=a}return n}class Di{constructor(e){this.client=e,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(e){return this.client.mfa.enroll(Object.assign(Object.assign({},e),{factorType:"webauthn"}))}async _challenge({factorId:e,webauthn:t,friendlyName:r,signal:n},s){try{const{data:a,error:i}=await this.client.mfa.challenge({factorId:e,webauthn:t});if(!a)return{data:null,error:i};const o=null!=n?n:Si.createNewAbortSignal();if("create"===a.webauthn.type){const{user:e}=a.webauthn.credential_options.publicKey;e.name||(e.name=`${e.id}:${r}`),e.displayName||(e.displayName=e.name)}switch(a.webauthn.type){case"create":{const t=function(e,t){return $i(Ri,e,t||{})}(a.webauthn.credential_options.publicKey,null==s?void 0:s.create),{data:r,error:n}=await async function(e){try{const t=await navigator.credentials.create(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new ki("Browser returned unexpected credential type",t)}:{data:null,error:new ki("Empty credential response",t)}}catch(t){return{data:null,error:_i({error:t,options:e})}}}({publicKey:t,signal:o});return r?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:r}},error:null}:{data:null,error:n}}case"request":{const t=function(e,t){return $i(Ii,e,t||{})}(a.webauthn.credential_options.publicKey,null==s?void 0:s.request),{data:r,error:n}=await async function(e){try{const t=await navigator.credentials.get(e);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new ki("Browser returned unexpected credential type",t)}:{data:null,error:new ki("Empty credential response",t)}}catch(t){return{data:null,error:Ni({error:t,options:e})}}}(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:t,signal:o}));return r?{data:{factorId:e,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:r}},error:null}:{data:null,error:n}}}}catch(a){return ba(a)?{data:null,error:a}:{data:null,error:new ya("Unexpected error in challenge",a)}}}async _verify({challengeId:e,factorId:t,webauthn:r}){return this.client.mfa.verify({factorId:t,challengeId:e,webauthn:r})}async _authenticate({factorId:e,webauthn:{rpId:t=("undefined"!=typeof window?window.location.hostname:void 0),rpOrigins:r=("undefined"!=typeof window?[window.location.origin]:void 0),signal:n}={}},s){if(!t)return{data:null,error:new ga("rpId is required for WebAuthn authentication")};try{if(!Ai())return{data:null,error:new ya("Browser does not support WebAuthn",null)};const{data:a,error:i}=await this.challenge({factorId:e,webauthn:{rpId:t,rpOrigins:r},signal:n},{request:s});if(!a)return{data:null,error:i};const{webauthn:o}=a;return this._verify({factorId:e,challengeId:a.challengeId,webauthn:{type:o.type,rpId:t,rpOrigins:r,credential_response:o.credential_response}})}catch(a){return ba(a)?{data:null,error:a}:{data:null,error:new ya("Unexpected error in authenticate",a)}}}async _register({friendlyName:e,webauthn:{rpId:t=("undefined"!=typeof window?window.location.hostname:void 0),rpOrigins:r=("undefined"!=typeof window?[window.location.origin]:void 0),signal:n}={}},s){if(!t)return{data:null,error:new ga("rpId is required for WebAuthn registration")};try{if(!Ai())return{data:null,error:new ya("Browser does not support WebAuthn",null)};const{data:a,error:i}=await this._enroll({friendlyName:e});if(!a)return await this.client.mfa.listFactors().then(t=>{var r;return null===(r=t.data)||void 0===r?void 0:r.all.find(t=>"webauthn"===t.factor_type&&t.friendly_name===e&&"unverified"!==t.status)}).then(e=>e?this.client.mfa.unenroll({factorId:null==e?void 0:e.id}):void 0),{data:null,error:i};const{data:o,error:l}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:t,rpOrigins:r},signal:n},{create:s});return o?this._verify({factorId:a.id,challengeId:o.challengeId,webauthn:{rpId:t,rpOrigins:r,type:o.webauthn.type,credential_response:o.webauthn.credential_response}}):{data:null,error:l}}catch(a){return ba(a)?{data:null,error:a}:{data:null,error:new ya("Unexpected error in register",a)}}}}!function(){if("object"!=typeof globalThis)try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch(e){"undefined"!=typeof self&&(self.globalThis=self)}}();const Li={url:"http://localhost:9999",storageKey:"supabase.auth.token",autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:ha,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function zi(e,t,r){return await r()}const Mi={};class Ui{get jwks(){var e,t;return null!==(t=null===(e=Mi[this.storageKey])||void 0===e?void 0:e.jwks)&&void 0!==t?t:{keys:[]}}set jwks(e){Mi[this.storageKey]=Object.assign(Object.assign({},Mi[this.storageKey]),{jwks:e})}get jwks_cached_at(){var e,t;return null!==(t=null===(e=Mi[this.storageKey])||void 0===e?void 0:e.cachedAt)&&void 0!==t?t:Number.MIN_SAFE_INTEGER}set jwks_cached_at(e){Mi[this.storageKey]=Object.assign(Object.assign({},Mi[this.storageKey]),{cachedAt:e})}constructor(e){var t,r,n;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const s=Object.assign(Object.assign({},Li),e);if(this.storageKey=s.storageKey,this.instanceID=null!==(t=Ui.nextInstanceID[this.storageKey])&&void 0!==t?t:0,Ui.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!s.debug,"function"==typeof s.debug&&(this.logger=s.debug),this.instanceID>0&&Ua()){this._logPrefix();this.logDebugMessages}if(this.persistSession=s.persistSession,this.autoRefreshToken=s.autoRefreshToken,this.admin=new fi({url:s.url,headers:s.headers,fetch:s.fetch}),this.url=s.url,this.headers=s.headers,this.fetch=Ba(s.fetch),this.lock=s.lock||zi,this.detectSessionInUrl=s.detectSessionInUrl,this.flowType=s.flowType,this.hasCustomAuthorizationHeader=s.hasCustomAuthorizationHeader,this.throwOnError=s.throwOnError,s.lock?this.lock=s.lock:Ua()&&(null===(r=null===globalThis||void 0===globalThis?void 0:globalThis.navigator)||void 0===r?void 0:r.locks)?this.lock=yi:this.lock=zi,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new Di(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(s.storage?this.storage=s.storage:qa()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=mi(this.memoryStorage)),s.userStorage&&(this.userStorage=s.userStorage)):(this.memoryStorage={},this.storage=mi(this.memoryStorage)),Ua()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){}null===(n=this.broadcastChannel)||void 0===n||n.addEventListener("message",async e=>{this._debug("received broadcast notification from other tab or client",e),await this._notifyAllSubscribers(e.data.event,e.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(e){if(this.throwOnError&&e&&e.error)throw e.error;return e}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${ca}) ${(new Date).toISOString()}`}_debug(...e){return this.logDebugMessages&&this.logger(this._logPrefix(),...e),this}async initialize(){return this.initializePromise||(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))()),await this.initializePromise}async _initialize(){var e;try{let t={},r="none";if(Ua()&&(t=function(e){const t={},r=new URL(e);if(r.hash&&"#"===r.hash[0])try{new URLSearchParams(r.hash.substring(1)).forEach((e,r)=>{t[r]=e})}catch(n){}return r.searchParams.forEach((e,r)=>{t[r]=e}),t}(window.location.href),this._isImplicitGrantCallback(t)?r="implicit":await this._isPKCECallback(t)&&(r="pkce")),Ua()&&this.detectSessionInUrl&&"none"!==r){const{data:n,error:s}=await this._getSessionFromURL(t,r);if(s){if(this._debug("#_initialize()","error detecting session from URL",s),function(e){return ba(e)&&"AuthImplicitGrantRedirectError"===e.name}(s)){const t=null===(e=s.details)||void 0===e?void 0:e.code;if("identity_already_exists"===t||"identity_not_found"===t||"single_identity_not_deletable"===t)return{error:s}}return await this._removeSession(),{error:s}}const{session:a,redirectType:i}=n;return this._debug("#_initialize()","detected session in URL",a,"redirect type",i),await this._saveSession(a),setTimeout(async()=>{"recovery"===i?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(t){return ba(t)?this._returnResult({error:t}):this._returnResult({error:new ya("Unexpected error during initialization",t)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var t,r,n;try{const s=await ii(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:null!==(r=null===(t=null==e?void 0:e.options)||void 0===t?void 0:t.data)&&void 0!==r?r:{},gotrue_meta_security:{captcha_token:null===(n=null==e?void 0:e.options)||void 0===n?void 0:n.captchaToken}},xform:oi}),{data:a,error:i}=s;if(i||!a)return this._returnResult({data:{user:null,session:null},error:i});const o=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",o)),this._returnResult({data:{user:l,session:o},error:null})}catch(s){if(ba(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signUp(e){var t,r,n;try{let s;if("email"in e){const{email:r,password:n,options:a}=e;let i=null,o=null;"pkce"===this.flowType&&([i,o]=await Ya(this.storage,this.storageKey)),s=await ii(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:null==a?void 0:a.emailRedirectTo,body:{email:r,password:n,data:null!==(t=null==a?void 0:a.data)&&void 0!==t?t:{},gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken},code_challenge:i,code_challenge_method:o},xform:oi})}else{if(!("phone"in e))throw new ka("You must provide either an email or phone number and a password");{const{phone:t,password:a,options:i}=e;s=await ii(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:t,password:a,data:null!==(r=null==i?void 0:i.data)&&void 0!==r?r:{},channel:null!==(n=null==i?void 0:i.channel)&&void 0!==n?n:"sms",gotrue_meta_security:{captcha_token:null==i?void 0:i.captchaToken}},xform:oi})}}const{data:a,error:i}=s;if(i||!a)return this._returnResult({data:{user:null,session:null},error:i});const o=a.session,l=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",o)),this._returnResult({data:{user:l,session:o},error:null})}catch(s){if(ba(s))return this._returnResult({data:{user:null,session:null},error:s});throw s}}async signInWithPassword(e){try{let t;if("email"in e){const{email:r,password:n,options:s}=e;t=await ii(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:r,password:n,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},xform:li})}else{if(!("phone"in e))throw new ka("You must provide either an email or phone number and a password");{const{phone:r,password:n,options:s}=e;t=await ii(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:r,password:n,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},xform:li})}}const{data:r,error:n}=t;if(n)return this._returnResult({data:{user:null,session:null},error:n});if(!r||!r.session||!r.user){const e=new ja;return this._returnResult({data:{user:null,session:null},error:e})}return r.session&&(await this._saveSession(r.session),await this._notifyAllSubscribers("SIGNED_IN",r.session)),this._returnResult({data:Object.assign({user:r.user,session:r.session},r.weak_password?{weakPassword:r.weak_password}:null),error:n})}catch(t){if(ba(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOAuth(e){var t,r,n,s;return await this._handleProviderSignIn(e.provider,{redirectTo:null===(t=e.options)||void 0===t?void 0:t.redirectTo,scopes:null===(r=e.options)||void 0===r?void 0:r.scopes,queryParams:null===(n=e.options)||void 0===n?void 0:n.queryParams,skipBrowserRedirect:null===(s=e.options)||void 0===s?void 0:s.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:t}=e;switch(t){case"ethereum":return await this.signInWithEthereum(e);case"solana":return await this.signInWithSolana(e);default:throw new Error(`@supabase/auth-js: Unsupported chain "${t}"`)}}async signInWithEthereum(e){var t,r,n,s,a,i,o,l,c,u,d;let h,p;if("message"in e)h=e.message,p=e.signature;else{const{chain:u,wallet:d,statement:f,options:m}=e;let g;if(Ua())if("object"==typeof d)g=d;else{const e=window;if(!("ethereum"in e)||"object"!=typeof e.ethereum||!("request"in e.ethereum)||"function"!=typeof e.ethereum.request)throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.");g=e.ethereum}else{if("object"!=typeof d||!(null==m?void 0:m.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");g=d}const b=new URL(null!==(t=null==m?void 0:m.url)&&void 0!==t?t:window.location.href),v=await g.request({method:"eth_requestAccounts"}).then(e=>e).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!v||0===v.length)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const y=xi(v[0]);let x=null===(r=null==m?void 0:m.signInWithEthereum)||void 0===r?void 0:r.chainId;if(!x){const e=await g.request({method:"eth_chainId"});x=parseInt(e,16)}h=function(e){var t;const{chainId:r,domain:n,expirationTime:s,issuedAt:a=new Date,nonce:i,notBefore:o,requestId:l,resources:c,scheme:u,uri:d,version:h}=e;if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!n)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(i&&i.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${i}`);if(!d)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if("1"!==h)throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${h}`);if(null===(t=e.statement)||void 0===t?void 0:t.includes("\n"))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${e.statement}`);const p=`${u?`${u}://${n}`:n} wants you to sign in with your Ethereum account:\n${xi(e.address)}\n\n${e.statement?`${e.statement}\n`:""}`;let f=`URI: ${d}\nVersion: ${h}\nChain ID: ${r}${i?`\nNonce: ${i}`:""}\nIssued At: ${a.toISOString()}`;if(s&&(f+=`\nExpiration Time: ${s.toISOString()}`),o&&(f+=`\nNot Before: ${o.toISOString()}`),l&&(f+=`\nRequest ID: ${l}`),c){let e="\nResources:";for(const t of c){if(!t||"string"!=typeof t)throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${t}`);e+=`\n- ${t}`}f+=e}return`${p}\n${f}`}({domain:b.host,address:y,statement:f,uri:b.href,version:"1",chainId:x,nonce:null===(n=null==m?void 0:m.signInWithEthereum)||void 0===n?void 0:n.nonce,issuedAt:null!==(a=null===(s=null==m?void 0:m.signInWithEthereum)||void 0===s?void 0:s.issuedAt)&&void 0!==a?a:new Date,expirationTime:null===(i=null==m?void 0:m.signInWithEthereum)||void 0===i?void 0:i.expirationTime,notBefore:null===(o=null==m?void 0:m.signInWithEthereum)||void 0===o?void 0:o.notBefore,requestId:null===(l=null==m?void 0:m.signInWithEthereum)||void 0===l?void 0:l.requestId,resources:null===(c=null==m?void 0:m.signInWithEthereum)||void 0===c?void 0:c.resources}),p=await g.request({method:"personal_sign",params:[wi(h),y]})}try{const{data:t,error:r}=await ii(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:h,signature:p},(null===(u=e.options)||void 0===u?void 0:u.captchaToken)?{gotrue_meta_security:{captcha_token:null===(d=e.options)||void 0===d?void 0:d.captchaToken}}:null),xform:oi});if(r)throw r;if(!t||!t.session||!t.user){const e=new ja;return this._returnResult({data:{user:null,session:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign({},t),error:r})}catch(f){if(ba(f))return this._returnResult({data:{user:null,session:null},error:f});throw f}}async signInWithSolana(e){var t,r,n,s,a,i,o,l,c,u,d,h;let p,f;if("message"in e)p=e.message,f=e.signature;else{const{chain:d,wallet:h,statement:m,options:g}=e;let b;if(Ua())if("object"==typeof h)b=h;else{const e=window;if(!("solana"in e)||"object"!=typeof e.solana||!("signIn"in e.solana&&"function"==typeof e.solana.signIn||"signMessage"in e.solana&&"function"==typeof e.solana.signMessage))throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.");b=e.solana}else{if("object"!=typeof h||!(null==g?void 0:g.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");b=h}const v=new URL(null!==(t=null==g?void 0:g.url)&&void 0!==t?t:window.location.href);if("signIn"in b&&b.signIn){const e=await b.signIn(Object.assign(Object.assign(Object.assign({issuedAt:(new Date).toISOString()},null==g?void 0:g.signInWithSolana),{version:"1",domain:v.host,uri:v.href}),m?{statement:m}:null));let t;if(Array.isArray(e)&&e[0]&&"object"==typeof e[0])t=e[0];else{if(!(e&&"object"==typeof e&&"signedMessage"in e&&"signature"in e))throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");t=e}if(!("signedMessage"in t&&"signature"in t&&("string"==typeof t.signedMessage||t.signedMessage instanceof Uint8Array)&&t.signature instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields");p="string"==typeof t.signedMessage?t.signedMessage:(new TextDecoder).decode(t.signedMessage),f=t.signature}else{if(!("signMessage"in b&&"function"==typeof b.signMessage&&"publicKey"in b&&"object"==typeof b&&b.publicKey&&"toBase58"in b.publicKey&&"function"==typeof b.publicKey.toBase58))throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${v.host} wants you to sign in with your Solana account:`,b.publicKey.toBase58(),...m?["",m,""]:[""],"Version: 1",`URI: ${v.href}`,`Issued At: ${null!==(n=null===(r=null==g?void 0:g.signInWithSolana)||void 0===r?void 0:r.issuedAt)&&void 0!==n?n:(new Date).toISOString()}`,...(null===(s=null==g?void 0:g.signInWithSolana)||void 0===s?void 0:s.notBefore)?[`Not Before: ${g.signInWithSolana.notBefore}`]:[],...(null===(a=null==g?void 0:g.signInWithSolana)||void 0===a?void 0:a.expirationTime)?[`Expiration Time: ${g.signInWithSolana.expirationTime}`]:[],...(null===(i=null==g?void 0:g.signInWithSolana)||void 0===i?void 0:i.chainId)?[`Chain ID: ${g.signInWithSolana.chainId}`]:[],...(null===(o=null==g?void 0:g.signInWithSolana)||void 0===o?void 0:o.nonce)?[`Nonce: ${g.signInWithSolana.nonce}`]:[],...(null===(l=null==g?void 0:g.signInWithSolana)||void 0===l?void 0:l.requestId)?[`Request ID: ${g.signInWithSolana.requestId}`]:[],...(null===(u=null===(c=null==g?void 0:g.signInWithSolana)||void 0===c?void 0:c.resources)||void 0===u?void 0:u.length)?["Resources",...g.signInWithSolana.resources.map(e=>`- ${e}`)]:[]].join("\n");const e=await b.signMessage((new TextEncoder).encode(p),"utf8");if(!(e&&e instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");f=e}}try{const{data:t,error:r}=await ii(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:Ma(f)},(null===(d=e.options)||void 0===d?void 0:d.captchaToken)?{gotrue_meta_security:{captcha_token:null===(h=e.options)||void 0===h?void 0:h.captchaToken}}:null),xform:oi});if(r)throw r;if(!t||!t.session||!t.user){const e=new ja;return this._returnResult({data:{user:null,session:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign({},t),error:r})}catch(m){if(ba(m))return this._returnResult({data:{user:null,session:null},error:m});throw m}}async _exchangeCodeForSession(e){const t=await Va(this.storage,`${this.storageKey}-code-verifier`),[r,n]=(null!=t?t:"").split("/");try{const{data:t,error:s}=await ii(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:r},xform:oi});if(await Wa(this.storage,`${this.storageKey}-code-verifier`),s)throw s;if(!t||!t.session||!t.user){const e=new ja;return this._returnResult({data:{user:null,session:null,redirectType:null},error:e})}return t.session&&(await this._saveSession(t.session),await this._notifyAllSubscribers("SIGNED_IN",t.session)),this._returnResult({data:Object.assign(Object.assign({},t),{redirectType:null!=n?n:null}),error:s})}catch(s){if(ba(s))return this._returnResult({data:{user:null,session:null,redirectType:null},error:s});throw s}}async signInWithIdToken(e){try{const{options:t,provider:r,token:n,access_token:s,nonce:a}=e,i=await ii(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:r,id_token:n,access_token:s,nonce:a,gotrue_meta_security:{captcha_token:null==t?void 0:t.captchaToken}},xform:oi}),{data:o,error:l}=i;if(l)return this._returnResult({data:{user:null,session:null},error:l});if(!o||!o.session||!o.user){const e=new ja;return this._returnResult({data:{user:null,session:null},error:e})}return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",o.session)),this._returnResult({data:o,error:l})}catch(t){if(ba(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async signInWithOtp(e){var t,r,n,s,a;try{if("email"in e){const{email:n,options:s}=e;let a=null,i=null;"pkce"===this.flowType&&([a,i]=await Ya(this.storage,this.storageKey));const{error:o}=await ii(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:n,data:null!==(t=null==s?void 0:s.data)&&void 0!==t?t:{},create_user:null===(r=null==s?void 0:s.shouldCreateUser)||void 0===r||r,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken},code_challenge:a,code_challenge_method:i},redirectTo:null==s?void 0:s.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:o})}if("phone"in e){const{phone:t,options:r}=e,{data:i,error:o}=await ii(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:t,data:null!==(n=null==r?void 0:r.data)&&void 0!==n?n:{},create_user:null===(s=null==r?void 0:r.shouldCreateUser)||void 0===s||s,gotrue_meta_security:{captcha_token:null==r?void 0:r.captchaToken},channel:null!==(a=null==r?void 0:r.channel)&&void 0!==a?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:null==i?void 0:i.message_id},error:o})}throw new ka("You must provide either an email or phone number.")}catch(i){if(ba(i))return this._returnResult({data:{user:null,session:null},error:i});throw i}}async verifyOtp(e){var t,r;try{let n,s;"options"in e&&(n=null===(t=e.options)||void 0===t?void 0:t.redirectTo,s=null===(r=e.options)||void 0===r?void 0:r.captchaToken);const{data:a,error:i}=await ii(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:s}}),redirectTo:n,xform:oi});if(i)throw i;if(!a){throw new Error("An error occurred on token verification.")}const o=a.session,l=a.user;return(null==o?void 0:o.access_token)&&(await this._saveSession(o),await this._notifyAllSubscribers("recovery"==e.type?"PASSWORD_RECOVERY":"SIGNED_IN",o)),this._returnResult({data:{user:l,session:o},error:null})}catch(n){if(ba(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}}async signInWithSSO(e){var t,r,n,s,a;try{let i=null,o=null;"pkce"===this.flowType&&([i,o]=await Ya(this.storage,this.storageKey));const l=await ii(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:null!==(r=null===(t=e.options)||void 0===t?void 0:t.redirectTo)&&void 0!==r?r:void 0}),(null===(n=null==e?void 0:e.options)||void 0===n?void 0:n.captchaToken)?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:ui});return(null===(s=l.data)||void 0===s?void 0:s.url)&&Ua()&&!(null===(a=e.options)||void 0===a?void 0:a.skipBrowserRedirect)&&window.location.assign(l.data.url),this._returnResult(l)}catch(i){if(ba(i))return this._returnResult({data:null,error:i});throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:t},error:r}=e;if(r)throw r;if(!t)throw new wa;const{error:n}=await ii(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:t.access_token});return this._returnResult({data:{user:null,session:null},error:n})})}catch(e){if(ba(e))return this._returnResult({data:{user:null,session:null},error:e});throw e}}async resend(e){try{const t=`${this.url}/resend`;if("email"in e){const{email:r,type:n,options:s}=e,{error:a}=await ii(this.fetch,"POST",t,{headers:this.headers,body:{email:r,type:n,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}},redirectTo:null==s?void 0:s.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}if("phone"in e){const{phone:r,type:n,options:s}=e,{data:a,error:i}=await ii(this.fetch,"POST",t,{headers:this.headers,body:{phone:r,type:n,gotrue_meta_security:{captcha_token:null==s?void 0:s.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:null==a?void 0:a.message_id},error:i})}throw new ka("You must provide either an email or phone number and a type")}catch(t){if(ba(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async getSession(){await this.initializePromise;return await this._acquireLock(-1,async()=>this._useSession(async e=>e))}async _acquireLock(e,t){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const e=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await e,await t()))();return this.pendingInLock.push((async()=>{try{await r}catch(e){}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const e=t();for(this.pendingInLock.push((async()=>{try{await e}catch(t){}})()),await e;this.pendingInLock.length;){const e=[...this.pendingInLock];await Promise.all(e),this.pendingInLock.splice(0,e.length)}return await e}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const t=await this.__loadSession();return await e(t)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",(new Error).stack);try{let e=null;const t=await Va(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",t),null!==t&&(this._isValidSession(t)?e=t:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const r=!!e.expires_at&&1e3*e.expires_at-Date.now()<da;if(this._debug("#__loadSession()",`session has${r?"":" not"} expired`,"expires_at",e.expires_at),!r){if(this.userStorage){const t=await Va(this.userStorage,this.storageKey+"-user");(null==t?void 0:t.user)?e.user=t.user:e.user=ti()}if(this.storage.isServer&&e.user&&!e.user.__isUserNotAvailableProxy){const t={value:this.suppressGetSessionWarning};e.user=function(e,t){return new Proxy(e,{get:(e,r,n)=>{if("__isInsecureUserWarningProxy"===r)return!0;if("symbol"==typeof r){const t=r.toString();if("Symbol(Symbol.toPrimitive)"===t||"Symbol(Symbol.toStringTag)"===t||"Symbol(util.inspect.custom)"===t||"Symbol(nodejs.util.inspect.custom)"===t)return Reflect.get(e,r,n)}return t.value||"string"!=typeof r||(t.value=!0),Reflect.get(e,r,n)}})}(e.user,t),t.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:e},error:null}}const{data:n,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{session:null},error:s}):this._returnResult({data:{session:n},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(e){if(e)return await this._getUser(e);await this.initializePromise;return await this._acquireLock(-1,async()=>await this._getUser())}async _getUser(e){try{return e?await ii(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:ci}):await this._useSession(async e=>{var t,r,n;const{data:s,error:a}=e;if(a)throw a;return(null===(t=s.session)||void 0===t?void 0:t.access_token)||this.hasCustomAuthorizationHeader?await ii(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:null!==(n=null===(r=s.session)||void 0===r?void 0:r.access_token)&&void 0!==n?n:void 0,xform:ci}):{data:{user:null},error:new wa}})}catch(t){if(ba(t))return function(e){return ba(e)&&"AuthSessionMissingError"===e.name}(t)&&(await this._removeSession(),await Wa(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:t});throw t}}async updateUser(e,t={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,t))}async _updateUser(e,t={}){try{return await this._useSession(async r=>{const{data:n,error:s}=r;if(s)throw s;if(!n.session)throw new wa;const a=n.session;let i=null,o=null;"pkce"===this.flowType&&null!=e.email&&([i,o]=await Ya(this.storage,this.storageKey));const{data:l,error:c}=await ii(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:null==t?void 0:t.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:i,code_challenge_method:o}),jwt:a.access_token,xform:ci});if(c)throw c;return a.user=l.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(r){if(ba(r))return this._returnResult({data:{user:null},error:r});throw r}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new wa;const t=Date.now()/1e3;let r=t,n=!0,s=null;const{payload:a}=Ga(e.access_token);if(a.exp&&(r=a.exp,n=r<=t),n){const{data:t,error:r}=await this._callRefreshToken(e.refresh_token);if(r)return this._returnResult({data:{user:null,session:null},error:r});if(!t)return{data:{user:null,session:null},error:null};s=t}else{const{data:n,error:a}=await this._getUser(e.access_token);if(a)throw a;s={access_token:e.access_token,refresh_token:e.refresh_token,user:n.user,token_type:"bearer",expires_in:r-t,expires_at:r},await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)}return this._returnResult({data:{user:s.user,session:s},error:null})}catch(t){if(ba(t))return this._returnResult({data:{session:null,user:null},error:t});throw t}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async t=>{var r;if(!e){const{data:n,error:s}=t;if(s)throw s;e=null!==(r=n.session)&&void 0!==r?r:void 0}if(!(null==e?void 0:e.refresh_token))throw new wa;const{data:n,error:s}=await this._callRefreshToken(e.refresh_token);return s?this._returnResult({data:{user:null,session:null},error:s}):n?this._returnResult({data:{user:n.user,session:n},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(t){if(ba(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async _getSessionFromURL(e,t){try{if(!Ua())throw new _a("No browser detected.");if(e.error||e.error_description||e.error_code)throw new _a(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(t){case"implicit":if("pkce"===this.flowType)throw new Na("Not a valid PKCE flow url.");break;case"pkce":if("implicit"===this.flowType)throw new _a("Not a valid implicit grant flow url.")}if("pkce"===t){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Na("No code detected.");const{data:t,error:r}=await this._exchangeCodeForSession(e.code);if(r)throw r;const n=new URL(window.location.href);return n.searchParams.delete("code"),window.history.replaceState(window.history.state,"",n.toString()),{data:{session:t.session,redirectType:null},error:null}}const{provider_token:r,provider_refresh_token:n,access_token:s,refresh_token:a,expires_in:i,expires_at:o,token_type:l}=e;if(!(s&&i&&a&&l))throw new _a("No session defined in URL");const c=Math.round(Date.now()/1e3),u=parseInt(i);let d=c+u;o&&(d=parseInt(o));const{data:h,error:p}=await this._getUser(s);if(p)throw p;const f={provider_token:r,provider_refresh_token:n,access_token:s,expires_in:u,expires_at:d,refresh_token:a,token_type:l,user:h.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:f,redirectType:e.type},error:null})}catch(r){if(ba(r))return this._returnResult({data:{session:null,redirectType:null},error:r});throw r}}_isImplicitGrantCallback(e){return Boolean(e.access_token||e.error_description)}async _isPKCECallback(e){const t=await Va(this.storage,`${this.storageKey}-code-verifier`);return!(!e.code||!t)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async t=>{var r;const{data:n,error:s}=t;if(s)return this._returnResult({error:s});const a=null===(r=n.session)||void 0===r?void 0:r.access_token;if(a){const{error:t}=await this.admin.signOut(a,e);if(t&&(!function(e){return ba(e)&&"AuthApiError"===e.name}(t)||404!==t.status&&401!==t.status&&403!==t.status))return this._returnResult({error:t})}return"others"!==e&&(await this._removeSession(),await Wa(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(e){const t=Symbol("auth-callback"),r={id:t,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",t),this.stateChangeEmitters.delete(t)}};return this._debug("#onAuthStateChange()","registered callback with id",t),this.stateChangeEmitters.set(t,r),(async()=>{await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(t)})})(),{data:{subscription:r}}}async _emitInitialSession(e){return await this._useSession(async t=>{var r,n;try{const{data:{session:n},error:s}=t;if(s)throw s;await(null===(r=this.stateChangeEmitters.get(e))||void 0===r?void 0:r.callback("INITIAL_SESSION",n)),this._debug("INITIAL_SESSION","callback id",e,"session",n)}catch(s){await(null===(n=this.stateChangeEmitters.get(e))||void 0===n?void 0:n.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",s)}})}async resetPasswordForEmail(e,t={}){let r=null,n=null;"pkce"===this.flowType&&([r,n]=await Ya(this.storage,this.storageKey,!0));try{return await ii(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:r,code_challenge_method:n,gotrue_meta_security:{captcha_token:t.captchaToken}},headers:this.headers,redirectTo:t.redirectTo})}catch(s){if(ba(s))return this._returnResult({data:null,error:s});throw s}}async getUserIdentities(){var e;try{const{data:t,error:r}=await this.getUser();if(r)throw r;return this._returnResult({data:{identities:null!==(e=t.user.identities)&&void 0!==e?e:[]},error:null})}catch(t){if(ba(t))return this._returnResult({data:null,error:t});throw t}}async linkIdentity(e){return"token"in e?this.linkIdentityIdToken(e):this.linkIdentityOAuth(e)}async linkIdentityOAuth(e){var t;try{const{data:r,error:n}=await this._useSession(async t=>{var r,n,s,a,i;const{data:o,error:l}=t;if(l)throw l;const c=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:null===(r=e.options)||void 0===r?void 0:r.redirectTo,scopes:null===(n=e.options)||void 0===n?void 0:n.scopes,queryParams:null===(s=e.options)||void 0===s?void 0:s.queryParams,skipBrowserRedirect:!0});return await ii(this.fetch,"GET",c,{headers:this.headers,jwt:null!==(i=null===(a=o.session)||void 0===a?void 0:a.access_token)&&void 0!==i?i:void 0})});if(n)throw n;return Ua()&&!(null===(t=e.options)||void 0===t?void 0:t.skipBrowserRedirect)&&window.location.assign(null==r?void 0:r.url),this._returnResult({data:{provider:e.provider,url:null==r?void 0:r.url},error:null})}catch(r){if(ba(r))return this._returnResult({data:{provider:e.provider,url:null},error:r});throw r}}async linkIdentityIdToken(e){return await this._useSession(async t=>{var r;try{const{error:n,data:{session:s}}=t;if(n)throw n;const{options:a,provider:i,token:o,access_token:l,nonce:c}=e,u=await ii(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:null!==(r=null==s?void 0:s.access_token)&&void 0!==r?r:void 0,body:{provider:i,id_token:o,access_token:l,nonce:c,link_identity:!0,gotrue_meta_security:{captcha_token:null==a?void 0:a.captchaToken}},xform:oi}),{data:d,error:h}=u;return h?this._returnResult({data:{user:null,session:null},error:h}):d&&d.session&&d.user?(d.session&&(await this._saveSession(d.session),await this._notifyAllSubscribers("USER_UPDATED",d.session)),this._returnResult({data:d,error:h})):this._returnResult({data:{user:null,session:null},error:new ja})}catch(n){if(ba(n))return this._returnResult({data:{user:null,session:null},error:n});throw n}})}async unlinkIdentity(e){try{return await this._useSession(async t=>{var r,n;const{data:s,error:a}=t;if(a)throw a;return await ii(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:null!==(n=null===(r=s.session)||void 0===r?void 0:r.access_token)&&void 0!==n?n:void 0})})}catch(t){if(ba(t))return this._returnResult({data:null,error:t});throw t}}async _refreshAccessToken(e){const t=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(t,"begin");try{const s=Date.now();return await(r=async r=>(r>0&&await async function(e){return await new Promise(t=>{setTimeout(()=>t(null),e)})}(200*Math.pow(2,r-1)),this._debug(t,"refreshing attempt",r),await ii(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:oi})),n=(e,t)=>{const r=200*Math.pow(2,e);return t&&Ea(t)&&Date.now()+r-s<ua},new Promise((e,t)=>{(async()=>{for(let a=0;a<1/0;a++)try{const t=await r(a);if(!n(a,null,t))return void e(t)}catch(s){if(!n(a,s))return void t(s)}})()}))}catch(s){if(this._debug(t,"error",s),ba(s))return this._returnResult({data:{session:null,user:null},error:s});throw s}finally{this._debug(t,"end")}var r,n}_isValidSession(e){return"object"==typeof e&&null!==e&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,t){const r=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:t.redirectTo,scopes:t.scopes,queryParams:t.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",t,"url",r),Ua()&&!t.skipBrowserRedirect&&window.location.assign(r),{data:{provider:e,url:r},error:null}}async _recoverAndRefresh(){var e,t;const r="#_recoverAndRefresh()";this._debug(r,"begin");try{const s=await Va(this.storage,this.storageKey);if(s&&this.userStorage){let t=await Va(this.userStorage,this.storageKey+"-user");this.storage.isServer||!Object.is(this.storage,this.userStorage)||t||(t={user:s.user},await Ha(this.userStorage,this.storageKey+"-user",t)),s.user=null!==(e=null==t?void 0:t.user)&&void 0!==e?e:ti()}else if(s&&!s.user&&!s.user){const e=await Va(this.storage,this.storageKey+"-user");e&&(null==e?void 0:e.user)?(s.user=e.user,await Wa(this.storage,this.storageKey+"-user"),await Ha(this.storage,this.storageKey,s)):s.user=ti()}if(this._debug(r,"session from storage",s),!this._isValidSession(s))return this._debug(r,"session is not valid"),void(null!==s&&await this._removeSession());const a=1e3*(null!==(t=s.expires_at)&&void 0!==t?t:1/0)-Date.now()<da;if(this._debug(r,`session has${a?"":" not"} expired with margin of 90000s`),a){if(this.autoRefreshToken&&s.refresh_token){const{error:e}=await this._callRefreshToken(s.refresh_token);e&&(Ea(e)||(this._debug(r,"refresh failed with a non-retryable error, removing the session",e),await this._removeSession()))}}else if(s.user&&!0===s.user.__isUserNotAvailableProxy)try{const{data:e,error:t}=await this._getUser(s.access_token);!t&&(null==e?void 0:e.user)?(s.user=e.user,await this._saveSession(s),await this._notifyAllSubscribers("SIGNED_IN",s)):this._debug(r,"could not get user data, skipping SIGNED_IN notification")}catch(n){this._debug(r,"error getting user data, skipping SIGNED_IN notification",n)}else await this._notifyAllSubscribers("SIGNED_IN",s)}catch(s){return void this._debug(r,"error",s)}finally{this._debug(r,"end")}}async _callRefreshToken(e){var t,r;if(!e)throw new wa;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const n=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(n,"begin");try{this.refreshingDeferred=new Qa;const{data:t,error:r}=await this._refreshAccessToken(e);if(r)throw r;if(!t.session)throw new wa;await this._saveSession(t.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",t.session);const n={data:t.session,error:null};return this.refreshingDeferred.resolve(n),n}catch(s){if(this._debug(n,"error",s),ba(s)){const e={data:null,error:s};return Ea(s)||await this._removeSession(),null===(t=this.refreshingDeferred)||void 0===t||t.resolve(e),e}throw null===(r=this.refreshingDeferred)||void 0===r||r.reject(s),s}finally{this.refreshingDeferred=null,this._debug(n,"end")}}async _notifyAllSubscribers(e,t,r=!0){const n=`#_notifyAllSubscribers(${e})`;this._debug(n,"begin",t,`broadcast = ${r}`);try{this.broadcastChannel&&r&&this.broadcastChannel.postMessage({event:e,session:t});const n=[],s=Array.from(this.stateChangeEmitters.values()).map(async r=>{try{await r.callback(e,t)}catch(s){n.push(s)}});if(await Promise.all(s),n.length>0){for(let e=0;e<n.length;e+=1);throw n[0]}}finally{this._debug(n,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0;const t=Object.assign({},e),r=t.user&&!0===t.user.__isUserNotAvailableProxy;if(this.userStorage){!r&&t.user&&await Ha(this.userStorage,this.storageKey+"-user",{user:t.user});const e=Object.assign({},t);delete e.user;const n=ri(e);await Ha(this.storage,this.storageKey,n)}else{const e=ri(t);await Ha(this.storage,this.storageKey,e)}}async _removeSession(){this._debug("#_removeSession()"),await Wa(this.storage,this.storageKey),await Wa(this.storage,this.storageKey+"-code-verifier"),await Wa(this.storage,this.storageKey+"-user"),this.userStorage&&await Wa(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Ua()&&(null===window||void 0===window?void 0:window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(t){}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),ua);this.autoRefreshTicker=e,e&&"object"==typeof e&&"function"==typeof e.unref?e.unref():"undefined"!=typeof Deno&&"function"==typeof Deno.unrefTimer&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async e=>{const{data:{session:r}}=e;if(!r||!r.refresh_token||!r.expires_at)return void this._debug("#_autoRefreshTokenTick()","no session");const n=Math.floor((1e3*r.expires_at-t)/ua);this._debug("#_autoRefreshTokenTick()",`access token expires in ${n} ticks, a tick lasts 30000ms, refresh threshold is 3 ticks`),n<=3&&await this._callRefreshToken(r.refresh_token)})}catch(e){}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(!(e.isAcquireTimeout||e instanceof bi))throw e;this._debug("auto refresh token tick lock not available")}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Ua()||!(null===window||void 0===window?void 0:window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),null===window||void 0===window||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){}}async _onVisibilityChanged(e){const t=`#_onVisibilityChanged(${e})`;this._debug(t,"visibilityState",document.visibilityState),"visible"===document.visibilityState?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{"visible"===document.visibilityState?await this._recoverAndRefresh():this._debug(t,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting")}))):"hidden"===document.visibilityState&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,t,r){const n=[`provider=${encodeURIComponent(t)}`];if((null==r?void 0:r.redirectTo)&&n.push(`redirect_to=${encodeURIComponent(r.redirectTo)}`),(null==r?void 0:r.scopes)&&n.push(`scopes=${encodeURIComponent(r.scopes)}`),"pkce"===this.flowType){const[e,t]=await Ya(this.storage,this.storageKey),r=new URLSearchParams({code_challenge:`${encodeURIComponent(e)}`,code_challenge_method:`${encodeURIComponent(t)}`});n.push(r.toString())}if(null==r?void 0:r.queryParams){const e=new URLSearchParams(r.queryParams);n.push(e.toString())}return(null==r?void 0:r.skipBrowserRedirect)&&n.push(`skip_http_redirect=${r.skipBrowserRedirect}`),`${e}?${n.join("&")}`}async _unenroll(e){try{return await this._useSession(async t=>{var r;const{data:n,error:s}=t;return s?this._returnResult({data:null,error:s}):await ii(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:null===(r=null==n?void 0:n.session)||void 0===r?void 0:r.access_token})})}catch(t){if(ba(t))return this._returnResult({data:null,error:t});throw t}}async _enroll(e){try{return await this._useSession(async t=>{var r,n;const{data:s,error:a}=t;if(a)return this._returnResult({data:null,error:a});const i=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},"phone"===e.factorType?{phone:e.phone}:"totp"===e.factorType?{issuer:e.issuer}:{}),{data:o,error:l}=await ii(this.fetch,"POST",`${this.url}/factors`,{body:i,headers:this.headers,jwt:null===(r=null==s?void 0:s.session)||void 0===r?void 0:r.access_token});return l?this._returnResult({data:null,error:l}):("totp"===e.factorType&&"totp"===o.type&&(null===(n=null==o?void 0:o.totp)||void 0===n?void 0:n.qr_code)&&(o.totp.qr_code=`data:image/svg+xml;utf-8,${o.totp.qr_code}`),this._returnResult({data:o,error:null}))})}catch(t){if(ba(t))return this._returnResult({data:null,error:t});throw t}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:n,error:s}=t;if(s)return this._returnResult({data:null,error:s});const a=Object.assign({challenge_id:e.challengeId},"webauthn"in e?{webauthn:Object.assign(Object.assign({},e.webauthn),{credential_response:"create"===e.webauthn.type?Ti(e.webauthn.credential_response):Oi(e.webauthn.credential_response)})}:{code:e.code}),{data:i,error:o}=await ii(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:a,headers:this.headers,jwt:null===(r=null==n?void 0:n.session)||void 0===r?void 0:r.access_token});return o?this._returnResult({data:null,error:o}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+i.expires_in},i)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",i),this._returnResult({data:i,error:o}))})}catch(t){if(ba(t))return this._returnResult({data:null,error:t});throw t}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async t=>{var r;const{data:n,error:s}=t;if(s)return this._returnResult({data:null,error:s});const a=await ii(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:e,headers:this.headers,jwt:null===(r=null==n?void 0:n.session)||void 0===r?void 0:r.access_token});if(a.error)return a;const{data:i}=a;if("webauthn"!==i.type)return{data:i,error:null};switch(i.webauthn.type){case"create":return{data:Object.assign(Object.assign({},i),{webauthn:Object.assign(Object.assign({},i.webauthn),{credential_options:Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:Ei(i.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},i),{webauthn:Object.assign(Object.assign({},i.webauthn),{credential_options:Object.assign(Object.assign({},i.webauthn.credential_options),{publicKey:Ci(i.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(t){if(ba(t))return this._returnResult({data:null,error:t});throw t}})}async _challengeAndVerify(e){const{data:t,error:r}=await this._challenge({factorId:e.factorId});return r?this._returnResult({data:null,error:r}):await this._verify({factorId:e.factorId,challengeId:t.id,code:e.code})}async _listFactors(){var e;const{data:{user:t},error:r}=await this.getUser();if(r)return{data:null,error:r};const n={all:[],phone:[],totp:[],webauthn:[]};for(const s of null!==(e=null==t?void 0:t.factors)&&void 0!==e?e:[])n.all.push(s),"verified"===s.status&&n[s.factor_type].push(s);return{data:n,error:null}}async _getAuthenticatorAssuranceLevel(){var e,t;const{data:{session:r},error:n}=await this.getSession();if(n)return this._returnResult({data:null,error:n});if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:s}=Ga(r.access_token);let a=null;s.aal&&(a=s.aal);let i=a;(null!==(t=null===(e=r.user.factors)||void 0===e?void 0:e.filter(e=>"verified"===e.status))&&void 0!==t?t:[]).length>0&&(i="aal2");return{data:{currentLevel:a,nextLevel:i,currentAuthenticationMethods:s.amr||[]},error:null}}async _getAuthorizationDetails(e){try{return await this._useSession(async t=>{const{data:{session:r},error:n}=t;return n?this._returnResult({data:null,error:n}):r?await ii(this.fetch,"GET",`${this.url}/oauth/authorizations/${e}`,{headers:this.headers,jwt:r.access_token,xform:e=>({data:e,error:null})}):this._returnResult({data:null,error:new wa})})}catch(t){if(ba(t))return this._returnResult({data:null,error:t});throw t}}async _approveAuthorization(e,t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!n)return this._returnResult({data:null,error:new wa});const a=await ii(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:n.access_token,body:{action:"approve"},xform:e=>({data:e,error:null})});return a.data&&a.data.redirect_url&&Ua()&&!(null==t?void 0:t.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if(ba(r))return this._returnResult({data:null,error:r});throw r}}async _denyAuthorization(e,t){try{return await this._useSession(async r=>{const{data:{session:n},error:s}=r;if(s)return this._returnResult({data:null,error:s});if(!n)return this._returnResult({data:null,error:new wa});const a=await ii(this.fetch,"POST",`${this.url}/oauth/authorizations/${e}/consent`,{headers:this.headers,jwt:n.access_token,body:{action:"deny"},xform:e=>({data:e,error:null})});return a.data&&a.data.redirect_url&&Ua()&&!(null==t?void 0:t.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(r){if(ba(r))return this._returnResult({data:null,error:r});throw r}}async fetchJwk(e,t={keys:[]}){let r=t.keys.find(t=>t.kid===e);if(r)return r;const n=Date.now();if(r=this.jwks.keys.find(t=>t.kid===e),r&&this.jwks_cached_at+6e5>n)return r;const{data:s,error:a}=await ii(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return s.keys&&0!==s.keys.length?(this.jwks=s,this.jwks_cached_at=n,r=s.keys.find(t=>t.kid===e),r||null):null}async getClaims(e,t={}){try{let r=e;if(!r){const{data:e,error:t}=await this.getSession();if(t||!e.session)return this._returnResult({data:null,error:t});r=e.session.access_token}const{header:n,payload:s,signature:a,raw:{header:i,payload:o}}=Ga(r);(null==t?void 0:t.allowExpired)||function(e){if(!e)throw new Error("Missing exp claim");if(e<=Math.floor(Date.now()/1e3))throw new Error("JWT has expired")}(s.exp);const l=n.alg&&!n.alg.startsWith("HS")&&n.kid&&"crypto"in globalThis&&"subtle"in globalThis.crypto?await this.fetchJwk(n.kid,(null==t?void 0:t.keys)?{keys:t.keys}:null==t?void 0:t.jwks):null;if(!l){const{error:e}=await this.getUser(r);if(e)throw e;return{data:{claims:s,header:n,signature:a},error:null}}const c=function(e){switch(e){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}(n.alg),u=await crypto.subtle.importKey("jwk",l,c,!0,["verify"]);if(!(await crypto.subtle.verify(c,u,a,za(`${i}.${o}`))))throw new Ta("Invalid JWT signature");return{data:{claims:s,header:n,signature:a},error:null}}catch(r){if(ba(r))return this._returnResult({data:null,error:r});throw r}}}Ui.nextInstanceID={};const Fi=Ui;class qi extends Fi{constructor(e){super(e)}}class Bi{constructor(e,t,r){var n,s,a;this.supabaseUrl=e,this.supabaseKey=t;const i=function(e){const t=null==e?void 0:e.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL((r=t).endsWith("/")?r:r+"/")}catch(n){throw Error("Invalid supabaseUrl: Provided URL is malformed.")}var r}(e);if(!t)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",i),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",i),this.storageUrl=new URL("storage/v1",i),this.functionsUrl=new URL("functions/v1",i);const o=`sb-${i.hostname.split(".")[0]}-auth-token`,l=function(e,t){var r,n;const{db:s,auth:a,realtime:i,global:o}=e,{db:l,auth:c,realtime:u,global:d}=t,h={db:Object.assign(Object.assign({},l),s),auth:Object.assign(Object.assign({},c),a),realtime:Object.assign(Object.assign({},u),i),storage:{},global:Object.assign(Object.assign(Object.assign({},d),o),{headers:Object.assign(Object.assign({},null!==(r=null==d?void 0:d.headers)&&void 0!==r?r:{}),null!==(n=null==o?void 0:o.headers)&&void 0!==n?n:{})}),accessToken:async()=>""};return e.accessToken?h.accessToken=e.accessToken:delete h.accessToken,h}(null!=r?r:{},{db:aa,realtime:oa,auth:Object.assign(Object.assign({},ia),{storageKey:o}),global:sa});this.storageKey=null!==(n=l.auth.storageKey)&&void 0!==n?n:"",this.headers=null!==(s=l.global.headers)&&void 0!==s?s:{},l.accessToken?(this.accessToken=l.accessToken,this.auth=new Proxy({},{get:(e,t)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(t)} is not possible`)}})):this.auth=this._initSupabaseAuthClient(null!==(a=l.auth)&&void 0!==a?a:{},this.headers,l.global.fetch),this.fetch=la(t,this._getAccessToken.bind(this),l.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},l.realtime)),this.accessToken&&this.accessToken().then(e=>this.realtime.setAuth(e)).catch(e=>{}),this.rest=new vn(new URL("rest/v1",i).href,{headers:this.headers,schema:l.db.schema,fetch:this.fetch}),this.storage=new ra(this.storageUrl.href,this.headers,this.fetch,null==r?void 0:r.storage),l.accessToken||this._listenForAuthEvents()}get functions(){return new Qr(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,t={},r={head:!1,get:!1,count:void 0}){return this.rest.rpc(e,t,r)}channel(e,t={config:{}}){return this.realtime.channel(e,t)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var e,t;if(this.accessToken)return await this.accessToken();const{data:r}=await this.auth.getSession();return null!==(t=null===(e=r.session)||void 0===e?void 0:e.access_token)&&void 0!==t?t:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:s,storageKey:a,flowType:i,lock:o,debug:l,throwOnError:c},u,d){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new qi({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),u),storageKey:a,autoRefreshToken:e,persistSession:t,detectSessionInUrl:r,storage:n,userStorage:s,flowType:i,lock:o,debug:l,throwOnError:c,fetch:d,hasCustomAuthorizationHeader:Object.keys(this.headers).some(e=>"authorization"===e.toLowerCase())})}_initRealtimeClient(e){return new ps(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},null==e?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((e,t)=>{this._handleTokenChanged(e,"CLIENT",null==t?void 0:t.access_token)})}_handleTokenChanged(e,t,r){"TOKEN_REFRESHED"!==e&&"SIGNED_IN"!==e||this.changedAccessToken===r?"SIGNED_OUT"===e&&(this.realtime.setAuth(),"STORAGE"==t&&this.auth.signOut(),this.changedAccessToken=void 0):(this.changedAccessToken=r,this.realtime.setAuth(r))}}!function(){if("undefined"!=typeof window)return!1;if("undefined"==typeof process)return!1;const e=process.version;if(null==e)return!1;const t=e.match(/^v(\d+)\./);!!t&&parseInt(t[1],10)}();let Hi;Hi=new Bi("https://bnsjuhibdhutnymyosws.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImJuc2p1aGliZGh1dG55bXlvc3dzIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTkyNDIxMTksImV4cCI6MjA3NDgxODExOX0.isCz9at8WVn3hmZNS0PuMxwVNtRRH-ltu3hLyHw6QzU",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!1,flowType:"pkce"}}),Hi.auth.getSession().then(({data:e,error:t})=>{});const Vi=Hi,Wi=_e.createContext(),Qi=()=>{const e=_e.useContext(Wi);if(!e)throw new Error("useAuth debe usarse dentro de AuthProvider");return e},Gi=({children:t})=>{const[r,n]=_e.useState(null),[s,a]=_e.useState(!0);_e.useEffect(()=>{(async()=>{try{const{data:{user:e},error:t}=await Vi.auth.getUser();n(t?null:e)}catch(e){n(null)}finally{a(!1)}})();const{data:{subscription:e}}=Vi.auth.onAuthStateChange((e,t)=>{n(t?.user||null),a(!1)});return()=>{e?.unsubscribe()}},[]);const i={user:r,loading:s,signIn:async(e,t)=>{try{const{data:r,error:n}=await Vi.auth.signInWithPassword({email:e,password:t});return n?{success:!1,error:n.message}:{success:!0,user:r.user}}catch(r){return{success:!1,error:"Error al iniciar sesin"}}},signUp:async(e,t,r)=>{try{const{data:n,error:s}=await Vi.auth.signUp({email:e,password:t,options:{data:{full_name:r}}});return s?{success:!1,error:s.message}:{success:!0,user:n.user}}catch(n){return{success:!1,error:"Error al registrar usuario"}}},signOut:async()=>{try{const{error:e}=await Vi.auth.signOut();return e?{success:!1,error:e.message}:(n(null),{success:!0})}catch(e){return{success:!1,error:"Error al cerrar sesin"}}}};return e.jsx(Wi.Provider,{value:i,children:t})};function Ki(e){var t,r,n="";if("string"==typeof e||"number"==typeof e)n+=e;else if("object"==typeof e)if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(r=Ki(e[t]))&&(n&&(n+=" "),n+=r)}else for(r in e)e[r]&&(n&&(n+=" "),n+=r);return n}function Ji(){for(var e,t,r=0,n="",s=arguments.length;r<s;r++)(e=arguments[r])&&(t=Ki(e))&&(n&&(n+=" "),n+=t);return n}const Yi=(e=new Map,t=null,r)=>({nextPart:e,validators:t,classGroupId:r}),Xi="-",Zi=[],eo=e=>{const t=no(e),{conflictingClassGroups:r,conflictingClassGroupModifiers:n}=e;return{getClassGroupId:e=>{if(e.startsWith("[")&&e.endsWith("]"))return ro(e);const r=e.split(Xi),n=""===r[0]&&r.length>1?1:0;return to(r,n,t)},getConflictingClassGroupIds:(e,t)=>{if(t){const t=n[e],s=r[e];return t?s?((e,t)=>{const r=new Array(e.length+t.length);for(let n=0;n<e.length;n++)r[n]=e[n];for(let n=0;n<t.length;n++)r[e.length+n]=t[n];return r})(s,t):t:s||Zi}return r[e]||Zi}}},to=(e,t,r)=>{if(0===e.length-t)return r.classGroupId;const n=e[t],s=r.nextPart.get(n);if(s){const r=to(e,t+1,s);if(r)return r}const a=r.validators;if(null===a)return;const i=0===t?e.join(Xi):e.slice(t).join(Xi),o=a.length;for(let l=0;l<o;l++){const e=a[l];if(e.validator(i))return e.classGroupId}},ro=e=>-1===e.slice(1,-1).indexOf(":")?void 0:(()=>{const t=e.slice(1,-1),r=t.indexOf(":"),n=t.slice(0,r);return n?"arbitrary.."+n:void 0})(),no=e=>{const{theme:t,classGroups:r}=e;return so(r,t)},so=(e,t)=>{const r=Yi();for(const n in e){const s=e[n];ao(s,r,n,t)}return r},ao=(e,t,r,n)=>{const s=e.length;for(let a=0;a<s;a++){const s=e[a];io(s,t,r,n)}},io=(e,t,r,n)=>{"string"!=typeof e?"function"!=typeof e?co(e,t,r,n):lo(e,t,r,n):oo(e,t,r)},oo=(e,t,r)=>{(""===e?t:uo(t,e)).classGroupId=r},lo=(e,t,r,n)=>{ho(e)?ao(e(n),t,r,n):(null===t.validators&&(t.validators=[]),t.validators.push(((e,t)=>({classGroupId:e,validator:t}))(r,e)))},co=(e,t,r,n)=>{const s=Object.entries(e),a=s.length;for(let i=0;i<a;i++){const[e,a]=s[i];ao(a,uo(t,e),r,n)}},uo=(e,t)=>{let r=e;const n=t.split(Xi),s=n.length;for(let a=0;a<s;a++){const e=n[a];let t=r.nextPart.get(e);t||(t=Yi(),r.nextPart.set(e,t)),r=t}return r},ho=e=>"isThemeGetter"in e&&!0===e.isThemeGetter,po=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,r=Object.create(null),n=Object.create(null);const s=(s,a)=>{r[s]=a,t++,t>e&&(t=0,n=r,r=Object.create(null))};return{get(e){let t=r[e];return void 0!==t?t:void 0!==(t=n[e])?(s(e,t),t):void 0},set(e,t){e in r?r[e]=t:s(e,t)}}},fo=[],mo=(e,t,r,n,s)=>({modifiers:e,hasImportantModifier:t,baseClassName:r,maybePostfixModifierPosition:n,isExternal:s}),go=e=>{const{prefix:t,experimentalParseClassName:r}=e;let n=e=>{const t=[];let r,n=0,s=0,a=0;const i=e.length;for(let u=0;u<i;u++){const i=e[u];if(0===n&&0===s){if(":"===i){t.push(e.slice(a,u)),a=u+1;continue}if("/"===i){r=u;continue}}"["===i?n++:"]"===i?n--:"("===i?s++:")"===i&&s--}const o=0===t.length?e:e.slice(a);let l=o,c=!1;o.endsWith("!")?(l=o.slice(0,-1),c=!0):o.startsWith("!")&&(l=o.slice(1),c=!0);return mo(t,c,l,r&&r>a?r-a:void 0)};if(t){const e=t+":",r=n;n=t=>t.startsWith(e)?r(t.slice(e.length)):mo(fo,!1,t,void 0,!0)}if(r){const e=n;n=t=>r({className:t,parseClassName:e})}return n},bo=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((e,r)=>{t.set(e,1e6+r)}),e=>{const r=[];let n=[];for(let s=0;s<e.length;s++){const a=e[s],i="["===a[0],o=t.has(a);i||o?(n.length>0&&(n.sort(),r.push(...n),n=[]),r.push(a)):n.push(a)}return n.length>0&&(n.sort(),r.push(...n)),r}},vo=/\s+/,yo=e=>{if("string"==typeof e)return e;let t,r="";for(let n=0;n<e.length;n++)e[n]&&(t=yo(e[n]))&&(r&&(r+=" "),r+=t);return r},xo=(e,...t)=>{let r,n,s,a;const i=e=>{const t=n(e);if(t)return t;const a=((e,t)=>{const{parseClassName:r,getClassGroupId:n,getConflictingClassGroupIds:s,sortModifiers:a}=t,i=[],o=e.trim().split(vo);let l="";for(let c=o.length-1;c>=0;c-=1){const e=o[c],{isExternal:t,modifiers:u,hasImportantModifier:d,baseClassName:h,maybePostfixModifierPosition:p}=r(e);if(t){l=e+(l.length>0?" "+l:l);continue}let f=!!p,m=n(f?h.substring(0,p):h);if(!m){if(!f){l=e+(l.length>0?" "+l:l);continue}if(m=n(h),!m){l=e+(l.length>0?" "+l:l);continue}f=!1}const g=0===u.length?"":1===u.length?u[0]:a(u).join(":"),b=d?g+"!":g,v=b+m;if(i.indexOf(v)>-1)continue;i.push(v);const y=s(m,f);for(let r=0;r<y.length;++r){const e=y[r];i.push(b+e)}l=e+(l.length>0?" "+l:l)}return l})(e,r);return s(e,a),a};return a=o=>{const l=t.reduce((e,t)=>t(e),e());return r=(e=>({cache:po(e.cacheSize),parseClassName:go(e),sortModifiers:bo(e),...eo(e)}))(l),n=r.cache.get,s=r.cache.set,a=i,i(o)},(...e)=>a(((...e)=>{let t,r,n=0,s="";for(;n<e.length;)(t=e[n++])&&(r=yo(t))&&(s&&(s+=" "),s+=r);return s})(...e))},wo=[],jo=e=>{const t=t=>t[e]||wo;return t.isThemeGetter=!0,t},ko=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,_o=/^\((?:(\w[\w-]*):)?(.+)\)$/i,No=/^\d+\/\d+$/,So=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,Eo=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,Co=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,To=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,Oo=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Po=e=>No.test(e),Ao=e=>!!e&&!Number.isNaN(Number(e)),Ro=e=>!!e&&Number.isInteger(Number(e)),Io=e=>e.endsWith("%")&&Ao(e.slice(0,-1)),$o=e=>So.test(e),Do=()=>!0,Lo=e=>Eo.test(e)&&!Co.test(e),zo=()=>!1,Mo=e=>To.test(e),Uo=e=>Oo.test(e),Fo=e=>!Bo(e)&&!Ko(e),qo=e=>rl(e,il,zo),Bo=e=>ko.test(e),Ho=e=>rl(e,ol,Lo),Vo=e=>rl(e,ll,Ao),Wo=e=>rl(e,sl,zo),Qo=e=>rl(e,al,Uo),Go=e=>rl(e,ul,Mo),Ko=e=>_o.test(e),Jo=e=>nl(e,ol),Yo=e=>nl(e,cl),Xo=e=>nl(e,sl),Zo=e=>nl(e,il),el=e=>nl(e,al),tl=e=>nl(e,ul,!0),rl=(e,t,r)=>{const n=ko.exec(e);return!!n&&(n[1]?t(n[1]):r(n[2]))},nl=(e,t,r=!1)=>{const n=_o.exec(e);return!!n&&(n[1]?t(n[1]):r)},sl=e=>"position"===e||"percentage"===e,al=e=>"image"===e||"url"===e,il=e=>"length"===e||"size"===e||"bg-size"===e,ol=e=>"length"===e,ll=e=>"number"===e,cl=e=>"family-name"===e,ul=e=>"shadow"===e,dl=xo(()=>{const e=jo("color"),t=jo("font"),r=jo("text"),n=jo("font-weight"),s=jo("tracking"),a=jo("leading"),i=jo("breakpoint"),o=jo("container"),l=jo("spacing"),c=jo("radius"),u=jo("shadow"),d=jo("inset-shadow"),h=jo("text-shadow"),p=jo("drop-shadow"),f=jo("blur"),m=jo("perspective"),g=jo("aspect"),b=jo("ease"),v=jo("animate"),y=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",Ko,Bo],x=()=>[Ko,Bo,l],w=()=>[Po,"full","auto",...x()],j=()=>[Ro,"none","subgrid",Ko,Bo],k=()=>["auto",{span:["full",Ro,Ko,Bo]},Ro,Ko,Bo],_=()=>[Ro,"auto",Ko,Bo],N=()=>["auto","min","max","fr",Ko,Bo],S=()=>["auto",...x()],E=()=>[Po,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...x()],C=()=>[e,Ko,Bo],T=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom",Xo,Wo,{position:[Ko,Bo]}],O=()=>["auto","cover","contain",Zo,qo,{size:[Ko,Bo]}],P=()=>[Io,Jo,Ho],A=()=>["","none","full",c,Ko,Bo],R=()=>["",Ao,Jo,Ho],I=()=>[Ao,Io,Xo,Wo],$=()=>["","none",f,Ko,Bo],D=()=>["none",Ao,Ko,Bo],L=()=>["none",Ao,Ko,Bo],z=()=>[Ao,Ko,Bo],M=()=>[Po,"full",...x()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[$o],breakpoint:[$o],color:[Do],container:[$o],"drop-shadow":[$o],ease:["in","out","in-out"],font:[Fo],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[$o],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[$o],shadow:[$o],spacing:["px",Ao],text:[$o],"text-shadow":[$o],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Po,Bo,Ko,g]}],container:["container"],columns:[{columns:[Ao,Bo,Ko,o]}],"break-after":[{"break-after":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-before":[{"break-before":["auto","avoid","all","avoid-page","page","left","right","column"]}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:y()}],overflow:[{overflow:["auto","hidden","clip","visible","scroll"]}],"overflow-x":[{"overflow-x":["auto","hidden","clip","visible","scroll"]}],"overflow-y":[{"overflow-y":["auto","hidden","clip","visible","scroll"]}],overscroll:[{overscroll:["auto","contain","none"]}],"overscroll-x":[{"overscroll-x":["auto","contain","none"]}],"overscroll-y":[{"overscroll-y":["auto","contain","none"]}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:w()}],"inset-x":[{"inset-x":w()}],"inset-y":[{"inset-y":w()}],start:[{start:w()}],end:[{end:w()}],top:[{top:w()}],right:[{right:w()}],bottom:[{bottom:w()}],left:[{left:w()}],visibility:["visible","invisible","collapse"],z:[{z:[Ro,"auto",Ko,Bo]}],basis:[{basis:[Po,"full","auto",o,...x()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Ao,Po,"auto","initial","none",Bo]}],grow:[{grow:["",Ao,Ko,Bo]}],shrink:[{shrink:["",Ao,Ko,Bo]}],order:[{order:[Ro,"first","last","none",Ko,Bo]}],"grid-cols":[{"grid-cols":j()}],"col-start-end":[{col:k()}],"col-start":[{"col-start":_()}],"col-end":[{"col-end":_()}],"grid-rows":[{"grid-rows":j()}],"row-start-end":[{row:k()}],"row-start":[{"row-start":_()}],"row-end":[{"row-end":_()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":N()}],"auto-rows":[{"auto-rows":N()}],gap:[{gap:x()}],"gap-x":[{"gap-x":x()}],"gap-y":[{"gap-y":x()}],"justify-content":[{justify:["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe","normal"]}],"justify-items":[{"justify-items":["start","end","center","stretch","center-safe","end-safe","normal"]}],"justify-self":[{"justify-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],"align-content":[{content:["normal","start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"align-items":[{items:["start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"align-self":[{self:["auto","start","end","center","stretch","center-safe","end-safe",{baseline:["","last"]}]}],"place-content":[{"place-content":["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"]}],"place-items":[{"place-items":["start","end","center","stretch","center-safe","end-safe","baseline"]}],"place-self":[{"place-self":["auto","start","end","center","stretch","center-safe","end-safe"]}],p:[{p:x()}],px:[{px:x()}],py:[{py:x()}],ps:[{ps:x()}],pe:[{pe:x()}],pt:[{pt:x()}],pr:[{pr:x()}],pb:[{pb:x()}],pl:[{pl:x()}],m:[{m:S()}],mx:[{mx:S()}],my:[{my:S()}],ms:[{ms:S()}],me:[{me:S()}],mt:[{mt:S()}],mr:[{mr:S()}],mb:[{mb:S()}],ml:[{ml:S()}],"space-x":[{"space-x":x()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":x()}],"space-y-reverse":["space-y-reverse"],size:[{size:E()}],w:[{w:[o,"screen",...E()]}],"min-w":[{"min-w":[o,"screen","none",...E()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[i]},...E()]}],h:[{h:["screen","lh",...E()]}],"min-h":[{"min-h":["screen","lh","none",...E()]}],"max-h":[{"max-h":["screen","lh",...E()]}],"font-size":[{text:["base",r,Jo,Ho]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[n,Ko,Vo]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Io,Bo]}],"font-family":[{font:[Yo,Bo,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,Ko,Bo]}],"line-clamp":[{"line-clamp":[Ao,"none",Ko,Vo]}],leading:[{leading:[a,...x()]}],"list-image":[{"list-image":["none",Ko,Bo]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",Ko,Bo]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:C()}],"text-color":[{text:C()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:["solid","dashed","dotted","double","wavy"]}],"text-decoration-thickness":[{decoration:[Ao,"from-font","auto",Ko,Ho]}],"text-decoration-color":[{decoration:C()}],"underline-offset":[{"underline-offset":[Ao,"auto",Ko,Bo]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:x()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",Ko,Bo]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",Ko,Bo]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:T()}],"bg-repeat":[{bg:["no-repeat",{repeat:["","x","y","space","round"]}]}],"bg-size":[{bg:O()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Ro,Ko,Bo],radial:["",Ko,Bo],conic:[Ro,Ko,Bo]},el,Qo]}],"bg-color":[{bg:C()}],"gradient-from-pos":[{from:P()}],"gradient-via-pos":[{via:P()}],"gradient-to-pos":[{to:P()}],"gradient-from":[{from:C()}],"gradient-via":[{via:C()}],"gradient-to":[{to:C()}],rounded:[{rounded:A()}],"rounded-s":[{"rounded-s":A()}],"rounded-e":[{"rounded-e":A()}],"rounded-t":[{"rounded-t":A()}],"rounded-r":[{"rounded-r":A()}],"rounded-b":[{"rounded-b":A()}],"rounded-l":[{"rounded-l":A()}],"rounded-ss":[{"rounded-ss":A()}],"rounded-se":[{"rounded-se":A()}],"rounded-ee":[{"rounded-ee":A()}],"rounded-es":[{"rounded-es":A()}],"rounded-tl":[{"rounded-tl":A()}],"rounded-tr":[{"rounded-tr":A()}],"rounded-br":[{"rounded-br":A()}],"rounded-bl":[{"rounded-bl":A()}],"border-w":[{border:R()}],"border-w-x":[{"border-x":R()}],"border-w-y":[{"border-y":R()}],"border-w-s":[{"border-s":R()}],"border-w-e":[{"border-e":R()}],"border-w-t":[{"border-t":R()}],"border-w-r":[{"border-r":R()}],"border-w-b":[{"border-b":R()}],"border-w-l":[{"border-l":R()}],"divide-x":[{"divide-x":R()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":R()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:["solid","dashed","dotted","double","hidden","none"]}],"divide-style":[{divide:["solid","dashed","dotted","double","hidden","none"]}],"border-color":[{border:C()}],"border-color-x":[{"border-x":C()}],"border-color-y":[{"border-y":C()}],"border-color-s":[{"border-s":C()}],"border-color-e":[{"border-e":C()}],"border-color-t":[{"border-t":C()}],"border-color-r":[{"border-r":C()}],"border-color-b":[{"border-b":C()}],"border-color-l":[{"border-l":C()}],"divide-color":[{divide:C()}],"outline-style":[{outline:["solid","dashed","dotted","double","none","hidden"]}],"outline-offset":[{"outline-offset":[Ao,Ko,Bo]}],"outline-w":[{outline:["",Ao,Jo,Ho]}],"outline-color":[{outline:C()}],shadow:[{shadow:["","none",u,tl,Go]}],"shadow-color":[{shadow:C()}],"inset-shadow":[{"inset-shadow":["none",d,tl,Go]}],"inset-shadow-color":[{"inset-shadow":C()}],"ring-w":[{ring:R()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:C()}],"ring-offset-w":[{"ring-offset":[Ao,Ho]}],"ring-offset-color":[{"ring-offset":C()}],"inset-ring-w":[{"inset-ring":R()}],"inset-ring-color":[{"inset-ring":C()}],"text-shadow":[{"text-shadow":["none",h,tl,Go]}],"text-shadow-color":[{"text-shadow":C()}],opacity:[{opacity:[Ao,Ko,Bo]}],"mix-blend":[{"mix-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity","plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"]}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Ao]}],"mask-image-linear-from-pos":[{"mask-linear-from":I()}],"mask-image-linear-to-pos":[{"mask-linear-to":I()}],"mask-image-linear-from-color":[{"mask-linear-from":C()}],"mask-image-linear-to-color":[{"mask-linear-to":C()}],"mask-image-t-from-pos":[{"mask-t-from":I()}],"mask-image-t-to-pos":[{"mask-t-to":I()}],"mask-image-t-from-color":[{"mask-t-from":C()}],"mask-image-t-to-color":[{"mask-t-to":C()}],"mask-image-r-from-pos":[{"mask-r-from":I()}],"mask-image-r-to-pos":[{"mask-r-to":I()}],"mask-image-r-from-color":[{"mask-r-from":C()}],"mask-image-r-to-color":[{"mask-r-to":C()}],"mask-image-b-from-pos":[{"mask-b-from":I()}],"mask-image-b-to-pos":[{"mask-b-to":I()}],"mask-image-b-from-color":[{"mask-b-from":C()}],"mask-image-b-to-color":[{"mask-b-to":C()}],"mask-image-l-from-pos":[{"mask-l-from":I()}],"mask-image-l-to-pos":[{"mask-l-to":I()}],"mask-image-l-from-color":[{"mask-l-from":C()}],"mask-image-l-to-color":[{"mask-l-to":C()}],"mask-image-x-from-pos":[{"mask-x-from":I()}],"mask-image-x-to-pos":[{"mask-x-to":I()}],"mask-image-x-from-color":[{"mask-x-from":C()}],"mask-image-x-to-color":[{"mask-x-to":C()}],"mask-image-y-from-pos":[{"mask-y-from":I()}],"mask-image-y-to-pos":[{"mask-y-to":I()}],"mask-image-y-from-color":[{"mask-y-from":C()}],"mask-image-y-to-color":[{"mask-y-to":C()}],"mask-image-radial":[{"mask-radial":[Ko,Bo]}],"mask-image-radial-from-pos":[{"mask-radial-from":I()}],"mask-image-radial-to-pos":[{"mask-radial-to":I()}],"mask-image-radial-from-color":[{"mask-radial-from":C()}],"mask-image-radial-to-color":[{"mask-radial-to":C()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"]}],"mask-image-conic-pos":[{"mask-conic":[Ao]}],"mask-image-conic-from-pos":[{"mask-conic-from":I()}],"mask-image-conic-to-pos":[{"mask-conic-to":I()}],"mask-image-conic-from-color":[{"mask-conic-from":C()}],"mask-image-conic-to-color":[{"mask-conic-to":C()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:T()}],"mask-repeat":[{mask:["no-repeat",{repeat:["","x","y","space","round"]}]}],"mask-size":[{mask:O()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",Ko,Bo]}],filter:[{filter:["","none",Ko,Bo]}],blur:[{blur:$()}],brightness:[{brightness:[Ao,Ko,Bo]}],contrast:[{contrast:[Ao,Ko,Bo]}],"drop-shadow":[{"drop-shadow":["","none",p,tl,Go]}],"drop-shadow-color":[{"drop-shadow":C()}],grayscale:[{grayscale:["",Ao,Ko,Bo]}],"hue-rotate":[{"hue-rotate":[Ao,Ko,Bo]}],invert:[{invert:["",Ao,Ko,Bo]}],saturate:[{saturate:[Ao,Ko,Bo]}],sepia:[{sepia:["",Ao,Ko,Bo]}],"backdrop-filter":[{"backdrop-filter":["","none",Ko,Bo]}],"backdrop-blur":[{"backdrop-blur":$()}],"backdrop-brightness":[{"backdrop-brightness":[Ao,Ko,Bo]}],"backdrop-contrast":[{"backdrop-contrast":[Ao,Ko,Bo]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Ao,Ko,Bo]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Ao,Ko,Bo]}],"backdrop-invert":[{"backdrop-invert":["",Ao,Ko,Bo]}],"backdrop-opacity":[{"backdrop-opacity":[Ao,Ko,Bo]}],"backdrop-saturate":[{"backdrop-saturate":[Ao,Ko,Bo]}],"backdrop-sepia":[{"backdrop-sepia":["",Ao,Ko,Bo]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":x()}],"border-spacing-x":[{"border-spacing-x":x()}],"border-spacing-y":[{"border-spacing-y":x()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",Ko,Bo]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Ao,"initial",Ko,Bo]}],ease:[{ease:["linear","initial",b,Ko,Bo]}],delay:[{delay:[Ao,Ko,Bo]}],animate:[{animate:["none",v,Ko,Bo]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[m,Ko,Bo]}],"perspective-origin":[{"perspective-origin":y()}],rotate:[{rotate:D()}],"rotate-x":[{"rotate-x":D()}],"rotate-y":[{"rotate-y":D()}],"rotate-z":[{"rotate-z":D()}],scale:[{scale:L()}],"scale-x":[{"scale-x":L()}],"scale-y":[{"scale-y":L()}],"scale-z":[{"scale-z":L()}],"scale-3d":["scale-3d"],skew:[{skew:z()}],"skew-x":[{"skew-x":z()}],"skew-y":[{"skew-y":z()}],transform:[{transform:[Ko,Bo,"","none","gpu","cpu"]}],"transform-origin":[{origin:y()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:M()}],"translate-x":[{"translate-x":M()}],"translate-y":[{"translate-y":M()}],"translate-z":[{"translate-z":M()}],"translate-none":["translate-none"],accent:[{accent:C()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:C()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",Ko,Bo]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":x()}],"scroll-mx":[{"scroll-mx":x()}],"scroll-my":[{"scroll-my":x()}],"scroll-ms":[{"scroll-ms":x()}],"scroll-me":[{"scroll-me":x()}],"scroll-mt":[{"scroll-mt":x()}],"scroll-mr":[{"scroll-mr":x()}],"scroll-mb":[{"scroll-mb":x()}],"scroll-ml":[{"scroll-ml":x()}],"scroll-p":[{"scroll-p":x()}],"scroll-px":[{"scroll-px":x()}],"scroll-py":[{"scroll-py":x()}],"scroll-ps":[{"scroll-ps":x()}],"scroll-pe":[{"scroll-pe":x()}],"scroll-pt":[{"scroll-pt":x()}],"scroll-pr":[{"scroll-pr":x()}],"scroll-pb":[{"scroll-pb":x()}],"scroll-pl":[{"scroll-pl":x()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",Ko,Bo]}],fill:[{fill:["none",...C()]}],"stroke-w":[{stroke:[Ao,Jo,Ho,Vo]}],stroke:[{stroke:["none",...C()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}});function hl(...e){return dl(Ji(e))}function pl(e,t){if("function"==typeof e)return e(t);null!=e&&(e.current=t)}var fl=Symbol.for("react.lazy"),ml=Se[" use ".trim().toString()];function gl(e){return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===fl&&"_payload"in e&&("object"==typeof(t=e._payload)&&null!==t&&"then"in t);var t}function bl(t){const r=yl(t),n=_e.forwardRef((t,n)=>{let{children:s,...a}=t;gl(s)&&"function"==typeof ml&&(s=ml(s._payload));const i=_e.Children.toArray(s),o=i.find(wl);if(o){const t=o.props.children,s=i.map(e=>e===o?_e.Children.count(t)>1?_e.Children.only(null):_e.isValidElement(t)?t.props.children:null:e);return e.jsx(r,{...a,ref:n,children:_e.isValidElement(t)?_e.cloneElement(t,void 0,s):null})}return e.jsx(r,{...a,ref:n,children:s})});return n.displayName=`${t}.Slot`,n}var vl=bl("Slot");function yl(e){const t=_e.forwardRef((e,t)=>{let{children:r,...n}=e;if(gl(r)&&"function"==typeof ml&&(r=ml(r._payload)),_e.isValidElement(r)){const e=function(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning;if(r)return e.ref;if(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r)return e.props.ref;return e.props.ref||e.ref}(r),s=function(e,t){const r={...t};for(const n in t){const s=e[n],a=t[n];/^on[A-Z]/.test(n)?s&&a?r[n]=(...e)=>{const t=a(...e);return s(...e),t}:s&&(r[n]=s):"style"===n?r[n]={...s,...a}:"className"===n&&(r[n]=[s,a].filter(Boolean).join(" "))}return{...e,...r}}(n,r.props);return r.type!==_e.Fragment&&(s.ref=t?function(...e){return t=>{let r=!1;const n=e.map(e=>{const n=pl(e,t);return r||"function"!=typeof n||(r=!0),n});if(r)return()=>{for(let t=0;t<n.length;t++){const r=n[t];"function"==typeof r?r():pl(e[t],null)}}}}(t,e):e),_e.cloneElement(r,s)}return _e.Children.count(r)>1?_e.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var xl=Symbol("radix.slottable");function wl(e){return _e.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===xl}const jl=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,kl=Ji,_l=(Nl="inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",Sl={variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}},e=>{var t;if(null==(null==Sl?void 0:Sl.variants))return kl(Nl,null==e?void 0:e.class,null==e?void 0:e.className);const{variants:r,defaultVariants:n}=Sl,s=Object.keys(r).map(t=>{const s=null==e?void 0:e[t],a=null==n?void 0:n[t];if(null===s)return null;const i=jl(s)||jl(a);return r[t][i]}),a=e&&Object.entries(e).reduce((e,t)=>{let[r,n]=t;return void 0===n||(e[r]=n),e},{}),i=null==Sl||null===(t=Sl.compoundVariants)||void 0===t?void 0:t.reduce((e,t)=>{let{class:r,className:s,...i}=t;return Object.entries(i).every(e=>{let[t,r]=e;return Array.isArray(r)?r.includes({...n,...a}[t]):{...n,...a}[t]===r})?[...e,r,s]:e},[]);return kl(Nl,s,i,null==e?void 0:e.class,null==e?void 0:e.className)});var Nl,Sl;const El=Ee.forwardRef(({className:t,variant:r,size:n,asChild:s=!1,...a},i)=>{const o=s?vl:"button";return e.jsx(o,{className:hl(_l({variant:r,size:n,className:t})),ref:i,...a})});El.displayName="Button";class Cl extends Ee.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null,errorCount:0}}static getDerivedStateFromError(e){return{hasError:!0}}componentDidCatch(e,t){this.setState(r=>({error:e,errorInfo:t,errorCount:r.errorCount+1})),this.logErrorToService(e,t)}logErrorToService=(e,t)=>{};handleReset=()=>{this.setState({hasError:!1,error:null,errorInfo:null})};handleReload=()=>{window.location.reload()};handleGoHome=()=>{window.location.href="/"};render(){if(this.state.hasError){const s=!1;return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-purple-800 to-pink-900 flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl max-w-2xl w-full p-8",children:[e.jsx("div",{className:"flex justify-center mb-6",children:e.jsx("div",{className:"bg-red-100 rounded-full p-6",children:e.jsx(t,{className:"w-16 h-16 text-red-600"})})}),e.jsx("h1",{className:"text-3xl font-bold text-gray-900 text-center mb-4",children:"Ups! Algo sali mal"}),e.jsx("p",{className:"text-gray-600 text-center mb-8",children:this.state.errorCount>2?" Parece que hay un problema persistente. Intenta recargar la pgina completa.":"Ocurri un error inesperado. No te preocupes, puedes intentar continuar."}),s,e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[e.jsxs(El,{onClick:this.handleReset,className:"flex-1 bg-purple-600 hover:bg-purple-700",children:[e.jsx(r,{className:"w-4 h-4 mr-2"}),"Intentar de Nuevo"]}),e.jsxs(El,{onClick:this.handleReload,variant:"outline",className:"flex-1",children:[e.jsx(r,{className:"w-4 h-4 mr-2"}),"Recargar Pgina"]}),e.jsxs(El,{onClick:this.handleGoHome,variant:"outline",className:"flex-1",children:[e.jsx(n,{className:"w-4 h-4 mr-2"}),"Ir al Inicio"]})]}),e.jsx("div",{className:"mt-6 text-center",children:e.jsxs("p",{className:"text-sm text-gray-500",children:["Si el problema persiste, contacta a soporte:",e.jsx("br",{}),e.jsx("a",{href:"mailto:soporte@eventradar.com",className:"text-purple-600 hover:underline",children:"soporte@eventradar.com"})]})})]})})}return this.props.children}}const Tl=()=>null,Ol=()=>{const t=Ce(),r=[{id:"mapa",label:"Mapa",icon:s,path:"/",activeColor:"text-purple-500"},{id:"explorar",label:"Explorar",icon:a,path:"/events",activeColor:"text-blue-500"},{id:"eventos",label:"Eventos",icon:i,path:"/dashboard",activeColor:"text-green-500"},{id:"suscripcion",label:"Suscripcin",icon:o,path:"/pricing",activeColor:"text-yellow-500",badge:null},{id:"crear",label:"Crear",icon:l,path:"/create-event",activeColor:"text-pink-500",isPrimary:!0},{id:"favoritos",label:"Favoritos",icon:c,path:"/favorites",activeColor:"text-indigo-500",badge:null}];return e.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 z-40 bg-gradient-to-br from-purple-600 via-pink-500 to-blue-600 border-t border-white/10 pb-safe",children:e.jsx("div",{className:"flex items-center justify-around px-2 py-2 max-w-screen-xl mx-auto",children:r.map((r,n)=>{const s=r.icon,a="/"===(i=r.path)?"/"===t.pathname:t.pathname.startsWith(i);var i;return e.jsx(Te,{to:r.path,className:"flex flex-col items-center justify-center relative",children:r.isPrimary?e.jsxs(u.div,{whileTap:{scale:.9},className:"relative -mt-6",children:[e.jsx("div",{className:"bg-gradient-to-br from-pink-500 to-purple-600 rounded-full p-4 shadow-xl",children:e.jsx(s,{className:"w-6 h-6 text-white",strokeWidth:2.5})}),e.jsx("span",{className:"absolute -bottom-5 left-1/2 transform -translate-x-1/2 text-xs font-medium text-white whitespace-nowrap",children:r.label})]}):e.jsxs(u.div,{whileTap:{scale:.95},className:"flex flex-col items-center justify-center py-1 px-3 rounded-lg transition-all",children:[e.jsxs("div",{className:"relative",children:[e.jsx(s,{className:`w-6 h-6 transition-colors ${a?r.activeColor:"text-gray-400"}`,strokeWidth:a?2.5:2}),r.badge&&e.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full w-4 h-4 flex items-center justify-center font-bold",children:r.badge})]}),e.jsx("span",{className:`text-xs mt-1 font-medium transition-colors ${a?r.activeColor:"text-gray-400"}`,children:r.label}),a&&e.jsx(u.div,{layoutId:"activeTab",className:"absolute -bottom-0.5 left-1/2 transform -translate-x-1/2 w-1 h-1 rounded-full bg-gradient-to-r from-pink-500 to-purple-500",transition:{type:"spring",stiffness:300,damping:30}})]})},r.id)})})})},Pl="BK3FXE1TFi3tX6CwhbWXDgCRRkMvsPtKYaq9nlU67Dd8gTGJaAw6NXL4yLvjtaaNID9QahPBD9B4Aa8z9QpLfTo",Al=async e=>{try{await async function(e){if(!("serviceWorker"in navigator))return;if(!("PushManager"in window))return;try{const t=await navigator.serviceWorker.register("/sw.js");if("granted"!==await Notification.requestPermission())return;const r=await t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Rl(Pl)});await async function(e,t,r){try{const n="web"===r?JSON.stringify(t):t,{error:s}=await Hi.from("push_tokens").upsert({user_id:e,token:n,platform:r,updated_at:(new Date).toISOString()},{onConflict:"user_id,platform"});if(s)return}catch(n){}}(e,r,"web")}catch(t){}}(e)}catch(t){}};function Rl(e){const t=(e+"=".repeat((4-e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),r=window.atob(t),n=new Uint8Array(r.length);for(let s=0;s<r.length;++s)n[s]=r.charCodeAt(s);return n}const Il=_e.createContext(),$l=()=>{const{user:t}=Qi(),r=function(){const[e,t]=_e.useState(()=>"undefined"!=typeof window&&window.innerWidth<768);return _e.useEffect(()=>{const e=()=>{t(window.innerWidth<768)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),e}(),[n,s]=_e.useState(!1),a=Ce(),i=r&&["/","/login","/register"].includes(a.pathname),o=r&&!n&&t&&!i;return _e.useEffect(()=>{t&&Al(t.id)},[t]),e.jsx(Il.Provider,{value:{isMapExpanded:n,setIsMapExpanded:s},children:e.jsxs("div",{className:"min-h-screen flex flex-col",children:[!r&&e.jsx(Tl,{}),r&&!n&&e.jsx(Tl,{}),e.jsx("main",{className:"flex-1 "+(!r||n||i?"pb-0":"pb-20"),children:e.jsx(Oe,{})}),o&&e.jsx(Ol,{})]})})},Dl=({size:t=40,showText:r=!0,className:n="",variant:s="default"})=>{const a=(()=>{switch(s){case"white":return{bgColor:"transparent",textColor:"text-white",gradientE:"from-cyan-300 to-blue-300",gradientR:"from-pink-300 to-purple-300"};case"dark":return{bgColor:"bg-gray-900",textColor:"text-gray-100",gradientE:"from-cyan-400 to-blue-500",gradientR:"from-pink-400 to-purple-500"};default:return{bgColor:"bg-slate-800",textColor:"text-transparent bg-clip-text bg-gradient-to-r from-cyan-400 to-pink-400",gradientE:"from-cyan-400 to-blue-500",gradientR:"from-pink-400 to-purple-500"}}})(),i=t,o=.3*t;return e.jsxs("div",{className:`flex items-center gap-3 ${n}`,children:[e.jsx("div",{className:`${a.bgColor} rounded-2xl flex items-center justify-center shadow-lg`,style:{width:i,height:i,background:"white"===s||"dark"===s?a.bgColor:"linear-gradient(135deg, #1e293b 0%, #0f172a 100%)"},children:e.jsxs("div",{className:"relative flex items-center justify-center",children:[e.jsx("div",{className:`font-black bg-gradient-to-br ${a.gradientE} bg-clip-text text-transparent`,style:{fontSize:o,lineHeight:1},children:"E"}),e.jsx("div",{className:`font-black bg-gradient-to-br ${a.gradientR} bg-clip-text text-transparent -ml-1`,style:{fontSize:o,lineHeight:1},children:"R"}),e.jsx("div",{className:"absolute bg-gradient-to-r from-pink-400 to-purple-500 rounded-full shadow-lg",style:{width:.08*t,height:.08*t,right:.05*-t,bottom:.05*t,boxShadow:"0 0 10px rgba(236, 72, 153, 0.5)"}})]})}),r&&e.jsx("div",{className:`font-bold ${a.textColor}`,style:{fontSize:o},children:"EventRadar"})]})},Ll=()=>{const t=Pe(),{signIn:r,user:n}=Qi(),[s,a]=_e.useState({email:"",password:""}),[i,o]=_e.useState({}),[l,c]=_e.useState(!1),[v,y]=_e.useState(!1);_e.useEffect(()=>{n&&t("/dashboard")},[n,t]);const x=e=>{const{name:t,value:r}=e.target;a(e=>({...e,[t]:r})),i[t]&&o(e=>({...e,[t]:""}))};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-pink-500 to-blue-600 flex items-center justify-center px-4 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute -top-10 -right-10 w-40 h-40 bg-white/10 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute top-1/2 -left-20 w-60 h-60 bg-purple-400/20 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-20 right-1/3 w-32 h-32 bg-pink-400/20 rounded-full blur-2xl"}),e.jsx("div",{className:"absolute top-20 left-1/3 w-20 h-20 bg-blue-400/20 rounded-full blur-xl"})]}),e.jsx(u.button,{onClick:()=>t("/"),className:"absolute top-6 left-6 z-20 p-3 bg-white/10 backdrop-blur-sm rounded-full hover:bg-white/20 transition-all duration-300 group",whileHover:{scale:1.1},whileTap:{scale:.95},children:e.jsx(d,{className:"h-5 w-5 text-white group-hover:text-white/80"})}),e.jsxs("div",{className:"relative z-10 w-full max-w-md",children:[e.jsxs(u.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[e.jsxs("div",{className:"inline-flex flex-col items-center space-y-3 mb-4",children:[e.jsx(Dl,{size:80,showText:!0,variant:"white"}),e.jsx("p",{className:"text-white/80 text-sm",children:"Tu radar de eventos"})]}),e.jsxs(u.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.3,type:"spring"},className:"inline-flex items-center gap-2 px-4 py-2 bg-white/10 rounded-full text-white/90 text-sm",children:[e.jsx(h,{className:"h-4 w-4"}),"Bienvenido de vuelta!"]})]}),e.jsxs(u.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white/10 backdrop-blur-md rounded-2xl p-8 shadow-2xl border border-white/20",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Iniciar Sesin"}),e.jsx("p",{className:"text-white/70",children:"Accede a tu cuenta"})]}),i.general&&e.jsx(u.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-red-500/20 border border-red-500/50 rounded-lg p-3 mb-4",children:e.jsxs("p",{className:"text-red-200 text-sm text-center",children:[" ",i.general]})}),e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),o({});const n=(()=>{const e={};return s.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)||(e.email="Formato de email invlido"):e.email="El email es requerido",s.password||(e.password="La contrasea es requerida"),e})();if(Object.keys(n).length>0)o(n);else{c(!0);try{const e=await r(s.email,s.password);e.success?t("/dashboard"):o({general:e.error||"Credenciales incorrectas"})}catch(a){o({general:"Error inesperado. Por favor, intenta nuevamente."})}finally{c(!1)}}},className:"space-y-5",children:[e.jsxs(u.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},children:[e.jsxs("label",{className:"flex items-center text-white/90 font-medium mb-2",children:[e.jsx(p,{className:"h-4 w-4 mr-2"}),"Email"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"email",name:"email",value:s.email,onChange:x,className:"w-full px-4 py-3 bg-white/10 border border-white/30 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-purple-400/50 focus:border-purple-400/50 transition-all duration-300",placeholder:"ejemplo@gmail.com",required:!0}),s.email&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(s.email)&&e.jsx(u.div,{initial:{scale:0},animate:{scale:1},className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full"})})]}),i.email&&e.jsx(u.p,{initial:{opacity:0},animate:{opacity:1},className:"text-red-300 text-sm mt-1",children:i.email})]}),e.jsxs(u.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4},children:[e.jsxs("label",{className:"flex items-center text-white/90 font-medium mb-2",children:[e.jsx(f,{className:"h-4 w-4 mr-2"}),"Contrasea"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:v?"text":"password",name:"password",value:s.password,onChange:x,className:"w-full px-4 py-3 bg-white/10 border border-white/30 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-purple-400/50 focus:border-purple-400/50 transition-all duration-300 pr-12",placeholder:"",required:!0}),e.jsx("button",{type:"button",onClick:()=>y(!v),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/60 hover:text-white/80 transition-colors",children:v?e.jsx(m,{className:"h-4 w-4"}):e.jsx(g,{className:"h-4 w-4"})})]}),i.password&&e.jsx(u.p,{initial:{opacity:0},animate:{opacity:1},className:"text-red-300 text-sm mt-1",children:i.password})]}),e.jsx(u.button,{type:"submit",disabled:l,className:"w-full py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold rounded-lg hover:from-purple-600 hover:to-pink-600 focus:outline-none focus:ring-2 focus:ring-purple-400/50 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 flex items-center justify-center gap-2 shadow-lg",whileHover:{scale:l?1:1.02},whileTap:{scale:l?1:.98},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.5},children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Iniciando sesin..."]}):e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"h-4 w-4"})," Entrar a EventRadar"]})})]}),e.jsxs(u.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.6},className:"mt-6 text-center space-y-3",children:[e.jsxs("p",{className:"text-white/80 text-sm",children:["No tienes cuenta?"," ",e.jsx("button",{onClick:()=>t("/register"),className:"text-white font-semibold hover:text-purple-200 transition-colors underline decoration-2 underline-offset-2",children:"Regstrate aqu"})]}),e.jsx(Te,{to:"/",className:"inline-block text-white/60 text-sm hover:text-white/80 transition-colors",children:" Volver al inicio"})]}),e.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"mt-4 p-4 bg-blue-500/20 rounded-lg border border-blue-400/30",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-white/90 text-sm font-medium mb-2",children:" Una vez dentro podrs:"}),e.jsxs("div",{className:"text-white/70 text-xs space-y-1",children:[e.jsx("div",{children:" Ver eventos en el mapa interactivo"}),e.jsx("div",{children:" Filtrar por categoras"}),e.jsx("div",{children:" Crear eventos (si eres admin)"}),e.jsx("div",{children:" Recibir notificaciones de nuevos eventos"})]})]})})]})]})]})},zl=()=>{const t=Pe(),{signUp:r}=Qi(),[n,a]=_e.useState({email:"",password:"",confirmPassword:"",fullName:""}),[i,o]=_e.useState({}),[l,c]=_e.useState(!1),[h,y]=_e.useState(!1),[x,w]=_e.useState(!1),j=e=>{const{name:t,value:r}=e.target;a(e=>({...e,[t]:r})),i[t]&&o(e=>({...e,[t]:""}))};return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-pink-500 to-blue-600 flex items-center justify-center px-4 relative overflow-hidden",children:[e.jsxs("div",{className:"absolute inset-0 overflow-hidden",children:[e.jsx("div",{className:"absolute -top-10 -right-10 w-40 h-40 bg-white/10 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute top-1/2 -left-20 w-60 h-60 bg-purple-400/20 rounded-full blur-3xl"}),e.jsx("div",{className:"absolute bottom-20 right-1/3 w-32 h-32 bg-pink-400/20 rounded-full blur-2xl"})]}),e.jsx(u.button,{onClick:()=>t("/"),className:"absolute top-6 left-6 z-20 p-3 bg-white/10 backdrop-blur-sm rounded-full hover:bg-white/20 transition-all duration-300 group",whileHover:{scale:1.1},whileTap:{scale:.95},children:e.jsx(d,{className:"h-5 w-5 text-white group-hover:text-white/80"})}),e.jsxs("div",{className:"relative z-10 w-full max-w-md",children:[e.jsxs(u.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-8",children:[e.jsxs("div",{className:"inline-flex items-center space-x-3 mb-4",children:[e.jsx("div",{className:"p-2 bg-white/20 rounded-xl backdrop-blur-sm",children:e.jsx(s,{className:"h-8 w-8 text-white"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold text-white",children:" EventRadar"}),e.jsx("p",{className:"text-white/80 text-sm",children:"Descubre eventos increbles"})]})]}),e.jsxs(u.div,{initial:{scale:0},animate:{scale:1},transition:{delay:.3,type:"spring"},className:"inline-flex items-center gap-2 px-4 py-2 bg-white/10 rounded-full text-white/90 text-sm",children:[e.jsx(b,{className:"h-4 w-4"}),"nete a la comunidad"]})]}),e.jsxs(u.div,{initial:{opacity:0,y:30},animate:{opacity:1,y:0},transition:{delay:.2},className:"bg-white/10 backdrop-blur-md rounded-2xl p-8 shadow-2xl border border-white/20",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-white mb-2",children:"Crear Cuenta"}),e.jsx("p",{className:"text-white/70",children:"Comienza tu aventura"})]}),i.general&&e.jsx(u.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"bg-red-500/20 border border-red-500/50 rounded-lg p-3 mb-4",children:e.jsxs("p",{className:"text-red-200 text-sm text-center",children:[" ",i.general]})}),e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),c(!0),o({});const s=(()=>{const e={};return n.fullName.trim()||(e.fullName="El nombre completo es requerido"),n.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)||(e.email="Formato de email invlido"):e.email="El email es requerido",n.password?n.password.length<6&&(e.password="La contrasea debe tener al menos 6 caracteres"):e.password="La contrasea es requerida",n.confirmPassword?n.password!==n.confirmPassword&&(e.confirmPassword="Las contraseas no coinciden"):e.confirmPassword="Confirma tu contrasea",e})();if(Object.keys(s).length>0)return o(s),void c(!1);try{const e=await r(n.email,n.password,n.fullName);e.success?(alert("Bienvenido a EventRadar! \nTu cuenta ha sido creada exitosamente!"),t("/dashboard")):o({general:e.error||"Error al crear la cuenta"})}catch(a){o({general:"Error inesperado. Por favor, intenta nuevamente."})}finally{c(!1)}},className:"space-y-5",children:[e.jsxs(u.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.3},children:[e.jsxs("label",{className:"flex items-center text-white/90 font-medium mb-2",children:[e.jsx(v,{className:"h-4 w-4 mr-2"}),"Nombre Completo"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"text",name:"fullName",value:n.fullName,onChange:j,className:"w-full px-4 py-3 bg-white/10 border border-white/30 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-purple-400/50 focus:border-purple-400/50 transition-all duration-300",placeholder:"Ej: Shinji Ikari",required:!0}),n.fullName&&e.jsx(u.div,{initial:{scale:0},animate:{scale:1},className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full"})})]}),i.fullName&&e.jsx(u.p,{initial:{opacity:0},animate:{opacity:1},className:"text-red-300 text-sm mt-1",children:i.fullName})]}),e.jsxs(u.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.4},children:[e.jsxs("label",{className:"flex items-center text-white/90 font-medium mb-2",children:[e.jsx(p,{className:"h-4 w-4 mr-2"}),"Email"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"email",name:"email",value:n.email,onChange:j,className:"w-full px-4 py-3 bg-white/10 border border-white/30 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-purple-400/50 focus:border-purple-400/50 transition-all duration-300",placeholder:"ejemplo@gmail.com",required:!0}),n.email&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(n.email)&&e.jsx(u.div,{initial:{scale:0},animate:{scale:1},className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full"})})]}),i.email&&e.jsx(u.p,{initial:{opacity:0},animate:{opacity:1},className:"text-red-300 text-sm mt-1",children:i.email})]}),e.jsxs(u.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.5},children:[e.jsxs("label",{className:"flex items-center text-white/90 font-medium mb-2",children:[e.jsx(f,{className:"h-4 w-4 mr-2"}),"Contrasea"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:h?"text":"password",name:"password",value:n.password,onChange:j,className:"w-full px-4 py-3 bg-white/10 border border-white/30 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-purple-400/50 focus:border-purple-400/50 transition-all duration-300 pr-12",placeholder:"",required:!0}),e.jsx("button",{type:"button",onClick:()=>y(!h),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/60 hover:text-white/80 transition-colors",children:h?e.jsx(m,{className:"h-4 w-4"}):e.jsx(g,{className:"h-4 w-4"})})]}),i.password&&e.jsx(u.p,{initial:{opacity:0},animate:{opacity:1},className:"text-red-300 text-sm mt-1",children:i.password}),n.password&&e.jsxs("div",{className:"mt-2 text-xs text-white/60",children:["Fortaleza: ",n.password.length<6?" Dbil":n.password.length<10?" Media":" Fuerte"]})]}),e.jsxs(u.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:.6},children:[e.jsxs("label",{className:"flex items-center text-white/90 font-medium mb-2",children:[e.jsx(f,{className:"h-4 w-4 mr-2"}),"Confirmar Contrasea"]}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:x?"text":"password",name:"confirmPassword",value:n.confirmPassword,onChange:j,className:"w-full px-4 py-3 bg-white/10 border border-white/30 rounded-lg text-white placeholder-white/60 focus:outline-none focus:ring-2 focus:ring-purple-400/50 focus:border-purple-400/50 transition-all duration-300 pr-12",placeholder:"",required:!0}),e.jsx("button",{type:"button",onClick:()=>w(!x),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-white/60 hover:text-white/80 transition-colors",children:x?e.jsx(m,{className:"h-4 w-4"}):e.jsx(g,{className:"h-4 w-4"})})]}),i.confirmPassword&&e.jsx(u.p,{initial:{opacity:0},animate:{opacity:1},className:"text-red-300 text-sm mt-1",children:i.confirmPassword}),n.confirmPassword&&n.password===n.confirmPassword&&e.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},className:"mt-1 text-green-300 text-xs flex items-center gap-1",children:" Las contraseas coinciden"})]}),e.jsx(u.button,{type:"submit",disabled:l,className:"w-full py-3 bg-gradient-to-r from-purple-500 to-pink-500 text-white font-bold rounded-lg hover:from-purple-600 hover:to-pink-600 focus:outline-none focus:ring-2 focus:ring-purple-400/50 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 flex items-center justify-center gap-2 shadow-lg",whileHover:{scale:l?1:1.02},whileTap:{scale:l?1:.98},initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.7},children:l?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}),"Creando cuenta..."]}):e.jsxs(e.Fragment,{children:[e.jsx(b,{className:"h-4 w-4"})," nete a EventRadar"]})})]}),e.jsxs(u.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.8},className:"mt-6 text-center space-y-3",children:[e.jsxs("p",{className:"text-white/80 text-sm",children:["Ya tienes cuenta?"," ",e.jsx("button",{onClick:()=>t("/login"),className:"text-white font-semibold hover:text-purple-200 transition-colors underline decoration-2 underline-offset-2",children:"Inicia sesin aqu"})]}),e.jsx(Te,{to:"/",className:"inline-block text-white/60 text-sm hover:text-white/80 transition-colors",children:" Volver al inicio"})]}),e.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.9},className:"mt-6 p-4 bg-purple-500/20 rounded-lg border border-purple-400/30",children:e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-white/90 text-sm font-medium mb-2",children:" Qu puedes hacer en EventRadar?"}),e.jsxs("div",{className:"text-white/70 text-xs space-y-1",children:[e.jsx("div",{children:" Descubrir eventos de anime"}),e.jsx("div",{children:" Encontrar conciertos de J-Rock"}),e.jsx("div",{children:" Explorar ferias gastronmicas japonesas"}),e.jsx("div",{children:" Participar en torneos gaming"})]})]})})]})]})]})},Ml=()=>{const{user:e,profile:t}=Qi(),[r,n]=_e.useState("user"),[s,a]=_e.useState(!1),[i,o]=_e.useState(!0);_e.useEffect(()=>{if(!e)return n("user"),a(!1),void o(!1);(async()=>{try{const r=e.user_metadata?.role||t?.role||"user",s=e.user_metadata?.has_membership||t?.has_premium||!1;n(r),a(s)}catch(r){n("user"),a(!1)}finally{o(!1)}})()},[e,t]);const l="admin"===r,c=s||"premium"===r;return{role:r,loading:i,isAdmin:l,isPremium:c,isUser:"user"===r&&!s,canCreateEvents:l||c,hasPremium:s}},Ul=({isOpen:t,onClose:r,event:n,onEventUpdated:s})=>{const[a,i]=_e.useState(!1),[o,l]=_e.useState({title:"",description:"",category:"anime",date:"",time:"",location:"",latitude:-33.0194,longitude:-71.5519,price:0}),c={anime:{emoji:"",name:"Anime",color:"#9333ea"},musica:{emoji:"",name:"Msica",color:"#ec4899"},gastronomia:{emoji:"",name:"Gastronoma",color:"#f59e0b"},deportes:{emoji:"",name:"Deportes",color:"#10b981"},arte:{emoji:"",name:"Arte",color:"#8b5cf6"},tecnologia:{emoji:"",name:"Tecnologa",color:"#06b6d4"},otros:{emoji:"",name:"Otros",color:"#6b7280"}};_e.useEffect(()=>{n&&t&&l({title:n.title||"",description:n.description||"",category:n.category||"anime",date:n.date||"",time:n.time||"",location:n.location||"",latitude:n.latitude||-33.0194,longitude:n.longitude||-71.5519,price:n.price||0})},[n,t]);const u=e=>{const{name:t,value:r}=e.target;l(e=>({...e,[t]:r}))};if(!t||!n)return null;const d=c[o.category]?.color||"#6b7280";return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[10000] flex items-center justify-center p-4",children:e.jsxs("div",{className:"bg-white rounded-2xl w-full max-w-2xl max-h-[90vh] overflow-y-auto shadow-2xl",children:[e.jsxs("div",{className:"sticky top-0 p-6 border-b border-gray-100 flex items-center justify-between",style:{background:`linear-gradient(135deg, ${d}15, ${d}05)`},children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 rounded-xl flex items-center justify-center text-2xl shadow-sm",style:{backgroundColor:`${d}30`},children:c[o.category]?.emoji}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Editar Evento"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Modifica los detalles del evento"})]})]}),e.jsx("button",{onClick:r,className:"w-10 h-10 rounded-full bg-gray-100 hover:bg-gray-200 flex items-center justify-center transition-colors",children:e.jsx(y,{className:"w-5 h-5 text-gray-600"})})]}),e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),i(!0);try{const e=Math.round(1e6*parseFloat(o.latitude))/1e6,t=Math.round(1e6*parseFloat(o.longitude))/1e6;if(e<-90||e>90)return alert(" La latitud debe estar entre -90 y 90"),void i(!1);if(t<-180||t>180)return alert(" La longitud debe estar entre -180 y 180"),void i(!1);const{data:a,error:l}=await Vi.from("events").update({title:o.title,description:o.description,category:o.category,date:o.date,time:o.time,location:o.location,latitude:e,longitude:t,price:parseFloat(o.price)||0}).eq("id",n.id).select();if(l)return void alert("Error al actualizar el evento: "+l.message);alert(" Evento actualizado correctamente"),s&&s(a[0]),r()}catch(t){alert("Error inesperado al actualizar el evento")}finally{i(!1)}},className:"p-6 space-y-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" Ttulo del Evento"}),e.jsx("input",{type:"text",name:"title",value:o.title,onChange:u,required:!0,className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all text-gray-900",placeholder:"Nombre del evento"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" Categora"}),e.jsx("select",{name:"category",value:o.category,onChange:u,required:!0,className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all text-gray-900",children:Object.entries(c).map(([t,r])=>e.jsxs("option",{value:t,children:[r.emoji," ",r.name]},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" Descripcin"}),e.jsx("textarea",{name:"description",value:o.description,onChange:u,required:!0,rows:"4",className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all resize-none text-gray-900",placeholder:"Describe el evento..."})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" Fecha"}),e.jsx("input",{type:"date",name:"date",value:o.date,onChange:u,required:!0,className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all text-gray-900"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" Hora"}),e.jsx("input",{type:"time",name:"time",value:o.time,onChange:u,required:!0,className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all text-gray-900"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" Ubicacin"}),e.jsx("input",{type:"text",name:"location",value:o.location,onChange:u,required:!0,className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all text-gray-900",placeholder:"Ej: Quinta Vergara, Via del Mar"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" Latitud"}),e.jsx("input",{type:"number",name:"latitude",value:o.latitude,onChange:u,step:"0.000001",min:"-90",max:"90",required:!0,className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all text-gray-900",placeholder:"-33.0244"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" Longitud"}),e.jsx("input",{type:"number",name:"longitude",value:o.longitude,onChange:u,step:"0.000001",min:"-180",max:"180",required:!0,className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all text-gray-900",placeholder:"-71.5519"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:" Precio (CLP)"}),e.jsx("input",{type:"number",name:"price",value:o.price,onChange:u,min:"0",className:"w-full px-4 py-3 bg-gray-50 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-purple-500 focus:border-transparent transition-all text-gray-900",placeholder:"0 para gratis"})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:r,className:"flex-1 px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-700 font-semibold rounded-xl transition-colors",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:a,className:"flex-1 px-6 py-3 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-semibold rounded-xl transition-all transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2",children:a?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}),"Guardando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(x,{className:"w-5 h-5"}),"Guardar Cambios"]})})]})]})]})})},Fl={anime:{color:"#9333ea",emoji:"",name:"Anime"},musica:{color:"#ec4899",emoji:"",name:"Msica"},gastronomia:{color:"#f59e0b",emoji:"",name:"Gastronoma"},deportes:{color:"#10b981",emoji:"",name:"Deportes"},arte:{color:"#8b5cf6",emoji:"",name:"Arte"},tecnologia:{color:"#06b6d4",emoji:"",name:"Tecnologa"},otros:{color:"#6b7280",emoji:"",name:"Otros"}},ql=({isOpen:t,onClose:r,eventLocation:n,eventTitle:s,eventLatLng:a})=>{if(!t)return null;const i=e=>{const{lat:t,lng:n}=a;let s="";switch(e){case"waze":s=`https://waze.com/ul?ll=${t},${n}&navigate=yes`;break;case"google":s=`https://www.google.com/maps/dir/?api=1&destination=${t},${n}`;break;case"uber":s=`https://m.uber.com/ul/?action=setPickup&pickup=my_location&dropoff[latitude]=${t}&dropoff[longitude]=${n}`;break;default:return}window.open(s,"_blank"),r()};return e.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-[10000] flex items-end justify-center",children:e.jsxs("div",{className:"bg-white rounded-t-3xl w-full max-w-md mx-4 mb-0 animate-slide-up",children:[e.jsxs("div",{className:"p-6 border-b border-gray-100",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Cmo llegar?"}),e.jsx("button",{onClick:r,className:"w-8 h-8 rounded-full bg-gray-100 flex items-center justify-center hover:bg-gray-200 transition-colors",children:""})]}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:s}),e.jsxs("p",{className:"text-gray-500 text-xs mt-1",children:[" ",n]})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("button",{onClick:()=>i("waze"),className:"w-full flex items-center justify-between p-4 bg-blue-50 hover:bg-blue-100 rounded-xl transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-xl flex items-center justify-center",children:e.jsx("span",{className:"text-white text-2xl",children:""})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"Waze"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Navegacin con trfico en tiempo real"})]})]}),e.jsx("div",{className:"text-gray-400",children:""})]}),e.jsxs("button",{onClick:()=>i("google"),className:"w-full flex items-center justify-between p-4 bg-green-50 hover:bg-green-100 rounded-xl transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-green-500 rounded-xl flex items-center justify-center",children:e.jsx("span",{className:"text-white text-2xl",children:""})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"Google Maps"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Rutas y transporte pblico"})]})]}),e.jsx("div",{className:"text-gray-400",children:""})]}),e.jsxs("button",{onClick:()=>i("uber"),className:"w-full flex items-center justify-between p-4 bg-black/5 hover:bg-black/10 rounded-xl transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 bg-black rounded-xl flex items-center justify-center",children:e.jsx("span",{className:"text-white text-2xl",children:""})}),e.jsxs("div",{className:"text-left",children:[e.jsx("div",{className:"font-semibold text-gray-900",children:"Uber"}),e.jsx("div",{className:"text-sm text-gray-600",children:"Solicitar viaje directamente"})]})]}),e.jsx("div",{className:"text-gray-400",children:""})]})]}),e.jsx("div",{className:"p-6 pt-0",children:e.jsx("button",{onClick:r,className:"w-full p-3 text-gray-600 hover:text-gray-800 transition-colors",children:"Cancelar"})})]})})},Bl=({favoriteIds:t=new Set,onFavoriteToggle:r=()=>{}})=>{const{user:n}=Qi(),[s,a]=_e.useState([]),[i,o]=_e.useState(!0),[l,c]=_e.useState(null),[u,d]=_e.useState([-33.0194,-71.5519]),[h,p]=_e.useState({isOpen:!1,eventData:null}),[f,m]=_e.useState({isOpen:!1,event:null}),[g,b]=_e.useState("all"),[v,y]=_e.useState(!1),[x,_]=_e.useState(!1),N=async()=>{try{o(!0);const{data:e,error:t}=await Vi.from("events").select("*").order("created_at",{ascending:!1});a(t?[]:e||[])}catch(e){a([])}finally{o(!1)}};_e.useEffect(()=>{if(!n)return;let e;return N(),navigator.geolocation&&(navigator.geolocation.getCurrentPosition(e=>{const{latitude:t,longitude:r}=e.coords;c([t,r]),d([t,r])},e=>{d([-33.0194,-71.5519])},{enableHighAccuracy:!0,timeout:1e4,maximumAge:6e4}),e=navigator.geolocation.watchPosition(e=>{const{latitude:t,longitude:r}=e.coords;c([t,r])},e=>{},{enableHighAccuracy:!0,timeout:5e3,maximumAge:3e4})),N(),()=>{e&&navigator.geolocation.clearWatch(e)}},[n]),_e.useEffect(()=>{if(!n)return;const e=Vi.channel("events-changes").on("postgres_changes",{event:"*",schema:"public",table:"events"},e=>{N()}).subscribe();return()=>{e.unsubscribe()}},[n]);const S=s.filter(e=>"all"===g||e.category===g);return n?i?e.jsx("div",{className:"h-full w-full flex items-center justify-center bg-gradient-to-br from-purple-200/30 to-pink-200/30 rounded-xl border border-white/30",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-white mx-auto mb-4"}),e.jsx("p",{className:"text-white font-medium",children:"Cargando eventos..."})]})}):e.jsxs("div",{className:"h-full w-full relative",children:[e.jsxs("div",{className:"absolute top-16 left-4 z-10 bg-black/70 backdrop-blur-sm rounded-xl p-3 transition-all duration-300 "+(v?"max-w-fit":"max-w-xs"),children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("h3",{className:"text-white font-bold text-sm",children:[" ",v?"Filtros":"Filtrar Eventos"]}),e.jsx("button",{onClick:()=>y(!v),className:"text-white/70 hover:text-white text-xs px-2 py-1 hover:bg-white/20 rounded transition-colors",title:v?"Expandir filtros":"Minimizar filtros",children:v?"":""})]}),!v&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("button",{onClick:()=>b("all"),className:"w-full text-left px-3 py-2 rounded-lg text-sm transition-colors "+("all"===g?"bg-white text-black font-medium":"text-white hover:bg-white/20"),children:[" Todos (",s.length,")"]}),Object.entries(Fl).map(([t,r])=>{const n=s.filter(e=>e.category===t).length;return e.jsxs("button",{onClick:()=>b(t),className:"w-full text-left px-3 py-2 rounded-lg text-sm transition-colors flex items-center justify-between "+(g===t?"bg-white text-black font-medium":"text-white hover:bg-white/20"),children:[e.jsxs("span",{children:[r.emoji," ",r.name]}),e.jsxs("span",{className:"text-xs opacity-75",children:["(",n,")"]})]},t)})]}),v&&e.jsx("div",{className:"text-white/70 text-xs text-center",children:"all"===g?"Todos":Fl[g]?.name})]}),e.jsxs(De,{center:u,zoom:12,style:{height:"100%",width:"100%"},className:"z-0 rounded-xl",children:[e.jsx(Le,{attribution:' <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),l&&e.jsx(ze,{position:l,icon:Me.divIcon({html:'\n\n                <div style="\n\n                  background: radial-gradient(circle, #ef4444, #dc2626);\n\n                  width: 20px;\n\n                  height: 20px;\n\n                  border-radius: 50%;\n\n                  border: 3px solid white;\n\n                  box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.3);\n\n                  animation: pulse 2s infinite;\n\n                ">\n\n                </div>\n\n                <style>\n\n                  @keyframes pulse {\n\n                    0% { box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.3); }\n\n                    50% { box-shadow: 0 0 0 10px rgba(239, 68, 68, 0.1); }\n\n                    100% { box-shadow: 0 0 0 3px rgba(239, 68, 68, 0.3); }\n\n                  }\n\n                </style>\n\n              ',className:"user-marker",iconSize:[20,20],iconAnchor:[10,10]}),children:e.jsx(Ue,{children:e.jsxs("div",{className:"text-center p-2",children:[e.jsx("div",{className:"text-lg mb-1",children:""}),e.jsx("div",{className:"font-bold text-sm",children:"Tu ubicacin"})]})})}),S.map(n=>{const s=Fl[n.category]||Fl.otros,a=(i=s.color,o=s.emoji,Me.divIcon({html:`\n\n      <div style="\n\n        background: linear-gradient(45deg, ${i}, ${i}aa);\n\n        width: 40px;\n\n        height: 40px;\n\n        border-radius: 50%;\n\n        border: 3px solid white;\n\n        box-shadow: 0 4px 8px rgba(0,0,0,0.3);\n\n        display: flex;\n\n        align-items: center;\n\n        justify-content: center;\n\n        font-size: 18px;\n\n      ">\n\n        ${o}\n\n      </div>\n\n    `,className:"custom-marker",iconSize:[40,40],iconAnchor:[20,20],popupAnchor:[0,-20]}));var i,o;return e.jsx(ze,{position:[n.latitude||-33.0194,n.longitude||-71.5519],icon:a,children:e.jsx(Ue,{className:"custom-popup",closeButton:!0,children:e.jsxs("div",{className:"bg-white rounded-xl shadow-lg overflow-hidden w-[280px]",children:[e.jsxs("div",{className:"flex items-start justify-between p-3 pb-1",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-1 min-w-0",children:[e.jsx("div",{className:"w-10 h-10 rounded-lg flex items-center justify-center text-xl",style:{backgroundColor:`${s.color}20`},children:s.emoji}),e.jsx("div",{className:"flex-1 min-w-0",children:e.jsx("h3",{className:"font-bold text-base text-gray-900 leading-tight",children:n.title})})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0 ml-2",children:[e.jsx("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),m({isOpen:!0,event:n})},className:"w-8 h-8 rounded-full bg-amber-50 hover:bg-amber-100 flex items-center justify-center transition-all duration-200 transform hover:scale-110",title:"Editar evento",children:e.jsx(w,{className:"w-4 h-4 text-amber-600"})}),e.jsx("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),p({isOpen:!0,eventData:{title:n.title,location:n.location,latLng:{lat:n.latitude||-33.0194,lng:n.longitude||-71.5519}}})},className:"w-8 h-8 rounded-full bg-blue-50 hover:bg-blue-100 flex items-center justify-center transition-all duration-200 transform hover:scale-110",title:"Cmo llegar?",children:e.jsx(j,{className:"w-4 h-4 text-blue-600"})}),(()=>{const s=t.has(n.id);return e.jsx("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),r(n.id)},className:"w-8 h-8 rounded-full flex items-center justify-center transition-all duration-200 transform hover:scale-110 "+(s?"bg-red-50 shadow-sm":"bg-gray-50 hover:bg-red-50"),title:s?"Quitar de favoritos":"Agregar a favoritos",children:e.jsx(k,{className:"w-4 h-4 transition-all duration-200 "+(s?"fill-red-500 text-red-500":"text-gray-400 hover:text-red-400")})})})()]})]}),e.jsx("div",{className:"px-3 pb-2",children:e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium text-white",style:{backgroundColor:s.color},children:s.name})}),e.jsxs("div",{className:"px-3 pb-3 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx("div",{className:"text-sm",children:""}),e.jsx("span",{className:"text-sm",children:new Date(n.date).toLocaleDateString("es-CL",{weekday:"long",day:"numeric",month:"long",year:"numeric"})})]}),n.time&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx("div",{className:"text-sm",children:""}),e.jsx("span",{className:"text-sm",children:n.time})]}),e.jsxs("div",{className:"flex items-start gap-2 text-gray-600",children:[e.jsx("div",{className:"text-sm mt-0.5",children:""}),e.jsxs("div",{className:"flex-1",children:[e.jsx("span",{className:"text-sm",children:n.location||"Ubicacin por confirmar"}),void 0!==n.price&&e.jsx("div",{className:"mt-0.5 text-xs text-gray-500",children:"0"})]})]}),n.description&&e.jsx("div",{className:"mt-2 pt-2 border-t border-gray-100",children:e.jsx("p",{className:"text-gray-500 text-xs leading-relaxed",children:n.description})})]})]})})},n.id)})]}),e.jsx(ql,{isOpen:h.isOpen,onClose:()=>p({isOpen:!1,eventData:null}),eventLocation:h.eventData?.location,eventTitle:h.eventData?.title,eventLatLng:h.eventData?.latLng}),e.jsx(Ul,{isOpen:f.isOpen,onClose:()=>m({isOpen:!1,event:null}),event:f.event,onEventUpdated:e=>{N()}})]}):e.jsx("div",{className:"h-full w-full flex items-center justify-center bg-gradient-to-br from-purple-200/50 to-pink-200/50 rounded-xl border border-white/30",children:e.jsxs("div",{className:"text-center p-8",children:[e.jsx("div",{className:"text-6xl mb-4",children:""}),e.jsx("h3",{className:"text-xl font-bold text-white mb-2",children:"Usuario no autenticado"}),e.jsx("p",{className:"text-white/70",children:"Por favor, inicia sesin"})]})})},Hl={async sendPushNotification(e,t,r,n={}){try{const{data:s,error:a}=await Vi.from("notifications").insert([{user_id:e,title:t,body:r,data:JSON.stringify(n),type:"push",status:"sent"}]).select().single();if(a)throw a;return s}catch(s){throw s}},async notifyNewEvent(e){try{const{data:t,error:r}=await Vi.from("user_preferences").select("user_id").contains("interested_categories",[e.category]);if(r)throw r;const n=t.map(t=>({user_id:t.user_id,title:" Nuevo evento disponible!",body:`${e.title} - ${e.location}`,data:JSON.stringify({event_id:e.id,type:"new_event",category:e.category}),type:"event",status:"pending"}));if(n.length>0){const{data:e,error:t}=await Vi.from("notifications").insert(n).select();if(t)throw t;return e}return[]}catch(t){throw t}},async notifyEventReminder(e){try{const{data:t,error:r}=await Vi.from("event_attendees").select("\n          user_id,\n          events:event_id (\n            id,\n            title,\n            date,\n            time,\n            location\n          )\n        ").eq("event_id",e);if(r)throw r;const n=t[0]?.events;if(!n)return[];const s=t.map(e=>({user_id:e.user_id,title:" Recordatorio de evento",body:`${n.title} es maana a las ${n.time}`,data:JSON.stringify({event_id:n.id,type:"reminder",date:n.date,time:n.time}),type:"reminder",status:"pending"}));if(s.length>0){const{data:e,error:t}=await Vi.from("notifications").insert(s).select();if(t)throw t;return e}return[]}catch(t){throw t}},async getUserNotifications(e,t=20){try{const{data:r,error:n}=await Vi.from("notifications").select("*").eq("user_id",e).order("created_at",{ascending:!1}).limit(t);if(n)throw n;return r}catch(r){throw r}},async markAsRead(e){try{const{data:t,error:r}=await Vi.from("notifications").update({read_at:(new Date).toISOString(),status:"read"}).eq("id",e).select().single();if(r)throw r;return t}catch(t){throw t}},async markAllAsRead(e){try{const{data:t,error:r}=await Vi.from("notifications").update({read_at:(new Date).toISOString(),status:"read"}).eq("user_id",e).is("read_at",null).select();if(r)throw r;return t}catch(t){throw t}},subscribeToNotifications:(e,t)=>Vi.channel(`notifications:user_id=eq.${e}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`user_id=eq.${e}`},t).subscribe(),async updateNotificationPreferences(e,t){try{const{data:r,error:n}=await Vi.from("user_preferences").upsert({user_id:e,...t,updated_at:(new Date).toISOString()}).select().single();if(n)throw n;return r}catch(r){throw r}}},Vl={async addressToCoordinates(e){try{const t=`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(e)}&countrycodes=cl&limit=1`,r=await fetch(t,{headers:{"User-Agent":"EventRadar/1.0"}});if(!r.ok)throw new Error(`Geocoding API error: ${r.status}`);const n=await r.json();if(n&&n.length>0){const e=n[0];return{latitude:parseFloat(e.lat),longitude:parseFloat(e.lon),address:e.display_name,confidence:e.importance||.5}}return{latitude:-33.4489,longitude:-70.6693,address:"Santiago, Chile",confidence:.3,fallback:!0}}catch(t){return{latitude:-33.4489,longitude:-70.6693,address:"Santiago, Chile (ubicacin aproximada)",confidence:.1,fallback:!0,error:t.message}}},async coordinatesToAddress(e,t){try{const r=`https://nominatim.openstreetmap.org/reverse?format=json&lat=${e}&lon=${t}&addressdetails=1&countrycodes=cl`,n=await fetch(r,{headers:{"User-Agent":"EventRadar/1.0"}});if(!n.ok)throw new Error(`Reverse geocoding error: ${n.status}`);const s=await n.json();return s&&s.display_name?{address:s.display_name,components:{street:s.address?.road,number:s.address?.house_number,neighborhood:s.address?.neighbourhood||s.address?.suburb,city:s.address?.city||s.address?.town,region:s.address?.state,country:s.address?.country,postal_code:s.address?.postcode},confidence:.8}:{address:`${e.toFixed(4)}, ${t.toFixed(4)}`,components:{},confidence:.1,fallback:!0}}catch(r){return{address:`${e.toFixed(4)}, ${t.toFixed(4)}`,components:{},confidence:.1,fallback:!0,error:r.message}}},async searchPlaces(e,t={}){try{const{limit:r=5,countryCode:n="cl",bounded:s=!0,viewbox:a="-75,-17,-66,-56"}=t;let i=`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(e)}&countrycodes=${n}&limit=${r}&addressdetails=1`;s&&a&&(i+=`&viewbox=${a}&bounded=1`);const o=await fetch(i,{headers:{"User-Agent":"EventRadar/1.0"}});if(!o.ok)throw new Error(`Places search error: ${o.status}`);return(await o.json()).map(e=>({id:e.osm_id,name:e.display_name,latitude:parseFloat(e.lat),longitude:parseFloat(e.lon),type:e.type,importance:e.importance||.5,address:{street:e.address?.road,number:e.address?.house_number,neighborhood:e.address?.neighbourhood||e.address?.suburb,city:e.address?.city||e.address?.town,region:e.address?.state,country:e.address?.country}}))}catch(r){return[]}},calculateDistance(e,t,r,n){const s=this.toRadians(r-e),a=this.toRadians(n-t),i=Math.sin(s/2)*Math.sin(s/2)+Math.cos(this.toRadians(e))*Math.cos(this.toRadians(r))*Math.sin(a/2)*Math.sin(a/2);return 6371*(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)))},toRadians:e=>e*(Math.PI/180),async getNearbyEvents(e,t,r=10){try{return[]}catch(n){return[]}},isInChile:(e,t)=>e>=-56&&e<=-17.5&&t>=-75&&t<=-66,async getUserLocation(){try{if(!navigator.geolocation)throw new Error("Geolocalizacin no soportada");const e=await new Promise((e,t)=>{navigator.geolocation.getCurrentPosition(e,t,{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})}),{latitude:t,longitude:r}=e.coords;return{latitude:t,longitude:r,address:(await this.coordinatesToAddress(t,r)).address,accuracy:e.coords.accuracy,timestamp:Date.now()}}catch(e){return{latitude:-33.4489,longitude:-70.6693,address:"Santiago, Chile (ubicacin por defecto)",accuracy:null,fallback:!0,error:e.message}}}};function Wl(e){const t=e.toLowerCase();if(t.match(/(hablar con|contactar|supervisor|ejecutivo|humano|persona real|agente|ayuda humana|asistente humano)/))return" Por supuesto! Si necesitas hablar con un asistente humano, puedes contactarnos directamente:\n\n Email: contactoempresa@eventradar.com\n\nNuestro equipo te responder lo antes posible para ayudarte con tu consulta. Hay algo ms en lo que pueda ayudarte mientras tanto?";if(t.match(/^(hola|hey|hi|buenas|buenos das|buenas tardes|buenas noches)$/)){const e=["Hola!  Soy tu asistente de eventos. Buscas algo de msica, deportes, arte o gastronoma? Dime qu te interesa!","Hey!  Qu tipo de eventos te gustara descubrir hoy? Tenemos de todo: conciertos, deportes, arte y ms.","Buenas!  Estoy aqu para ayudarte a encontrar el evento perfecto. Qu te apetece hacer?"];return e[Math.floor(Math.random()*e.length)]}if(t.match(/(gracias|thank you|thanks|genial|perfecto|excelente|ok|vale)/)){const e=["De nada!  Si necesitas ayuda con algo ms, aqu estoy. Te gustara explorar otra categora?","Un placer ayudarte!  No dudes en preguntarme lo que necesites sobre eventos.","Para eso estoy!  Hay algo ms que quieras saber sobre los eventos disponibles?","Encantado de ayudar!  Si buscas algo especfico, solo dmelo."];return e[Math.floor(Math.random()*e.length)]}if(t.match(/(adis|chao|bye|hasta luego|nos vemos)/)){const e=["Hasta pronto!  Que disfrutes los eventos. Vuelve cuando quieras!","Nos vemos!  Espero que encuentres eventos increbles.","Chao!  Aqu estar cuando me necesites. Divirtete!"];return e[Math.floor(Math.random()*e.length)]}if(t.includes("msica")||t.includes("concierto")||t.includes("music")){const e=[' La msica es vida! Tenemos desde rock hasta jazz, pop y msica electrnica. Filtra por "Msica" en la pgina principal y encuentra tu concierto ideal. Algn gnero favorito?'," Eventos musicales al poder! Te recomiendo revisar los conciertos disponibles. Hay opciones para todos los gustos: indie, clsica, urbana... Qu estilo prefieres?",' Msica para los odos! Encuentra conciertos, festivales y recitales en la categora "Msica". Buscas algo en especial?'];return e[Math.floor(Math.random()*e.length)]}if(t.includes("deporte")||t.includes("ftbol")||t.includes("basketball")||t.includes("sport")){const e=[' A darle con todo! Tenemos partidos, torneos y competencias deportivas. Filtra por "Deportes" para ver todo. Ftbol, basketball, running?'," El deporte te llama! Desde partidos profesionales hasta maratones locales. Qu deporte te apasiona?"," Eventos deportivos emocionantes! Encuentra partidos en vivo, torneos y actividades. Prefieres verlos o participar?"];return e[Math.floor(Math.random()*e.length)]}if(t.includes("gratis")||t.includes("free")||t.includes("sin costo")||t.includes("barato")){const e=[' Eventos sin gastar! Usa el filtro de precio "$0" para ver todo lo gratuito. Siempre hay opciones increbles que no cuestan nada. Alguna categora en particular?',' Diversin gratis! Tenemos eventos culturales, talleres y actividades que no cuestan un peso. Filtra por precio "0" y descbrelos.'," Lo mejor de la vida es gratis! Encuentra conciertos al aire libre, exposiciones y ms sin costo. Qu te gustara hacer?"];return e[Math.floor(Math.random()*e.length)]}if(t.includes("hoy")||t.includes("today")||t.includes("ahora")){const e=[" Eventos para hoy! Usa el filtro de fecha para ver qu est pasando ahora mismo. Siempre hay algo emocionante!",' Accin inmediata! Filtra por "Hoy" y descubre eventos que estn sucediendo en este momento. Indoor o outdoor?'," No esperes ms! Revisa los eventos de hoy y sal a disfrutar. La ciudad est viva!"];return e[Math.floor(Math.random()*e.length)]}if(t.includes("fin de semana")||t.includes("weekend")||t.includes("sbado")||t.includes("domingo")){const e=[" Fin de semana pico! Los sbados y domingos estn llenos de eventos. Usa los filtros de fecha para ver todo. Planes de da o de noche?"," Weekend mode ON! Encuentra festivales, conciertos y actividades para sbado y domingo. Qu te apetece hacer?"," El fin de semana te espera! Hay eventos increbles ambos das. Filtra por fecha y descubre tus opciones."];return e[Math.floor(Math.random()*e.length)]}if(t.includes("arte")||t.includes("art")||t.includes("exposicin")||t.includes("galera")){const e=[' El arte te inspira! Tenemos exposiciones, galeras, talleres creativos y ms. Filtra por "Arte" y sumrgete en la cultura. Contemporneo o clsico?'," Eventos artsticos nicos! Desde arte callejero hasta museos. Buscas ver o crear?"," Creatividad en accin! Encuentra exposiciones de pintura, escultura, fotografa y ms. Qu estilo te gusta?"];return e[Math.floor(Math.random()*e.length)]}if(t.includes("gastronoma")||t.includes("comida")||t.includes("food")||t.includes("restaurant")||t.includes("comer")){const e=[' Delicias gastronmicas! Festivales de comida, catas de vino, clases de cocina... Filtra por "Gastronoma" y prepara el apetito. Qu cocina te gusta?'," Eventos para foodies! Desde food trucks hasta cenas temticas. Dulce o salado? Internacional o local?"," Experiencias culinarias! Encuentra degustaciones, talleres y festivales gastronmicos. Prefieres aprender o solo disfrutar?"];return e[Math.floor(Math.random()*e.length)]}if(t.includes("tecnologa")||t.includes("tech")||t.includes("coding")||t.includes("hackathon")){const e=[' Eventos tech! Hackathons, charlas de innovacin, workshops de programacin. Filtra por "Tecnologa" y conecta con la comunidad tech.'," Innovacin y cdigo! Encuentra meetups, conferencias y talleres tecnolgicos. Desarrollo, IA, blockchain?"," El futuro est aqu! Eventos de startups, tech talks y competencias de programacin. Qu te interesa?"];return e[Math.floor(Math.random()*e.length)]}if(t.includes("nios")||t.includes("familia")||t.includes("kids")||t.includes("family")){const e=[" Diversin familiar! Busca eventos aptos para todas las edades. Teatros infantiles, parques temticos, talleres creativos... Cuntos aos tienen los peques?"," Eventos para toda la familia! Desde cuentacuentos hasta festivales al aire libre. Algo educativo o pura diversin?"," Actividades para nios! Encuentra opciones divertidas y seguras para los ms pequeos. Indoor o outdoor?"];return e[Math.floor(Math.random()*e.length)]}if(t.includes("noche")||t.includes("night")||t.includes("fiesta")||t.includes("party")){const e=[" La noche es joven! Fiestas, conciertos nocturnos, eventos en bares y clubes. Buscas bailar o algo ms relajado?"," Eventos nocturnos! Desde after-office hasta raves. Qu vibra buscas esta noche?"," Diversin nocturna! Encuentra fiestas temticas, DJ sets y eventos bajo las estrellas. Con amigos o para conocer gente nueva?"];return e[Math.floor(Math.random()*e.length)]}if(t.includes("pareja")||t.includes("romntico")||t.includes("date")||t.includes("cita")){const e=[" Plan romntico! Cenas con msica en vivo, paseos culturales, cine bajo las estrellas... Qu les gusta hacer juntos?"," Eventos para dos! Desde ntimos conciertos hasta aventuras gastronmicas. Primera cita o aniversario?"," Momentos especiales! Encuentra eventos perfectos para parejas: teatro, arte, gastronoma... Algo sorpresa?"];return e[Math.floor(Math.random()*e.length)]}if(t.includes("cerca")||t.includes("cerca de m")||t.includes("nearby")||t.includes("zona")){const e=[" Eventos cerca de ti! Activa la ubicacin o busca por tu zona. En qu comuna o barrio ests?"," Lo mejor de tu zona! Filtra por ubicacin para ver eventos cercanos. Centro, sur, norte, oriente?"," Eventos a la vuelta de la esquina! Dime tu ubicacin y te muestro qu hay cerca."];return e[Math.floor(Math.random()*e.length)]}if(t.includes("recomien")||t.includes("suger")||t.includes("qu hacer")){const e=[" Te ayudo a decidir! Dime: prefieres indoor o outdoor? De da o de noche? Solo, con amigos o en pareja?"," Recomendaciones personalizadas! Cuntame ms: qu te gusta hacer en tu tiempo libre? Msica, deportes, cultura?"," Encuentra tu evento ideal! Eres ms de accin, relax o aventura? Dime y te sugiero opciones perfectas."];return e[Math.floor(Math.random()*e.length)]}const r=[" Hola! Soy tu asistente personal de eventos. Puedo ayudarte con:\n\n Msica y conciertos\n Deportes y actividades\n Arte y cultura\n Gastronoma\n Eventos gratuitos\n Planes para hoy o el fin de semana\n\nQu te apetece hacer? Solo pregunta!\n\n Si necesitas ayuda personalizada, escrbenos a: contactoempresa@eventradar.com"," Aqu estoy para ayudarte! Puedo recomendarte:\n\n Conciertos y festivales\n Eventos deportivos\n Exposiciones de arte\n Experiencias gastronmicas\n Opciones gratis\n Planes especiales\n\nCuntame, qu buscas?\n\n Necesitas asistencia directa? contactoempresa@eventradar.com"," Hola! Estoy aqu para que encuentres el plan perfecto. Dime qu te interesa:\n\n Msica\n Deportes\n Arte y cultura  \n Comida y bebida\n Eventos sin costo\n Hoy, maana o fin de semana\n\nPor dnde empezamos?\n\n Para consultas especiales: contactoempresa@eventradar.com"];return r[Math.floor(Math.random()*r.length)]}const Ql=new class{constructor(){this.provider="gemini",this.model="Gemini Pro"}async chatWithAssistant(e,t=[],r={}){try{const n=this.getSystemPrompt(t,r),s=await this.callAI([{role:"system",content:n},{role:"user",content:e}]);return{success:!0,message:s,suggestedEvents:this.extractEventIds(s,t)}}catch(n){return{success:!0,message:Wl(e),error:n.message,isMock:!0}}}async generateEventDescription(e){try{const t=`\nEres un experto en marketing de eventos. Genera una descripcin atractiva y profesional para el siguiente evento:\n\nNombre: ${e.title}\nCategora: ${e.category||"General"}\nUbicacin: ${e.location||"Por definir"}\nFecha: ${e.date||"Por confirmar"}\nPrecio: ${0===e.price?"Gratis":`$${e.price}`}\n\nRequisitos:\n- Mximo 150 palabras\n- Tono entusiasta y profesional\n- Incluir llamado a la accin\n- Resaltar beneficios clave\n- Usar emojis relevantes (mximo 3)\n\nGenera solo la descripcin, sin ttulos ni encabezados.\n      `.trim();return{success:!0,description:await this.callAI([{role:"user",content:t}],{temperature:.8}),originalPrompt:t}}catch(t){const r=this._generateMockDescriptions(e,3);return{success:!0,description:r[0],descriptions:r,error:t.message,isMock:!0}}}_generateMockDescriptions(e,t=6){const r=e?.title||"Tu evento",n=e?.category?`de ${e.category}`:"",s=e?.location?`en ${e.location}`:"",a=e?.date?`el ${e.date}`:"",i=0===e?.price||"0"===e?.price?"Entrada gratuita":e?.price?`Precio: $${e.price}`:"Precio por confirmar",o=[];o.push(`${r} ${n} ${s} ${a}. ${i}. Una experiencia pensada para conectar con personas afines y disfrutar de momentos nicos. Reserva tu lugar! `),o.push(`${r} ${n} ${s} ${a}. ${i}. Destacado por su contenido prctico y networking: charlas, talleres y actividades interactivas que te permitirn aprender y conocer gente del rubro.`),o.push(`Vive ${r} ${n} ${s} ${a}. Sumrgete en una jornada llena de sorpresas, msica y propuestas para todos. Ideal para familias y profesionales que buscan nuevas experiencias. No te lo pierdas! `);const l=e?.price&&e.price>0?`Valor de entrada: $${e.price}.`:"Entrada gratuita.";o.push(`Le invitamos a participar en ${r} ${n} ${s}. Una actividad diseada para brindar conocimiento, generar contactos profesionales y ofrecer una experiencia enriquecedora. ${l} Se recomienda confirmar asistencia con anticipacin. Cupos limitados.`);const c=e?.price&&e.price>0?`Por solo $${e.price}`:"Gratis!";o.push(`Hey!  No te pierdas ${r} ${n} ${s}. ${c} te llevas una experiencia increble, conoces gente copada y te diviertes un montn. Vas a faltar? Dale, antate! `);const u=this._getEmojiForCategory(e?.category),d=e?.category?`#${e.category.charAt(0).toUpperCase()+e.category.slice(1)}`:"#Evento";return o.push(`${u} IMPERDIBLE! ${r} es EL evento que estabas esperando. Entradas limitadas, experiencia nica. Te lo vas a perder?  Reserva YA! ${d} #EventRadar #NoTeLoPierdas`),t>6&&o.push(`${u} ${r}: la experiencia que transforma. Asegura tu lugar hoy!`),o.slice(0,t).map(e=>e.replace(/\s+/g," ").trim())}_getEmojiForCategory(e){return{music:"",sports:"",technology:"",food:"",art:"",business:"",education:"",other:""}[e]||""}async smartSearch(e,t){try{const r=t.slice(0,20).map(e=>({id:e.id,title:e.title,category:e.event_categories?.name||"General",location:e.location,date:e.date,price:e.price})),n=`\nEres un asistente de bsqueda de eventos. El usuario busca: "${e}"\n\nEventos disponibles:\n${JSON.stringify(r,null,2)}\n\nAnaliza la consulta del usuario y:\n1. Identifica qu eventos coinciden mejor\n2. Retorna los IDs de los 5 eventos ms relevantes\n3. Explica brevemente por qu los recomendas\n\nFormato de respuesta:\n{\n  "event_ids": ["id1", "id2", "id3"],\n  "explanation": "Encontr estos eventos porque..."\n}\n\nRetorna SOLO el JSON, sin texto adicional.\n      `.trim(),s=await this.callAI([{role:"user",content:n}],{temperature:.3}),a=this.parseJSON(s);if(a&&a.event_ids){return{success:!0,events:t.filter(e=>a.event_ids.includes(e.id)),explanation:a.explanation,query:e}}throw new Error("No se pudo parsear la respuesta de IA")}catch(r){return{success:!1,events:t.filter(t=>t.title.toLowerCase().includes(e.toLowerCase())||t.description?.toLowerCase().includes(e.toLowerCase())),explanation:"Bsqueda tradicional (IA no disponible)",error:r.message}}}async getEventInsights(e,t=[]){try{const r=`\nAnaliza este evento y genera insights tiles:\n\nEvento: ${e.title}\nCategora: ${e.event_categories?.name||"General"}\nPrecio: ${0===e.price?"Gratis":`$${e.price}`}\nUbicacin: ${e.location}\nFecha: ${new Date(e.date).toLocaleDateString("es-ES")}\n\n${t.length>0?`\nEventos similares disponibles:\n${t.map(e=>`- ${e.title} (${e.event_categories?.name})`).join("\n")}\n`:""}\n\nGenera:\n1. Un resumen en 1 oracin de qu esperar\n2. A quin le recomendaras este evento (1 oracin)\n3. Un consejo til para asistentes (1 oracin)\n\nFormato:\n{\n  "summary": "...",\n  "target_audience": "...",\n  "tip": "..."\n}\n\nRetorna SOLO el JSON.\n      `.trim(),n=await this.callAI([{role:"user",content:r}],{temperature:.7});return{success:!0,insights:this.parseJSON(n),event:e.title}}catch(r){return{success:!1,insights:null,error:r.message}}}async getPersonalizedSuggestions(e,t){try{const r=`\nEres un asistente personal de eventos. Genera un mensaje personalizado para el usuario.\n\nPerfil del usuario:\n- Categoras favoritas: ${e.favoriteCategories?.join(", ")||"No definido"}\n- Rango de precio habitual: ${e.priceRange||"Cualquiera"}\n- Ubicaciones frecuentes: ${e.locations?.join(", ")||"Varias"}\n\nEventos recomendados para l/ella:\n${t.slice(0,3).map((e,t)=>`${t+1}. ${e.title} - ${e.event_categories?.name} - $${e.price}`).join("\n")}\n\nGenera un mensaje entusiasta y personalizado (mximo 100 palabras) explicando:\n- Por qu estos eventos son perfectos para el usuario\n- Qu hace especial cada recomendacin\n- Un llamado a la accin\n\nUsa un tono amigable y cercano. Incluye 2-3 emojis relevantes.\n      `.trim();return{success:!0,message:await this.callAI([{role:"user",content:r}],{temperature:.9}),count:t.length}}catch(r){return{success:!1,message:"Aqu tienes algunos eventos que podran interesarte! ",error:r.message}}}async callAI(e,t={}){if("none"===this.provider)return Wl(e[e.length-1].content);try{if("gemini"===this.provider)return await this.callGeminiAPI(e,t);if("deepseek"===this.provider)return await this.callDeepSeekAPI(e,t);if("openai"===this.provider)return await this.callOpenAIAPI(e,t)}catch(r){throw r}}async callGeminiAPI(e,t={}){const r=e.filter(e=>"system"!==e.role).map(e=>({role:"assistant"===e.role?"model":"user",parts:[{text:e.content}]})),n=e.find(e=>"system"===e.role);n&&r.unshift({role:"user",parts:[{text:`Contexto: ${n.content}`}]});const s=await fetch("https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=AIzaSyDG5DUXMXzS4GzW3vWNc7rtOlmHuI27bzQ",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:r,generationConfig:{temperature:t.temperature||.7,maxOutputTokens:t.maxTokens||500,topP:.8,topK:40},safetySettings:[{category:"HARM_CATEGORY_HARASSMENT",threshold:"BLOCK_MEDIUM_AND_ABOVE"},{category:"HARM_CATEGORY_HATE_SPEECH",threshold:"BLOCK_MEDIUM_AND_ABOVE"}]})});if(!s.ok){const e=await s.json();throw new Error(`Gemini API error: ${s.status} - ${JSON.stringify(e)}`)}const a=await s.json(),i=a.candidates?.[0]?.content?.parts?.[0]?.text;if(!i)throw new Error("Respuesta invlida de Gemini");return i.trim()}async callDeepSeekAPI(e,t={}){const r=await fetch("https://api.deepseek.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "},body:JSON.stringify({model:"deepseek-chat",messages:e,temperature:t.temperature||.7,max_tokens:t.maxTokens||500})});if(!r.ok){const e=await r.json();throw new Error(e.error?.message||"Error en DeepSeek API")}return(await r.json()).choices[0].message.content.trim()}async callOpenAIAPI(e,t={}){const r=await fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer "},body:JSON.stringify({model:"gpt-3.5-turbo",messages:e,temperature:t.temperature||.7,max_tokens:t.maxTokens||500})});if(!r.ok){const e=await r.json();throw new Error(e.error?.message||"Error en OpenAI API")}return(await r.json()).choices[0].message.content.trim()}getMockResponse(e){const t=e.toLowerCase();return t.includes("msica")||t.includes("concierto")?' Encontr eventos de msica interesantes! Te recomiendo revisar los conciertos disponibles en la pgina principal. Filtra por categora "Msica" para ver todo. Buscas algn gnero especfico?':t.includes("deporte")||t.includes("ftbol")||t.includes("basketball")?" Hay varios eventos deportivos disponibles! Revisa la seccin de deportes para ver partidos y torneos. Prefieres ftbol, basketball u otro deporte?":t.includes("gratis")||t.includes("free")?" Eventos gratuitos disponibles! Usa el filtro de precio en la pgina principal para ver solo eventos sin costo. Te interesa alguna categora especfica?":t.includes("hoy")||t.includes("today")?" Para eventos de hoy, usa el filtro de fecha en la pgina principal. Siempre hay algo interesante sucediendo!":t.includes("fin de semana")||t.includes("weekend")?" Los fines de semana estn llenos de eventos! Usa los filtros de fecha para ver todo lo que pasa sbado y domingo.":t.includes("arte")||t.includes("art")?' Los eventos de arte estn en auge! Filtra por categora "Arte" para ver exposiciones, galeras y talleres creativos. Prefieres arte contemporneo o clsico?':t.includes("gastronoma")||t.includes("comida")||t.includes("food")?' Eventos gastronmicos deliciosos! Encuentra festivales de comida, catas y experiencias culinarias en la categora "Gastronoma". Alguna cocina en particular?':" Hola! Puedo ayudarte a encontrar eventos. Prueba preguntando por:\n Msica o conciertos\n Deportes\n Arte\n Gastronoma\n Eventos gratuitos\n Eventos de hoy o del fin de semana\n\nQu te interesa?"}getSystemPrompt(e,t){return`\nEres EventRadar AI, un asistente experto en eventos que ayuda a usuarios a encontrar las mejores experiencias.\n\nEventos disponibles actualmente:\n${e.slice(0,10).map(e=>`- ${e.title} (${e.event_categories?.name}) - ${e.location} - $${e.price}`).join("\n")}\n\nPreferencias del usuario:\n- Categoras favoritas: ${t.categories?.join(", ")||"No definido"}\n- Ubicacin: ${t.location||"Cualquiera"}\n- Presupuesto: ${t.budget||"Flexible"}\n\nTu rol:\n- Recomienda eventos basndote en las preferencias del usuario\n- S entusiasta pero honesto\n- Si no hay eventos que coincidan exactamente, sugiere alternativas\n- Usa emojis relevantes para hacer la conversacin ms amigable\n- Mantn respuestas concisas (mximo 150 palabras)\n\nIMPORTANTE: \n- Si mencionas un evento, usa su nombre exacto del listado\n- Si no hay eventos disponibles que coincidan, sugiere categoras alternativas\n- Siempre termina con una pregunta o llamado a la accin\n    `.trim()}extractEventIds(e,t){const r=[];return t.forEach(t=>{e.includes(t.title)&&r.push(t.id)}),r}parseJSON(e){try{return JSON.parse(e)}catch{const t=e.match(/```json\n([\s\S]*?)\n```/)||e.match(/```\n([\s\S]*?)\n```/)||e.match(/\{[\s\S]*\}/);if(t)try{return JSON.parse(t[1]||t[0])}catch{return null}return null}}isConfigured(){return"none"!==this.provider}getModelName(){return{gemini:"Google Gemini 2.0 Flash",deepseek:"DeepSeek Chat",openai:"GPT-3.5 Turbo",none:"Mock (Sin API)"}[this.provider]||"Desconocido"}getProvider(){return this.provider}},Gl=({onEventCreated:t,alwaysOpen:r=!1})=>{const{isAdmin:n,loading:s}=Ml(),[a,i]=_e.useState(r),[o,l]=_e.useState(!1),[c,u]=_e.useState(!1),[d,h]=_e.useState([]),[p,f]=_e.useState(!1),[m,g]=_e.useState(!1),[b,v]=_e.useState(!1),y=_e.useRef(null);_e.useEffect(()=>{i(r)},[r]);const[x,w]=_e.useState({title:"",description:"",category:"anime",date:"",time:"",location:"",latitude:-33.0194,longitude:-71.5519,price:0,website:""});if(s)return null;if(!n)return null;const j=e=>{const{name:t,value:r}=e.target;w(e=>({...e,[t]:r}))};return e.jsxs(e.Fragment,{children:[!r&&e.jsx("button",{onClick:()=>i(!0),className:"fixed bottom-20 right-6 z-50 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white p-4 rounded-full shadow-2xl transform hover:scale-110 transition-all duration-200",title:"Agregar Evento (Admin)",children:e.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),a&&e.jsx("div",{className:r?"w-full":"fixed z-50 transition-all duration-300 "+(o?"top-4 right-4 w-80":"inset-0 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm"),children:e.jsx("div",{className:r?"w-full bg-white rounded-xl shadow-lg":"bg-white rounded-2xl shadow-2xl transition-all duration-300 "+(o?"w-full":"w-full max-w-2xl max-h-[90vh] overflow-y-auto"),children:e.jsxs("div",{className:"p-6",children:[!r&&e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800 flex items-center gap-2",children:" Crear Nuevo Evento"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>l(!o),className:"text-gray-400 hover:text-gray-600 text-xl font-bold hover:bg-gray-100 rounded-full w-8 h-8 flex items-center justify-center transition-colors",title:o?"Expandir":"Minimizar",children:o?"":""}),e.jsx("button",{onClick:()=>i(!1),className:"text-gray-400 hover:text-gray-600 text-2xl font-bold hover:bg-gray-100 rounded-full w-8 h-8 flex items-center justify-center transition-colors",children:""})]})]}),!o&&e.jsxs("form",{onSubmit:async e=>{e.preventDefault(),u(!0);try{const{data:e,error:n}=await Vi.from("events").insert([{...x,price:parseFloat(x.price)||0,latitude:parseFloat(x.latitude),longitude:parseFloat(x.longitude)}]).select().single();if(n)alert("Error al crear evento: "+n.message);else{try{await Hl.notifyNewEvent(e)}catch(r){}alert("Evento creado exitosamente! "),w({title:"",description:"",category:"anime",date:"",time:"",location:"",latitude:-33.0194,longitude:-71.5519,price:0,website:""}),i(!1),t?.(e)}}catch(n){alert("Error inesperado al crear evento")}finally{u(!1)}},className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" Ttulo del evento *"}),e.jsx("input",{type:"text",name:"title",value:x.title,onChange:j,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white text-gray-900 placeholder-gray-500",placeholder:"Ej: Festival de Anime 2024",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" Categora *"}),e.jsx("select",{name:"category",value:x.category,onChange:j,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white text-gray-900",children:Object.entries({fiestas:{emoji:"",name:"Fiestas"},conciertos:{emoji:"",name:"Conciertos"},comedia:{emoji:"",name:"Comedia"},festivales:{emoji:"",name:"Festivales"},anime:{emoji:"",name:"Anime"},musica:{emoji:"",name:"Msica"},gastronomia:{emoji:"",name:"Gastronoma"},deportes:{emoji:"",name:"Deportes"},arte:{emoji:"",name:"Arte"},tecnologia:{emoji:"",name:"Tecnologa"},otros:{emoji:"",name:"Otros"}}).map(([t,r])=>e.jsxs("option",{value:t,className:"text-gray-900",children:[r.emoji," ",r.name]},t))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" Fecha *"}),e.jsx("input",{type:"date",name:"date",value:x.date,onChange:j,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white text-gray-900",required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" Hora"}),e.jsx("input",{type:"time",name:"time",value:x.time,onChange:j,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white text-gray-900"})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" Ubicacin"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{ref:y,type:"text",name:"location",value:x.location,onChange:e=>(async e=>{if(w(t=>({...t,location:e})),e.length<3)return h([]),void f(!1);g(!0);try{const t=await Vl.searchPlaces(e,{limit:5});h(t),f(t.length>0)}catch(t){}finally{g(!1)}})(e.target.value),onFocus:()=>d.length>0&&f(!0),onBlur:async()=>{setTimeout(async()=>{if(!x.latitude||!x.longitude){if(x.location&&x.location.length>=3)try{g(!0);const e=await Vl.addressToCoordinates(x.location);w(t=>({...t,latitude:e.latitude,longitude:e.longitude})),e.fallback}catch(e){}finally{g(!1)}f(!1)}},200)},className:"w-full px-4 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white text-gray-900 placeholder-gray-500",placeholder:"Ej: Centro de Convenciones, Via del Mar"}),m&&e.jsx("div",{className:"absolute right-3 top-1/2 -translate-y-1/2",children:e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-purple-600"})})]}),p&&d.length>0&&e.jsx("div",{className:"absolute z-50 w-full mt-2 bg-white border border-gray-300 rounded-lg shadow-xl max-h-64 overflow-y-auto",children:d.map((t,r)=>e.jsx("button",{type:"button",onMouseDown:e=>{e.preventDefault(),(e=>{w(t=>({...t,location:e.name,latitude:e.latitude,longitude:e.longitude})),f(!1),h([]),alert(" Ubicacin fijada en el mapa")})(t)},className:"w-full px-4 py-3 text-left hover:bg-purple-50 transition-colors border-b border-gray-100 last:border-b-0",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-lg mt-0.5",children:""}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-gray-900 font-medium",children:t.name}),t.address?.city&&e.jsxs("p",{className:"text-gray-500 text-sm",children:[t.address.city,", ",t.address.region]})]})]})},t.id||r))}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:" Busca y selecciona una ubicacin para fijarla automticamente"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" Precio (CLP)"}),e.jsx("input",{type:"number",name:"price",value:x.price,onChange:j,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white text-gray-900 placeholder-gray-500",placeholder:"0 para eventos gratuitos",min:"0"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:" Sitio web (opcional)"}),e.jsx("input",{type:"url",name:"website",value:x.website,onChange:j,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent bg-white text-gray-900 placeholder-gray-500",placeholder:"https://ejemplo.com"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:" Descripcin *"}),e.jsx("button",{type:"button",onClick:async()=>{if(x.title&&x.category){v(!0);try{const e=await Ql.generateEventDescription({title:x.title,category:x.category,location:x.location,date:x.date,price:x.price});if(!e.success||!e.description)throw new Error(e.error||"Error desconocido");w(t=>({...t,description:e.description})),e.isMock}catch(e){alert(`Error al generar descripcin:\n${e.message}\n\nRevisa la consola para ms detalles.`)}finally{v(!1)}}else alert("Por favor completa el ttulo y categora primero")},disabled:b||!x.title,className:"px-3 py-1 text-xs bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-1",children:b?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-3 w-3 border-b-2 border-white"}),e.jsx("span",{children:"Generando..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:""}),e.jsx("span",{children:"Mejorar con IA"})]})})]}),e.jsx("textarea",{name:"description",value:x.description,onChange:j,rows:4,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent resize-none bg-white text-gray-900 placeholder-gray-500",placeholder:"Describe el evento... o usa la IA para generar una descripcin profesional",required:!0}),e.jsx("p",{className:"text-gray-500 text-xs mt-1",children:' Completa ttulo y categora, luego haz clic en "Mejorar con IA"'})]}),e.jsxs("div",{className:"flex gap-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>i(!1),className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors font-medium",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:c,className:"flex-1 px-4 py-2 bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2 font-medium",children:c?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),e.jsx("span",{className:"text-white",children:"Creando..."})]}):e.jsx("span",{className:"text-white",children:" Crear Evento"})})]})]})]})})})]})};const Kl=new class{constructor(){this.eventViewStartTime={},this.pendingInteractions=[],this.flushInterval=null}startEventView(e,t){if(!e||!t)return;const r=`${e}-${t}`;this.eventViewStartTime[r]=Date.now()}async endEventView(e,t){if(!e||!t)return;const r=`${e}-${t}`,n=this.eventViewStartTime[r];if(!n)return;const s=Math.floor((Date.now()-n)/1e3);delete this.eventViewStartTime[r],s>=2&&await this.trackInteraction(e,t,"view",s)}async trackInteraction(e,t,r,n=null){if(e&&t)try{const s={user_id:e,event_id:t,interaction_type:r,duration_seconds:n,created_at:(new Date).toISOString()},{error:a}=await Vi.from("user_interactions").insert([s])}catch(s){}}async trackEventClick(e,t){return this.trackInteraction(e,t,"click")}async trackFavorite(e,t,r){return this.trackInteraction(e,t,r?"favorite_add":"favorite_remove")}async trackShare(e,t){return this.trackInteraction(e,t,"share")}async trackSearch(e,t,r){if(e&&t)try{const{error:t}=await Vi.from("user_interactions").insert([{user_id:e,interaction_type:"search",duration_seconds:r,created_at:(new Date).toISOString()}])}catch(n){}}async getUserInteractions(e,t=100){try{const{data:r,error:n}=await Vi.from("user_interactions").select("*").eq("user_id",e).order("created_at",{ascending:!1}).limit(t);if(n)throw n;return r||[]}catch(r){return[]}}cleanup(){this.eventViewStartTime={},this.flushInterval&&(clearInterval(this.flushInterval),this.flushInterval=null)}};const Jl=new class{async getPersonalizedRecommendations(e,t,r=10){if(!e||!t||0===t.length)return t.slice(0,r);try{const n=await Kl.getUserInteractions(e,200),{data:s}=await Vi.from("favorites").select("event_id").eq("user_id",e),a=new Set(s?.map(e=>e.event_id)||[]),i=t.map(e=>{let r=0;const s=this.getDaysUntilEvent(e.date);return s>=0&&s<=30&&(r+=.5*(30-s)),r+=this.getCategoryScore(e,n,a),r+=this.getLocationScore(e,n),r+=this.getPriceScore(e,n),r+=this.getPopularityScore(e,n),r-=this.getViewPenalty(e.id,n),a.size>0&&(r+=this.getSimilarityScore(e,t,a)),r+=this.getTrendingScore(e),{...e,recommendationScore:r}}).sort((e,t)=>t.recommendationScore-e.recommendationScore).slice(0,r),o=Array.from(new Map(i.map(e=>[e.id,e])).values());return i.length,o.length,o}catch(n){return t.slice(0,r)}}getDaysUntilEvent(e){const t=new Date,r=new Date(e).getTime()-t.getTime();return Math.ceil(r/864e5)}getCategoryScore(e,t,r){let n=0;const s={};return t.forEach(t=>{const r=this.getInteractionWeight(t.interaction_type);s[e.category_id]||(s[e.category_id]=0),s[e.category_id]+=r}),s[e.category_id]&&(n+=Math.min(2*s[e.category_id],20)),n}getLocationScore(e,t){return t.forEach(e=>{"view"===e.interaction_type||e.interaction_type}),5}getPriceScore(e,t){t.forEach(e=>{"favorite_add"===e.interaction_type||e.interaction_type});const r=e.price||0;return 0===r?10:r<=5e4?8:r<=1e5?5:2}getPopularityScore(e,t){const r=t.filter(t=>t.event_id===e.id);return r.length>=50?15:r.length>=20?10:r.length>=10?5:2}getViewPenalty(e,t){const r=t.filter(t=>t.event_id===e&&"view"===t.interaction_type);return r.length>=5?10:r.length>=3?5:r.length>=2?2:0}getSimilarityScore(e,t,r){let n=0;return t.filter(e=>r.has(e.id)).forEach(t=>{t.category_id===e.category_id&&(n+=5);const r=Math.abs((t.price||0)-(e.price||0)),s=((t.price||0)+(e.price||0))/2;s>0&&r/s<=.3&&(n+=3),n+=2}),Math.min(n,25)}getTrendingScore(e){const t=new Date(e.created_at),r=new Date,n=Math.floor((r-t)/864e5);return n<=7?8:n<=14?4:0}getInteractionWeight(e){return{favorite_add:10,click:5,view:2,share:15,favorite_remove:-5}[e]||1}async getSimilarEvents(e,t,r=5){if(!e||!t)return[];return t.filter(t=>t.id!==e.id).map(t=>{let r=0;t.category_id===e.category_id&&(r+=50);const n=Math.abs((t.price||0)-(e.price||0)),s=((t.price||0)+(e.price||0))/2;(0===s||n/s<=.3)&&(r+=20);return Math.abs(new Date(t.date).getTime()-new Date(e.date).getTime())/864e5<=7&&(r+=15),{...t,similarityScore:r}}).sort((e,t)=>t.similarityScore-e.similarityScore).slice(0,r)}async updateUserPreferences(e,t){try{const r=this.analyzeInteractions(t),{data:n,error:s}=await Vi.from("user_preferences").upsert({user_id:e,preferred_categories:r.categories,preferred_locations:r.locations,preferred_price_range:r.priceRange,preferred_days:r.days,last_updated:(new Date).toISOString()});if(s)throw s;return n}catch(r){}}analyzeInteractions(e){const t=[],r={};return e.forEach(e=>{const t=new Date(e.created_at).getDay();r[t]=(r[t]||0)+1}),{categories:Object.entries({}).sort((e,t)=>t[1]-e[1]).slice(0,5).map(([e,t])=>({id:e,weight:t})),locations:Object.entries({}).sort((e,t)=>t[1]-e[1]).slice(0,5),priceRange:t.length>0?{min:Math.min(...t),max:Math.max(...t),avg:t.reduce((e,t)=>e+t,0)/t.length}:{min:0,max:1e5},days:Object.entries(r).sort((e,t)=>t[1]-e[1]).map(([e])=>parseInt(e))}}},Yl=e=>{if(!e)return"upcoming";const t=new Date(e),r=(new Date-t)/36e5;return r<0?"upcoming":r>=0&&r<4?"ongoing":r>=4&&r<6?"finished":"archived"},Xl=async()=>{try{const{data:e,error:t}=await Vi.rpc("cleanup_archived_events");if(t)throw t;return{success:!0,deletedCount:e}}catch(e){return{success:!1,error:e}}},Zl=()=>(Xl(),setInterval(()=>{Xl(),(async()=>{try{const{data:e,error:t}=await Vi.rpc("update_event_statuses");if(t)throw t;return{success:!0,data:e}}catch(e){return{success:!1,error:e}}})()},36e5),()=>{}),ec=({event:t,className:r="",showAllStates:n=!1})=>{if(!t||!t.start_date)return null;const s=t.clientStatus||t.live_status||Yl(t.start_date),a=(e=>{const t={upcoming:{label:"Prximamente",emoji:"",color:"blue",bgColor:"bg-blue-100",textColor:"text-blue-800",borderColor:"border-blue-300"},ongoing:{label:"En vivo",emoji:"",color:"red",bgColor:"bg-red-100",textColor:"text-red-800",borderColor:"border-red-300",animate:"animate-pulse"},finished:{label:"Finalizado",emoji:"",color:"green",bgColor:"bg-green-100",textColor:"text-green-800",borderColor:"border-green-300"},archived:{label:"Archivado",emoji:"",color:"gray",bgColor:"bg-gray-100",textColor:"text-gray-600",borderColor:"border-gray-300"}};return t[e]||t.upcoming})(s);if(!n&&("upcoming"===s||"archived"===s))return null;const i={ongoing:{gradient:"bg-gradient-to-r from-red-500 via-red-600 to-pink-600",text:"text-white",border:"border-red-300",shadow:"shadow-lg shadow-red-500/50",animate:"animate-pulse",glow:"before:absolute before:inset-0 before:rounded-full before:bg-red-500 before:blur-lg before:opacity-30"},finished:{gradient:"bg-gradient-to-r from-green-500 to-emerald-600",text:"text-white",border:"border-green-300",shadow:"shadow-md shadow-green-500/30",glow:""},upcoming:{gradient:"bg-gradient-to-r from-blue-500 to-cyan-600",text:"text-white",border:"border-blue-300",shadow:"shadow-md shadow-blue-500/30",glow:""},archived:{gradient:"bg-gradient-to-r from-gray-400 to-gray-500",text:"text-white",border:"border-gray-300",shadow:"",glow:""}},o=i[s]||i.upcoming;return e.jsx("div",{className:`relative inline-flex ${r}`,children:e.jsxs("div",{className:`\n          relative inline-flex items-center gap-2 px-4 py-1.5 rounded-full text-xs font-bold\n          ${o.gradient} ${o.text} ${o.border} border-2\n          ${o.shadow} ${o.animate||""}\n          ${o.glow}\n          backdrop-blur-sm transform transition-all duration-300 hover:scale-105\n        `,children:[e.jsx("span",{className:"text-base "+("ongoing"===s?"animate-bounce":""),children:a.emoji}),e.jsx("span",{className:"uppercase tracking-wide",children:a.label}),"ongoing"===s&&e.jsxs("span",{className:"flex h-2 w-2 relative",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-white opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-white"})]})]})})},tc=({allEvents:t,onEventClick:r,renderEventCard:n,limit:s=6})=>{const a=Pe(),{user:i}=Qi(),[o,l]=_e.useState([]),[c,u]=_e.useState(!0);_e.useEffect(()=>{d()},[t,i]);const d=async()=>{if(!t||0===t.length)return l([]),void u(!1);u(!0);try{if(i){const e=await Jl.getPersonalizedRecommendations(i.id,t,s),r=Array.from(new Map(e.map(e=>[e.id,e])).values());l(r)}else{const e=[...t].filter(e=>new Date(e.date)>=new Date).sort((e,t)=>new Date(e.date)-new Date(t.date)).slice(0,s),r=Array.from(new Map(e.map(e=>[e.id,e])).values());l(r)}}catch(e){const r=t.filter(e=>new Date(e.date)>=new Date).slice(0,s),n=Array.from(new Map(r.map(e=>[e.id,e])).values());l(n)}finally{u(!1)}};return c?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(_,{className:"w-10 h-10 text-white animate-spin mx-auto mb-4"}),e.jsx("p",{className:"text-white text-lg",children:"Generando recomendaciones personalizadas..."}),e.jsx("p",{className:"text-white/60 text-sm mt-2",children:"Analizando tus preferencias con IA "})]}):0===o.length?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(b,{className:"w-16 h-16 text-white/40 mx-auto mb-4"}),e.jsx("p",{className:"text-white text-lg",children:"No hay recomendaciones disponibles"}),e.jsx("p",{className:"text-white/60 text-sm mt-2",children:"Explora eventos para que podamos recomendarte ms"})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-gradient-to-r from-purple-600 to-pink-600 rounded-xl flex items-center justify-center",children:e.jsx(b,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:i?"Recomendado para ti":"Eventos Destacados"}),e.jsx("p",{className:"text-sm text-white/70",children:i?"Basado en tus intereses y preferencias":"Los eventos ms populares del momento"})]})]}),i&&e.jsxs("div",{className:"hidden md:flex items-center gap-2 px-4 py-2 bg-white/10 rounded-lg backdrop-blur-sm",children:[e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"}),e.jsx("span",{className:"text-xs text-white font-medium",children:"IA Activa"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map((t,s)=>e.jsxs("div",{className:"relative cursor-pointer",onClick:()=>{return e=t.id,void(r?r(e):a(`/events/${e}`));var e},children:[i&&s<3&&e.jsxs("div",{className:"absolute -top-2 -right-2 z-10 bg-gradient-to-r from-yellow-400 to-orange-500 text-white text-xs font-bold px-3 py-1 rounded-full shadow-lg flex items-center gap-1",children:[e.jsx(b,{className:"w-3 h-3"}),"TOP ",s+1]}),n?n(t,!0):e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 shadow-lg border border-white/50 hover:shadow-xl hover:scale-[1.02] transition-all",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("h3",{className:"font-bold text-lg text-gray-800 flex-1",children:t.title}),e.jsx(ec,{event:t})]}),e.jsx("p",{className:"text-gray-600 text-sm mb-2 line-clamp-2",children:t.description}),e.jsxs("p",{className:"text-purple-600 text-sm",children:[" ",t.location]}),e.jsxs("p",{className:"text-gray-500 text-sm",children:[" ",new Date(t.date).toLocaleDateString("es-ES")]}),void 0!==t.price&&e.jsx("p",{className:"text-green-600 font-semibold text-sm mt-2",children:0===t.price?"Gratis":`$${t.price}`})]}),i&&t.recommendationScore&&!1]},`recommended-${t.id}-${s}`))}),i&&e.jsx("div",{className:"mt-8 p-4 bg-white/10 rounded-xl border border-white/20 backdrop-blur-sm",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(N,{className:"w-5 h-5 text-yellow-400 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-white text-sm mb-1",children:"Cmo funcionan las recomendaciones?"}),e.jsx("p",{className:"text-white/70 text-xs",children:"Nuestro sistema de IA analiza tus interacciones, favoritos y preferencias para sugerirte eventos que realmente te van a interesar. Mientras ms uses la app, mejores sern las recomendaciones. "})]})]})})]})},rc=({events:t=[],isOpen:r,onClose:n,userPreferences:s={}})=>{const[a,i]=_e.useState([{role:"assistant",content:"Hola!  Soy tu asistente de EventRadar. Qu tipo de evento ests buscando hoy?",timestamp:new Date}]),[o,l]=_e.useState(""),[c,d]=_e.useState(!1),[h,p]=_e.useState([]),f=_e.useRef(null),m=Pe();_e.useEffect(()=>{f.current?.scrollIntoView({behavior:"smooth"})},[a]);const g=async()=>{if(!o.trim()||c)return;const e={role:"user",content:o,timestamp:new Date};i(t=>[...t,e]);const r=o;l(""),d(!0);try{const e=await Ql.chatWithAssistant(r,t,s),n={role:"assistant",content:e.message||e.reply||e.description||"",suggestedEvents:e.suggestedEvents||[],timestamp:new Date,variations:e.variants||e.descriptions||null};if(i(e=>[...e,n]),e.suggestedEvents&&e.suggestedEvents.length>0){const r=t.filter(t=>e.suggestedEvents.includes(t.id));p(r)}n.variations&&n.variations.length>0&&i(e=>[...e,{role:"assistant",content:"He generado varias versiones. Puedes tocar una para copiarla al cuadro de texto y editarla antes de publicar.",timestamp:new Date}])}catch(n){const e={role:"assistant",content:((e,t)=>{const r=e.toLowerCase();if(r.match(/(hablar con|contactar|supervisor|ejecutivo|humano|persona real|agente|ayuda humana|asistente humano)/))return" Claro! Si necesitas hablar con un asistente humano, contctanos directamente:\n\n Email: contactoempresa@eventradar.com\n\nNuestro equipo te ayudar personalmente. Hay algo ms que pueda hacer por ti mientras tanto?";if(r.includes("msica")||r.includes("concierto")||r.includes("music")){const e=t.filter(e=>e.event_categories?.name?.toLowerCase().includes("msica")||e.title?.toLowerCase().includes("msica")||e.title?.toLowerCase().includes("concierto"));return e.length>0?` Encontr ${e.length} eventos de msica. Te recomiendo "${e[0].title}" - ${e[0].location}. Quieres ver ms opciones de msica?`:' Los eventos de msica son muy populares. Filtra por categora "Msica" en la pgina principal para ver todos los conciertos disponibles. Te interesa algn gnero especfico?'}if(r.includes("gratis")||r.includes("free")||r.includes("sin costo")){const e=t.filter(e=>0===e.price||"0"===e.price);return e.length>0?` Hay ${e.length} eventos gratuitos! Te sugiero "${e[0].title}". Usa el filtro de precio "$0" en la pgina principal para verlos todos.`:' Para eventos gratuitos, usa el filtro de precio y selecciona "$0". Siempre hay eventos sin costo disponibles!'}if(r.includes("hoy")||r.includes("today")){const e=(new Date).toISOString().split("T")[0],r=t.filter(t=>t.date?.startsWith(e));return r.length>0?` Hay ${r.length} eventos hoy! "${r[0].title}" en ${r[0].location}. Quieres ms detalles?`:" Para eventos de hoy, usa el filtro de fecha en la pgina principal. Revisa qu est pasando ahora!"}if(r.includes("fin de semana")||r.includes("weekend")||r.includes("sbado")||r.includes("domingo"))return" Los fines de semana estn llenos de eventos. Usa el filtro de fecha para ver todo lo disponible para sbado y domingo. Prefieres eventos de da o de noche?";if(r.includes("deporte")||r.includes("ftbol")||r.includes("basketball")||r.includes("sport")){const e=t.filter(e=>e.event_categories?.name?.toLowerCase().includes("deporte")||e.title?.toLowerCase().includes("deporte")||e.title?.toLowerCase().includes("ftbol"));return e.length>0?` Hay ${e.length} eventos deportivos. "${e[0].title}" podra interesarte. Filtra por "Deportes" para ver partidos y torneos.`:' Revisa la categora "Deportes" para ver partidos, torneos y actividades deportivas. Buscas algo especfico como ftbol o basketball?'}if(r.includes("gastronoma")||r.includes("comida")||r.includes("food")||r.includes("restaurant")){const e=t.filter(e=>e.event_categories?.name?.toLowerCase().includes("gastronoma")||e.title?.toLowerCase().includes("gastronm"));return e.length>0?` Tengo ${e.length} eventos gastronmicos. "${e[0].title}" se ve delicioso. Quieres conocer ms opciones culinarias?`:' Los eventos gastronmicos estn en la categora "Gastronoma". Encuentra festivales de comida, catas y experiencias culinarias. Alguna cocina en particular?'}if(r.includes("arte")||r.includes("art")||r.includes("exposicin"))return' Los eventos de arte estn en pleno auge. Filtra por "Arte" para ver exposiciones, galeras y talleres creativos. Prefieres arte contemporneo o clsico?';const n=[];return t.length>0&&(n.push(`"${t[0].title}"`),t.length>1&&n.push(`"${t[1].title}"`)),n.length>0?` Puedo ayudarte a encontrar eventos. Algunos populares: ${n.join(", ")}. Prueba buscar por categora (msica, deportes, arte, gastronoma) o pregntame sobre eventos gratuitos, de hoy, o del fin de semana.\n\n Necesitas ayuda especfica? Contctanos: contactoempresa@eventradar.com`:" Hola! Puedo ayudarte a encontrar eventos. Prueba preguntando por:\n Msica o conciertos\n Deportes\n Arte\n Gastronoma\n Eventos gratuitos\n Eventos de hoy o del fin de semana\n\nQu te interesa?\n\n Si no encuentro lo que buscas, escrbenos a: contactoempresa@eventradar.com"})(r,t),timestamp:new Date};i(t=>[...t,e])}finally{d(!1)}};return r?e.jsx(S,{children:e.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},className:"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-end md:items-center justify-center p-4",onClick:n,children:e.jsxs(u.div,{initial:{y:"100%",opacity:0},animate:{y:0,opacity:1},exit:{y:"100%",opacity:0},transition:{type:"spring",damping:25,stiffness:200},className:"w-full max-w-2xl h-[600px] bg-gradient-to-br from-purple-900/95 via-indigo-900/95 to-blue-900/95 backdrop-blur-xl rounded-2xl shadow-2xl overflow-hidden flex flex-col border border-white/20",onClick:e=>e.stopPropagation(),children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-600 to-blue-600 p-6 flex items-center justify-between border-b border-white/20",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-12 h-12 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm animate-pulse",children:e.jsx(E,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-xl font-bold text-white flex items-center gap-2",children:["EventAssistant",e.jsx(b,{className:"w-5 h-5 text-yellow-300 animate-pulse"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("p",{className:"text-sm text-white/80",children:["Powered by ",Ql.getModelName()]}),Ql.isConfigured()&&e.jsxs("span",{className:`\n                      text-xs px-2 py-0.5 rounded-full font-semibold\n                      ${"gemini"===Ql.getProvider()?"bg-green-500/20 text-green-300 border border-green-400/30":""}\n                      ${"deepseek"===Ql.getProvider()?"bg-blue-500/20 text-blue-300 border border-blue-400/30":""}\n                      ${"openai"===Ql.getProvider()?"bg-purple-500/20 text-purple-300 border border-purple-400/30":""}\n                    `,children:["gemini"===Ql.getProvider()&&" Gemini","deepseek"===Ql.getProvider()&&" DeepSeek","openai"===Ql.getProvider()&&" OpenAI"]}),!Ql.isConfigured()&&e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full font-semibold bg-yellow-500/20 text-yellow-300 border border-yellow-400/30",children:" No configurado"})]})]})]}),e.jsx("button",{onClick:n,className:"p-2 rounded-full bg-white/10 hover:bg-white/20 transition-colors",children:e.jsx(y,{className:"w-5 h-5 text-white"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[a.map((r,s)=>e.jsxs("div",{className:"flex gap-3 "+("user"===r.role?"justify-end":"justify-start"),children:["assistant"===r.role&&e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-500 to-blue-500 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(E,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{className:"max-w-[80%] rounded-2xl p-4 "+("user"===r.role?"bg-gradient-to-r from-blue-500 to-purple-500 text-white":"bg-white/10 backdrop-blur-sm text-white border border-white/20"),children:[e.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:r.content}),r.suggestedEvents&&r.suggestedEvents.length>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-white/20 space-y-2",children:[e.jsx("p",{className:"text-xs font-semibold text-white/80",children:"Eventos sugeridos:"}),t.filter(e=>r.suggestedEvents.includes(e.id)).map(t=>e.jsxs("button",{onClick:()=>{return e=t.id,m(`/events/${e}`),void(n&&n());var e},className:"w-full text-left p-2 rounded-lg bg-white/5 hover:bg-white/10 transition-colors border border-white/10",children:[e.jsx("p",{className:"text-sm font-semibold text-white",children:t.title}),e.jsxs("p",{className:"text-xs text-white/70",children:[t.event_categories?.name,"  $",t.price]})]},t.id))]}),e.jsx("p",{className:"text-xs text-white/50 mt-2",children:r.timestamp.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})})]}),"user"===r.role&&e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-green-500 to-blue-500 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(v,{className:"w-5 h-5 text-white"})})]},s)),c&&e.jsxs("div",{className:"flex gap-3 justify-start",children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-br from-purple-500 to-blue-500 rounded-full flex items-center justify-center",children:e.jsx(_,{className:"w-5 h-5 text-white animate-spin"})}),e.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-4 border border-white/20",children:e.jsxs("div",{className:"flex gap-2",children:[e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"0ms"}}),e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"150ms"}}),e.jsx("div",{className:"w-2 h-2 bg-white rounded-full animate-bounce",style:{animationDelay:"300ms"}})]})})]}),e.jsx("div",{ref:f})]}),a.length<=2&&e.jsxs("div",{className:"px-6 pb-4",children:[e.jsx("p",{className:"text-xs text-white/60 mb-2",children:"Acciones rpidas:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:[" Eventos de msica este fin de semana"," Eventos de arte gratis"," Eventos deportivos en Santiago"," Eventos gastronmicos"].map((t,r)=>e.jsx("button",{onClick:()=>(e=>{l(e)})(t),className:"px-3 py-1.5 bg-white/10 hover:bg-white/20 rounded-full text-xs text-white transition-colors border border-white/20",children:t},r))})]}),e.jsx("div",{className:"p-6 border-t border-white/20 bg-black/20",children:e.jsxs("div",{className:"flex gap-3",children:[e.jsx("input",{type:"text",value:o,onChange:e=>l(e.target.value),onKeyPress:e=>"Enter"===e.key&&g(),placeholder:"Escribe tu pregunta sobre eventos...",className:"flex-1 px-4 py-3 bg-white/10 border border-white/20 rounded-xl text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-purple-400 backdrop-blur-sm",disabled:c}),e.jsx(El,{onClick:g,disabled:c||!o.trim(),className:"px-6 py-3 bg-gradient-to-r from-purple-500 to-blue-500 hover:from-purple-600 hover:to-blue-600 text-white rounded-xl transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:c?e.jsx(_,{className:"w-5 h-5 animate-spin"}):e.jsx(C,{className:"w-5 h-5"})})]})})]})})}):null},nc=({notification:t,onClose:r,onEventClick:n})=>{const[s,a]=_e.useState(!1),[i,o]=_e.useState(!1),l=Pe();_e.useEffect(()=>{const e=setTimeout(()=>{a(!0)},100),t=setTimeout(()=>{c()},1e4);return()=>{clearTimeout(e),clearTimeout(t)}},[]);const c=()=>{o(!0),setTimeout(()=>{r()},300)};if(!t)return null;const u=(()=>{const e={red:{bg:"bg-gradient-to-r from-red-500 to-pink-500",border:"border-red-400",text:"text-red-50"},orange:{bg:"bg-gradient-to-r from-orange-500 to-amber-500",border:"border-orange-400",text:"text-orange-50"},purple:{bg:"bg-gradient-to-r from-purple-500 to-pink-500",border:"border-purple-400",text:"text-purple-50"},blue:{bg:"bg-gradient-to-r from-blue-500 to-cyan-500",border:"border-blue-400",text:"text-blue-50"},indigo:{bg:"bg-gradient-to-r from-indigo-500 to-purple-500",border:"border-indigo-400",text:"text-indigo-50"}};return e[t.color]||e.indigo})();return e.jsxs("div",{className:`\n        fixed bottom-4 right-4 z-[9999] max-w-sm w-full\n        transform transition-all duration-300 ease-out\n        ${s&&!i?"translate-y-0 opacity-100":"translate-y-full opacity-0"}\n      `,style:{marginBottom:"env(safe-area-inset-bottom)"},children:[e.jsx("div",{className:`\n          ${u.bg} ${u.border}\n          rounded-xl shadow-2xl border-2\n          backdrop-blur-lg\n          overflow-hidden\n          cursor-pointer\n          hover:scale-105 transition-transform duration-200\n        `,onClick:()=>{t.event?.id?l("/dashboard",{state:{activeTab:"eventos",highlightEventId:t.event.id}}):l("/dashboard",{state:{activeTab:"eventos"}}),c()},children:e.jsxs("div",{className:"p-4 relative",children:[e.jsx("button",{onClick:e=>{e.stopPropagation(),c()},className:"absolute top-2 right-2 p-1 rounded-full bg-white/20 hover:bg-white/30 transition-colors",children:e.jsx(y,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{className:"flex items-start gap-3 pr-6",children:[e.jsx("div",{className:"flex-shrink-0 mt-0.5",children:e.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm",children:e.jsx("span",{className:"text-2xl",children:t.emoji})})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[(()=>{switch(t.type){case"event_starting":return e.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-full animate-pulse"});case"event_expiring":return e.jsx(P,{className:"w-5 h-5"});case"favorite_reminder":default:return e.jsx(O,{className:"w-5 h-5"});case"new_in_category":case"recommendation":return e.jsx(b,{className:"w-5 h-5"});case"trending":return e.jsx(N,{className:"w-5 h-5"})}})(),e.jsx("h4",{className:`font-bold text-sm ${u.text}`,children:t.title})]}),e.jsx("p",{className:`text-sm ${u.text} opacity-95 leading-snug`,children:t.message}),t.event&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-white/20",children:[e.jsxs("div",{className:"flex items-center gap-2 text-xs text-white/90",children:[t.event.event_categories&&e.jsxs("span",{className:"px-2 py-0.5 bg-white/20 rounded-full",children:[t.event.event_categories.icon," ",t.event.event_categories.name]}),t.event.price>0&&e.jsxs("span",{className:"px-2 py-0.5 bg-white/20 rounded-full",children:[" $",t.event.price]})]}),e.jsxs("p",{className:"text-xs text-white/75 mt-1 flex items-center gap-1",children:[e.jsx(T,{className:"w-3 h-3"}),new Date(t.event.date).toLocaleDateString("es-ES",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})]})]}),e.jsxs("div",{className:"mt-3 flex gap-2",children:[t.event?.id&&e.jsx("button",{onClick:e=>{e.stopPropagation(),l("/dashboard",{state:{activeTab:"eventos",highlightEventId:t.event.id}}),c()},className:"flex-1 px-3 py-1.5 bg-white/20 hover:bg-white/30 rounded-lg text-xs font-semibold text-white transition-all backdrop-blur-sm border border-white/30",children:" Ver Evento"}),e.jsx("button",{onClick:e=>{e.stopPropagation(),l("/dashboard",{state:{activeTab:"eventos"}}),c()},className:"flex-1 px-3 py-1.5 bg-white/20 hover:bg-white/30 rounded-lg text-xs font-semibold text-white transition-all backdrop-blur-sm border border-white/30",children:" Ver Todos"})]})]})]}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-white/20",children:e.jsx("div",{className:"h-full bg-white/50 animate-shrink-width",style:{animation:"shrinkWidth 10s linear forwards"}})})]})}),e.jsx("style",{jsx:!0,children:"\n        @keyframes shrinkWidth {\n          from {\n            width: 100%;\n          }\n          to {\n            width: 0%;\n          }\n        }\n        .animate-shrink-width {\n          animation: shrinkWidth 10s linear forwards;\n        }\n      "})]})},sc="recommendation",ac="favorite_reminder",ic="event_starting",oc="event_expiring",lc="new_in_category",cc="trending",uc=e=>{const t={};return e.forEach(e=>{e.metadata?.category&&(t[e.metadata.category]=(t[e.metadata.category]||0)+1)}),Object.entries(t).sort((e,t)=>t[1]-e[1]).slice(0,3).map(([e])=>e)},dc=()=>{const e=localStorage.getItem("shown_notifications");if(!e)return[];try{const t=JSON.parse(e),r=Date.now()-864e5;return t.filter(e=>e.timestamp>r).map(e=>e.id)}catch{return[]}},hc=e=>{const t=localStorage.getItem("shown_notifications");let r=[];try{r=t?JSON.parse(t):[]}catch{r=[]}r.push({id:e,timestamp:Date.now()});const n=Date.now()-864e5;r=r.filter(e=>e.timestamp>n),localStorage.setItem("shown_notifications",JSON.stringify(r))},pc=({allEvents:t})=>{const{user:r}=Qi(),n=Pe(),[s,a]=_e.useState(null),[i,o]=_e.useState(Date.now());_e.useEffect(()=>{if(!r||!t||0===t.length)return;const e=()=>{o(Date.now())};window.addEventListener("mousemove",e),window.addEventListener("keydown",e),window.addEventListener("click",e),window.addEventListener("scroll",e);const n=setTimeout(()=>{l()},3e4),s=setInterval(()=>{l()},48e4);return()=>{clearTimeout(n),clearInterval(s),window.removeEventListener("mousemove",e),window.removeEventListener("keydown",e),window.removeEventListener("click",e),window.removeEventListener("scroll",e)}},[r,t]);const l=async()=>{if(!((Date.now()-i)/1e3/60>5||s))try{const e=await(async(e,t)=>{try{const r=dc(),{data:n}=await Vi.from("favorites").select("event_id").eq("user_id",e),s=new Set(n?.map(e=>e.event_id)||[]),{data:a}=await Vi.from("user_interactions").select("*").eq("user_id",e).order("created_at",{ascending:!1}).limit(50),i=uc(a||[]),o=[],l=t.find(e=>!!s.has(e.id)&&(!r.includes(`starting_${e.id}`)&&"ongoing"===Yl(e.start_date)));l&&o.push({type:ic,priority:10,event:l,title:" Evento en vivo!",message:`"${l.title}" acaba de comenzar. No te lo pierdas!`,emoji:"",color:"red",trackingId:`starting_${l.id}`});const c=t.find(e=>{if(r.includes(`expiring_${e.id}`))return!1;if("finished"!==Yl(e.start_date))return!1;const t=new Date(e.start_date),n=(new Date-t)/36e5;return n>=4&&n<5.5});c&&o.push({type:oc,priority:9,event:c,title:" ltima oportunidad",message:`"${c.title}" se eliminar pronto. Lo revisaste?`,emoji:"",color:"orange",trackingId:`expiring_${c.id}`});const u=t.find(e=>{if(!s.has(e.id))return!1;if(r.includes(`reminder_${e.id}`))return!1;const t=(new Date(e.start_date||e.date)-new Date)/36e5;return t>2&&t<24});if(u){const e=new Date(u.start_date||u.date),t=new Date,r=Math.floor((e-t)/36e5);o.push({type:ac,priority:8,event:u,title:" Recordatorio de favorito",message:`"${u.title}" empieza en ${r} horas`,emoji:"",color:"purple",trackingId:`reminder_${u.id}`})}const d=t.find(e=>{if(r.includes(`new_${e.id}`))return!1;const t=new Date(e.created_at);if((new Date-t)/36e5>24)return!1;const n=e.event_categories?.name;return i.includes(n)});d&&o.push({type:lc,priority:6,event:d,title:" Nuevo evento para ti",message:`Nuevo evento de ${d.event_categories?.name}: "${d.title}"`,emoji:"",color:"blue",trackingId:`new_${d.id}`});const{data:h}=await Vi.from("event_popularity").select("event_id, trending_score").order("trending_score",{ascending:!1}).limit(5),p=t.find(e=>!r.includes(`trending_${e.id}`)&&!s.has(e.id)&&h?.some(t=>t.event_id===e.id&&t.trending_score>50));p&&o.push({type:cc,priority:5,event:p,title:" Evento popular",message:`"${p.title}" est siendo muy popular. chale un vistazo!`,emoji:"",color:"orange",trackingId:`trending_${p.id}`});const f=(await Jl.getPersonalizedRecommendations(e,t,10)).find(e=>!r.includes(`rec_${e.id}`)&&!s.has(e.id)&&e.recommendationScore>40);if(f&&o.push({type:sc,priority:4,event:f,title:" Recomendado para ti",message:`Basado en tus gustos: "${f.title}"`,emoji:"",color:"indigo",trackingId:`rec_${f.id}`}),o.sort((e,t)=>t.priority-e.priority),0===o.length){const e=t.find(e=>!r.includes(`fallback_${e.id}`)&&"upcoming"===Yl(e.start_date||e.date));return e?(hc(`fallback_${e.id}`),{type:sc,priority:3,event:e,title:" Descubre este evento",message:`Ya conoces "${e.title}"? Podra interesarte!`,emoji:"",color:"indigo",trackingId:`fallback_${e.id}`}):null}const m=o[0];return hc(m.trackingId),m}catch(r){return null}})(r.id,t);e&&a(e)}catch(e){}};return s?e.jsx(nc,{notification:s,onClose:()=>{a(null)},onEventClick:e=>{n(`/events/${e}`),a(null)}}):null},fc=({isOpen:t,onClose:r,context:n={}})=>{const[s,a]=_e.useState([{role:"assistant",content:"Hola!  Soy el asistente de EventRadar. Estoy aqu para ayudarte con cualquier duda sobre nuestros planes de suscripcin, caractersticas y pagos. En qu puedo ayudarte?",timestamp:new Date}]),[i,o]=_e.useState(""),[l,c]=_e.useState(!1),d=_e.useRef(null),h=_e.useRef(null);_e.useEffect(()=>{d.current?.scrollIntoView({behavior:"smooth"})},[s]),_e.useEffect(()=>{t&&h.current&&h.current.focus()},[t]);const p=async()=>{if(!i.trim()||l)return;const e={role:"user",content:i,timestamp:new Date};a(t=>[...t,e]);const t=i;o(""),c(!0);try{const e=await fetch("/api/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:t,context:n,conversationHistory:s.slice(-6)}),signal:AbortSignal.timeout(5e3)});if(!e.ok)throw new Error("Error en la respuesta del servidor");const r=await e.json(),i={role:"assistant",content:r.reply,sources:r.sources,variations:r.reply_variations,timestamp:new Date};a(e=>[...e,i])}catch(r){const e=(e=>{const t=e.toLowerCase();return t.match(/(hablar con|contactar|supervisor|ejecutivo|humano|persona real|agente|ayuda humana|asistente humano)/)?{reply:" Por supuesto! Si necesitas hablar con un asistente humano, puedes contactarnos directamente:\n\n Email: contactoempresa@eventradar.com\n\nNuestro equipo te responder lo antes posible para ayudarte con tu consulta. Hay algo ms en lo que pueda ayudarte mientras tanto?",variations:["Claro, te conectamos con nuestro equipo. Escrbenos a contactoempresa@eventradar.com y un ejecutivo te atender personalmente.","Entendido. Para atencin personalizada, comuncate con nosotros en contactoempresa@eventradar.com. Estaremos encantados de ayudarte!"]}:t.includes("precio")||t.includes("costo")||t.includes("plan")?{reply:"El plan Bsico cuesta $5 por evento (packs 3x $12, 5x $18). El plan Destacado cuesta $15 (packs 3x $36, 5x $54) y el Premium $30 (packs 3x $72, 5x $108). Te ayudo a elegir el mejor para ti?",variations:["Bsico $5  Destacado $15  Premium $30. Todos con paquetes 3x (20% descuento) y 5x (28% descuento). Cuntos eventos necesitas promocionar?","Para eventos pequeos: Bsico $5. Para eventos medianos/populares: Destacado $15 (mejor relacin). Para eventos masivos: Premium $30 con mxima visibilidad."]}:t.includes("destacado")||t.includes("featured")?{reply:"El plan Destacado ($15) incluye: badge , siempre visible en mapa, +100% boost en recomendaciones, notificaciones push a usuarios cercanos, Top 5 en listados y analticas completas. Es nuestro plan ms popular!",variations:["Destacado es ideal para eventos medianos: apareces siempre en el mapa, envas notificaciones a personas cercanas y obtienes mtricas detalladas. $15 por evento o pack de 5x $54.","Con Destacado duplicas tu visibilidad vs plan Bsico: +100% boost, geofencing inteligente y analticas en tiempo real. Perfecto para conciertos, talleres y eventos culturales."]}:t.includes("gratis")||t.includes("free")||t.includes("sin costo")?{reply:"S! Puedes publicar eventos GRATIS. El plan gratuito incluye: ver eventos ilimitados, guardar favoritos, recomendaciones IA y aparicin en la pestaa Eventos. Para aparecer garantizado en el mapa necesitas plan Bsico o superior.",variations:["Plan Gratis: publica eventos sin costo, pero la aparicin en mapa no est garantizada (solo si hay espacio). Sin notificaciones ni analticas.","Publicar es gratis, promocionar es desde $5. El plan gratuito te permite listar eventos, pero para visibilidad en mapa y notificaciones necesitas un plan de pago."]}:t.includes("pago")||t.includes("tarjeta")||t.includes("mercado pago")||t.includes("stripe")?{reply:"Aceptamos tarjetas de crdito/dbito (Visa, Mastercard, Amex) va Stripe, y tambin Mercado Pago para Latinoamrica. Todos los pagos son seguros con encriptacin PCI DSS Level 1. ",variations:["Mtodos de pago:  Tarjetas (Stripe)   Mercado Pago. Procesamos pagos de forma segura y recibes confirmacin instantnea por email.","Puedes pagar con cualquier tarjeta o usar Mercado Pago. Los datos de tarjeta nunca se almacenan en nuestros servidores, solo en los procesadores certificados."]}:t.includes("premium")||t.includes("mejor")?{reply:"Plan Premium ($30): badge , mxima prioridad en mapa, +200% boost, notificaciones push a TODOS los usuarios, ventana emergencial promocional, dashboard avanzado de analticas y estilo personalizado. Ideal para eventos masivos y corporativos.",variations:["Premium es el plan top: tus eventos aparecen primero siempre, notificas a toda la base de usuarios y obtienes mtricas avanzadas. Para eventos de 500+ personas.","Con Premium triplicas tu alcance: todos los usuarios reciben notificacin, tienes popup promocional y dashboard con exportacin de datos. $30 evento o 5x $108."]}:t.includes("descuento")||t.includes("ahorro")||t.includes("pack")?{reply:"S! Pack de 3 eventos: 20% descuento. Pack de 5 eventos: 28% descuento (mejor precio). Aplica a todos los planes. Ej: 5 eventos Destacados = $54 en vez de $75. Ahorras $21!",variations:["Descuentos por volumen: 3 eventos -20%  5 eventos -28%. Los paquetes no expiran, salos cuando quieras.","Mejor oferta: pack 5x con 28% off. Bsico 5x $18, Destacado 5x $54, Premium 5x $108. Perfecto para organizadores frecuentes."]}:{reply:' Hola! Puedo ayudarte con informacin sobre planes, precios y pagos de EventRadar. Qu te gustara saber? Por ejemplo: "Cunto cuesta el plan Destacado?" o "Qu mtodos de pago aceptan?"\n\n Si tu consulta requiere atencin personalizada, escrbenos a: contactoempresa@eventradar.com',variations:["Estoy aqu para ayudarte a elegir el mejor plan para tu evento. Pregntame sobre precios, caractersticas o mtodos de pago.\n\n Algo ms especfico? contactoempresa@eventradar.com","Puedo resolver tus dudas sobre: planes y precios , mtodos de pago , descuentos por paquetes , y caractersticas de cada plan \n\n Para asistencia directa: contactoempresa@eventradar.com"]}})(t),n={role:"assistant",content:e.reply,variations:e.variations,timestamp:new Date};a(e=>[...e,n])}finally{c(!1)}};return t?e.jsx(S,{children:e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:r,className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),e.jsxs(u.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"relative w-full max-w-2xl bg-gradient-to-br from-purple-900/95 via-purple-800/95 to-pink-900/95 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/10 flex flex-col max-h-[80vh]",children:[e.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-white/10",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-r from-purple-400 to-pink-600 rounded-lg",children:e.jsx(E,{className:"h-6 w-6 text-white"})}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:"Asistente EventRadar"}),e.jsx("p",{className:"text-sm text-white/60",children:"Respuestas instantneas con IA"})]})]}),e.jsx("button",{onClick:r,className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:e.jsx(y,{className:"h-6 w-6 text-white"})})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 space-y-4",children:[s.map((t,r)=>e.jsxs(u.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"flex gap-3 "+("user"===t.role?"justify-end":"justify-start"),children:["assistant"===t.role&&e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-gradient-to-r from-purple-400 to-pink-600 rounded-full flex items-center justify-center",children:e.jsx(E,{className:"h-5 w-5 text-white"})}),e.jsxs("div",{className:"max-w-[75%] rounded-2xl p-4 "+("user"===t.role?"bg-gradient-to-r from-blue-500 to-purple-600 text-white":t.isError?"bg-red-500/20 border border-red-500/50 text-white":"bg-white/10 backdrop-blur-sm text-white border border-white/10"),children:[e.jsx("p",{className:"text-sm whitespace-pre-wrap",children:t.content}),t.sources&&t.sources.length>0&&e.jsxs("div",{className:"mt-2 pt-2 border-t border-white/20",children:[e.jsx("p",{className:"text-xs text-white/60 mb-1",children:"Fuentes:"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:t.sources.map((t,r)=>e.jsx("span",{className:"text-xs bg-white/10 px-2 py-0.5 rounded",children:t},r))})]}),t.variations&&t.variations.length>0&&e.jsxs("div",{className:"mt-2 pt-2 border-t border-white/20",children:[e.jsx("p",{className:"text-xs text-white/60 mb-1",children:"Variantes sugeridas (toca para editar):"}),e.jsx("div",{className:"flex flex-col gap-2",children:t.variations.map((t,r)=>e.jsx("button",{onClick:()=>{o(t),h.current?.focus()},className:"text-sm text-left p-2 rounded bg-white/5 hover:bg-white/10 transition-colors",children:t},r))})]}),e.jsx("p",{className:"text-xs text-white/40 mt-2",children:t.timestamp.toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})})]}),"user"===t.role&&e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-gradient-to-r from-blue-500 to-purple-600 rounded-full flex items-center justify-center",children:e.jsx(v,{className:"h-5 w-5 text-white"})})]},r)),l&&e.jsxs(u.div,{initial:{opacity:0},animate:{opacity:1},className:"flex gap-3 justify-start",children:[e.jsx("div",{className:"flex-shrink-0 w-8 h-8 bg-gradient-to-r from-purple-400 to-pink-600 rounded-full flex items-center justify-center",children:e.jsx(E,{className:"h-5 w-5 text-white"})}),e.jsx("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-4 border border-white/10",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(_,{className:"h-4 w-4 text-white animate-spin"}),e.jsx("span",{className:"text-sm text-white",children:"Pensando..."})]})})]}),e.jsx("div",{ref:d})]}),1===s.length&&e.jsxs("div",{className:"px-6 pb-4",children:[e.jsx("p",{className:"text-xs text-white/60 mb-2",children:"Preguntas frecuentes:"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["Cunto cuesta el plan Destacado?","Qu mtodos de pago aceptan?","Hay descuentos por paquetes?","Qu incluye el plan Premium?"].map((t,r)=>e.jsx("button",{onClick:()=>(e=>{o(e),h.current?.focus()})(t),className:"text-xs px-3 py-1.5 bg-white/10 hover:bg-white/20 rounded-full text-white transition-colors border border-white/20",children:t},r))})]}),e.jsxs("div",{className:"p-6 border-t border-white/10",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{ref:h,type:"text",value:i,onChange:e=>o(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),p())},placeholder:"Escribe tu pregunta aqu...",disabled:l,className:"flex-1 bg-white/10 border border-white/20 rounded-lg px-4 py-3 text-white placeholder-white/40 focus:outline-none focus:ring-2 focus:ring-purple-400 disabled:opacity-50"}),e.jsx("button",{onClick:p,disabled:!i.trim()||l,className:"px-6 py-3 bg-gradient-to-r from-purple-500 to-pink-600 hover:from-purple-600 hover:to-pink-700 disabled:from-gray-500 disabled:to-gray-600 rounded-lg text-white font-medium transition-all disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:l?e.jsx(_,{className:"h-5 w-5 animate-spin"}):e.jsxs(e.Fragment,{children:[e.jsx(C,{className:"h-5 w-5"}),"Enviar"]})})]}),e.jsxs("p",{className:"text-xs text-white/40 mt-2 flex items-center gap-1",children:[e.jsx(b,{className:"h-3 w-3"}),"Impulsado por IA - Respuestas instantneas sobre planes y pagos"]})]})]})]})}):null};var mc,gc="clover",bc="https://js.stripe.com",vc="".concat(bc,"/").concat(gc,"/stripe.js"),yc=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,xc=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/,wc=function(e){return yc.test(e)||xc.test(e)},jc=function(e){var t=document.createElement("script");t.src="".concat(vc).concat("");var r=document.head||document.body;if(!r)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return r.appendChild(t),t},kc=null,_c=null,Nc=null,Sc=function(e){return null!==kc?kc:(kc=new Promise(function(t,r){if("undefined"!=typeof window&&"undefined"!=typeof document)if(window.Stripe)t(window.Stripe);else try{var n=function(){for(var e=document.querySelectorAll('script[src^="'.concat(bc,'"]')),t=0;t<e.length;t++){var r=e[t];if(wc(r.src))return r}return null}();if(n&&e);else if(n){if(n&&null!==Nc&&null!==_c){var s;n.removeEventListener("load",Nc),n.removeEventListener("error",_c),null===(s=n.parentNode)||void 0===s||s.removeChild(n),n=jc()}}else n=jc();Nc=function(e,t){return function(){window.Stripe?e(window.Stripe):t(new Error("Stripe.js not available"))}}(t,r),_c=function(e){return function(t){e(new Error("Failed to load Stripe.js",{cause:t}))}}(r),n.addEventListener("load",Nc),n.addEventListener("error",_c)}catch(a){return void r(a)}else t(null)})).catch(function(e){return kc=null,Promise.reject(e)})},Ec=function(){return mc||(mc=Sc(null).catch(function(e){return mc=null,Promise.reject(e)}))};Promise.resolve().then(function(){return Ec()}).catch(function(e){});var Cc,Tc,Oc,Pc,Ac,Rc={exports:{}};function Ic(){if(Tc)return Cc;Tc=1;return Cc="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"}function $c(){if(Pc)return Oc;Pc=1;var e=Ic();function t(){}function r(){}return r.resetWarningCache=t,Oc=function(){function n(t,r,n,s,a,i){if(i!==e){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function s(){return n}n.isRequired=n;var a={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:s,element:n,elementType:n,instanceOf:s,node:n,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:r,resetWarningCache:t};return a.PropTypes=a,a}}function Dc(){return Ac||(Ac=1,Rc.exports=$c()()),Rc.exports}const Lc=ke(Dc());function zc(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Mc(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?zc(Object(r),!0).forEach(function(t){Fc(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):zc(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Uc(e){return(Uc="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fc(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function qc(e,t){if(null==e)return{};var r,n,s=function(e,t){if(null==e)return{};var r,n,s={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(s[r]=e[r]);return s}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(s[r]=e[r])}return s}function Bc(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=e&&("undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"]);if(null==r)return;var n,s,a=[],i=!0,o=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(l){o=!0,s=l}finally{try{i||null==r.return||r.return()}finally{if(o)throw s}}return a}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return Hc(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return Hc(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Hc(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var Vc=function(e,t,r){var n=!!r,s=Ee.useRef(r);Ee.useEffect(function(){s.current=r},[r]),Ee.useEffect(function(){if(!n||!e)return function(){};var r=function(){s.current&&s.current.apply(s,arguments)};return e.on(t,r),function(){e.off(t,r)}},[n,t,e,s])},Wc=function(e){var t=Ee.useRef(e);return Ee.useEffect(function(){t.current=e},[e]),t.current},Qc=function(e){return null!==e&&"object"===Uc(e)},Gc="[object Object]",Kc=function e(t,r){if(!Qc(t)||!Qc(r))return t===r;var n=Array.isArray(t);if(n!==Array.isArray(r))return!1;var s=Object.prototype.toString.call(t)===Gc;if(s!==(Object.prototype.toString.call(r)===Gc))return!1;if(!s&&!n)return t===r;var a=Object.keys(t),i=Object.keys(r);if(a.length!==i.length)return!1;for(var o={},l=0;l<a.length;l+=1)o[a[l]]=!0;for(var c=0;c<i.length;c+=1)o[i[c]]=!0;var u=Object.keys(o);if(u.length!==a.length)return!1;var d=t,h=r;return u.every(function(t){return e(d[t],h[t])})},Jc=function(e,t,r){return Qc(e)?Object.keys(e).reduce(function(n,s){var a=!Qc(t)||!Kc(e[s],t[s]);return r.includes(s)?n:a?Mc(Mc({},n||{}),{},Fc({},s,e[s])):n},null):null},Yc="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",Xc=function(e){var t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Yc;if(null===e||Qc(t=e)&&"function"==typeof t.elements&&"function"==typeof t.createToken&&"function"==typeof t.createPaymentMethod&&"function"==typeof t.confirmCardPayment)return e;throw new Error(r)},Zc=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Yc;if(function(e){return Qc(e)&&"function"==typeof e.then}(e))return{tag:"async",stripePromise:Promise.resolve(e).then(function(e){return Xc(e,t)})};var r=Xc(e,t);return null===r?{tag:"empty"}:{tag:"sync",stripe:r}},eu=Ee.createContext(null);eu.displayName="ElementsContext";var tu=function(e,t){if(!e)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(t," in an <Elements> provider."));return e},ru=function(e){var t=e.stripe,r=e.options,n=e.children,s=Ee.useMemo(function(){return Zc(t)},[t]),a=Bc(Ee.useState(function(){return{stripe:"sync"===s.tag?s.stripe:null,elements:"sync"===s.tag?s.stripe.elements(r):null}}),2),i=a[0],o=a[1];Ee.useEffect(function(){var e=!0,t=function(e){o(function(t){return t.stripe?t:{stripe:e,elements:e.elements(r)}})};return"async"!==s.tag||i.stripe?"sync"!==s.tag||i.stripe||t(s.stripe):s.stripePromise.then(function(r){r&&e&&t(r)}),function(){e=!1}},[s,i,r]);var l=Wc(t);Ee.useEffect(function(){},[l,t]);var c=Wc(r);return Ee.useEffect(function(){if(i.elements){var e=Jc(r,c,["clientSecret","fonts"]);e&&i.elements.update(e)}},[r,c,i.elements]),Ee.useEffect(function(){var e;(e=i.stripe)&&e._registerWrapper&&e.registerAppInfo&&(e._registerWrapper({name:"react-stripe-js",version:"5.3.0"}),e.registerAppInfo({name:"react-stripe-js",version:"5.3.0",url:"https://stripe.com/docs/stripe-js/react"}))},[i.stripe]),Ee.createElement(eu.Provider,{value:i},n)};ru.propTypes={stripe:Lc.any,options:Lc.object};var nu=function(){var e,t;return(e="calls useElements()",t=Ee.useContext(eu),tu(t,e)).elements};Lc.func.isRequired;var su=Ee.createContext(null);su.displayName="CheckoutContext",Lc.any,Lc.shape({clientSecret:Lc.oneOfType([Lc.string,Lc.instanceOf(Promise)]).isRequired,elementsOptions:Lc.object}).isRequired;var au=function(e){var t=Ee.useContext(su),r=Ee.useContext(eu);if(t){if(r)throw new Error("You cannot wrap the part of your app that ".concat(e," in both <CheckoutProvider> and <Elements> providers."));return t}return tu(r,e)},iu=["mode"],ou=function(e,t){var r,n="".concat((r=e).charAt(0).toUpperCase()+r.slice(1),"Element"),s=t?function(e){au("mounts <".concat(n,">"));var t=e.id,r=e.className;return Ee.createElement("div",{id:t,className:r})}:function(t){var r,s=t.id,a=t.className,i=t.options,o=void 0===i?{}:i,l=t.onBlur,c=t.onFocus,u=t.onReady,d=t.onChange,h=t.onEscape,p=t.onClick,f=t.onLoadError,m=t.onLoaderStart,g=t.onNetworksChange,b=t.onConfirm,v=t.onCancel,y=t.onShippingAddressChange,x=t.onShippingRateChange,w=t.onSavedPaymentMethodRemove,j=t.onSavedPaymentMethodUpdate,k=au("mounts <".concat(n,">")),_="elements"in k?k.elements:null,N="checkoutState"in k?k.checkoutState:null,S="success"===(null==N?void 0:N.type)||"loading"===(null==N?void 0:N.type)?N.sdk:null,E=Bc(Ee.useState(null),2),C=E[0],T=E[1],O=Ee.useRef(null),P=Ee.useRef(null);Vc(C,"blur",l),Vc(C,"focus",c),Vc(C,"escape",h),Vc(C,"click",p),Vc(C,"loaderror",f),Vc(C,"loaderstart",m),Vc(C,"networkschange",g),Vc(C,"confirm",b),Vc(C,"cancel",v),Vc(C,"shippingaddresschange",y),Vc(C,"shippingratechange",x),Vc(C,"savedpaymentmethodremove",w),Vc(C,"savedpaymentmethodupdate",j),Vc(C,"change",d),u&&(r="expressCheckout"===e?u:function(){u(C)}),Vc(C,"ready",r),Ee.useLayoutEffect(function(){if(null===O.current&&null!==P.current&&(_||S)){var t=null;if(S)switch(e){case"payment":t=S.createPaymentElement(o);break;case"address":if(!("mode"in o))throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");var r=o.mode,s=qc(o,iu);if("shipping"===r)t=S.createShippingAddressElement(s);else{if("billing"!==r)throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.");t=S.createBillingAddressElement(s)}break;case"expressCheckout":t=S.createExpressCheckoutElement(o);break;case"currencySelector":t=S.createCurrencySelectorElement();break;case"taxId":t=S.createTaxIdElement(o);break;default:throw new Error("Invalid Element type ".concat(n,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else _&&(t=_.create(e,o));O.current=t,T(t),t&&t.mount(P.current)}},[_,S,o]);var A=Wc(o);return Ee.useEffect(function(){if(O.current){var e=Jc(o,A,["paymentRequest"]);e&&"update"in O.current&&O.current.update(e)}},[o,A]),Ee.useLayoutEffect(function(){return function(){if(O.current&&"function"==typeof O.current.destroy)try{O.current.destroy(),O.current=null}catch(e){}}},[]),Ee.createElement("div",{id:s,className:a,ref:P})};return s.propTypes={id:Lc.string,className:Lc.string,onChange:Lc.func,onBlur:Lc.func,onFocus:Lc.func,onReady:Lc.func,onEscape:Lc.func,onClick:Lc.func,onLoadError:Lc.func,onLoaderStart:Lc.func,onNetworksChange:Lc.func,onConfirm:Lc.func,onCancel:Lc.func,onShippingAddressChange:Lc.func,onShippingRateChange:Lc.func,onSavedPaymentMethodRemove:Lc.func,onSavedPaymentMethodUpdate:Lc.func,options:Lc.object},s.displayName=n,s.__elementType=e,s},lu="undefined"==typeof window;Ee.createContext(null).displayName="EmbeddedCheckoutProviderContext";ou("auBankAccount",lu);var cu=ou("card",lu);ou("cardNumber",lu),ou("cardExpiry",lu),ou("cardCvc",lu),ou("iban",lu),ou("payment",lu),ou("expressCheckout",lu),ou("paymentRequestButton",lu),ou("linkAuthentication",lu),ou("address",lu),ou("shippingAddress",lu),ou("paymentMethodMessaging",lu),ou("taxId",lu);const uu=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];0;var n=Date.now();return Ec().then(function(e){return function(e,t,r){if(null===e)return null;t[0].match(/^pk_test/),e.version;var n=e.apply(void 0,t);return function(e,t){e&&e._registerWrapper&&e._registerWrapper({name:"stripe-js",version:"8.5.1",startTime:t})}(n,r),n}(e,t,n)})}("pk_test_tu_clave_publishable_aqui"),du={style:{base:{color:"#fff",fontFamily:'"Inter", sans-serif',fontSmoothing:"antialiased",fontSize:"16px","::placeholder":{color:"rgba(255, 255, 255, 0.4)"}},invalid:{color:"#ef4444",iconColor:"#ef4444"}},hidePostalCode:!1},hu=({amount:t,tier:r,packageType:n,onSuccess:s,onError:a,onCancel:i})=>{const o=au("calls useStripe()").stripe,l=nu(),[c,u]=_e.useState(!1),[d,h]=_e.useState("");return e.jsxs("form",{onSubmit:async e=>{if(e.preventDefault(),o&&l){u(!0),h("");try{const e=await fetch("/api/create-payment-intent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({amount:t,currency:"usd",metadata:{tier:r,packageType:n,source:"eventradar-pricing"}})});if(!e.ok){const t=await e.json();throw new Error(t.error||"Error al crear el pago")}const{clientSecret:a}=await e.json(),{error:i,paymentIntent:c}=await o.confirmCardPayment(a,{payment_method:{card:l.getElement(cu)}});if(i)throw new Error(i.message);"succeeded"===c.status&&s({paymentIntentId:c.id,tier:r,packageType:n,amount:t})}catch(i){h(i.message),a(i.message)}finally{u(!1)}}},className:"space-y-4",children:[e.jsxs("div",{className:"bg-white/5 rounded-lg p-4 border border-white/10",children:[e.jsxs("label",{className:"block text-sm font-medium text-white mb-2",children:[e.jsx(R,{className:"inline h-4 w-4 mr-2"}),"Informacin de la tarjeta"]}),e.jsx("div",{className:"bg-white/10 rounded-lg p-3 border border-white/20",children:e.jsx(cu,{options:du})})]}),d&&e.jsxs("div",{className:"bg-red-500/20 border border-red-500 rounded-lg p-3 flex items-start gap-2",children:[e.jsx(P,{className:"h-5 w-5 text-red-400 flex-shrink-0 mt-0.5"}),e.jsx("p",{className:"text-sm text-red-200",children:d})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{type:"button",onClick:i,disabled:c,className:"flex-1 px-4 py-3 bg-white/10 hover:bg-white/20 disabled:opacity-50 rounded-lg text-white font-medium transition-all",children:"Cancelar"}),e.jsx("button",{type:"submit",disabled:!o||c,className:"flex-1 px-4 py-3 bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 disabled:from-gray-500 disabled:to-gray-600 rounded-lg text-white font-medium transition-all disabled:cursor-not-allowed flex items-center justify-center gap-2",children:c?e.jsxs(e.Fragment,{children:[e.jsx(_,{className:"h-5 w-5 animate-spin"}),"Procesando..."]}):e.jsxs(e.Fragment,{children:[e.jsx(f,{className:"h-5 w-5"}),"Pagar $",t]})})]}),e.jsxs("div",{className:"flex items-center justify-center gap-4 text-xs text-white/40",children:[e.jsx($,{className:"h-4 w-4"}),e.jsx("span",{children:"Pago seguro con encriptacin SSL"})]})]})},pu=({isOpen:t,onClose:r,tier:n="basic",packageType:s="single",amount:a=0,tierName:i="",onPaymentSuccess:l})=>{const[c,d]=_e.useState("stripe"),[h,p]=_e.useState(!1),[m,g]=_e.useState(!1),[b,v]=_e.useState(null),x={single:"1 Evento",pack_3:"Pack de 3 Eventos",pack_5:"Pack de 5 Eventos"},w=()=>{g(!1),v(null),d("stripe"),r()};return t?e.jsx(S,{children:e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:[e.jsx(u.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},onClick:w,className:"absolute inset-0 bg-black/70 backdrop-blur-sm"}),e.jsx(u.div,{initial:{opacity:0,scale:.95,y:20},animate:{opacity:1,scale:1,y:0},exit:{opacity:0,scale:.95,y:20},className:"relative w-full max-w-lg bg-gradient-to-br from-purple-900/95 via-purple-800/95 to-pink-900/95 backdrop-blur-xl rounded-2xl shadow-2xl border border-white/10",children:m?e.jsxs("div",{className:"p-8 text-center",children:[e.jsx(u.div,{initial:{scale:0},animate:{scale:1},transition:{type:"spring",stiffness:200,damping:15},className:"mx-auto w-20 h-20 bg-gradient-to-r from-green-400 to-emerald-600 rounded-full flex items-center justify-center mb-6",children:e.jsx(A,{className:"h-10 w-10 text-white"})}),e.jsx("h2",{className:"text-3xl font-bold text-white mb-2",children:"Pago Exitoso!"}),e.jsxs("p",{className:"text-white/80 mb-4",children:["Tu suscripcin ",e.jsx("strong",{children:i})," ha sido activada"]}),e.jsxs("div",{className:"bg-white/10 rounded-lg p-4 mb-4",children:[e.jsx("p",{className:"text-sm text-white/60",children:"ID de transaccin:"}),e.jsx("p",{className:"text-white font-mono text-xs",children:b?.paymentIntentId})]}),e.jsx("p",{className:"text-sm text-white/60",children:"Redirigiendo..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"p-6 border-b border-white/10",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-2xl font-bold text-white",children:"Completar Pago"}),e.jsx("p",{className:"text-sm text-white/60 mt-1",children:"Selecciona tu mtodo de pago preferido"})]}),e.jsx("button",{onClick:w,className:"p-2 hover:bg-white/10 rounded-lg transition-colors",children:e.jsx(y,{className:"h-6 w-6 text-white"})})]})}),e.jsxs("div",{className:"p-6 bg-white/5 border-b border-white/10",children:[e.jsx("h3",{className:"text-sm font-medium text-white/60 mb-3",children:"Resumen del pedido"}),e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("span",{className:"text-white",children:["Plan ",i]}),e.jsxs("span",{className:"text-white font-bold",children:["$",a]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-white/60",children:x[s]}),"single"!==s&&e.jsx("span",{className:"text-green-400",children:"pack_3"===s?"-20%":"-28%"})]}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-white/10 flex items-center justify-between",children:[e.jsx("span",{className:"text-lg font-bold text-white",children:"Total"}),e.jsxs("span",{className:"text-2xl font-bold text-white",children:["$",a," USD"]})]})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("h3",{className:"text-sm font-medium text-white mb-4",children:"Mtodo de pago"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mb-6",children:[e.jsxs("button",{onClick:()=>d("stripe"),className:"p-4 rounded-lg border-2 transition-all "+("stripe"===c?"border-purple-400 bg-purple-500/20":"border-white/10 bg-white/5 hover:bg-white/10"),children:[e.jsx(R,{className:"h-6 w-6 text-white mb-2"}),e.jsx("div",{className:"text-sm font-medium text-white",children:"Tarjeta"}),e.jsx("div",{className:"text-xs text-white/60",children:"Crdito/Dbito"})]}),e.jsxs("button",{onClick:()=>d("mercadopago"),className:"p-4 rounded-lg border-2 transition-all "+("mercadopago"===c?"border-blue-400 bg-blue-500/20":"border-white/10 bg-white/5 hover:bg-white/10"),children:[e.jsx(I,{className:"h-6 w-6 text-white mb-2"}),e.jsx("div",{className:"text-sm font-medium text-white",children:"Mercado Pago"}),e.jsx("div",{className:"text-xs text-white/60",children:"Todos los mtodos"})]})]}),"stripe"===c?uu?e.jsx(ru,{stripe:uu,children:e.jsx(hu,{amount:a,tier:n,packageType:s,onSuccess:e=>{v(e),g(!0),setTimeout(()=>{l?.(e),w()},3e3)},onError:e=>{},onCancel:w})}):e.jsxs("div",{className:"bg-yellow-500/20 border border-yellow-500 rounded-lg p-4",children:[e.jsx(P,{className:"h-5 w-5 text-yellow-400 inline mr-2"}),e.jsx("span",{className:"text-sm text-yellow-200",children:"Stripe no est configurado. Configura VITE_STRIPE_PUBLISHABLE_KEY."})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-blue-500/10 border border-blue-500/30 rounded-lg p-4",children:[e.jsx("p",{className:"text-sm text-white/80 mb-2",children:"Sers redirigido a Mercado Pago para completar tu pago de forma segura."}),e.jsxs("ul",{className:"text-xs text-white/60 space-y-1 ml-4 list-disc",children:[e.jsx("li",{children:"Paga con tarjetas, efectivo, o saldo en cuenta"}),e.jsx("li",{children:"Proteccin al comprador"}),e.jsx("li",{children:"Devolucin automtica si hay problemas"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{onClick:w,disabled:h,className:"flex-1 px-4 py-3 bg-white/10 hover:bg-white/20 disabled:opacity-50 rounded-lg text-white font-medium transition-all",children:"Cancelar"}),e.jsx("button",{onClick:async()=>{p(!0);try{const e=await fetch("/api/mercadopago/create-preference",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:[{title:`${i} - ${x[s]}`,price:a,quantity:1,currency:"CLP"}],metadata:{tier:n,packageType:s,source:"eventradar-pricing"}})});if(!e.ok){const t=await e.json();throw new Error(t.error||"Error al crear preferencia de pago")}const{initPoint:t,sandboxInitPoint:r}=await e.json(),o="localhost"===window.location.hostname;window.location.href=o?r:t}catch(e){alert(`Error: ${e.message}`)}finally{p(!1)}},disabled:h,className:"flex-1 px-4 py-3 bg-gradient-to-r from-blue-500 to-cyan-600 hover:from-blue-600 hover:to-cyan-700 disabled:from-gray-500 disabled:to-gray-600 rounded-lg text-white font-medium transition-all flex items-center justify-center gap-2",children:h?e.jsxs(e.Fragment,{children:[e.jsx(_,{className:"h-5 w-5 animate-spin"}),"Redirigiendo..."]}):e.jsxs(e.Fragment,{children:[e.jsx(o,{className:"h-5 w-5"}),"Pagar con Mercado Pago"]})})]})]})]}),e.jsx("div",{className:"p-6 bg-white/5 border-t border-white/10",children:e.jsxs("div",{className:"flex items-center justify-center gap-6 text-xs text-white/40",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx($,{className:"h-4 w-4"}),e.jsx("span",{children:"Pago seguro"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(f,{className:"h-4 w-4"}),e.jsx("span",{children:"Encriptacin SSL"})]})]})})]})})]})}):null},fu=()=>{const t=Pe(),{user:r}=Qi(),[n,s]=_e.useState(null),[a,i]=_e.useState("single"),[o,l]=_e.useState(!1),[c,d]=_e.useState(null),[h,p]=_e.useState(!0),[f,m]=_e.useState(!1),[v,x]=_e.useState(!1),[w,j]=_e.useState(null);_e.useEffect(()=>{k()},[]);const k=async()=>{try{const{data:e,error:t}=await Hi.from("promotion_pricing").select("*").eq("is_active",!0).order("single_price",{ascending:!0});if(t)throw t;d(e)}catch(e){d(_)}finally{p(!1)}},_=[{tier:"basic",single_price:5,pack_3_price:12,pack_3_discount:20,pack_5_price:18,pack_5_discount:28,badge_icon:"",badge_text:"Patrocinado",description:"Evento bsico - Aparece en mapa con prioridad media"},{tier:"featured",single_price:15,pack_3_price:36,pack_3_discount:20,pack_5_price:54,pack_5_discount:28,badge_icon:"",badge_text:"Destacado",description:"Evento destacado - Siempre visible, notificacin push"},{tier:"premium",single_price:30,pack_3_price:72,pack_3_discount:20,pack_5_price:108,pack_5_discount:28,badge_icon:"",badge_text:"Premium",description:"Evento premium - Mxima visibilidad y analticas"}],N={free:{name:"Gratis",icon:g,gradient:"from-gray-400 to-gray-600",popular:!1,features:[{text:"Ver eventos ilimitados",included:!0},{text:"Guardar favoritos",included:!0},{text:"Recomendaciones IA",included:!0},{text:"Aparece en pestaa Eventos",included:!0},{text:"Aparece en mapa",included:!1,note:"Solo si hay espacio"},{text:"Notificaciones push",included:!1},{text:"Posicin destacada",included:!1},{text:"Analticas",included:!1}]},basic:{name:"Bsico",icon:b,gradient:"from-blue-400 to-purple-600",popular:!1,features:[{text:"Todo lo de Gratuito",included:!0},{text:'Badge "Patrocinado"',included:!0},{text:"Aparece en mapa garantizado",included:!0},{text:"+20% boost en recomendaciones",included:!0},{text:"Prioridad media en listados",included:!0},{text:"Notificaciones push",included:!1},{text:"Analticas avanzadas",included:!1},{text:"Estilo personalizado",included:!1}]},featured:{name:"Destacado",icon:M,gradient:"from-orange-400 to-red-600",popular:!0,features:[{text:"Todo lo de Bsico",included:!0},{text:'Badge "Destacado" ',included:!0},{text:"Siempre visible en mapa",included:!0},{text:"+100% boost en recomendaciones",included:!0},{text:"Top 5 en lista de eventos",included:!0},{text:"Notificacin push a usuarios cercanos",included:!0},{text:"Aparece en carrusel principal",included:!0},{text:"Analticas completas",included:!0},{text:"Geofencing inteligente",included:!0}]},premium:{name:"Premium",icon:z,gradient:"from-yellow-400 to-amber-600",popular:!1,features:[{text:"Todo lo de Destacado",included:!0},{text:'Badge "Premium" ',included:!0},{text:"Mxima prioridad en mapa",included:!0},{text:"+200% boost en recomendaciones",included:!0},{text:"Fijado en primera posicin",included:!0},{text:"Notificacin push a TODOS los usuarios",included:!0},{text:"Ventana emergente promocional",included:!0},{text:"Dashboard analticas avanzadas",included:!0},{text:"Colores y estilo personalizado",included:!0},{text:"Geofencing + retargeting",included:!0}]}},E=({tierKey:n,tierData:a})=>{const o=[{type:"single",name:"1 Evento",price:a?.single_price||0,discount:0,description:"Pago nico"},{type:"pack_3",name:"Pack 3 Eventos",price:a?.pack_3_price||0,discount:a?.pack_3_discount||20,description:"Ahorra 20%",badge:"Oferta"},{type:"pack_5",name:"Pack 5 Eventos",price:a?.pack_5_price||0,discount:a?.pack_5_discount||28,description:"Ahorra 28%",badge:"Mejor Precio",recommended:!0}];return e.jsx("div",{className:"space-y-2",children:o.map(a=>e.jsxs(u.button,{whileHover:{scale:1.02},whileTap:{scale:.98},onClick:()=>((e,n)=>{if(!r)return void t("/auth/login",{state:{returnTo:"/pricing"}});s(e),i(n);const a=c?.find(t=>t.tier===e),o=((e,t)=>{if(!e)return 0;switch(t){case"pack_3":return e.pack_3_price;case"pack_5":return e.pack_5_price;default:return e.single_price}})(a,n);j({tier:e,tierName:N[e].name,packageType:n,amount:o}),x(!0)})(n,a.type),className:`\n              w-full p-3 rounded-lg border-2 text-left\n              transition-all relative overflow-hidden\n              ${a.recommended?"border-yellow-400 bg-yellow-500/10":"border-white/10 bg-white/5 hover:bg-white/10"}\n            `,children:[a.badge&&e.jsx("div",{className:"absolute top-2 right-2 px-2 py-0.5 bg-gradient-to-r from-yellow-400 to-amber-600 rounded-full text-[10px] font-bold text-white",children:a.badge}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"font-bold text-white flex items-center gap-2",children:[a.name,a.discount>0&&e.jsxs("span",{className:"text-xs text-green-400",children:["-",a.discount,"%"]})]}),e.jsx("div",{className:"text-xs text-white/60",children:a.description})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-xl font-bold text-white",children:["$",a.price]}),a.discount>0&&e.jsxs("div",{className:"text-xs text-white/40 line-through",children:["$",Math.round(a.price/(1-a.discount/100))]})]})]})]},a.type))})};return h?e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-purple-800 to-pink-900 flex items-center justify-center",children:e.jsx("div",{className:"text-white text-xl",children:"Cargando planes..."})}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-purple-800 to-pink-900 py-20 px-4",children:[e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs(u.div,{initial:{opacity:0,y:-20},animate:{opacity:1,y:0},className:"text-center mb-16",children:[e.jsx("h1",{className:"text-5xl font-bold text-white mb-4",children:"Destaca tu Evento"}),e.jsx("p",{className:"text-xl text-white/80 mb-8",children:"Aumenta la visibilidad y asistencia con nuestros planes promocionales"}),e.jsxs("button",{onClick:()=>l(!o),className:"inline-flex items-center gap-2 px-6 py-3 bg-white/10 hover:bg-white/20 rounded-lg text-white transition-all",children:[e.jsx(D,{className:"h-5 w-5"}),"Ver comparacin detallada",e.jsx(L,{className:"h-5 w-5 transition-transform "+(o?"rotate-180":"")})]})]}),e.jsx(S,{children:o&&e.jsx(u.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},exit:{opacity:0,height:0},className:"mb-16 overflow-hidden",children:e.jsx("div",{className:"bg-white/5 backdrop-blur-xl rounded-2xl p-6 overflow-x-auto",children:e.jsx("p",{className:"text-white/60 text-center",children:"Tabla de comparacin detallada"})})})}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:Object.entries(N).map(([t,r],n)=>{const s=r.icon,a=c?.find(e=>e.tier===t),i=r.popular;return e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*n},className:`\n                  relative bg-white/5 backdrop-blur-xl rounded-2xl p-6 border-2\n                  ${i?"border-orange-400 scale-105":"border-white/10"}\n                `,children:[i&&e.jsx("div",{className:"absolute -top-4 left-1/2 transform -translate-x-1/2 px-4 py-1 bg-gradient-to-r from-orange-400 to-red-600 rounded-full text-white text-sm font-bold",children:"Ms Popular"}),e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("div",{className:`inline-flex p-4 rounded-full bg-gradient-to-r ${r.gradient} mb-4`,children:e.jsx(s,{className:"h-8 w-8 text-white"})}),e.jsx("h3",{className:"text-2xl font-bold text-white mb-2",children:r.name}),"free"!==t&&e.jsxs("div",{className:"text-white/80",children:[e.jsx("div",{className:"text-sm",children:"Desde"}),e.jsxs("div",{className:"text-4xl font-bold text-white",children:["$",a?.single_price||0]}),e.jsx("div",{className:"text-sm text-white/60",children:"por evento"})]})]}),e.jsx("div",{className:"space-y-3 mb-6",children:r.features.map((t,r)=>e.jsxs("div",{className:"flex items-start gap-2",children:[t.included?e.jsx(A,{className:"h-5 w-5 text-green-400 flex-shrink-0 mt-0.5"}):e.jsx(y,{className:"h-5 w-5 text-red-400 flex-shrink-0 mt-0.5"}),e.jsxs("span",{className:"text-sm "+(t.included?"text-white":"text-white/40"),children:[t.text,t.note&&e.jsxs("span",{className:"block text-xs text-white/30",children:["(",t.note,")"]})]})]},r))}),"free"!==t&&a&&e.jsx(E,{tierKey:t,tierData:a})]},t)})}),e.jsxs(u.div,{initial:{opacity:0},animate:{opacity:1},transition:{delay:.5},className:"mt-16 text-center",children:[e.jsxs("p",{className:"text-white/60 mb-4",children:["Tienes dudas?"," ",e.jsxs("button",{onClick:()=>m(!0),className:"text-yellow-400 hover:underline inline-flex items-center gap-1",children:[e.jsx(U,{className:"h-4 w-4"}),"Contctanos"]})]}),e.jsxs("div",{className:"flex items-center justify-center gap-8 text-white/40 text-sm",children:[e.jsx("span",{children:" Pago seguro"}),e.jsx("span",{children:" Sin compromisos"}),e.jsx("span",{children:" Soporte 24/7"})]})]})]}),e.jsx(fc,{isOpen:f,onClose:()=>m(!1),context:{selectedTier:n,selectedPackage:a,page:"pricing"}}),w&&e.jsx(pu,{isOpen:v,onClose:()=>x(!1),tier:w.tier,tierName:w.tierName,packageType:w.packageType,amount:w.amount,onPaymentSuccess:e=>{alert(`Gracias por tu compra! Tu plan ${e.tier} ha sido activado.`),t("/dashboard")}})]})},mu=({tier:t,size:r="md",animated:n=!0,className:s=""})=>{if(!t||"free"===t)return null;const a={basic:{icon:b,text:"Patrocinado",gradient:"from-blue-400 to-purple-600",glow:"shadow-blue-500/30",textColor:"text-blue-100",bgOpacity:"bg-blue-500/20",borderColor:"border-blue-400/30"},featured:{icon:M,text:"Destacado",gradient:"from-orange-400 to-red-600",glow:"shadow-orange-500/50",textColor:"text-orange-100",bgOpacity:"bg-orange-500/20",borderColor:"border-orange-400/30",pulse:!0},premium:{icon:z,text:"Premium",gradient:"from-yellow-400 to-amber-600",glow:"shadow-yellow-500/60",textColor:"text-yellow-100",bgOpacity:"bg-yellow-500/20",borderColor:"border-yellow-400/30",shine:!0}}[t];if(!a)return null;const i=a.icon,o={sm:{container:"px-1.5 py-0.5",icon:"h-3 w-3",text:"text-[10px]",gap:"gap-0.5"},md:{container:"px-2 py-1",icon:"h-4 w-4",text:"text-xs",gap:"gap-1"},lg:{container:"px-3 py-1.5",icon:"h-5 w-5",text:"text-sm",gap:"gap-1.5"}}[r],l=()=>e.jsxs("div",{className:`\n      inline-flex items-center ${o.gap} ${o.container}\n      rounded-full border\n      bg-gradient-to-r ${a.gradient}\n      ${a.borderColor}\n      shadow-lg ${a.glow}\n      text-white ${o.text} font-bold\n      backdrop-blur-sm\n      ${s}\n    `,children:[e.jsx(i,{className:`${o.icon} ${a.pulse?"animate-pulse":""}`}),e.jsx("span",{className:"whitespace-nowrap",children:a.text}),a.shine&&e.jsx(u.div,{className:"absolute inset-0 rounded-full bg-gradient-to-r from-transparent via-white/20 to-transparent",animate:{x:["-100%","100%"]},transition:{duration:2,repeat:1/0,repeatDelay:3}})]});return n?e.jsx(u.div,{initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},transition:{duration:.3},className:"relative",children:e.jsx(l,{})}):e.jsx(l,{})},gu=({type:t,size:r="md",className:n=""})=>{const s={trending:{icon:"",text:"Trending",gradient:"from-pink-500 to-rose-600",description:"Ms de 100 favoritos en 24h"},almost_full:{icon:"",text:"Casi Lleno",gradient:"from-red-500 to-orange-600",description:"Quedan menos del 20% de lugares"},new:{icon:"",text:"Nuevo",gradient:"from-green-500 to-emerald-600",description:"Publicado hace menos de 48h"},live:{icon:"",text:"En Vivo",gradient:"from-red-600 to-pink-600",description:"Evento en curso ahora",pulse:!0}}[t];if(!s)return null;return e.jsxs(u.div,{initial:{opacity:0,x:-10},animate:{opacity:1,x:0},className:`\n        inline-flex items-center gap-1 ${{sm:"px-1.5 py-0.5 text-[10px]",md:"px-2 py-1 text-xs",lg:"px-3 py-1.5 text-sm"}[r]}\n        rounded-full\n        bg-gradient-to-r ${s.gradient}\n        text-white font-bold\n        shadow-lg\n        ${s.pulse?"animate-pulse":""}\n        ${n}\n      `,title:s.description,children:[e.jsx("span",{children:s.icon}),e.jsx("span",{children:s.text})]})},bu=({promotionTier:t,trendingType:r,isLive:n,favoritesCount:s=0,createdAt:a,capacity:i=0,attendeesCount:o=0,isNew:l=!1,isAlmostFull:c=!1,size:u="md",maxBadges:d=3,className:h=""})=>{const p=[];n&&p.push(e.jsx(gu,{type:"live",size:u},"live")),t&&"free"!==t&&p.push(e.jsx(mu,{tier:t,size:u,animated:!1},"promotion"));const f=a&&Date.now()-new Date(a).getTime()<864e5;s>=100&&f&&p.push(e.jsx(gu,{type:"trending",size:u},"trending")),(c||i&&o&&o/i>.8)&&p.push(e.jsx(gu,{type:"almost_full",size:u},"almost_full"));const m=a&&Date.now()-new Date(a).getTime()<1728e5;(l||m)&&p.length<d&&p.push(e.jsx(gu,{type:"new",size:u},"new"));const g=p.slice(0,d),b=p.length-d;return 0===g.length?null:e.jsxs("div",{className:`flex items-center gap-1.5 flex-wrap ${h}`,children:[g,b>0&&e.jsxs("span",{className:"text-xs text-white/60",children:["+",b]})]})};const vu=new class{constructor(){this.watchId=null,this.nearbyEvents=new Set,this.notifiedEvents=new Set,this.isWatching=!1,this.radius=500,this.checkInterval=6e4,this.lastCheck=null}async startWatching(e=[],t=500){if(!this.isWatching){if(!navigator.geolocation)return!1;this.radius=t;try{return!!(await this.requestLocationPermission())&&(this.isWatching=!0,this.watchId=navigator.geolocation.watchPosition(t=>this.onLocationUpdate(t,e),e=>this.onLocationError(e),{enableHighAccuracy:!0,maximumAge:3e4,timeout:27e3}),!0)}catch(r){return!1}}}stopWatching(){this.watchId&&(navigator.geolocation.clearWatch(this.watchId),this.watchId=null),this.isWatching=!1,this.nearbyEvents.clear()}async requestLocationPermission(){try{const e=await navigator.permissions.query({name:"geolocation"});return"granted"===e.state||"prompt"===e.state}catch(e){return!0}}onLocationUpdate(e,t){const r=Date.now();if(this.lastCheck&&r-this.lastCheck<this.checkInterval)return;this.lastCheck=r;const n=e.coords.latitude,s=e.coords.longitude,a=t.filter(e=>{if(!e.latitude||!e.longitude)return!1;return this.calculateDistance(n,s,e.latitude,e.longitude)<=this.radius});a.forEach(e=>{const t=e.id;if(!this.notifiedEvents.has(t)){this.notifiedEvents.add(t),this.nearbyEvents.add(t);const r=Math.round(this.calculateDistance(n,s,e.latitude,e.longitude));this.sendProximityNotification(e,r)}}),this.nearbyEvents.forEach(e=>{a.some(t=>t.id===e)||this.nearbyEvents.delete(e)})}onLocationError(e){switch(e.code){case e.PERMISSION_DENIED:this.stopWatching();case e.POSITION_UNAVAILABLE:case e.TIMEOUT:}}calculateDistance(e,t,r,n){const s=this.toRad(r-e),a=this.toRad(n-t),i=Math.sin(s/2)*Math.sin(s/2)+Math.cos(this.toRad(e))*Math.cos(this.toRad(r))*Math.sin(a/2)*Math.sin(a/2);return 6371e3*(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)))}toRad(e){return e*(Math.PI/180)}sendProximityNotification(e,t){const r=" Evento Cerca!",n=`${e.title} est a ${t}m de ti`,s="/icons/icon-192x192.png";"Notification"in window?"granted"===Notification.permission?new Notification(r,{body:n,icon:s,badge:s,tag:`event-nearby-${e.id}`,data:{eventId:e.id},requireInteraction:!1}):"denied"!==Notification.permission?Notification.requestPermission().then(e=>{"granted"===e&&new Notification(r,{body:n,icon:s})}):this.showInAppNotification(e,t):this.showInAppNotification(e,t)}showInAppNotification(e,t){const r={id:`nearby-${e.id}`,type:"proximity",event:e,distance:t,timestamp:new Date};window.dispatchEvent(new CustomEvent("eventNearby",{detail:r}))}async getCurrentLocation(){return new Promise((e,t)=>{navigator.geolocation?navigator.geolocation.getCurrentPosition(t=>{e({latitude:t.coords.latitude,longitude:t.coords.longitude,accuracy:t.coords.accuracy})},e=>{t(e)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}):t(new Error("Geolocation no disponible"))})}isEventNearby(e,t,r,n=this.radius){if(!e.latitude||!e.longitude)return!1;return this.calculateDistance(t,r,e.latitude,e.longitude)<=n}async getNearbyEvents(e,t=this.radius){try{const r=await this.getCurrentLocation();return e.filter(e=>this.isEventNearby(e,r.latitude,r.longitude,t)).map(e=>({...e,distance:Math.round(this.calculateDistance(r.latitude,r.longitude,e.latitude,e.longitude))})).sort((e,t)=>e.distance-t.distance)}catch(r){return[]}}getStatus(){return{isWatching:this.isWatching,radius:this.radius,nearbyEventsCount:this.nearbyEvents.size,notifiedEventsCount:this.notifiedEvents.size}}};const yu=new class{constructor(){this.viewedEvents=new Map,this.reminderTimers=new Map,this.storageKey="eventRadar_retargeting",this.loadFromStorage()}loadFromStorage(){try{const e=localStorage.getItem(this.storageKey);if(e){const t=JSON.parse(e);this.viewedEvents=new Map(t.viewedEvents||[])}}catch(e){}}saveToStorage(){try{const e={viewedEvents:Array.from(this.viewedEvents.entries()),timestamp:Date.now()};localStorage.setItem(this.storageKey,JSON.stringify(e))}catch(e){}}async trackEventView(e,t,r){const n=Date.now();this.viewedEvents.set(t,{timestamp:n,userId:e,eventData:{id:t,title:r.title,date:r.date,location:r.location,price:r.price}}),this.saveToStorage();try{await Hi.from("event_analytics").insert({event_id:t,user_id:e,action:"view",source:"detail_page",created_at:(new Date).toISOString()})}catch(s){}this.scheduleReminder(e,t,r)}scheduleReminder(e,t,r){this.reminderTimers.has(t)&&clearTimeout(this.reminderTimers.get(t));const n=setTimeout(()=>{this.sendReminder(e,t,r)},36e5);this.reminderTimers.set(t,n)}async sendReminder(e,t,r){if(await this.checkIfUserRegistered(e,t))return void this.reminderTimers.delete(t);const n=await this.checkIfIsFavorite(e,t)?" Evento en tus favoritos pronto!":" An interesado en este evento?",s=`${r.title} - ${new Date(r.date).toLocaleDateString("es-ES")}`;this.sendNotification(n,s,t,"reminder"),await this.trackReminderSent(e,t)}async checkIfUserRegistered(e,t){try{const{data:r,error:n}=await Hi.from("event_registrations").select("id").eq("user_id",e).eq("event_id",t).limit(1);if(n)throw n;return r&&r.length>0}catch(r){return!1}}async checkIfIsFavorite(e,t){try{const{data:r,error:n}=await Hi.from("favorites").select("id").eq("user_id",e).eq("event_id",t).limit(1);if(n)throw n;return r&&r.length>0}catch(r){return!1}}async trackReminderSent(e,t){try{await Hi.from("push_notifications_log").insert({event_id:t,user_id:e,notification_type:"retargeting_reminder",sent_at:(new Date).toISOString(),status:"sent"})}catch(r){}}sendNotification(e,t,r,n="reminder"){"Notification"in window?"granted"===Notification.permission?new Notification(e,{body:t,icon:"/icons/icon-192x192.png",badge:"/icons/icon-192x192.png",tag:`retargeting-${r}`,data:{eventId:r,type:n},requireInteraction:!1,actions:[{action:"view",title:"Ver Evento"},{action:"dismiss",title:"Cerrar"}]}):"denied"!==Notification.permission?Notification.requestPermission().then(s=>{"granted"===s?new Notification(e,{body:t}):this.showInAppNotification(e,t,r,n)}):this.showInAppNotification(e,t,r,n):this.showInAppNotification(e,t,r,n)}showInAppNotification(e,t,r,n){const s={id:`retargeting-${r}-${Date.now()}`,type:n,title:e,body:t,eventId:r,timestamp:new Date};window.dispatchEvent(new CustomEvent("retargetingNotification",{detail:s}))}getViewedButNotRegistered(){const e=Date.now()-864e5;return Array.from(this.viewedEvents.entries()).filter(([t,r])=>r.timestamp>e).map(([e,t])=>({eventId:e,...t}))}markAsRegistered(e){this.viewedEvents.delete(e),this.reminderTimers.has(e)&&(clearTimeout(this.reminderTimers.get(e)),this.reminderTimers.delete(e)),this.saveToStorage()}cleanup(){const e=Date.now()-6048e5;this.viewedEvents.forEach((t,r)=>{t.timestamp<e&&(this.viewedEvents.delete(r),this.reminderTimers.has(r)&&(clearTimeout(this.reminderTimers.get(r)),this.reminderTimers.delete(r)))}),this.saveToStorage()}scheduleEventReminder(e,t,r){const n=new Date(r.date)-new Date,s=n-864e5,a=n-36e5;s>0&&setTimeout(()=>{this.sendNotification(" Evento maana",`${r.title} es maana a las ${new Date(r.date).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})}`,t,"event_reminder_24h")},s),a>0&&setTimeout(()=>{this.sendNotification(" Evento en 1 hora!",`${r.title} comienza pronto en ${r.location}`,t,"event_reminder_1h")},a)}getStats(){return{viewedEventsCount:this.viewedEvents.size,activeReminders:this.reminderTimers.size,lastCleanup:new Date}}async requestNotificationPermission(){if(!("Notification"in window))return!1;if("granted"===Notification.permission)return!0;if("denied"!==Notification.permission){return"granted"===await Notification.requestPermission()}return!1}};setInterval(()=>{yu.cleanup()},36e5);const xu=()=>{const t=Pe(),r=Ce(),{user:a,profile:c,signOut:u}=Qi(),{canCreateEvents:d,isAdmin:h}=Ml(),[p,f]=_e.useState("mapa"),[m,g]=_e.useState(!1),[x,w]=_e.useState(0),[j,_]=_e.useState(!1);_e.useEffect(()=>{r.state?.activeTab&&(f(r.state.activeTab),t(r.pathname,{replace:!0,state:{}}))},[r]);const[N,S]=_e.useState([]),[C,T]=_e.useState([]),[O,P]=_e.useState(new Set),[A,R]=_e.useState(!0),[I,$]=_e.useState(""),[D,L]=_e.useState("priority"),[z,M]=_e.useState("all"),[U,W]=_e.useState("all"),[Q,G]=_e.useState(!1),[K,J]=_e.useState([]);_e.useEffect(()=>{if(!a)return;ee();const e=Zl();return Y(),()=>{e&&e(),vu.stopWatching()}},[a,x]);const Y=async()=>{await yu.requestNotificationPermission(),await vu.startWatching(C,500);window.addEventListener("eventNearby",X),window.addEventListener("retargetingNotification",Z)},X=e=>{const{event:t,distance:r}=e.detail,n={id:`nearby-${t.id}-${Date.now()}`,type:"proximity",emoji:"",title:"Evento Cerca!",message:`${t.title} est a ${r}m de ti`,event:t,color:"blue"};J(e=>[...e,n])},Z=e=>{const{title:t,body:r,eventId:n}=e.detail,s=C.find(e=>e.id===n),a={id:`retarget-${n}-${Date.now()}`,type:"retargeting",emoji:"",title:t,message:r,event:s,color:"purple"};J(e=>[...e,a])},ee=async()=>{R(!0),await Promise.all([te(),re()]),R(!1)},te=async()=>{try{const{data:e,error:t}=await Vi.from("events").select("\n          *,\n          event_categories(id, name, color, icon)\n        ").order("date",{ascending:!0});if(t)return;const r=e?Array.from(new Map(e.map(e=>[e.id,e])).values()):[];if(e&&(e.length,r.length),!r||0===r.length)return T([]),void S([]);const n=r.map(e=>{const t=e.start_date?new Date(e.start_date):new Date(e.date),r=e.end_date?new Date(e.end_date):new Date(t.getTime()+108e5),n=Yl(t),s=new Date(e.created_at),a=(new Date-s)/36e5<48,i=e.attendees_count||0,o=e.capacity||0,l=o>0?(o-i)/o*100:100,c=l<20&&o>0;return{...e,calculated_end_date:r,start_date:t,clientStatus:n,isNew:a,isAlmostFull:c,availablePercentage:l}}).filter(e=>!e.start_date||"archived"!==e.clientStatus);T(n),S(n)}catch(e){}},re=async()=>{try{if(!a)return;const{data:e,error:t}=await Vi.from("favorites").select("event_id").eq("user_id",a.id);if(t)return;const r=new Set(e?.map(e=>e.event_id)||[]);P(r)}catch(e){}};_e.useEffect(()=>{if(!C.length)return;let e=[...C];if(I.trim()){const t=I.toLowerCase().trim();e=e.filter(e=>e.title?.toLowerCase().includes(t)||e.description?.toLowerCase().includes(t)||e.location?.toLowerCase().includes(t)||e.event_categories?.name?.toLowerCase().includes(t))}switch("all"!==z&&(e=e.filter(e=>e.event_categories?.name?.toLowerCase()===z.toLowerCase())),"all"!==U&&(e=e.filter(e=>(e.location?.toLowerCase()||"").includes(U.toLowerCase()))),D){case"date":e.sort((e,t)=>new Date(e.date)-new Date(t.date));break;case"category":e.sort((e,t)=>(e.event_categories?.name||"").localeCompare(t.event_categories?.name||""));break;case"region":e.sort((e,t)=>(e.location||"").localeCompare(t.location||""))}S(e)},[C,I,D,z,U]);const ne=async e=>{const t=O.has(e);if(!a)return void alert("Debes iniciar sesin para marcar favoritos");a&&Kl.trackFavorite(a.id,e,!t);const r=new Set(O);t?r.delete(e):r.add(e),P(r);try{if(t){const{data:t,error:r}=await Vi.from("favorites").delete().eq("user_id",a.id).eq("event_id",e).select();r&&(P(O),alert("Error al quitar de favoritos: "+r.message))}else{const{data:t,error:r}=await Vi.from("favorites").insert([{user_id:a.id,event_id:e}]).select();r&&(P(O),alert("Error al agregar a favoritos: "+r.message))}}catch(n){P(O),alert("Error inesperado: "+n.message)}},se=e=>{const t=new Date,r=e.start_date||new Date(e.date),n=e.calculated_end_date;if(t<r){const e=r.getTime()-t.getTime();return{status:"upcoming",statusText:"Prximamente",timeInfo:`Comienza en ${ae(e)}`,statusColor:"bg-blue-100 text-blue-800",urgency:"normal"}}if(t>=r&&t<n){const e=n.getTime()-t.getTime(),r=e<72e5;return{status:"ongoing",statusText:" En Vivo",timeInfo:`Termina en ${ae(e)}`,statusColor:r?"bg-red-100 text-red-800":"bg-green-100 text-green-800",urgency:r?"urgent":"normal"}}return{status:"ended",statusText:"Finalizado",timeInfo:"Evento terminado",statusColor:"bg-gray-100 text-gray-600",urgency:"ended"}},ae=e=>{const t=Math.floor(e/1e3),r=Math.floor(t/60),n=Math.floor(r/60),s=Math.floor(n/24);return s>0?`${s}d ${n%24}h`:n>0?`${n}h ${r%60}m`:r>0?`${r}m`:`${t}s`},ie=({event:t})=>{const[r,n]=_e.useState(se(t));return _e.useEffect(()=>{const e=setInterval(()=>{n(se(t))},1e3);return()=>clearInterval(e)},[t]),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-xs px-2 py-1 rounded-full font-medium ${r.statusColor}`,children:r.statusText}),"urgent"===r.urgency&&e.jsx("span",{className:"text-xs animate-pulse",children:" Termina pronto!"})]}),e.jsxs("div",{className:"text-sm font-medium "+("urgent"===r.urgency?"text-red-600 animate-pulse":"ended"===r.urgency?"text-gray-500":"text-purple-600"),children:[" ",r.timeInfo]})]})},oe=[{id:"mapa",label:"Mapa",icon:s},{id:"recomendados",label:"Para Ti",icon:b,special:!0},{id:"eventos",label:"Eventos",icon:i},{id:"pricing",label:"Suscripcin de Eventos",icon:o,special:!0},...d?[{id:"crear",label:h?"Crear":"Inscribe tu Evento",icon:l,special:!0}]:[],{id:"favoritos",label:"Favoritos",icon:k},{id:"perfil",label:"Perfil",icon:v}],le=async()=>{await u(),t("/")},ce=e=>{w(e=>e+1)},ue=t=>{const r=O.has(t);return e.jsx("button",{onClick:e=>{e.preventDefault(),e.stopPropagation(),ne(t)},className:`p-2 rounded-full transition-all duration-200 transform hover:scale-110 ${r?"bg-red-100 text-red-600 hover:bg-red-200":"bg-gray-100 text-gray-400 hover:bg-gray-200 hover:text-red-400"} shadow-sm hover:shadow-md`,title:r?"Quitar de favoritos ":"Agregar a favoritos ",children:e.jsx(k,{className:"w-5 h-5 transition-all duration-200 "+(r?"fill-current text-red-600":"text-gray-400")})})},de=(t,r=!0)=>e.jsx("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-6 shadow-lg border border-white/50 hover:shadow-xl transition-all cursor-pointer",onClick:()=>{a&&(Kl.trackEventClick(a.id,t.id),yu.trackEventView(a.id,t.id,t))},children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-start gap-2 mb-2 flex-wrap",children:[e.jsx(bu,{promotionTier:t.promotion_tier,favoritesCount:t.analytics_favorites||0,isLive:"live"===t.live_status,createdAt:t.created_at,isNew:t.isNew,isAlmostFull:t.isAlmostFull,capacity:t.capacity,attendeesCount:t.attendees_count||0,maxBadges:3}),t.event_categories&&e.jsxs("span",{className:"text-xs px-2 py-1 rounded-full text-white font-medium",style:{backgroundColor:t.event_categories.color},children:[t.event_categories.icon," ",t.event_categories.name]}),e.jsx(ec,{event:t})]}),e.jsx("h3",{className:"font-bold text-lg text-gray-800 mb-2",children:t.title}),e.jsx(ie,{event:t}),e.jsxs("p",{className:"text-purple-600 font-medium text-sm mb-1 mt-2",children:[" ",new Date(t.date).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})," a las ",new Date(t.date).toLocaleTimeString("es-ES",{hour:"2-digit",minute:"2-digit"})]}),e.jsxs("p",{className:"text-gray-600 text-sm mb-1",children:[" ",t.location]}),t.price>0&&e.jsxs("p",{className:"text-green-600 font-semibold text-sm mb-1",children:[" $",t.price]}),e.jsx("p",{className:"text-gray-600 text-sm",children:t.description})]}),r&&ue(t.id)]})},t.id);return e.jsxs("div",{className:"h-screen flex flex-col bg-gradient-to-br from-purple-600 via-pink-500 to-blue-600",children:[e.jsx("header",{className:("mapa"===p?"hidden md:block":"")+" bg-white/10 backdrop-blur-md border-b border-white/20 px-4 py-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx(Dl,{size:48,showText:!0,variant:"white"})}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:()=>_(!0),className:"hidden md:flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white rounded-full transition-all shadow-lg hover:shadow-xl transform hover:scale-105",title:"Asistente de Eventos con IA",children:[e.jsx(E,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm font-medium",children:"Te Ayudamos!"})]}),e.jsxs("div",{className:"hidden md:flex items-center gap-3 bg-white/10 rounded-full px-4 py-2 cursor-pointer hover:bg-white/20 transition-colors",onClick:()=>t("/profile"),children:[e.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-purple-400 to-pink-400 rounded-full flex items-center justify-center",children:e.jsx("span",{className:"text-white font-bold text-sm",children:(c?.full_name||a?.email||"U").charAt(0).toUpperCase()})}),e.jsx("div",{className:"text-white",children:e.jsx("div",{className:"text-sm font-medium",children:c?.full_name||c?.username||a?.email?.split("@")[0]||"Usuario"})})]}),e.jsx("button",{onClick:()=>g(!m),className:"p-2 hover:bg-white/10 rounded-lg md:hidden text-white",children:m?e.jsx(y,{className:"h-5 w-5"}):e.jsx(F,{className:"h-5 w-5"})})]})]})}),e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsx("nav",{className:"hidden md:flex flex-col w-64 bg-white/10 backdrop-blur-md border-r border-white/20",children:e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"space-y-2",children:oe.map(r=>{const n=r.icon;return"perfil"===r.id?e.jsxs("button",{onClick:()=>t("/profile"),className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-left transition-all hover:bg-white/10 text-white/80 hover:text-white",children:[e.jsx(n,{className:"h-5 w-5"}),r.label]},r.id):e.jsxs("button",{onClick:()=>f(r.id),className:`w-full flex items-center ${r.iconOnly?"justify-center":"gap-3"} px-4 py-3 rounded-xl text-left transition-all ${p===r.id?"bg-white/20 text-white border border-white/30 shadow-lg":"hover:bg-white/10 text-white/80 hover:text-white"}`,title:r.iconOnly?r.label:void 0,children:[e.jsx(n,{className:"h-5 w-5 "+(r.iconOnly?"text-yellow-300":"")}),!r.iconOnly&&r.label,"favoritos"===r.id&&!r.iconOnly&&e.jsx("span",{className:"ml-auto bg-red-500 text-white text-xs px-2 py-1 rounded-full",children:O.size})]},r.id)})})})}),m&&e.jsx("nav",{className:"md:hidden absolute top-16 left-0 right-0 bg-white/10 backdrop-blur-md border-b border-white/20 shadow-lg z-10",children:e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"space-y-2",children:oe.map(r=>{const n=r.icon;return"perfil"===r.id?e.jsxs("button",{onClick:()=>{t("/profile"),g(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-left transition-all hover:bg-white/10 text-white/80",children:[e.jsx(n,{className:"h-5 w-5"}),r.label]},r.id):e.jsxs("button",{onClick:()=>{f(r.id),g(!1)},className:"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-left transition-all "+(p===r.id?"bg-white/20 text-white border border-white/30":"hover:bg-white/10 text-white/80"),children:[e.jsx(n,{className:"h-5 w-5"}),r.label,"favoritos"===r.id&&e.jsx("span",{className:"ml-auto bg-red-500 text-white text-xs px-2 py-1 rounded-full",children:O.size})]},r.id)})})})}),e.jsx("main",{className:"flex-1 overflow-hidden pb-20 md:pb-0",children:(()=>{if(A)return e.jsx("div",{className:"h-full flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-purple-600 mx-auto mb-4"}),e.jsx("p",{className:"text-white text-lg",children:"Cargando..."})]})});switch(p){case"mapa":return e.jsx("div",{className:"h-full w-full flex items-center justify-center relative",children:e.jsx("div",{className:"h-[90vh] w-full md:w-[95vw] rounded-3xl overflow-hidden shadow-2xl border-2 border-purple-500",children:e.jsx(Bl,{favoriteIds:O,onFavoriteToggle:ne},x)})});case"recomendados":return e.jsx("div",{className:"h-full overflow-y-auto",children:e.jsx("div",{className:"p-6 bg-gradient-to-br from-purple-900 via-purple-800 to-pink-900 min-h-full",children:e.jsx("div",{className:"max-w-6xl mx-auto",children:e.jsx(tc,{allEvents:C,onEventClick:e=>{a&&Kl.trackEventClick(a.id,e)},renderEventCard:(e,t)=>de(e,t),limit:12})})})});case"eventos":return e.jsx("div",{className:"h-full overflow-y-auto",children:e.jsx("div",{className:"p-6 bg-gradient-to-br from-purple-900 via-purple-800 to-pink-900",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4 mb-6",children:[e.jsxs("h2",{className:"text-3xl font-bold text-white flex items-center gap-3",children:[" Eventos (",N.length,"/",C.length,")"]}),e.jsxs("button",{onClick:()=>G(!Q),className:"flex items-center gap-2 px-4 py-2 bg-white/20 text-white rounded-lg hover:bg-white/30 transition-colors backdrop-blur-sm",children:[e.jsx(B,{className:"w-4 h-4"}),Q?"Ocultar Filtros":"Mostrar Filtros"]})]}),e.jsxs("div",{className:"relative mb-6",children:[e.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none z-10",children:e.jsx(H,{className:"h-5 w-5 text-gray-600"})}),e.jsx("input",{type:"text",placeholder:"Qu evento quieres buscar en el Radar? ",value:I,onChange:e=>$(e.target.value),className:"w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-purple-500 bg-white backdrop-blur-sm text-gray-900 placeholder-gray-500 shadow-sm"}),I&&e.jsx("button",{onClick:()=>$(""),className:"absolute inset-y-0 right-0 pr-3 flex items-center",children:e.jsx(y,{className:"h-5 w-5 text-gray-400 hover:text-gray-600"})})]}),Q&&e.jsxs("div",{className:"bg-white/60 backdrop-blur-sm rounded-xl p-6 mb-6 border border-white/50 shadow-lg",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[e.jsx(V,{className:"w-4 h-4 inline mr-1"}),"Ordenar por"]}),e.jsxs("select",{value:D,onChange:e=>L(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 bg-white text-gray-900",children:[e.jsx("option",{value:"priority",children:" Prioridad (Terminan pronto)"}),e.jsx("option",{value:"date",children:" Fecha de inicio"}),e.jsx("option",{value:"category",children:" Categora"}),e.jsx("option",{value:"region",children:" Regin"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" Categora"}),e.jsxs("select",{value:z,onChange:e=>M(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 bg-white text-gray-900",children:[e.jsx("option",{value:"all",children:"Todas las categoras"}),C.map(e=>e.event_categories?.name).filter(Boolean).filter((e,t,r)=>r.indexOf(e)===t).map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:" Regin"}),e.jsxs("select",{value:U,onChange:e=>W(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 bg-white text-gray-900",children:[e.jsx("option",{value:"all",children:"Todas las regiones"}),C.map(e=>{const t=e.location||"";return t.toLowerCase().includes("santiago")?"Santiago":t.toLowerCase().includes("valparaso")||t.toLowerCase().includes("valparaiso")?"Valparaso":t.toLowerCase().includes("concepcin")||t.toLowerCase().includes("concepcion")?"Concepcin":t.toLowerCase().includes("via")||t.toLowerCase().includes("vina")?"Via del Mar":"Otra regin"}).filter((e,t,r)=>r.indexOf(e)===t).map(t=>e.jsx("option",{value:t,children:t},t))]})]})]}),e.jsx("div",{className:"mt-4 flex justify-center",children:e.jsx("button",{onClick:()=>{$(""),L("priority"),M("all"),W("all")},className:"px-4 py-2 text-sm text-white/80 hover:text-white hover:bg-white/10 rounded-lg transition-colors",children:" Limpiar todos los filtros"})})]}),(I||"all"!==z||"all"!==U||"priority"!==D)&&e.jsx("div",{className:"mb-4 p-3 bg-white/10 rounded-lg border-l-4 border-yellow-400 backdrop-blur-sm",children:e.jsxs("p",{className:"text-sm text-white",children:[" Filtros activos:",I&&` Bsqueda: "${I}"`,"all"!==z&&`  Categora: ${z}`,"all"!==U&&`  Regin: ${U}`,"priority"!==D&&`  Orden: ${D}`]})}),0===N.length?e.jsx("div",{className:"text-center py-12",children:0===C.length?e.jsxs(e.Fragment,{children:[e.jsx(i,{className:"w-16 h-16 text-white/40 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No hay eventos disponibles"}),e.jsx("p",{className:"text-white/70 mb-6",children:"Crea tu primer evento o explora eventos existentes"}),e.jsx("button",{onClick:()=>f("mapa"),className:"bg-white/20 text-white px-6 py-3 rounded-lg hover:bg-white/30 transition-colors backdrop-blur-sm",children:"Explorar en Mapa"})]}):e.jsxs(e.Fragment,{children:[e.jsx(H,{className:"w-16 h-16 text-white/40 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No se encontraron eventos"}),e.jsx("p",{className:"text-white/70 mb-6",children:"Intenta cambiar los filtros o trminos de bsqueda"}),e.jsx("button",{onClick:()=>{$(""),L("priority"),M("all"),W("all")},className:"bg-white/20 text-white px-6 py-3 rounded-lg hover:bg-white/30 transition-colors backdrop-blur-sm",children:" Limpiar Filtros"})]})}):e.jsx("div",{className:"grid gap-4",children:N.map(e=>de(e,!0))})]})})});case"favoritos":const r=N.filter(e=>O.has(e.id));return e.jsx("div",{className:"h-full overflow-y-auto",children:e.jsx("div",{className:"p-6 bg-gradient-to-br from-purple-900 via-purple-800 to-pink-900",children:e.jsxs("div",{className:"max-w-4xl mx-auto",children:[e.jsxs("h2",{className:"text-3xl font-bold text-white mb-6 flex items-center gap-3",children:[" Mis Favoritos (",r.length,")"]}),e.jsxs("p",{className:"text-sm text-white/70 mb-4",children:[" Favoritos activos: ",O.size," | Eventos encontrados: ",r.length]}),0===r.length?e.jsxs("div",{className:"text-center py-12",children:[e.jsx(k,{className:"w-16 h-16 text-white/40 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-white mb-2",children:"No tienes favoritos an"}),e.jsx("p",{className:"text-white/70 mb-6",children:"Marca eventos como favoritos para verlos aqu"}),e.jsx("button",{onClick:()=>f("eventos"),className:"bg-white/20 text-white px-6 py-3 rounded-lg hover:bg-white/30 transition-colors backdrop-blur-sm",children:"Ver Todos los Eventos"})]}):e.jsx("div",{className:"grid gap-4",children:r.map(e=>de(e,!0))})]})})});case"pricing":return e.jsx("div",{className:"h-full overflow-y-auto",children:e.jsx(fu,{})});case"crear":return e.jsx("div",{className:"h-full overflow-y-auto",children:e.jsx("div",{className:"p-6 bg-gradient-to-br from-purple-900 via-purple-800 to-pink-900",children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-6 flex items-center gap-3",children:" Crear Evento"}),e.jsx(Gl,{onEventCreated:ce,alwaysOpen:!0})]})})});case"perfil":return e.jsx("div",{className:"h-full overflow-y-auto",children:e.jsx("div",{className:"p-6 bg-gradient-to-br from-purple-900 via-purple-800 to-pink-900",children:e.jsxs("div",{className:"max-w-2xl mx-auto",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-6 flex items-center gap-3",children:" Mi Perfil"}),e.jsxs("div",{className:"bg-white/80 backdrop-blur-sm rounded-xl p-8 shadow-lg border border-white/50",children:[e.jsxs("div",{className:"flex items-center mb-6",children:[e.jsx("div",{className:"w-20 h-20 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center shadow-lg",children:e.jsx("span",{className:"text-2xl font-bold text-white",children:(c?.full_name||a?.email||"U").charAt(0).toUpperCase()})}),e.jsxs("div",{className:"ml-6",children:[e.jsx("h3",{className:"font-bold text-xl text-gray-800",children:c?.full_name||"Usuario"}),e.jsx("p",{className:"text-gray-600",children:a?.email}),e.jsxs("p",{className:"text-sm text-purple-600 mt-1",children:["Miembro desde ",(new Date).getFullYear()]})]})]}),e.jsx("div",{className:"space-y-4 mb-6",children:e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"font-semibold text-gray-800 mb-2",children:" Estadsticas"}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:O.size}),e.jsx("div",{className:"text-sm text-gray-600",children:"Eventos Favoritos"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-pink-600",children:N?.filter(e=>e.user_id===a?.id).length||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Eventos Creados"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:N?.length||0}),e.jsx("div",{className:"text-sm text-gray-600",children:"Total Eventos"})]})]})]})}),e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsxs("button",{onClick:()=>t("/"),className:"w-full bg-gradient-to-r from-purple-500 to-pink-500 hover:from-purple-600 hover:to-pink-600 text-white py-3 rounded-lg font-medium transition-all flex items-center justify-center gap-2",children:[e.jsx(n,{className:"h-5 w-5"}),"Ir al Home"]}),e.jsxs("button",{onClick:le,className:"w-full bg-red-500 hover:bg-red-600 text-white py-3 rounded-lg font-medium transition-colors flex items-center justify-center gap-2",children:[e.jsx(q,{className:"h-5 w-5"}),"Cerrar Sesin"]})]})]})]})})});default:return e.jsx("div",{className:"h-full bg-gradient-to-br from-purple-100/20 to-pink-100/20 p-4",children:e.jsx("div",{className:"h-full rounded-xl overflow-hidden shadow-lg",children:e.jsx(Bl,{})})})}})()})]}),e.jsx("nav",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-purple-900/20 backdrop-blur-xl border-t border-white/10 z-50 safe-area-bottom",children:e.jsx("div",{className:"flex items-center justify-around px-2 py-2",children:oe.map(t=>{const r=t.icon,n=p===t.id;return"perfil"===t.id?e.jsxs("a",{href:"/profile",className:"flex flex-col items-center py-2 px-3 transition-all relative group",children:[e.jsx("div",{className:"transition-all "+(n?"text-white":"text-white/70"),children:e.jsx(r,{className:"h-6 w-6 transition-all "+(n?"scale-110":"")})}),e.jsx("span",{className:"text-[10px] mt-1 font-medium transition-all "+(n?"text-white":"text-white/70"),children:t.label})]},t.id):t.special?"recomendados"===t.id?e.jsxs("button",{onClick:()=>f(t.id),className:"flex flex-col items-center py-2 px-3 transition-all relative group",title:"Recomendaciones personalizadas con IA",children:[e.jsx("div",{className:"transition-all "+(n?"text-yellow-400":"text-white/70 group-hover:text-yellow-300"),children:e.jsx(r,{className:"h-6 w-6 transition-all "+(n?"scale-110 animate-pulse":"")})}),e.jsx("span",{className:"hidden md:block text-[10px] mt-1 font-medium transition-all "+(n?"text-yellow-400":"text-white/70"),children:t.label}),n&&e.jsx("div",{className:"absolute -bottom-0.5 left-1/2 transform -translate-x-1/2 w-1 h-1 bg-yellow-400 rounded-full"})]},t.id):e.jsxs("button",{onClick:()=>f(t.id),className:"flex flex-col items-center py-2 px-3 transition-all relative group -mt-4",children:[e.jsx("div",{className:"w-14 h-14 rounded-full flex items-center justify-center shadow-lg transition-all transform "+(n?"bg-gradient-to-r from-purple-600 to-pink-600 scale-110":"bg-gradient-to-r from-purple-500 to-pink-500 hover:scale-105"),children:e.jsx(r,{className:"h-7 w-7 text-white"})}),e.jsx("span",{className:"text-[10px] mt-1 font-medium transition-all "+(n?"text-white":"text-white/70"),children:t.label})]},t.id):e.jsxs("button",{onClick:()=>f(t.id),className:"flex flex-col items-center py-2 px-3 transition-all relative group",children:[e.jsx("div",{className:"transition-all "+(n?"text-white":"text-white/70 group-hover:text-white"),children:e.jsx(r,{className:"h-6 w-6 transition-all "+(n?"scale-110":"")})}),e.jsx("span",{className:"text-[10px] mt-1 font-medium transition-all "+(n?"text-white":"text-white/70"),children:t.label}),"favoritos"===t.id&&O.size>0&&e.jsx("span",{className:"absolute top-0 right-1 bg-red-500 text-white text-[9px] px-1.5 py-0.5 rounded-full min-w-[18px] text-center font-bold",children:O.size})]},t.id)})})}),e.jsx(pc,{allEvents:C}),K.map(t=>e.jsx(nc,{notification:t,onClose:()=>{J(e=>e.filter(e=>e.id!==t.id))}},t.id)),e.jsx(rc,{events:C,isOpen:j,onClose:()=>_(!1),userPreferences:{categories:c?.preferred_categories||[],location:c?.city||"",budget:c?.budget||"flexible"}}),!j&&e.jsx("button",{onClick:()=>_(!0),className:"md:hidden fixed bottom-20 right-4 z-50 w-14 h-14 bg-gradient-to-r from-blue-500 to-purple-500 hover:from-blue-600 hover:to-purple-600 text-white rounded-full shadow-2xl hover:shadow-3xl transition-all transform hover:scale-110 flex items-center justify-center",title:"Chatbot con IA",children:e.jsx(E,{className:"h-6 w-6"})})]})};var wu,ju;const ku=ke(function(){if(ju)return wu;ju=1;var e,t=we(),r=(e=t)&&"object"==typeof e&&"default"in e?e.default:e;function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var s=!("undefined"==typeof window||!window.document||!window.document.createElement);return wu=function(e,a,i){if("function"!=typeof e)throw new Error("Expected reducePropsToState to be a function.");if("function"!=typeof a)throw new Error("Expected handleStateChangeOnClient to be a function.");if(void 0!==i&&"function"!=typeof i)throw new Error("Expected mapStateOnServer to either be undefined or a function.");return function(o){if("function"!=typeof o)throw new Error("Expected WrappedComponent to be a React component.");var l,c=[];function u(){l=e(c.map(function(e){return e.props})),d.canUseDOM?a(l):i&&(l=i(l))}var d=function(e){var t,n;function s(){return e.apply(this,arguments)||this}n=e,(t=s).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,s.peek=function(){return l},s.rewind=function(){if(s.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var e=l;return l=void 0,c=[],e};var a=s.prototype;return a.UNSAFE_componentWillMount=function(){c.push(this),u()},a.componentDidUpdate=function(){u()},a.componentWillUnmount=function(){var e=c.indexOf(this);c.splice(e,1),u()},a.render=function(){return r.createElement(o,this.props)},s}(t.PureComponent);return n(d,"displayName","SideEffect("+function(e){return e.displayName||e.name||"Component"}(o)+")"),n(d,"canUseDOM",s),d}}}());var _u,Nu;const Su=ke(function(){if(Nu)return _u;Nu=1;var e="undefined"!=typeof Element,t="function"==typeof Map,r="function"==typeof Set,n="function"==typeof ArrayBuffer&&!!ArrayBuffer.isView;function s(a,i){if(a===i)return!0;if(a&&i&&"object"==typeof a&&"object"==typeof i){if(a.constructor!==i.constructor)return!1;var o,l,c,u;if(Array.isArray(a)){if((o=a.length)!=i.length)return!1;for(l=o;0!==l--;)if(!s(a[l],i[l]))return!1;return!0}if(t&&a instanceof Map&&i instanceof Map){if(a.size!==i.size)return!1;for(u=a.entries();!(l=u.next()).done;)if(!i.has(l.value[0]))return!1;for(u=a.entries();!(l=u.next()).done;)if(!s(l.value[1],i.get(l.value[0])))return!1;return!0}if(r&&a instanceof Set&&i instanceof Set){if(a.size!==i.size)return!1;for(u=a.entries();!(l=u.next()).done;)if(!i.has(l.value[0]))return!1;return!0}if(n&&ArrayBuffer.isView(a)&&ArrayBuffer.isView(i)){if((o=a.length)!=i.length)return!1;for(l=o;0!==l--;)if(a[l]!==i[l])return!1;return!0}if(a.constructor===RegExp)return a.source===i.source&&a.flags===i.flags;if(a.valueOf!==Object.prototype.valueOf&&"function"==typeof a.valueOf&&"function"==typeof i.valueOf)return a.valueOf()===i.valueOf();if(a.toString!==Object.prototype.toString&&"function"==typeof a.toString&&"function"==typeof i.toString)return a.toString()===i.toString();if((o=(c=Object.keys(a)).length)!==Object.keys(i).length)return!1;for(l=o;0!==l--;)if(!Object.prototype.hasOwnProperty.call(i,c[l]))return!1;if(e&&a instanceof Element)return!1;for(l=o;0!==l--;)if(("_owner"!==c[l]&&"__v"!==c[l]&&"__o"!==c[l]||!a.$$typeof)&&!s(a[c[l]],i[c[l]]))return!1;return!0}return a!=a&&i!=i}return _u=function(e,t){try{return s(e,t)}catch(r){if((r.message||"").match(/stack|recursion/i))return!1;throw r}}}());var Eu,Cu;const Tu=ke(function(){if(Cu)return Eu;Cu=1;var e=Object.getOwnPropertySymbols,t=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;return Eu=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach(function(e){n[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(s){return!1}}()?Object.assign:function(n,s){for(var a,i,o=function(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(n),l=1;l<arguments.length;l++){for(var c in a=Object(arguments[l]))t.call(a,c)&&(o[c]=a[c]);if(e){i=e(a);for(var u=0;u<i.length;u++)r.call(a,i[u])&&(o[i[u]]=a[i[u]])}}return o}}());var Ou="bodyAttributes",Pu="htmlAttributes",Au="titleAttributes",Ru={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"};Object.keys(Ru).map(function(e){return Ru[e]});var Iu,$u,Du,Lu,zu="charset",Mu="cssText",Uu="href",Fu="http-equiv",qu="innerHTML",Bu="itemprop",Hu="name",Vu="property",Wu="rel",Qu="src",Gu="target",Ku={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},Ju="defaultTitle",Yu="defer",Xu="encodeSpecialCharacters",Zu="onChangeClientState",ed="titleTemplate",td=Object.keys(Ku).reduce(function(e,t){return e[Ku[t]]=t,e},{}),rd=[Ru.NOSCRIPT,Ru.SCRIPT,Ru.STYLE],nd="data-react-helmet",sd="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ad=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),id=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},od=function(e,t){var r={};for(var n in e)t.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(e,n)&&(r[n]=e[n]);return r},ld=function(e){return!1===(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},cd=function(e){var t=fd(e,Ru.TITLE),r=fd(e,ed);if(r&&t)return r.replace(/%s/g,function(){return Array.isArray(t)?t.join(""):t});var n=fd(e,Ju);return t||n||void 0},ud=function(e){return fd(e,Zu)||function(){}},dd=function(e,t){return t.filter(function(t){return void 0!==t[e]}).map(function(t){return t[e]}).reduce(function(e,t){return id({},e,t)},{})},hd=function(e,t){return t.filter(function(e){return void 0!==e[Ru.BASE]}).map(function(e){return e[Ru.BASE]}).reverse().reduce(function(t,r){if(!t.length)for(var n=Object.keys(r),s=0;s<n.length;s++){var a=n[s].toLowerCase();if(-1!==e.indexOf(a)&&r[a])return t.concat(r)}return t},[])},pd=function(e,t,r){var n={};return r.filter(function(t){return!!Array.isArray(t[e])||(void 0!==t[e]&&yd("Helmet: "+e+' should be of type "Array". Instead found type "'+sd(t[e])+'"'),!1)}).map(function(t){return t[e]}).reverse().reduce(function(e,r){var s={};r.filter(function(e){for(var r=void 0,a=Object.keys(e),i=0;i<a.length;i++){var o=a[i],l=o.toLowerCase();-1===t.indexOf(l)||r===Wu&&"canonical"===e[r].toLowerCase()||l===Wu&&"stylesheet"===e[l].toLowerCase()||(r=l),-1===t.indexOf(o)||o!==qu&&o!==Mu&&o!==Bu||(r=o)}if(!r||!e[r])return!1;var c=e[r].toLowerCase();return n[r]||(n[r]={}),s[r]||(s[r]={}),!n[r][c]&&(s[r][c]=!0,!0)}).reverse().forEach(function(t){return e.push(t)});for(var a=Object.keys(s),i=0;i<a.length;i++){var o=a[i],l=Tu({},n[o],s[o]);n[o]=l}return e},[]).reverse()},fd=function(e,t){for(var r=e.length-1;r>=0;r--){var n=e[r];if(n.hasOwnProperty(t))return n[t]}return null},md=(Iu=Date.now(),function(e){var t=Date.now();t-Iu>16?(Iu=t,e(t)):setTimeout(function(){md(e)},0)}),gd=function(e){return clearTimeout(e)},bd="undefined"!=typeof window?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||md:global.requestAnimationFrame||md,vd="undefined"!=typeof window?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||gd:global.cancelAnimationFrame||gd,yd=function(e){return console&&"function"==typeof console.warn&&void 0},xd=null,wd=function(e,t){var r=e.baseTag,n=e.bodyAttributes,s=e.htmlAttributes,a=e.linkTags,i=e.metaTags,o=e.noscriptTags,l=e.onChangeClientState,c=e.scriptTags,u=e.styleTags,d=e.title,h=e.titleAttributes;_d(Ru.BODY,n),_d(Ru.HTML,s),kd(d,h);var p={baseTag:Nd(Ru.BASE,r),linkTags:Nd(Ru.LINK,a),metaTags:Nd(Ru.META,i),noscriptTags:Nd(Ru.NOSCRIPT,o),scriptTags:Nd(Ru.SCRIPT,c),styleTags:Nd(Ru.STYLE,u)},f={},m={};Object.keys(p).forEach(function(e){var t=p[e],r=t.newTags,n=t.oldTags;r.length&&(f[e]=r),n.length&&(m[e]=p[e].oldTags)}),t&&t(),l(e,f,m)},jd=function(e){return Array.isArray(e)?e.join(""):e},kd=function(e,t){void 0!==e&&document.title!==e&&(document.title=jd(e)),_d(Ru.TITLE,t)},_d=function(e,t){var r=document.getElementsByTagName(e)[0];if(r){for(var n=r.getAttribute(nd),s=n?n.split(","):[],a=[].concat(s),i=Object.keys(t),o=0;o<i.length;o++){var l=i[o],c=t[l]||"";r.getAttribute(l)!==c&&r.setAttribute(l,c),-1===s.indexOf(l)&&s.push(l);var u=a.indexOf(l);-1!==u&&a.splice(u,1)}for(var d=a.length-1;d>=0;d--)r.removeAttribute(a[d]);s.length===a.length?r.removeAttribute(nd):r.getAttribute(nd)!==i.join(",")&&r.setAttribute(nd,i.join(","))}},Nd=function(e,t){var r=document.head||document.querySelector(Ru.HEAD),n=r.querySelectorAll(e+"["+nd+"]"),s=Array.prototype.slice.call(n),a=[],i=void 0;return t&&t.length&&t.forEach(function(t){var r=document.createElement(e);for(var n in t)if(t.hasOwnProperty(n))if(n===qu)r.innerHTML=t.innerHTML;else if(n===Mu)r.styleSheet?r.styleSheet.cssText=t.cssText:r.appendChild(document.createTextNode(t.cssText));else{var o=void 0===t[n]?"":t[n];r.setAttribute(n,o)}r.setAttribute(nd,"true"),s.some(function(e,t){return i=t,r.isEqualNode(e)})?s.splice(i,1):a.push(r)}),s.forEach(function(e){return e.parentNode.removeChild(e)}),a.forEach(function(e){return r.appendChild(e)}),{oldTags:s,newTags:a}},Sd=function(e){return Object.keys(e).reduce(function(t,r){var n=void 0!==e[r]?r+'="'+e[r]+'"':""+r;return t?t+" "+n:n},"")},Ed=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce(function(t,r){return t[Ku[r]||r]=e[r],t},t)},Cd=function(e,t,r){switch(e){case Ru.TITLE:return{toComponent:function(){return e=t.title,r=t.titleAttributes,(n={key:e})[nd]=!0,s=Ed(r,n),[Ee.createElement(Ru.TITLE,s,e)];var e,r,n,s},toString:function(){return function(e,t,r,n){var s=Sd(r),a=jd(t);return s?"<"+e+" "+nd+'="true" '+s+">"+ld(a,n)+"</"+e+">":"<"+e+" "+nd+'="true">'+ld(a,n)+"</"+e+">"}(e,t.title,t.titleAttributes,r)}};case Ou:case Pu:return{toComponent:function(){return Ed(t)},toString:function(){return Sd(t)}};default:return{toComponent:function(){return function(e,t){return t.map(function(t,r){var n,s=((n={key:r})[nd]=!0,n);return Object.keys(t).forEach(function(e){var r=Ku[e]||e;if(r===qu||r===Mu){var n=t.innerHTML||t.cssText;s.dangerouslySetInnerHTML={__html:n}}else s[r]=t[e]}),Ee.createElement(e,s)})}(e,t)},toString:function(){return function(e,t,r){return t.reduce(function(t,n){var s=Object.keys(n).filter(function(e){return!(e===qu||e===Mu)}).reduce(function(e,t){var s=void 0===n[t]?t:t+'="'+ld(n[t],r)+'"';return e?e+" "+s:s},""),a=n.innerHTML||n.cssText||"",i=-1===rd.indexOf(e);return t+"<"+e+" "+nd+'="true" '+s+(i?"/>":">"+a+"</"+e+">")},"")}(e,t,r)}}}},Td=function(e){var t=e.baseTag,r=e.bodyAttributes,n=e.encode,s=e.htmlAttributes,a=e.linkTags,i=e.metaTags,o=e.noscriptTags,l=e.scriptTags,c=e.styleTags,u=e.title,d=void 0===u?"":u,h=e.titleAttributes;return{base:Cd(Ru.BASE,t,n),bodyAttributes:Cd(Ou,r,n),htmlAttributes:Cd(Pu,s,n),link:Cd(Ru.LINK,a,n),meta:Cd(Ru.META,i,n),noscript:Cd(Ru.NOSCRIPT,o,n),script:Cd(Ru.SCRIPT,l,n),style:Cd(Ru.STYLE,c,n),title:Cd(Ru.TITLE,{title:d,titleAttributes:h},n)}},Od=ku(function(e){return{baseTag:hd([Uu,Gu],e),bodyAttributes:dd(Ou,e),defer:fd(e,Yu),encode:fd(e,Xu),htmlAttributes:dd(Pu,e),linkTags:pd(Ru.LINK,[Wu,Uu],e),metaTags:pd(Ru.META,[Hu,zu,Fu,Vu,Bu],e),noscriptTags:pd(Ru.NOSCRIPT,[qu],e),onChangeClientState:ud(e),scriptTags:pd(Ru.SCRIPT,[Qu,qu],e),styleTags:pd(Ru.STYLE,[Mu],e),title:cd(e),titleAttributes:dd(Au,e)}},function(e){xd&&vd(xd),e.defer?xd=bd(function(){wd(e,function(){xd=null})}):(wd(e),xd=null)},Td)(function(){return null}),Pd=($u=Od,Lu=Du=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,e.apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.shouldComponentUpdate=function(e){return!Su(this.props,e)},t.prototype.mapNestedChildrenToProps=function(e,t){if(!t)return null;switch(e.type){case Ru.SCRIPT:case Ru.NOSCRIPT:return{innerHTML:t};case Ru.STYLE:return{cssText:t}}throw new Error("<"+e.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},t.prototype.flattenArrayTypeChildren=function(e){var t,r=e.child,n=e.arrayTypeChildren,s=e.newChildProps,a=e.nestedChildren;return id({},n,((t={})[r.type]=[].concat(n[r.type]||[],[id({},s,this.mapNestedChildrenToProps(r,a))]),t))},t.prototype.mapObjectTypeChildren=function(e){var t,r,n=e.child,s=e.newProps,a=e.newChildProps,i=e.nestedChildren;switch(n.type){case Ru.TITLE:return id({},s,((t={})[n.type]=i,t.titleAttributes=id({},a),t));case Ru.BODY:return id({},s,{bodyAttributes:id({},a)});case Ru.HTML:return id({},s,{htmlAttributes:id({},a)})}return id({},s,((r={})[n.type]=id({},a),r))},t.prototype.mapArrayTypeChildrenToProps=function(e,t){var r=id({},t);return Object.keys(e).forEach(function(t){var n;r=id({},r,((n={})[t]=e[t],n))}),r},t.prototype.warnOnInvalidChildren=function(e,t){return!0},t.prototype.mapChildrenToProps=function(e,t){var r=this,n={};return Ee.Children.forEach(e,function(e){if(e&&e.props){var s=e.props,a=s.children,i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce(function(t,r){return t[td[r]||r]=e[r],t},t)}(od(s,["children"]));switch(r.warnOnInvalidChildren(e,a),e.type){case Ru.LINK:case Ru.META:case Ru.NOSCRIPT:case Ru.SCRIPT:case Ru.STYLE:n=r.flattenArrayTypeChildren({child:e,arrayTypeChildren:n,newChildProps:i,nestedChildren:a});break;default:t=r.mapObjectTypeChildren({child:e,newProps:t,newChildProps:i,nestedChildren:a})}}}),t=this.mapArrayTypeChildrenToProps(n,t)},t.prototype.render=function(){var e=this.props,t=e.children,r=od(e,["children"]),n=id({},r);return t&&(n=this.mapChildrenToProps(t,n)),Ee.createElement($u,n)},ad(t,null,[{key:"canUseDOM",set:function(e){$u.canUseDOM=e}}]),t}(Ee.Component),Du.propTypes={base:Lc.object,bodyAttributes:Lc.object,children:Lc.oneOfType([Lc.arrayOf(Lc.node),Lc.node]),defaultTitle:Lc.string,defer:Lc.bool,encodeSpecialCharacters:Lc.bool,htmlAttributes:Lc.object,link:Lc.arrayOf(Lc.object),meta:Lc.arrayOf(Lc.object),noscript:Lc.arrayOf(Lc.object),onChangeClientState:Lc.func,script:Lc.arrayOf(Lc.object),style:Lc.arrayOf(Lc.object),title:Lc.string,titleAttributes:Lc.object,titleTemplate:Lc.string},Du.defaultProps={defer:!0,encodeSpecialCharacters:!0},Du.peek=$u.peek,Du.rewind=function(){var e=$u.rewind();return e||(e=Td({baseTag:[],bodyAttributes:{},htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),e},Lu);Pd.renderStatic=Pd.rewind;let Ad=0;const Rd={state:{toasts:[]},listeners:[],getState:()=>Rd.state,setState:e=>{Rd.state="function"==typeof e?e(Rd.state):{...Rd.state,...e},Rd.listeners.forEach(e=>e(Rd.state))},subscribe:e=>(Rd.listeners.push(e),()=>{Rd.listeners=Rd.listeners.filter(t=>t!==e)})},Id=({...e})=>{const t=(Ad=(Ad+1)%Number.MAX_VALUE,Ad.toString()),r=()=>Rd.setState(e=>({...e,toasts:e.toasts.filter(e=>e.id!==t)}));return Rd.setState(n=>({...n,toasts:[{...e,id:t,dismiss:r},...n.toasts].slice(0,1)})),{id:t,dismiss:r,update:e=>Rd.setState(r=>({...r,toasts:r.toasts.map(r=>r.id===t?{...r,...e}:r)}))}},$d=({eventId:t,initialFavorite:r=!1,onFavoriteChange:n})=>{const{user:s}=Qi(),[a,i]=_e.useState(r),[o,l]=_e.useState(!1);_e.useEffect(()=>{s&&t&&c()},[t,s]);const c=async()=>{try{const{data:e,error:r}=await Vi.from("favorites").select("id").eq("user_id",s.id).eq("event_id",t).maybeSingle();if(r)return void i(!1);i(!!e)}catch(e){i(!1)}};return s?e.jsx("button",{onClick:async e=>{if(e.preventDefault(),e.stopPropagation(),o)return;if(!t)return;if(!s)return;const r=!a;i(r),l(!0);try{if(r){const{data:e,error:a}=await Vi.from("favorites").insert([{user_id:s.id,event_id:t}]).select();a?(i(!r),alert("Error al agregar a favoritos: "+a.message)):n&&n(t,r)}else{const{data:e,error:a}=await Vi.from("favorites").delete().eq("user_id",s.id).eq("event_id",t).select();a?(i(!r),alert("Error al quitar de favoritos: "+a.message)):n&&n(t,r)}}catch(c){i(!r),alert("Error inesperado: "+c.message)}finally{l(!1)}},disabled:o,className:`p-2 rounded-full transition-all duration-300 transform hover:scale-110 ${a?"bg-red-100 text-red-600 hover:bg-red-200":"bg-gray-100 text-gray-400 hover:bg-gray-200 hover:text-red-400"} ${o?"opacity-50 cursor-not-allowed animate-pulse":"shadow-sm hover:shadow-md"}`,title:a?"Quitar de favoritos ":"Agregar a favoritos ",children:e.jsx(k,{className:"w-5 h-5 transition-all duration-300 "+(a?"fill-current text-red-600":"text-gray-400")})}):null},Dd=()=>{const{user:t}=Qi(),r=Pe(),[n,o]=_e.useState("feed"),[l,d]=_e.useState("grid"),[m,w]=_e.useState(!1),[j,_]=_e.useState(!1),[E,P]=_e.useState(!1),[R,I]=_e.useState({}),[D,L]=_e.useState(""),[z,M]=_e.useState({eventsCreated:0,totalEvents:0,favorites:0,eventsAttended:0,verified:!0}),[F,B]=_e.useState([]),[H,V]=_e.useState([]),[we,je]=_e.useState([]),[ke,Ne]=_e.useState([]),[Se,Ee]=_e.useState([]),[Ce,Te]=_e.useState({full_name:t?.user_metadata?.full_name||"",birth_date:t?.user_metadata?.birth_date||"",phone:t?.user_metadata?.phone||"",address:t?.user_metadata?.address||"",bio:t?.user_metadata?.bio||"",avatar_url:t?.user_metadata?.avatar_url||"",location:t?.user_metadata?.location||"",website:t?.user_metadata?.website||"",occupation:t?.user_metadata?.occupation||"",company:t?.user_metadata?.company||"",theme_color:t?.user_metadata?.theme_color||"purple",status:t?.user_metadata?.status||"Disponible para eventos",interests:t?.user_metadata?.interests||[],music_preferences:t?.user_metadata?.music_preferences||[],event_preferences:t?.user_metadata?.event_preferences||[],social_links:t?.user_metadata?.social_links||{instagram:"",twitter:"",linkedin:"",youtube:""}}),[Oe,Ae]=_e.useState({emailNotifications:!0,pushNotifications:!0,eventReminders:!0,newEventsNearby:!0,weeklyDigest:!1,profileVisibility:"public"}),Re=[{icon:ae,label:"Msica",value:"musica"},{icon:ie,label:"Cine",value:"cine"},{icon:oe,label:"Gaming",value:"gaming"},{icon:le,label:"Lectura",value:"lectura"},{icon:h,label:"Gastronoma",value:"gastronomia"},{icon:a,label:"Viajes",value:"viajes"},{icon:ce,label:"Tecnologa",value:"tecnologia"},{icon:ue,label:"Fotografa",value:"fotografia"}],Ie=[{label:" Rock",value:"rock"},{label:" Clsica",value:"clasica"},{label:" Pop",value:"pop"},{label:" Jazz",value:"jazz"},{label:" Electrnica",value:"electronica"},{label:" Hip Hop",value:"hiphop"},{label:" Indie",value:"indie"},{label:" Folklore",value:"folklore"},{label:" Metal",value:"metal"},{label:" Reggaeton",value:"reggaeton"}],$e=[{label:" Teatro",value:"teatro"},{label:" Arte y Cultura",value:"arte"},{label:" Deportes",value:"deportes"},{label:" Gastronoma",value:"gastronomia_eventos"},{label:" Conferencias",value:"conferencias"},{label:" Ferias",value:"ferias"},{label:" Cine",value:"cine_eventos"},{label:" Gaming/E-sports",value:"gaming_eventos"},{label:" Al aire libre",value:"aire_libre"},{label:" Educativos",value:"educativos"}];_e.useEffect(()=>{t&&(De(),ze(),Me(),Ue(),Fe(),Le(),Be())},[t]);const De=async()=>{try{const{data:e,error:r}=await Vi.from("profiles").select("*").eq("id",t.id).single();!r&&e&&(Te({full_name:e.full_name||t?.user_metadata?.full_name||"",birth_date:e.birth_date||t?.user_metadata?.birth_date||"",phone:e.phone||t?.user_metadata?.phone||"",address:e.address||t?.user_metadata?.address||"",bio:e.bio||t?.user_metadata?.bio||"",avatar_url:e.avatar_url||t?.user_metadata?.avatar_url||"",location:e.location||t?.user_metadata?.location||"",website:e.website||t?.user_metadata?.website||"",occupation:e.occupation||t?.user_metadata?.occupation||"",company:e.company||t?.user_metadata?.company||"",theme_color:e.theme_color||t?.user_metadata?.theme_color||"purple",status:e.status||t?.user_metadata?.status||"Disponible para eventos",interests:e.interests||t?.user_metadata?.interests||[],music_preferences:e.music_preferences||t?.user_metadata?.music_preferences||[],event_preferences:e.event_preferences||t?.user_metadata?.event_preferences||[],social_links:e.social_links||t?.user_metadata?.social_links||{instagram:"",twitter:"",linkedin:"",youtube:""}}),M(t=>({...t,verified:e.verified||!1})))}catch(e){}},Le=async()=>{try{const{data:e,error:r}=await Vi.from("user_photos").select("*").eq("user_id",t.id).order("created_at",{ascending:!1});if(r)return;const n=(e||[]).map(e=>({id:e.id,url:e.photo_url,event:e.event_name||e.caption||"Sin descripcin",caption:e.caption,date:new Date(e.created_at).toLocaleDateString(),likes:e.likes_count||0,comments:e.comments_count||0}));Ee(n);const s=(e||[]).map(e=>({id:e.id,image:e.photo_url,caption:e.caption||"",likes:e.likes_count||0,comments:e.comments_count||0,timestamp:new Date(e.created_at).toISOString().split("T")[0],liked:!1}));Ne(s)}catch(e){Ee([]),Ne([])}},ze=async()=>{try{const{count:e}=await Vi.from("events").select("*",{count:"exact",head:!0}),{count:r}=await Vi.from("events").select("*",{count:"exact",head:!0}).eq("created_by",t.id),{count:n}=await Vi.from("favorites").select("*",{count:"exact",head:!0}).eq("user_id",t.id);M(t=>({...t,totalEvents:e||0,eventsCreated:r||0,favorites:n||0,eventsAttended:0}))}catch(e){}},Me=async()=>{try{const{data:e,error:r}=await Vi.from("events").select("*").eq("created_by",t.id).order("created_at",{ascending:!1}).limit(6);r||B(e||[])}catch(e){}},Ue=async()=>{try{const{data:e,error:r}=await Vi.from("favorites").select("*, events(*)").eq("user_id",t.id).order("created_at",{ascending:!1}).limit(6);r||V(e?.map(e=>e.events)||[])}catch(e){}},Fe=async()=>{je([{type:"favorite",message:"Agregaste un evento a favoritos",time:"2 horas"},{type:"create",message:"Creaste un nuevo evento",time:"1 da"},{type:"update",message:"Actualizaste tu perfil",time:"3 das"}])},qe=e=>{const{name:t,value:r}=e.target;Te(e=>({...e,[t]:r}))},Be=async()=>{try{const{data:e,error:r}=await Vi.from("user_preferences").select("*").eq("user_id",t.id).single();!r&&e&&Ae({emailNotifications:e.email_notifications??!0,pushNotifications:e.push_notifications??!0,eventReminders:e.event_reminders??!0,newEventsNearby:e.new_events_nearby??!0,weeklyDigest:e.weekly_digest??!1,profileVisibility:e.profile_visibility||"public"})}catch(e){}},He=async e=>{const t=R[e];if(t&&t.trim())try{Id({title:" Comentario publicado",description:"Tu comentario ha sido agregado"}),I(t=>({...t,[e]:""}))}catch(r){Id({title:"Error",description:"No se pudo publicar el comentario",variant:"destructive"})}else Id({title:"Error",description:"Escribe un comentario primero",variant:"destructive"})},Ve={purple:{from:"#9333ea",to:"#ec4899",main:"#9333ea",light:"#a855f7",badge:"bg-purple-600",hover:"hover:bg-purple-700",text:"text-purple-600",border:"border-purple-600",ring:"focus:ring-purple-500"},blue:{from:"#3b82f6",to:"#06b6d4",main:"#3b82f6",light:"#60a5fa",badge:"bg-blue-600",hover:"hover:bg-blue-700",text:"text-blue-600",border:"border-blue-600",ring:"focus:ring-blue-500"},green:{from:"#10b981",to:"#34d399",main:"#10b981",light:"#34d399",badge:"bg-green-600",hover:"hover:bg-green-700",text:"text-green-600",border:"border-green-600",ring:"focus:ring-green-500"},orange:{from:"#f59e0b",to:"#f97316",main:"#f59e0b",light:"#fb923c",badge:"bg-orange-600",hover:"hover:bg-orange-700",text:"text-orange-600",border:"border-orange-600",ring:"focus:ring-orange-500"},pink:{from:"#ec4899",to:"#f472b6",main:"#ec4899",light:"#f472b6",badge:"bg-pink-600",hover:"hover:bg-pink-700",text:"text-pink-600",border:"border-pink-600",ring:"focus:ring-pink-500"}},We=Ve[Ce.theme_color]||Ve.purple,Qe=[{icon:"",name:"Primer Evento",unlocked:z.eventsCreated>0},{icon:"",name:"Coleccionista",unlocked:z.favorites>=5},{icon:"",name:"Activo",unlocked:z.eventsCreated>=3},{icon:"",name:"Influencer",unlocked:z.eventsCreated>=10}];if(!t)return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-pink-500 to-blue-600 flex items-center justify-center p-4",children:e.jsxs(u.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"text-center bg-white/10 backdrop-blur-md rounded-2xl p-8",children:[e.jsx(v,{className:"w-16 h-16 mx-auto mb-4 text-white"}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"Acceso Requerido"}),e.jsx("p",{className:"text-white/70 mb-8",children:"Debes iniciar sesin para ver tu perfil."}),e.jsx(El,{asChild:!0,className:"bg-white text-purple-600 hover:bg-white/90",children:e.jsx("a",{href:"/login",children:"Iniciar Sesin"})})]})});const Ge=[{id:"feed",label:"Feed",icon:J},{id:"perfil",label:"Perfil",icon:v},{id:"eventos",label:"Mis Eventos",icon:Y},{id:"fotos",label:"Fotos",icon:X},{id:"favoritos",label:"Favoritos",icon:k},{id:"insignias",label:"Insignias",icon:Z},{id:"actividad",label:"Actividad",icon:ee},{id:"configuracion",label:"Configuracin",icon:te}];return e.jsxs(e.Fragment,{children:[e.jsxs(Pd,{children:[e.jsx("title",{children:"Mi Perfil Social - EventRadar"}),e.jsx("meta",{name:"description",content:"Tu perfil social en EventRadar - Comparte, conecta y descubre eventos."})]}),e.jsx("div",{className:"min-h-screen py-4 sm:py-6 md:py-8 px-2 sm:px-4",style:{background:`linear-gradient(to bottom right, ${We.from}, ${We.to})`},children:e.jsxs("div",{className:"max-w-7xl mx-auto",children:[e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"relative mb-4 sm:mb-6 md:mb-8",children:[e.jsx("div",{className:"h-32 sm:h-48 md:h-64 rounded-t-2xl sm:rounded-t-3xl bg-gradient-to-r overflow-hidden",style:{backgroundImage:`linear-gradient(135deg, ${Ve[Ce.theme_color].from}, ${Ve[Ce.theme_color].to})`},children:e.jsx("div",{className:"absolute inset-0 bg-black/20"})}),e.jsx("div",{className:"relative px-4 sm:px-6 pb-6",children:e.jsxs("div",{className:"flex flex-col gap-4 -mt-16 md:-mt-20",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-end gap-4",children:[e.jsxs("div",{className:"relative group mx-auto sm:mx-0",children:[e.jsx("img",{src:Ce.avatar_url||`https://ui-avatars.com/api/?name=${Ce.full_name}&size=200&background=random`,alt:Ce.full_name,className:"w-28 h-28 sm:w-32 sm:h-32 md:w-40 md:h-40 rounded-full border-4 border-white shadow-xl object-cover"}),e.jsxs("label",{className:"absolute bottom-0 right-0 text-white p-2 sm:p-3 rounded-full cursor-pointer shadow-lg transform hover:scale-110 transition-all",style:{backgroundColor:We.main},children:[e.jsx(W,{className:"w-4 h-4 sm:w-5 sm:h-5"}),e.jsx("input",{type:"file",accept:"image/*",onChange:async e=>{const r=e.target.files[0];if(r)if(r.type.startsWith("image/"))if(r.size>2097152)Id({title:"Error",description:"La imagen no debe superar los 2MB",variant:"destructive"});else{_(!0);try{const e=`avatar.${r.name.split(".").pop()}`,s=`${t.id}/${e}`;try{await Vi.storage.from("avatars").remove([s])}catch(n){}const{error:a}=await Vi.storage.from("avatars").upload(s,r,{cacheControl:"3600",upsert:!0});if(a)throw a;const{data:i}=Vi.storage.from("avatars").getPublicUrl(s);Te(e=>({...e,avatar_url:i.publicUrl}));const{error:o}=await Vi.from("profiles").upsert({id:t.id,avatar_url:i.publicUrl,updated_at:(new Date).toISOString()}),{error:l}=await Vi.auth.updateUser({data:{avatar_url:i.publicUrl}});if(l)throw l;Id({title:" Foto actualizada",description:"Tu foto de perfil ha sido guardada exitosamente"})}catch(s){Id({title:"Error",description:s.message||"No se pudo subir la imagen.",variant:"destructive"})}finally{_(!1)}}else Id({title:"Error",description:"Por favor selecciona una imagen vlida",variant:"destructive"})},className:"hidden"})]}),j&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/50 rounded-full",children:e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-white"})})]}),e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl px-4 sm:px-6 py-3 sm:py-4 shadow-xl w-full sm:flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 justify-center sm:justify-start",children:[e.jsx("h1",{className:"text-xl sm:text-2xl md:text-3xl font-bold text-gray-900",children:Ce.full_name||"Usuario"}),z.verified&&e.jsx(Q,{className:"w-5 h-5 sm:w-6 sm:h-6 text-blue-500",title:"Cuenta verificada"})]}),e.jsxs("p",{className:"text-sm sm:text-base text-gray-600 flex items-center gap-2 mt-1 justify-center sm:justify-start",children:[e.jsx(p,{className:"w-3 h-3 sm:w-4 sm:h-4"}),e.jsx("span",{className:"truncate",children:t.email})]}),Ce.location&&e.jsxs("div",{className:"flex items-center gap-1 text-gray-500 mt-1",children:[e.jsx(s,{className:"w-4 h-4"}),e.jsx("span",{className:"text-sm",children:Ce.location})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 sm:gap-4 md:gap-6 mt-4 pt-4 border-t border-gray-200",children:[e.jsxs("div",{className:"text-center cursor-pointer hover:bg-purple-50 px-1 sm:px-3 py-1 rounded-lg transition",children:[e.jsx("p",{className:"text-lg sm:text-xl md:text-2xl font-bold text-purple-600",children:z.totalEvents}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 flex items-center gap-1 justify-center flex-wrap",children:[e.jsx(i,{className:"w-3 h-3"}),e.jsx("span",{className:"hidden sm:inline",children:"Eventos en Mapa"}),e.jsx("span",{className:"sm:hidden",children:"En Mapa"})]})]}),e.jsxs("div",{className:"text-center cursor-pointer hover:bg-red-50 px-1 sm:px-3 py-1 rounded-lg transition",children:[e.jsx("p",{className:"text-lg sm:text-xl md:text-2xl font-bold text-red-600",children:z.favorites}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 flex items-center gap-1 justify-center",children:[e.jsx(k,{className:"w-3 h-3"}),"Favoritos"]})]}),e.jsxs("div",{className:"text-center cursor-pointer hover:bg-blue-50 px-1 sm:px-3 py-1 rounded-lg transition",children:[e.jsx("p",{className:"text-lg sm:text-xl md:text-2xl font-bold text-blue-600",children:z.eventsAttended}),e.jsxs("p",{className:"text-xs sm:text-sm text-gray-500 flex items-center gap-1 justify-center flex-wrap",children:[e.jsx(Q,{className:"w-3 h-3"}),e.jsx("span",{className:"hidden sm:inline",children:"Eventos Asistidos"}),e.jsx("span",{className:"sm:hidden",children:"Asistidos"})]})]})]})]})]}),"                ",e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-3 mt-4 md:mt-0 w-full sm:w-auto",children:[e.jsxs(El,{onClick:()=>r("/dashboard"),className:"w-full sm:w-auto text-sm sm:text-base text-white",style:{backgroundColor:We.main},children:[e.jsx(G,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Volver al Mapa"}),e.jsx("span",{className:"sm:hidden",children:"Mapa"})]}),e.jsxs(El,{onClick:async()=>{const e=`${window.location.origin}/profile/${t.id}`;if(navigator.share)try{await navigator.share({title:`Perfil de ${Ce.full_name}`,text:"Mira mi perfil en EventRadar",url:e})}catch(r){}else navigator.clipboard.writeText(e),Id({title:" Link copiado",description:"El enlace de tu perfil ha sido copiado al portapapeles"})},className:"w-full sm:w-auto text-sm sm:text-base text-white",style:{backgroundColor:We.main},children:[e.jsx(K,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Compartir Perfil"}),e.jsx("span",{className:"sm:hidden",children:"Compartir"})]})]})]})})]}),e.jsx("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl mb-6 p-1 sm:p-2 overflow-x-auto scrollbar-hide",children:e.jsx("div",{className:"flex gap-1 sm:gap-2 min-w-max px-1",children:Ge.map(t=>e.jsxs("button",{onClick:()=>o(t.id),className:"flex items-center gap-1 sm:gap-2 px-2 sm:px-4 py-2 sm:py-3 rounded-xl font-medium transition-all text-xs sm:text-sm md:text-base whitespace-nowrap "+(n===t.id?"text-white shadow-lg":"text-gray-600 hover:bg-gray-100"),style:n===t.id?{background:`linear-gradient(to right, ${We.from}, ${We.to})`}:{},children:[e.jsx(t.icon,{className:"w-4 h-4 sm:w-5 sm:h-5 flex-shrink-0"}),e.jsx("span",{className:"hidden xs:inline",children:t.label})]},t.id))})}),e.jsx(S,{mode:"wait",children:e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},exit:{opacity:0,y:-20},transition:{duration:.3},children:["feed"===n&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[ke.map(t=>e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"bg-white/95 backdrop-blur-sm rounded-2xl shadow-xl overflow-hidden",children:[e.jsxs("div",{className:"p-4 flex items-center gap-3 border-b border-gray-100",children:[e.jsx("img",{src:Ce.avatar_url||`https://ui-avatars.com/api/?name=${Ce.full_name}&size=100`,alt:Ce.full_name,className:"w-10 h-10 rounded-full object-cover"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:Ce.full_name}),e.jsx("p",{className:"text-sm text-gray-500",children:t.timestamp})]}),e.jsx(El,{variant:"ghost",size:"sm",children:e.jsx(re,{className:"w-5 h-5 text-gray-400"})})]}),e.jsx("img",{src:t.image,alt:"Post",className:"w-full h-96 object-cover"}),e.jsxs("div",{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("button",{onClick:()=>{const e=ke.map(e=>e.id===t.id?{...e,liked:!e.liked,likes:e.liked?e.likes-1:e.likes+1}:e);Ne(e)},className:`flex items-center gap-2 ${t.liked?"text-red-500":"text-gray-700"} hover:text-red-500 transition`,children:[e.jsx(ne,{className:"w-6 h-6 "+(t.liked?"fill-current":"")}),e.jsx("span",{className:"font-semibold",children:t.likes})]}),e.jsxs("button",{className:"flex items-center gap-2 text-gray-700 hover:text-blue-500 transition",children:[e.jsx(U,{className:"w-6 h-6"}),e.jsx("span",{className:"font-semibold",children:t.comments})]}),e.jsx("button",{className:"flex items-center gap-2 text-gray-700 hover:text-green-500 transition ml-auto",children:e.jsx(C,{className:"w-6 h-6"})})]}),e.jsx("div",{children:e.jsxs("p",{className:"text-gray-900",children:[e.jsx("span",{className:"font-semibold mr-2",children:Ce.full_name}),t.caption]})}),e.jsxs("button",{className:"text-gray-500 text-sm hover:text-gray-700",children:["Ver los ",t.comments," comentarios"]}),e.jsxs("div",{className:"flex gap-3 pt-2 border-t border-gray-100",children:[e.jsx("input",{type:"text",placeholder:"Agrega un comentario...",value:R[t.id]||"",onChange:e=>I(r=>({...r,[t.id]:e.target.value})),onKeyPress:e=>{"Enter"===e.key&&He(t.id)},className:"flex-1 px-4 py-2 bg-gray-50 rounded-full focus:outline-none focus:ring-2 text-gray-900 placeholder-gray-500",style:{color:"#111827"}}),e.jsx(El,{size:"sm",className:"rounded-full text-white",style:{backgroundColor:We.main},onClick:()=>He(t.id),children:"Publicar"})]})]})]},t.id)),0===ke.length&&e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl p-12 text-center shadow-xl",children:[e.jsx(X,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No hay publicaciones an"}),e.jsx("p",{className:"text-gray-500",children:"Comparte tus momentos en eventos para que tus seguidores los vean"})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl p-6 shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Sobre m"}),e.jsxs(El,{size:"sm",variant:"ghost",onClick:()=>o("perfil"),className:"text-sm",style:{color:We.main},children:[e.jsx(se,{className:"w-3 h-3 mr-1"}),"Editar"]})]}),Ce.bio?e.jsx("p",{className:"text-gray-600 mb-4 whitespace-pre-wrap",children:Ce.bio}):e.jsxs("div",{className:"text-center py-4",children:[e.jsx("p",{className:"text-gray-400 mb-3",children:"No hay biografa disponible"}),e.jsxs(El,{size:"sm",onClick:()=>o("perfil"),className:"text-white",style:{backgroundColor:We.main},children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),"Agregar Biografa"]})]}),Ce.interests&&Ce.interests.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Intereses"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Ce.interests.map(t=>{const r=Re.find(e=>e.value===t)?.icon||ae;return e.jsxs("span",{className:"flex items-center gap-1 px-3 py-1 rounded-full text-sm text-white",style:{backgroundColor:We.main,opacity:.9},children:[e.jsx(r,{className:"w-4 h-4"}),Re.find(e=>e.value===t)?.label||t]},t)})})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[Ce.occupation&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(c,{className:"w-4 h-4"}),Ce.occupation]}),Ce.company&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(de,{className:"w-4 h-4"}),Ce.company]}),Ce.location&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(s,{className:"w-4 h-4"}),Ce.location]}),Ce.phone&&e.jsxs("div",{className:"flex items-center gap-2 text-gray-600",children:[e.jsx(he,{className:"w-4 h-4"}),Ce.phone]})]}),(Ce.social_links?.instagram||Ce.social_links?.twitter||Ce.social_links?.linkedin)&&e.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[e.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Redes sociales"}),e.jsxs("div",{className:"flex gap-3",children:[Ce.social_links?.instagram&&e.jsx("a",{href:Ce.social_links.instagram,target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-gradient-to-br from-purple-500 to-pink-500 text-white rounded-full hover:scale-110 transition",children:e.jsx(pe,{className:"w-5 h-5"})}),Ce.social_links?.twitter&&e.jsx("a",{href:Ce.social_links.twitter,target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-blue-400 text-white rounded-full hover:scale-110 transition",children:e.jsx(fe,{className:"w-5 h-5"})}),Ce.social_links?.linkedin&&e.jsx("a",{href:Ce.social_links.linkedin,target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-blue-600 text-white rounded-full hover:scale-110 transition",children:e.jsx(me,{className:"w-5 h-5"})})]})]}),e.jsxs(El,{variant:"outline",className:"w-full mt-4",onClick:()=>Id.info("Funcionalidad de QR prximamente"),children:[e.jsx(ge,{className:"w-4 h-4 mr-2"}),"Compartir QR"]})]}),e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl p-6 shadow-xl",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-4",children:"Actividad reciente"}),e.jsx("div",{className:"space-y-3",children:we.slice(0,3).map((t,r)=>e.jsxs("div",{className:"flex items-start gap-3 text-sm",children:[e.jsx("div",{className:"w-2 h-2 rounded-full mt-1.5 "+("event"===t.type?"bg-purple-500":"favorite"===t.type?"bg-red-500":"bg-blue-500")}),e.jsxs("div",{children:[e.jsx("p",{className:"text-gray-900",children:t.description}),e.jsx("p",{className:"text-gray-400 text-xs",children:t.timestamp})]})]},r))})]})]})]}),"perfil"===n&&e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl p-4 sm:p-6 shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-lg sm:text-xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(v,{className:"w-5 h-5 sm:w-6 sm:h-6",style:{color:We.main}}),"Informacin Personal"]}),m?e.jsxs(El,{onClick:()=>w(!1),variant:"outline",className:"text-sm sm:text-base",children:[e.jsx(y,{className:"w-4 h-4 mr-2"}),"Cancelar"]}):e.jsxs(El,{onClick:()=>w(!0),className:"text-sm sm:text-base text-white",style:{backgroundColor:We.main},children:[e.jsx(se,{className:"w-4 h-4 mr-2"}),e.jsx("span",{className:"hidden sm:inline",children:"Editar Perfil"}),e.jsx("span",{className:"sm:hidden",children:"Editar"})]})]}),m?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(v,{className:"w-5 h-5 text-purple-600"}),"Informacin Bsica"]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Nombre Completo *"}),e.jsx("input",{type:"text",name:"full_name",value:Ce.full_name,onChange:qe,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-gray-900 bg-white",placeholder:"Ej: Juan Prez Gonzlez"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Fecha de Nacimiento"}),e.jsx("input",{type:"date",name:"birth_date",value:Ce.birth_date,onChange:qe,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-gray-900 bg-white"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Telfono"}),e.jsx("input",{type:"tel",name:"phone",value:Ce.phone,onChange:qe,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-gray-900 bg-white",placeholder:"+56 9 1234 5678"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Direccin"}),e.jsx("input",{type:"text",name:"address",value:Ce.address,onChange:qe,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-gray-900 bg-white",placeholder:"Ej: Av. Libertador 123, Santiago, Chile"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Biografa / Sobre m"}),e.jsx("textarea",{name:"bio",value:Ce.bio,onChange:qe,rows:3,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-gray-900 bg-white",placeholder:"Cuntanos sobre ti, tus pasiones, lo que te gusta hacer..."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Ciudad"}),e.jsx("input",{type:"text",name:"location",value:Ce.location,onChange:qe,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-gray-900 bg-white",placeholder:"Santiago, Chile"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sitio Web"}),e.jsx("input",{type:"url",name:"website",value:Ce.website,onChange:qe,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-purple-500 focus:border-transparent text-gray-900 bg-white",placeholder:"https://misitio.com"})]})]})]}),e.jsxs("div",{className:"space-y-4 pt-6 border-t border-gray-200",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(ae,{className:"w-5 h-5 text-purple-600"}),"Preferencias Musicales"]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Esto nos ayudar a recomendarte eventos de tu inters"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:Ie.map(t=>e.jsxs("label",{className:"flex items-center gap-2 px-4 py-3 rounded-lg border-2 cursor-pointer transition-all "+(Ce.music_preferences?.includes(t.value)?"border-purple-600 bg-purple-50":"border-gray-200 hover:border-purple-300 bg-white"),children:[e.jsx("input",{type:"checkbox",checked:Ce.music_preferences?.includes(t.value),onChange:e=>{const r=e.target.checked?[...Ce.music_preferences||[],t.value]:Ce.music_preferences?.filter(e=>e!==t.value);Te(e=>({...e,music_preferences:r}))},className:"rounded text-purple-600 focus:ring-purple-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:t.label})]},t.value))})]}),e.jsxs("div",{className:"space-y-4 pt-6 border-t border-gray-200",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(i,{className:"w-5 h-5 text-purple-600"}),"Tipos de Eventos que te Interesan"]}),e.jsx("p",{className:"text-sm text-gray-500",children:"Usaremos esto para sugerirte los mejores eventos"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:$e.map(t=>e.jsxs("label",{className:"flex items-center gap-2 px-4 py-3 rounded-lg border-2 cursor-pointer transition-all "+(Ce.event_preferences?.includes(t.value)?"border-purple-600 bg-purple-50":"border-gray-200 hover:border-purple-300 bg-white"),children:[e.jsx("input",{type:"checkbox",checked:Ce.event_preferences?.includes(t.value),onChange:e=>{const r=e.target.checked?[...Ce.event_preferences||[],t.value]:Ce.event_preferences?.filter(e=>e!==t.value);Te(e=>({...e,event_preferences:r}))},className:"rounded text-purple-600 focus:ring-purple-500"}),e.jsx("span",{className:"text-sm font-medium text-gray-900",children:t.label})]},t.value))})]}),e.jsxs("div",{className:"space-y-4 pt-6 border-t border-gray-200",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(be,{className:"w-5 h-5 text-purple-600"}),"Color del Tema"]}),e.jsx("div",{className:"flex gap-3",children:Object.entries(Ve).map(([t,r])=>e.jsx("button",{type:"button",onClick:()=>Te(e=>({...e,theme_color:t})),className:"w-12 h-12 rounded-full transition-all "+(Ce.theme_color===t?"ring-4 ring-offset-2 scale-110":"hover:scale-105"),style:{background:`linear-gradient(135deg, ${r.from}, ${r.to})`,...Ce.theme_color===t?{boxShadow:`0 0 0 4px ${We.main}`}:{}},title:t},t))})]}),e.jsxs("div",{className:"flex gap-3 pt-6",children:[e.jsxs(El,{onClick:async()=>{try{if(!t)return void alert(" No hay usuario autenticado. Por favor, inicia sesin.");const{error:e}=await Vi.auth.updateUser({data:{full_name:Ce.full_name,birth_date:Ce.birth_date,phone:Ce.phone,bio:Ce.bio,avatar_url:Ce.avatar_url,location:Ce.location,website:Ce.website,occupation:Ce.occupation,company:Ce.company,theme_color:Ce.theme_color,status:Ce.status,interests:Ce.interests}});if(e)throw alert(` Error: ${e.message}`),e;w(!1),alert(" Perfil actualizado exitosamente\n\nNOTA: Los cambios se guardaron en tu sesin de usuario."),Id({title:" Perfil actualizado",description:"Tus cambios han sido guardados exitosamente."}),await De()}catch(e){alert(` Error: ${e.message||"No se pudo actualizar el perfil"}`),Id({title:"Error",description:"No se pudo actualizar el perfil.",variant:"destructive"})}},className:"text-white",style:{backgroundColor:We.main},children:[e.jsx(x,{className:"w-4 h-4 mr-2"}),"Guardar Todos los Cambios"]}),e.jsx(El,{variant:"outline",onClick:()=>w(!1),children:"Cancelar"})]})]}):e.jsxs("div",{className:"space-y-6",children:[Ce.bio&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:"Sobre m"}),e.jsx("p",{className:"text-gray-600 leading-relaxed",children:Ce.bio})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(p,{className:"w-5 h-5 text-purple-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Email"}),e.jsx("p",{className:"text-gray-900",children:t.email})]})]}),Ce.phone&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(he,{className:"w-5 h-5 text-purple-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Telfono"}),e.jsx("p",{className:"text-gray-900",children:Ce.phone})]})]}),Ce.location&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(s,{className:"w-5 h-5 text-purple-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Ubicacin"}),e.jsx("p",{className:"text-gray-900",children:Ce.location})]})]}),Ce.address&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(s,{className:"w-5 h-5 text-purple-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Direccin"}),e.jsx("p",{className:"text-gray-900",children:Ce.address})]})]}),Ce.birth_date&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(i,{className:"w-5 h-5 text-purple-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Fecha de Nacimiento"}),e.jsx("p",{className:"text-gray-900",children:new Date(Ce.birth_date).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})})]})]}),Ce.website&&e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(G,{className:"w-5 h-5 text-purple-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Sitio web"}),e.jsx("a",{href:Ce.website,target:"_blank",rel:"noopener noreferrer",className:"text-purple-600 hover:underline",children:Ce.website})]})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(T,{className:"w-5 h-5 text-purple-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-500",children:"Miembro desde"}),e.jsx("p",{className:"text-gray-900",children:new Date(t.created_at).toLocaleDateString("es-ES",{year:"numeric",month:"long",day:"numeric"})})]})]})]}),Ce.music_preferences&&Ce.music_preferences.length>0&&e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx(ae,{className:"w-5 h-5 text-purple-600"}),"Gustos Musicales"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Ce.music_preferences.map(t=>{const r=Ie.find(e=>e.value===t);return e.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-700 rounded-full text-sm font-medium",children:r?.label||t},t)})})]}),Ce.event_preferences&&Ce.event_preferences.length>0&&e.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 mb-3 flex items-center gap-2",children:[e.jsx(Y,{className:"w-5 h-5 text-purple-600"}),"Eventos que me Interesan"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Ce.event_preferences.map(t=>{const r=$e.find(e=>e.value===t);return e.jsx("span",{className:"px-3 py-1 bg-pink-100 text-pink-700 rounded-full text-sm font-medium",children:r?.label||t},t)})})]})]})]}),e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl p-6 shadow-xl",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center gap-2",children:[e.jsx(Z,{className:"w-6 h-6 text-purple-600"}),"Logros"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Qe.map((t,r)=>e.jsxs("div",{className:"text-center p-4 rounded-xl transition-all "+(t.unlocked?"bg-gradient-to-br from-purple-100 to-pink-100 border-2 border-purple-300":"bg-gray-100 opacity-50"),children:[e.jsx("div",{className:"text-4xl mb-2",children:t.icon}),e.jsx("p",{className:"text-sm font-medium "+(t.unlocked?"text-purple-700":"text-gray-500"),children:t.name})]},r))})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl p-6 shadow-xl",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center gap-2",children:[e.jsx(N,{className:"w-6 h-6 text-purple-600"}),"Estadsticas"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-purple-50 rounded-xl",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Eventos creados"}),e.jsx("p",{className:"text-2xl font-bold text-purple-600",children:z.eventsCreated})]}),e.jsx(s,{className:"w-8 h-8 text-purple-400"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-pink-50 rounded-xl",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Favoritos"}),e.jsx("p",{className:"text-2xl font-bold text-pink-600",children:z.favorites})]}),e.jsx(k,{className:"w-8 h-8 text-pink-400"})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-xl",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-gray-600",children:"Eventos asistidos"}),e.jsx("p",{className:"text-2xl font-bold text-blue-600",children:z.eventsAttended})]}),e.jsx(A,{className:"w-8 h-8 text-blue-400"})]})]})]}),e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl p-6 shadow-xl",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Acciones Rpidas"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(El,{asChild:!0,className:"w-full text-white",style:{background:`linear-gradient(to right, ${We.from}, ${We.to})`},children:e.jsxs("a",{href:"/dashboard",children:[e.jsx(s,{className:"w-4 h-4 mr-2"}),"Ver Mapa de Eventos"]})}),e.jsxs(El,{onClick:()=>r("/dashboard",{state:{activeTab:"favoritos"}}),variant:"outline",className:"w-full",children:[e.jsx(k,{className:"w-4 h-4 mr-2"}),"Mis Favoritos (",z.favorites,")"]})]})]})]})]}),"fotos"===n&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl p-4 shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(X,{className:"w-6 h-6",style:{color:We.main}}),"Galera de Fotos"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(El,{variant:"grid"===l?"default":"outline",size:"sm",onClick:()=>d("grid"),className:"grid"===l?"text-white":"",style:"grid"===l?{backgroundColor:We.main}:{},children:e.jsx(ve,{className:"w-4 h-4"})}),e.jsx(El,{variant:"list"===l?"default":"outline",size:"sm",onClick:()=>d("list"),className:"list"===l?"text-white":"",style:"list"===l?{backgroundColor:We.main}:{},children:e.jsx(ye,{className:"w-4 h-4"})})]})]}),e.jsx("div",{className:"border-t border-gray-200 pt-4",children:e.jsxs("div",{className:"flex flex-col gap-3",children:[e.jsx("input",{type:"text",placeholder:"Descripcin de las fotos (opcional)...",value:D,onChange:e=>L(e.target.value),className:"w-full px-4 py-2 bg-gray-50 rounded-lg focus:outline-none focus:ring-2 text-gray-900 placeholder-gray-500",style:{color:"#111827"}}),e.jsx("div",{className:"flex gap-2",children:e.jsxs("label",{className:"flex-1",children:[e.jsx("input",{type:"file",accept:"image/*",multiple:!0,onChange:async e=>{const r=Array.from(e.target.files);if(0!==r.length){P(!0);try{for(const e of r){if(!e.type.startsWith("image/")){Id({title:"Error",description:`${e.name} no es una imagen vlida`,variant:"destructive"});continue}const r=e.name.split(".").pop(),n=`${Date.now()}-${Math.random().toString(36).substring(7)}.${r}`,s=`${t.id}/photos/${n}`,{error:a}=await Vi.storage.from("avatars").upload(s,e,{cacheControl:"3600",upsert:!1});if(a)throw a;const{data:i}=Vi.storage.from("avatars").getPublicUrl(s),o=i.publicUrl,{error:l}=await Vi.from("user_photos").insert({user_id:t.id,photo_url:o,caption:D||"",event_name:"Evento",created_at:(new Date).toISOString()})}Id({title:" Fotos subidas",description:`${r.length} foto(s) subida(s) exitosamente`}),L(""),await Le()}catch(n){Id({title:"Error",description:"No se pudieron subir las fotos",variant:"destructive"})}finally{P(!1)}}},disabled:E,className:"hidden"}),e.jsx("div",{className:"w-full px-4 py-2 rounded-lg text-center cursor-pointer transition-colors text-white "+(E?"opacity-50 cursor-not-allowed":"hover:opacity-90"),style:{backgroundColor:We.main},children:E?e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Subiendo..."]}):e.jsxs("span",{className:"flex items-center justify-center gap-2",children:[e.jsx(W,{className:"w-4 h-4"}),"Seleccionar Fotos"]})})]})}),e.jsx("p",{className:"text-xs text-gray-500 text-center",children:"Puedes seleccionar mltiples fotos a la vez"})]})})]}),Se.length>0?e.jsx("div",{className:"grid"===l?"grid grid-cols-2 md:grid-cols-3 gap-4":"space-y-4",children:Se.map(t=>e.jsxs(u.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"grid"===l?"aspect-square rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transition-shadow cursor-pointer group relative":"bg-white/95 backdrop-blur-sm rounded-2xl overflow-hidden shadow-xl",children:[e.jsx("img",{src:t.url,alt:t.event,className:"grid"===l?"w-full h-full object-cover group-hover:scale-110 transition-transform duration-300":"w-full h-96 object-cover"}),"grid"===l&&e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent p-3 opacity-0 group-hover:opacity-100 transition-opacity",children:e.jsx("p",{className:"text-white text-sm font-medium truncate",children:t.event})}),"list"===l&&e.jsxs("div",{className:"p-4",children:[e.jsx("p",{className:"font-semibold text-gray-900",children:t.event}),e.jsx("p",{className:"text-sm text-gray-500 mb-2",children:t.date}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-gray-600",children:[e.jsxs("button",{className:"flex items-center gap-1 hover:text-red-500 transition",children:[e.jsx(k,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:"42"})]}),e.jsxs("button",{className:"flex items-center gap-1 hover:text-blue-500 transition",children:[e.jsx(U,{className:"w-5 h-5"}),e.jsx("span",{className:"text-sm",children:"8"})]})]})]})]},t.id))}):e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl p-12 text-center shadow-xl",children:[e.jsx(ue,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No hay fotos an"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"Sube fotos de tus eventos favoritos usando el formulario de arriba"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl p-4 shadow-xl text-center",children:[e.jsx("p",{className:"text-3xl font-bold",style:{color:We.main},children:Se.length}),e.jsx("p",{className:"text-sm text-gray-500",children:"Fotos"})]}),e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl p-4 shadow-xl text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-pink-600",children:Math.ceil(Se.length/10)}),e.jsx("p",{className:"text-sm text-gray-500",children:"lbumes"})]}),e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl p-4 shadow-xl text-center",children:[e.jsx("p",{className:"text-3xl font-bold text-blue-600",children:42*Se.length}),e.jsx("p",{className:"text-sm text-gray-500",children:"Me gusta"})]})]})]}),"favoritos"===n&&e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl p-6 shadow-xl",children:[e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Eventos Favoritos"}),H.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:H.map(t=>e.jsxs("div",{className:"border border-gray-200 rounded-xl p-4 hover:shadow-lg transition-shadow",children:[e.jsx("h4",{className:"font-semibold text-gray-900 mb-2",children:t.title}),e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:t.description}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx(Y,{className:"w-4 h-4"}),new Date(t.date).toLocaleDateString()]})]},t.id))}):e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No tienes eventos favoritos"})]}),"insignias"===n&&e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl p-6 shadow-xl",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center gap-2",children:[e.jsx(Z,{className:"w-6 h-6 text-yellow-500"}),"Mis Insignias"]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-6",children:[{icon:"",name:"Primer Evento",desc:"Agregaste tu primer favorito",earned:z.favorites>=1},{icon:"",name:"Coleccionista",desc:"5+ eventos favoritos",earned:z.favorites>=5},{icon:"",name:"Entusiasta",desc:"10+ eventos favoritos",earned:z.favorites>=10},{icon:"",name:"VIP",desc:"Cuenta verificada",earned:z.verified},{icon:"",name:"Activo",desc:"Asististe a 5+ eventos",earned:z.eventsAttended>=5},{icon:"",name:"Super Fan",desc:"20+ eventos favoritos",earned:z.favorites>=20}].map((t,r)=>e.jsxs(u.div,{whileHover:{scale:t.earned?1.05:1},className:"text-center p-6 rounded-2xl border-2 "+(t.earned?"bg-gradient-to-br from-yellow-50 to-orange-50 border-yellow-300":"bg-gray-50 border-gray-200 opacity-50"),children:[e.jsx("div",{className:"text-5xl mb-3",children:t.icon}),e.jsx("h4",{className:"font-bold text-gray-900 mb-1",children:t.name}),e.jsx("p",{className:"text-xs text-gray-500",children:t.desc})]},r))})]}),"eventos"===n&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl p-6 shadow-xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(Y,{className:"w-6 h-6",style:{color:We.main}}),"Mis Eventos Creados"]}),e.jsx(El,{asChild:!0,className:"text-white",style:{backgroundColor:We.main},children:e.jsxs("a",{href:"/dashboard",children:[e.jsx(b,{className:"w-4 h-4 mr-2"}),"Crear Evento"]})})]}),F.length>0?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:F.map(t=>e.jsxs(u.div,{initial:{opacity:0,scale:.9},animate:{opacity:1,scale:1},className:"border border-gray-200 rounded-xl p-4 hover:shadow-lg transition-shadow bg-gradient-to-br from-white to-purple-50",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsx("h4",{className:"font-semibold text-gray-900 flex-1",children:t.title}),e.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 rounded-full text-xs",children:t.category})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:t.description}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx(Y,{className:"w-4 h-4"}),new Date(t.date).toLocaleDateString()]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[e.jsx(s,{className:"w-4 h-4"}),t.location||"Sin ubicacin"]})]}),e.jsxs("div",{className:"mt-4 pt-3 border-t border-gray-200 flex gap-2",children:[e.jsxs(El,{size:"sm",variant:"outline",className:"flex-1",children:[e.jsx(se,{className:"w-3 h-3 mr-1"}),"Editar"]}),e.jsxs(El,{size:"sm",variant:"outline",className:"flex-1",children:[e.jsx(g,{className:"w-3 h-3 mr-1"}),"Ver"]})]})]},t.id))}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Y,{className:"w-16 h-16 mx-auto mb-4 text-gray-300"}),e.jsx("p",{className:"text-gray-500 mb-4",children:"No has creado eventos an"}),e.jsx(El,{asChild:!0,className:"bg-purple-600 hover:bg-purple-700",children:e.jsxs("a",{href:"/dashboard",children:[e.jsx(b,{className:"w-4 h-4 mr-2"}),"Crear mi primer evento"]})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"bg-gradient-to-br from-purple-500 to-purple-600 rounded-2xl p-6 text-white shadow-xl",children:[e.jsx(Y,{className:"w-8 h-8 mb-3 opacity-80"}),e.jsx("p",{className:"text-3xl font-bold",children:z.eventsCreated}),e.jsx("p",{className:"text-purple-100",children:"Eventos Creados"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-pink-500 to-pink-600 rounded-2xl p-6 text-white shadow-xl",children:[e.jsx(k,{className:"w-8 h-8 mb-3 opacity-80"}),e.jsx("p",{className:"text-3xl font-bold",children:z.favorites}),e.jsx("p",{className:"text-pink-100",children:"Favoritos"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-500 to-blue-600 rounded-2xl p-6 text-white shadow-xl",children:[e.jsx(xe,{className:"w-8 h-8 mb-3 opacity-80"}),e.jsx("p",{className:"text-3xl font-bold",children:z.eventsAttended}),e.jsx("p",{className:"text-blue-100",children:"Asistidos"})]})]})]}),"actividad"===n&&e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl p-6 shadow-xl",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center gap-2",children:[e.jsx(ee,{className:"w-6 h-6 text-purple-600"}),"Actividad Reciente"]}),we.length>0?e.jsx("div",{className:"space-y-4",children:we.map((t,r)=>e.jsxs("div",{className:"flex items-start gap-4 p-4 bg-gray-50 rounded-xl",children:[e.jsxs("div",{className:"w-10 h-10 rounded-full flex items-center justify-center "+("favorite"===t.type?"bg-pink-100":"create"===t.type?"bg-purple-100":"bg-blue-100"),children:["favorite"===t.type&&e.jsx(k,{className:"w-5 h-5 text-pink-600"}),"create"===t.type&&e.jsx(s,{className:"w-5 h-5 text-purple-600"}),"update"===t.type&&e.jsx(se,{className:"w-5 h-5 text-blue-600"})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:"text-gray-900",children:t.message}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Hace ",t.time]})]})]},r))}):e.jsx("p",{className:"text-center text-gray-500 py-8",children:"No hay actividad reciente"})]}),"configuracion"===n&&e.jsxs("div",{className:"bg-white/95 backdrop-blur-sm rounded-2xl p-6 shadow-xl",children:[e.jsxs("h3",{className:"text-xl font-bold text-gray-900 mb-6 flex items-center gap-2",children:[e.jsx(te,{className:"w-6 h-6",style:{color:We.main}}),"Configuracin"]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsxs("h4",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(O,{className:"w-5 h-5",style:{color:We.main}}),"Notificaciones"]}),e.jsx("div",{className:"space-y-3",children:Object.entries(Oe).map(([t,r])=>"profileVisibility"===t?null:e.jsxs("label",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg cursor-pointer hover:bg-gray-100 transition-colors",children:[e.jsxs("span",{className:"text-gray-700",children:["emailNotifications"===t&&"Notificaciones por email","pushNotifications"===t&&"Notificaciones push","eventReminders"===t&&"Recordatorios de eventos","newEventsNearby"===t&&"Nuevos eventos cercanos","weeklyDigest"===t&&"Resumen semanal"]}),e.jsx("div",{onClick:()=>{return e=t,void Ae(t=>({...t,[e]:!t[e]}));var e},className:"relative w-12 h-6 rounded-full transition-colors cursor-pointer",style:{backgroundColor:r?We.main:"#d1d5db"},children:e.jsx("div",{className:"absolute top-1 left-1 w-4 h-4 rounded-full bg-white transition-transform "+(r?"transform translate-x-6":"")})})]},t))})]}),e.jsxs("div",{className:"pt-6 border-t border-gray-200",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx($,{className:"w-5 h-5",style:{color:We.main}}),"Privacidad"]}),e.jsx("div",{className:"space-y-3",children:e.jsxs("div",{className:"p-3 bg-gray-50 rounded-lg",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Visibilidad del perfil"}),e.jsxs("select",{value:Oe.profileVisibility,onChange:e=>Ae(t=>({...t,profileVisibility:e.target.value})),className:"w-full p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-offset-2 outline-none text-gray-900 bg-white",style:{color:"#111827",backgroundColor:"#ffffff"},children:[e.jsx("option",{value:"public",style:{color:"#111827"},children:"Pblico - Todos pueden ver mi perfil"}),e.jsx("option",{value:"friends",style:{color:"#111827"},children:"Amigos - Solo mis amigos pueden ver"}),e.jsx("option",{value:"private",style:{color:"#111827"},children:"Privado - Solo yo puedo ver"})]})]})})]}),e.jsxs("div",{className:"pt-6 border-t border-gray-200",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(be,{className:"w-5 h-5",style:{color:We.main}}),"Apariencia"]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Personaliza el color del tema de tu perfil"}),e.jsx("div",{className:"flex gap-3",children:Object.entries(Ve).map(([t,r])=>e.jsx("button",{onClick:()=>Te(e=>({...e,theme_color:t})),className:"w-12 h-12 rounded-full transition-all hover:scale-110 "+(Ce.theme_color===t?"ring-4 ring-offset-2":""),style:{background:`linear-gradient(135deg, ${r.from}, ${r.to})`,ringColor:Ce.theme_color===t?r.main:"transparent"},title:t.charAt(0).toUpperCase()+t.slice(1)},t))}),e.jsx("p",{className:"text-xs text-gray-500 mt-3",children:' El color se guardar automticamente al hacer clic en "Guardar Cambios"'})]}),e.jsx("div",{className:"pt-6 border-t border-gray-200",children:e.jsxs(El,{onClick:async()=>{try{const{error:e}=await Vi.from("user_preferences").upsert({user_id:t.id,email_notifications:Oe.emailNotifications,push_notifications:Oe.pushNotifications,event_reminders:Oe.eventReminders,new_events_nearby:Oe.newEventsNearby,weekly_digest:Oe.weeklyDigest,profile_visibility:Oe.profileVisibility,updated_at:(new Date).toISOString()},{onConflict:"user_id"});if(e)throw e;Id({title:" Preferencias guardadas",description:"Tus preferencias de notificacin han sido actualizadas"})}catch(e){Id({title:"Error",description:"No se pudieron guardar las preferencias. Verifica tu conexin.",variant:"destructive"})}},className:"w-full text-white hover:opacity-90 transition-opacity",style:{backgroundColor:We.main},children:[e.jsx(x,{className:"w-4 h-4 mr-2"}),"Guardar Preferencias"]})}),e.jsxs("div",{className:"pt-6 border-t border-gray-200",children:[e.jsxs("h4",{className:"font-semibold text-gray-900 mb-4 flex items-center gap-2",children:[e.jsx(f,{className:"w-5 h-5 text-gray-600"}),"Cuenta y Seguridad"]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"p-3 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Email"}),e.jsx("span",{className:"text-sm text-gray-500",children:t?.email})]})}),e.jsx("button",{className:"w-full p-3 bg-gray-50 rounded-lg text-left hover:bg-gray-100 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Cambiar contrasea"}),e.jsx(G,{className:"w-4 h-4 text-gray-400"})]})}),e.jsx("button",{className:"w-full p-3 bg-gray-50 rounded-lg text-left hover:bg-gray-100 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Autenticacin de dos factores"}),e.jsx(G,{className:"w-4 h-4 text-gray-400"})]})})]})]}),e.jsx("div",{className:"pt-6 border-t border-gray-200",children:e.jsxs(El,{onClick:async()=>{try{const{error:e}=await Vi.auth.signOut();if(e)throw e;Id({title:" Sesin cerrada",description:"Has cerrado sesin correctamente"}),r("/")}catch(e){Id({title:"Error",description:"No se pudo cerrar sesin. Intenta de nuevo.",variant:"destructive"})}},variant:"outline",className:"w-full border-red-300 text-red-600 hover:bg-red-50 hover:border-red-400 transition-colors",children:[e.jsx(q,{className:"w-4 h-4 mr-2"}),"Cerrar Sesin"]})})]})]})]},n)})]})})]})},Ld=()=>{const{user:t}=Qi(),{data:r=[],isLoading:n,error:a}=rr({queryKey:["favorites",t?.id],queryFn:async()=>{if(!t)return[];const{data:e,error:r}=await Vi.from("favorites").select("\n          id,\n          created_at,\n          events:event_id (\n            id,\n            title,\n            description,\n            date,\n            time,\n            location,\n            category_id,\n            price,\n            image_url,\n            latitude,\n            longitude,\n            event_categories(name)\n          )\n        ").eq("user_id",t.id).order("created_at",{ascending:!1});if(r)throw r;return e.map(e=>e.events).filter(Boolean)},enabled:!!t});return t?n?e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-pink-500 to-blue-600 flex items-center justify-center",children:[e.jsx(Pd,{children:e.jsx("title",{children:"Cargando Favoritos - EventRadar"})}),e.jsxs("div",{className:"text-center text-white",children:[e.jsx(_,{className:"w-12 h-12 mx-auto mb-4 animate-spin"}),e.jsx("p",{className:"text-lg",children:"Cargando tus eventos favoritos..."})]})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-pink-500 to-blue-600",children:[e.jsx(Pd,{children:e.jsx("title",{children:"Mis Favoritos - EventRadar"})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:[e.jsx(El,{asChild:!0,variant:"ghost",className:"text-white hover:bg-white/20 mb-6",children:e.jsxs(Te,{to:"/dashboard",children:[e.jsx(d,{className:"w-4 h-4 mr-2"}),"Volver al Dashboard"]})}),e.jsxs("h1",{className:"text-4xl font-bold text-white mb-2",children:[e.jsx(k,{className:"inline-block w-10 h-10 text-red-300 mr-3"}),"Mis Eventos Favoritos"]}),e.jsx("p",{className:"text-white/80 text-lg",children:0===r.length?"An no tienes eventos favoritos":`Tienes ${r.length} evento${1===r.length?"":"s"} favorito${1===r.length?"":"s"}`})]}),0===r.length?e.jsx(u.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.2},className:"text-center py-16",children:e.jsxs("div",{className:"bg-white/10 backdrop-blur-sm rounded-2xl p-12 max-w-md mx-auto",children:[e.jsx(k,{className:"w-20 h-20 text-white/50 mx-auto mb-6"}),e.jsx("h2",{className:"text-2xl font-bold text-white mb-4",children:"An no tienes favoritos"}),e.jsx("p",{className:"text-white/80 mb-8 leading-relaxed",children:"Explora el mapa y descubre eventos increbles. Usa el botn  para guardar los que ms te gusten."}),e.jsx(El,{asChild:!0,className:"bg-white text-purple-600 hover:bg-white/90",children:e.jsxs(Te,{to:"/dashboard",children:[e.jsx(s,{className:"w-4 h-4 mr-2"}),"Explorar Eventos"]})})]})}):e.jsx(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.3},className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:r.map((t,r)=>e.jsxs(u.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:.1*r},className:"bg-white/10 backdrop-blur-sm rounded-xl overflow-hidden hover:bg-white/20 transition-all duration-300 border border-white/20",children:[t.image_url&&e.jsx("div",{className:"h-48 bg-cover bg-center",style:{backgroundImage:`url(${t.image_url})`}}),e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsx("h3",{className:"text-xl font-bold text-white mb-2 line-clamp-2",children:t.title}),e.jsx($d,{eventId:t.id,initialFavorite:!0})]}),e.jsx("p",{className:"text-white/80 mb-4 line-clamp-3 leading-relaxed",children:t.description}),e.jsxs("div",{className:"space-y-3 text-sm text-white/70 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{children:new Date(t.date).toLocaleDateString("es-CL",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})]}),t.time&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(i,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{children:t.time})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s,{className:"w-4 h-4 flex-shrink-0"}),e.jsx("span",{className:"line-clamp-1",children:t.location})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(El,{asChild:!0,variant:"secondary",size:"sm",children:e.jsx(Te,{to:`/events/${t.id}`,children:"Ver Detalles"})}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-lg font-bold text-green-300",children:0===t.price?"Gratis":`$${t.price?.toLocaleString()}`}),t.event_categories?.name&&e.jsx("div",{className:"text-xs text-white/60 capitalize",children:t.event_categories.name})]})]})]})]},t.id))})]})]}):e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-purple-600 via-pink-500 to-blue-600 flex items-center justify-center",children:[e.jsx(Pd,{children:e.jsx("title",{children:"Favoritos - EventRadar"})}),e.jsxs("div",{className:"text-center text-white p-8",children:[e.jsx(k,{className:"w-16 h-16 mx-auto mb-4 opacity-50"}),e.jsx("h2",{className:"text-2xl font-bold mb-4",children:"Inicia sesin para ver tus favoritos"}),e.jsx(El,{asChild:!0,className:"bg-white text-purple-600 hover:bg-white/90",children:e.jsx(Te,{to:"/login",children:"Iniciar Sesin"})})]})]})},zd={async getEvents(e={}){try{let t=Hi.from("events_with_live_status").select("\n          *,\n          event_categories(\n            id,\n            name,\n            icon,\n            color\n          )\n        ").neq("live_status","archived").order("created_at",{ascending:!1});e.search&&(t=t.or(`title.ilike.%${e.search}%,description.ilike.%${e.search}%`)),e.category_id&&(t=t.eq("category_id",e.category_id)),e.location&&(t=t.ilike("location",`%${e.location}%`));const{data:r,error:n}=await t;if(n)throw n;return r||[]}catch(t){throw t}},async getEventById(e){try{const{data:t,error:r}=await Hi.from("events_with_live_status").select("\n          *,\n          event_categories(\n            id,\n            name,\n            icon,\n            color\n          )\n        ").eq("id",e).single();if(r)throw r;return t}catch(t){throw t}},async createEvent(e){try{const{data:t,error:r}=await Hi.from("events").insert([e]).select().single();if(r)throw r;return t}catch(t){throw t}},async updateEvent(e,t){try{const{data:r,error:n}=await Hi.from("events").update(t).eq("id",e).select().single();if(n)throw n;return r}catch(r){throw r}},async deleteEvent(e){try{const{error:t}=await Hi.from("events").delete().eq("id",e);if(t)throw t;return!0}catch(t){throw t}},async joinEvent(e,t){try{const{data:r,error:n}=await Hi.from("favorites").insert([{event_id:e,user_id:t}]).select().single();if(n)throw n;return r}catch(r){throw r}},async leaveEvent(e,t){try{const{error:r}=await Hi.from("favorites").delete().eq("event_id",e).eq("user_id",t);if(r)throw r;return!0}catch(r){throw r}},async getCategories(){try{const{data:e,error:t}=await Hi.from("event_categories").select("*").order("name");if(t)throw t;return e}catch(e){throw e}},async getUserFavorites(e){try{const{data:t,error:r}=await Hi.from("favorites").select("\n          *,\n          events(\n            *,\n            event_categories(\n              id,\n              name,\n              icon,\n              color\n            )\n          )\n        ").eq("user_id",e);if(r)throw r;return t}catch(t){throw t}}},Md=e=>{let t;const r=new Set,n=(e,n)=>{const s="function"==typeof e?e(t):e;if(!Object.is(s,t)){const e=t;t=(null!=n?n:"object"!=typeof s||null===s)?s:Object.assign({},t,s),r.forEach(r=>r(t,e))}},s=()=>t,a={setState:n,getState:s,getInitialState:()=>i,subscribe:e=>(r.add(e),()=>r.delete(e)),destroy:()=>{r.clear()}},i=t=e(n,s,a);return a};var Ud,Fd,qd,Bd,Hd={exports:{}},Vd={},Wd={exports:{}},Qd={};function Gd(){return Fd||(Fd=1,Wd.exports=function(){if(Ud)return Qd;Ud=1;var e=we(),t="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},r=e.useState,n=e.useEffect,s=e.useLayoutEffect,a=e.useDebugValue;function i(e){var r=e.getSnapshot;e=e.value;try{var n=r();return!t(e,n)}catch(s){return!0}}var o="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var o=t(),l=r({inst:{value:o,getSnapshot:t}}),c=l[0].inst,u=l[1];return s(function(){c.value=o,c.getSnapshot=t,i(c)&&u({inst:c})},[e,o,t]),n(function(){return i(c)&&u({inst:c}),e(function(){i(c)&&u({inst:c})})},[e]),a(o),o};return Qd.useSyncExternalStore=void 0!==e.useSyncExternalStore?e.useSyncExternalStore:o,Qd}()),Wd.exports}const Kd=ke((Bd||(Bd=1,Hd.exports=function(){if(qd)return Vd;qd=1;var e=we(),t=Gd(),r="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},n=t.useSyncExternalStore,s=e.useRef,a=e.useEffect,i=e.useMemo,o=e.useDebugValue;return Vd.useSyncExternalStoreWithSelector=function(e,t,l,c,u){var d=s(null);if(null===d.current){var h={hasValue:!1,value:null};d.current=h}else h=d.current;d=i(function(){function e(e){if(!a){if(a=!0,n=e,e=c(e),void 0!==u&&h.hasValue){var t=h.value;if(u(t,e))return s=t}return s=e}if(t=s,r(n,e))return t;var i=c(e);return void 0!==u&&u(t,i)?(n=e,t):(n=e,s=i)}var n,s,a=!1,i=void 0===l?null:l;return[function(){return e(t())},null===i?void 0:function(){return e(i())}]},[t,l,c,u]);var p=n(e,d[0],d[1]);return a(function(){h.hasValue=!0,h.value=p},[p]),o(p),p},Vd}()),Hd.exports)),Jd={},{useDebugValue:Yd}=Ee,{useSyncExternalStoreWithSelector:Xd}=Kd;let Zd=!1;const eh=e=>e;const th=e=>{const t="function"==typeof e?(e=>e?Md(e):Md)(e):e,r=(e,r)=>function(e,t=eh,r){"production"!==(Jd?"production":void 0)&&r&&!Zd&&(Zd=!0);const n=Xd(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,r);return Yd(n),n}(t,e,r);return Object.assign(r,t),r},rh=(nh=(e,t)=>({events:[],selectedEvent:null,filters:{category:"",location:"",date_from:"",date_to:"",price_max:null,search:""},setEvents:t=>e({events:t}),setSelectedEvent:t=>e({selectedEvent:t}),addEvent:t=>e(e=>({events:[t,...e.events]})),updateEvent:(t,r)=>e(e=>({events:e.events.map(e=>e.id===t?{...e,...r}:e),selectedEvent:e.selectedEvent?.id===t?{...e.selectedEvent,...r}:e.selectedEvent})),removeEvent:t=>e(e=>({events:e.events.filter(e=>e.id!==t),selectedEvent:e.selectedEvent?.id===t?null:e.selectedEvent})),setFilters:t=>e(e=>({filters:{...e.filters,...t}})),clearFilters:()=>e({filters:{category:"",location:"",date_from:"",date_to:"",price_max:null,search:""}})}))?th(nh):th;var nh;const sh=()=>{const{data:t=[],isLoading:r}=((e={})=>rr({queryKey:["events",e],queryFn:()=>zd.getEvents(e),onSuccess:e=>{rh.getState().setEvents(e)}}))(),{user:n}=Qi();return t.slice(0,3),e.jsxs(e.Fragment,{children:[e.jsxs(Pd,{children:[e.jsx("title",{children:"EventRadar - Descubre Eventos Increbles"}),e.jsx("meta",{name:"description",content:"Descubre los mejores eventos en tu ciudad. nete a experiencias nicas y conecta con tu comunidad en EventRadar."})]}),e.jsxs("div",{className:"relative min-h-screen bg-gradient-to-br from-purple-600 via-pink-500 to-blue-600",children:[e.jsx("header",{className:"bg-white/10 backdrop-blur-sm border-b border-white/20",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex justify-between items-center py-6",children:[e.jsx("div",{className:"flex items-center",children:e.jsx("h1",{className:"text-3xl font-bold text-white",children:" EventRadar"})}),e.jsx("div",{className:"flex items-center space-x-4",children:n?e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsxs("span",{className:"text-white",children:["Hola, ",n.email,"!"]}),e.jsx(Te,{to:"/dashboard",className:"bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded-lg transition-colors",children:"Dashboard"})]}):e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx(Te,{to:"/login",className:"text-white hover:text-white/80 transition-colors",children:"Iniciar Sesin"}),e.jsx(Te,{to:"/register",className:"bg-white/20 hover:bg-white/30 text-white px-4 py-2 rounded-lg transition-colors",children:"Registrarse"})]})})]})})}),e.jsx("section",{className:"relative flex items-center justify-center px-4",style:{minHeight:"calc(100vh - 120px)"},children:e.jsxs("div",{className:"text-center w-full",children:[e.jsx("h2",{className:"text-5xl font-extrabold text-white mb-6",children:"Descubre Eventos Increbles"}),e.jsx("p",{className:"text-xl text-white/90 mb-12 max-w-3xl mx-auto",children:"Encuentra los mejores eventos cerca de ti en Chile."}),n?e.jsx(Te,{to:"/dashboard",className:"inline-flex items-center px-8 py-4 bg-white text-purple-600 font-bold text-lg rounded-xl hover:bg-white/90 transform hover:scale-105 transition-all duration-200",children:" Ver Mapa de Eventos"}):e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(Te,{to:"/register",className:"inline-flex items-center px-8 py-4 bg-white text-purple-600 font-bold text-lg rounded-xl hover:bg-white/90 transform hover:scale-105 transition-all duration-200",children:" Comenzar Gratis"}),e.jsx(Te,{to:"/login",className:"inline-flex items-center px-8 py-4 bg-transparent border-2 border-white text-white font-bold text-lg rounded-xl hover:bg-white/10 transition-all duration-200",children:" Iniciar Sesin"})]})]})}),e.jsx("footer",{className:"w-full flex justify-center items-center py-6 mt-8",children:e.jsx("span",{className:"text-white/80 text-sm text-center select-none",children:" 2025 EventRadar. Proyecto acadmico - Ingeniera en Informtica."})})]})]})},ah=({children:t})=>{const{user:r,loading:n}=Qi();return n?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-purple-600 to-pink-600",children:e.jsxs("div",{className:"text-center text-white",children:[e.jsx("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-white mx-auto mb-4"}),e.jsx("h2",{className:"text-2xl font-bold",children:" EventRadar"}),e.jsx("p",{children:"Cargando..."})]})}):r?t:e.jsx($e,{to:"/login",replace:!0})},ih=()=>e.jsx(Cl,{children:e.jsx(Ae,{children:e.jsx(Gi,{children:e.jsxs(Re,{children:[e.jsxs(Ie,{element:e.jsx($l,{}),children:[e.jsx(Ie,{path:"/",element:e.jsx(sh,{})}),e.jsx(Ie,{path:"/favorites",element:e.jsx(Ld,{})})]}),e.jsx(Ie,{path:"/login",element:e.jsx(Ll,{})}),e.jsx(Ie,{path:"/register",element:e.jsx(zl,{})}),e.jsxs(Ie,{element:e.jsx($l,{}),children:[e.jsx(Ie,{path:"/dashboard",element:e.jsx(ah,{children:e.jsx(xu,{})})}),e.jsx(Ie,{path:"/profile",element:e.jsx(ah,{children:e.jsx(Dd,{})})})]}),e.jsx(Ie,{path:"*",element:e.jsx($e,{to:"/",replace:!0})})]})})})});function oh(){return e.jsx(ih,{})}const lh=new class{#H;#M;#h;#V;#W;#Q;#G;#K;constructor(e={}){this.#H=e.queryCache||new Kt,this.#M=e.mutationCache||new Qt,this.#h=e.defaultOptions||{},this.#V=new Map,this.#W=new Map,this.#Q=0}mount(){this.#Q++,1===this.#Q&&(this.#G=_t.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#H.onFocus())}),this.#K=Ct.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#H.onOnline())}))}unmount(){this.#Q--,0===this.#Q&&(this.#G?.(),this.#G=void 0,this.#K?.(),this.#K=void 0)}isFetching(e){return this.#H.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#M.findAll({...e,status:"pending"}).length}getQueryData(e){const t=this.defaultQueryOptions({queryKey:e});return this.#H.get(t.queryHash)?.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),r=this.#H.build(this,t),n=r.state.data;return void 0===n?this.fetchQuery(e):(e.revalidateIfStale&&r.isStaleByTime(it(t.staleTime,r))&&this.prefetchQuery(t),Promise.resolve(n))}getQueriesData(e){return this.#H.findAll(e).map(({queryKey:e,state:t})=>[e,t.data])}setQueryData(e,t,r){const n=this.defaultQueryOptions({queryKey:e}),s=this.#H.get(n.queryHash),a=s?.state.data,i=function(e,t){return"function"==typeof e?e(t):e}(t,a);if(void 0!==i)return this.#H.build(this,n).setData(i,{...r,manual:!0})}setQueriesData(e,t,r){return Et.batch(()=>this.#H.findAll(e).map(({queryKey:e})=>[e,this.setQueryData(e,t,r)]))}getQueryState(e){const t=this.defaultQueryOptions({queryKey:e});return this.#H.get(t.queryHash)?.state}removeQueries(e){const t=this.#H;Et.batch(()=>{t.findAll(e).forEach(e=>{t.remove(e)})})}resetQueries(e,t){const r=this.#H;return Et.batch(()=>(r.findAll(e).forEach(e=>{e.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const r={revert:!0,...t},n=Et.batch(()=>this.#H.findAll(e).map(e=>e.cancel(r)));return Promise.all(n).then(nt).catch(nt)}invalidateQueries(e,t={}){return Et.batch(()=>(this.#H.findAll(e).forEach(e=>{e.invalidate()}),"none"===e?.refetchType?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},t)))}refetchQueries(e,t={}){const r={...t,cancelRefetch:t.cancelRefetch??!0},n=Et.batch(()=>this.#H.findAll(e).filter(e=>!e.isDisabled()&&!e.isStatic()).map(e=>{let t=e.fetch(void 0,r);return r.throwOnError||(t=t.catch(nt)),"paused"===e.state.fetchStatus?Promise.resolve():t}));return Promise.all(n).then(nt)}fetchQuery(e){const t=this.defaultQueryOptions(e);void 0===t.retry&&(t.retry=!1);const r=this.#H.build(this,t);return r.isStaleByTime(it(t.staleTime,r))?r.fetch(t):Promise.resolve(r.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(nt).catch(nt)}fetchInfiniteQuery(e){return e.behavior=Bt(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(nt).catch(nt)}ensureInfiniteQueryData(e){return e.behavior=Bt(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Ct.isOnline()?this.#M.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#H}getMutationCache(){return this.#M}getDefaultOptions(){return this.#h}setDefaultOptions(e){this.#h=e}setQueryDefaults(e,t){this.#V.set(dt(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...this.#V.values()],r={};return t.forEach(t=>{ht(e,t.queryKey)&&Object.assign(r,t.defaultOptions)}),r}setMutationDefaults(e,t){this.#W.set(dt(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...this.#W.values()],r={};return t.forEach(t=>{ht(e,t.mutationKey)&&Object.assign(r,t.defaultOptions)}),r}defaultQueryOptions(e){if(e._defaulted)return e;const t={...this.#h.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=ut(t.queryKey,t)),void 0===t.refetchOnReconnect&&(t.refetchOnReconnect="always"!==t.networkMode),void 0===t.throwOnError&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===jt&&(t.enabled=!1),t}defaultMutationOptions(e){return e?._defaulted?e:{...this.#h.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#H.clear(),this.#M.clear()}}({defaultOptions:{queries:{staleTime:3e5,cacheTime:18e5,retry:3,refetchOnWindowFocus:!1}}});Xe.createRoot(document.getElementById("root")).render(e.jsx(Ee.StrictMode,{children:e.jsx(Yt,{client:lh,children:e.jsx(oh,{})})}));
